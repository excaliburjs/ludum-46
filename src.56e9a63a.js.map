{"version":3,"sources":["lib/excalibur/node_modules/core-js/internals/to-integer.js","lib/excalibur/node_modules/core-js/internals/require-object-coercible.js","lib/excalibur/node_modules/core-js/internals/string-multibyte.js","lib/excalibur/node_modules/core-js/internals/global.js","lib/excalibur/node_modules/core-js/internals/fails.js","lib/excalibur/node_modules/core-js/internals/descriptors.js","lib/excalibur/node_modules/core-js/internals/is-object.js","lib/excalibur/node_modules/core-js/internals/document-create-element.js","lib/excalibur/node_modules/core-js/internals/ie8-dom-define.js","lib/excalibur/node_modules/core-js/internals/an-object.js","lib/excalibur/node_modules/core-js/internals/to-primitive.js","lib/excalibur/node_modules/core-js/internals/object-define-property.js","lib/excalibur/node_modules/core-js/internals/create-property-descriptor.js","lib/excalibur/node_modules/core-js/internals/create-non-enumerable-property.js","lib/excalibur/node_modules/core-js/internals/set-global.js","lib/excalibur/node_modules/core-js/internals/shared-store.js","lib/excalibur/node_modules/core-js/internals/inspect-source.js","lib/excalibur/node_modules/core-js/internals/native-weak-map.js","lib/excalibur/node_modules/core-js/internals/has.js","lib/excalibur/node_modules/core-js/internals/is-pure.js","lib/excalibur/node_modules/core-js/internals/shared.js","lib/excalibur/node_modules/core-js/internals/uid.js","lib/excalibur/node_modules/core-js/internals/shared-key.js","lib/excalibur/node_modules/core-js/internals/hidden-keys.js","lib/excalibur/node_modules/core-js/internals/internal-state.js","lib/excalibur/node_modules/core-js/internals/object-property-is-enumerable.js","lib/excalibur/node_modules/core-js/internals/classof-raw.js","lib/excalibur/node_modules/core-js/internals/indexed-object.js","lib/excalibur/node_modules/core-js/internals/to-indexed-object.js","lib/excalibur/node_modules/core-js/internals/object-get-own-property-descriptor.js","lib/excalibur/node_modules/core-js/internals/redefine.js","lib/excalibur/node_modules/core-js/internals/path.js","lib/excalibur/node_modules/core-js/internals/get-built-in.js","lib/excalibur/node_modules/core-js/internals/to-length.js","lib/excalibur/node_modules/core-js/internals/to-absolute-index.js","lib/excalibur/node_modules/core-js/internals/array-includes.js","lib/excalibur/node_modules/core-js/internals/object-keys-internal.js","lib/excalibur/node_modules/core-js/internals/enum-bug-keys.js","lib/excalibur/node_modules/core-js/internals/object-get-own-property-names.js","lib/excalibur/node_modules/core-js/internals/object-get-own-property-symbols.js","lib/excalibur/node_modules/core-js/internals/own-keys.js","lib/excalibur/node_modules/core-js/internals/copy-constructor-properties.js","lib/excalibur/node_modules/core-js/internals/is-forced.js","lib/excalibur/node_modules/core-js/internals/export.js","lib/excalibur/node_modules/core-js/internals/to-object.js","lib/excalibur/node_modules/core-js/internals/correct-prototype-getter.js","lib/excalibur/node_modules/core-js/internals/object-get-prototype-of.js","lib/excalibur/node_modules/core-js/internals/native-symbol.js","lib/excalibur/node_modules/core-js/internals/use-symbol-as-uid.js","lib/excalibur/node_modules/core-js/internals/well-known-symbol.js","lib/excalibur/node_modules/core-js/internals/iterators-core.js","lib/excalibur/node_modules/core-js/internals/object-keys.js","lib/excalibur/node_modules/core-js/internals/object-define-properties.js","lib/excalibur/node_modules/core-js/internals/html.js","lib/excalibur/node_modules/core-js/internals/object-create.js","lib/excalibur/node_modules/core-js/internals/set-to-string-tag.js","lib/excalibur/node_modules/core-js/internals/iterators.js","lib/excalibur/node_modules/core-js/internals/create-iterator-constructor.js","lib/excalibur/node_modules/core-js/internals/a-possible-prototype.js","lib/excalibur/node_modules/core-js/internals/object-set-prototype-of.js","lib/excalibur/node_modules/core-js/internals/define-iterator.js","lib/excalibur/node_modules/core-js/modules/es.string.iterator.js","lib/excalibur/node_modules/core-js/internals/a-function.js","lib/excalibur/node_modules/core-js/internals/function-bind-context.js","lib/excalibur/node_modules/core-js/internals/call-with-safe-iteration-closing.js","lib/excalibur/node_modules/core-js/internals/is-array-iterator-method.js","lib/excalibur/node_modules/core-js/internals/create-property.js","lib/excalibur/node_modules/core-js/internals/to-string-tag-support.js","lib/excalibur/node_modules/core-js/internals/classof.js","lib/excalibur/node_modules/core-js/internals/get-iterator-method.js","lib/excalibur/node_modules/core-js/internals/array-from.js","lib/excalibur/node_modules/core-js/internals/check-correctness-of-iteration.js","lib/excalibur/node_modules/core-js/modules/es.array.from.js","lib/excalibur/node_modules/core-js/internals/is-array.js","lib/excalibur/node_modules/core-js/modules/es.array.is-array.js","lib/excalibur/node_modules/core-js/modules/es.array.of.js","lib/excalibur/node_modules/core-js/internals/array-species-create.js","lib/excalibur/node_modules/core-js/internals/engine-user-agent.js","lib/excalibur/node_modules/core-js/internals/engine-v8-version.js","lib/excalibur/node_modules/core-js/internals/array-method-has-species-support.js","lib/excalibur/node_modules/core-js/modules/es.array.concat.js","lib/excalibur/node_modules/core-js/internals/array-copy-within.js","lib/excalibur/node_modules/core-js/internals/add-to-unscopables.js","lib/excalibur/node_modules/core-js/modules/es.array.copy-within.js","lib/excalibur/node_modules/core-js/internals/array-iteration.js","lib/excalibur/node_modules/core-js/internals/array-method-is-strict.js","lib/excalibur/node_modules/core-js/internals/array-method-uses-to-length.js","lib/excalibur/node_modules/core-js/modules/es.array.every.js","lib/excalibur/node_modules/core-js/internals/array-fill.js","lib/excalibur/node_modules/core-js/modules/es.array.fill.js","lib/excalibur/node_modules/core-js/modules/es.array.filter.js","lib/excalibur/node_modules/core-js/modules/es.array.find.js","lib/excalibur/node_modules/core-js/modules/es.array.find-index.js","lib/excalibur/node_modules/core-js/internals/flatten-into-array.js","lib/excalibur/node_modules/core-js/modules/es.array.flat.js","lib/excalibur/node_modules/core-js/modules/es.array.flat-map.js","lib/excalibur/node_modules/core-js/internals/array-for-each.js","lib/excalibur/node_modules/core-js/modules/es.array.for-each.js","lib/excalibur/node_modules/core-js/modules/es.array.includes.js","lib/excalibur/node_modules/core-js/modules/es.array.index-of.js","lib/excalibur/node_modules/core-js/modules/es.array.iterator.js","lib/excalibur/node_modules/core-js/modules/es.array.join.js","lib/excalibur/node_modules/core-js/internals/array-last-index-of.js","lib/excalibur/node_modules/core-js/modules/es.array.last-index-of.js","lib/excalibur/node_modules/core-js/modules/es.array.map.js","lib/excalibur/node_modules/core-js/internals/array-reduce.js","lib/excalibur/node_modules/core-js/modules/es.array.reduce.js","lib/excalibur/node_modules/core-js/modules/es.array.reduce-right.js","lib/excalibur/node_modules/core-js/modules/es.array.reverse.js","lib/excalibur/node_modules/core-js/modules/es.array.slice.js","lib/excalibur/node_modules/core-js/modules/es.array.some.js","lib/excalibur/node_modules/core-js/modules/es.array.sort.js","lib/excalibur/node_modules/core-js/internals/set-species.js","lib/excalibur/node_modules/core-js/modules/es.array.species.js","lib/excalibur/node_modules/core-js/modules/es.array.splice.js","lib/excalibur/node_modules/core-js/modules/es.array.unscopables.flat.js","lib/excalibur/node_modules/core-js/modules/es.array.unscopables.flat-map.js","lib/excalibur/node_modules/core-js/es/array/index.js","lib/excalibur/node_modules/core-js/internals/function-bind.js","lib/excalibur/node_modules/core-js/modules/es.function.bind.js","lib/excalibur/node_modules/core-js/modules/es.function.name.js","lib/excalibur/node_modules/core-js/modules/es.function.has-instance.js","lib/excalibur/node_modules/core-js/es/function/index.js","../../src/engine/Polyfill.ts","../../../src/engine/Math/Random.ts","../../../src/engine/Collision/Side.ts","../../../src/engine/Util/Util.ts","../../../src/engine/Util/Log.ts","../../../src/engine/Util/Decorators.ts","../../src/engine/Algebra.ts","../../src/engine/Events.ts","../../src/engine/EventDispatcher.ts","../../src/engine/Class.ts","../../../src/engine/Resources/Resource.ts","../../../src/engine/Drawing/Color.ts","../../../src/engine/Drawing/SpriteEffects.ts","../../src/engine/Configurable.ts","../../../src/engine/Drawing/Sprite.ts","../../../src/engine/Resources/Texture.ts","../../../src/engine/Actions/RotationType.ts","../../../src/engine/Actions/Action.ts","../../../src/engine/Util/EasingFunctions.ts","../../../src/engine/Actions/ActionContext.ts","../../../src/engine/Collision/CollisionType.ts","../../src/engine/Physics.ts","../../../src/engine/Collision/BoundingBox.ts","../../../src/engine/Collision/CollisionContact.ts","../../../src/engine/Collision/CollisionJumpTable.ts","../../../src/engine/Collision/ClosestLineJumpTable.ts","../../../src/engine/Collision/Circle.ts","../../../src/engine/Collision/Edge.ts","../../../src/engine/Collision/ConvexPolygon.ts","../../../src/engine/Collision/Shape.ts","../../../src/engine/Collision/Body.ts","../../../src/engine/Traits/CapturePointer.ts","../../../src/engine/Util/CullingBox.ts","../../../src/engine/Traits/OffscreenCulling.ts","../../../src/engine/Util/DrawUtil.ts","../../../src/engine/Collision/CollisionGroup.ts","../../../src/engine/Collision/Pair.ts","../../../src/engine/Collision/Collider.ts","../../../src/engine/Collision/CollisionGroupManager.ts","../../../src/engine/Collision/DynamicTree.ts","../../../src/engine/Collision/DynamicTreeCollisionBroadphase.ts","../../../src/engine/Collision/Index.ts","../../../src/engine/Traits/TileMapCollisionDetection.ts","../../../src/engine/Traits/Index.ts","../../../src/engine/Graphics/Graphic.ts","../../../src/engine/Graphics/Animation.ts","../../../src/engine/Util/Delay.ts","../../../src/engine/Graphics/GraphicsGroup.ts","../../../src/engine/Graphics/GraphicsComponent.ts","../../src/engine/Entity.ts","../../src/engine/Transform.ts","../../src/engine/Actor.ts","../../src/engine/ScreenElement.ts","../../src/engine/Timer.ts","../../../src/engine/Graphics/Sprite.ts","../../../src/engine/Graphics/SpriteSheet.ts","../../../src/engine/Graphics/RawImage.ts","../../../../src/engine/Graphics/Context/webgl-util.ts","../../../src/engine/Graphics/Raster.ts","../../../src/engine/Graphics/Circle.ts","../../../src/engine/Graphics/Rect.ts","../../../src/engine/Graphics/Polygon.ts","../../../src/engine/Graphics/Font.ts","../../../src/engine/Graphics/Text.ts","../../../../src/engine/Graphics/Context/state-stack.ts","../../../../src/engine/Graphics/Context/ExcaliburGraphicsContext2DCanvas.ts","../../../src/engine/Math/matrix.ts","lib/excalibur/build/dist/Graphics/Context/shaders/vertex.glsl","lib/excalibur/build/dist/Graphics/Context/shaders/fragment.glsl","../../../../src/engine/Graphics/Context/shader.ts","../../../../src/engine/Graphics/Context/matrix-stack.ts","../../../../src/engine/Graphics/Context/batch.ts","../../../../src/engine/Graphics/Context/command.ts","../../../../src/engine/Graphics/Context/texture-manager.ts","../../../../src/engine/Graphics/Context/pool.ts","../../../../src/engine/Graphics/Context/ExcaliburGraphicsContextWebGL.ts","../../../src/engine/Graphics/index.ts","../../src/engine/TileMap.ts","../../../../src/engine/Resources/Sound/AudioContext.ts","../../src/engine/Promises.ts","../../../src/engine/Util/WebAudio.ts","../../../src/engine/Graphics/Canvas.ts","../../src/engine/Loader.ts","../../../src/engine/Util/Detector.ts","../../../src/engine/Util/SortedList.ts","../../src/engine/Camera.ts","../../src/engine/Label.ts","../../src/engine/Trigger.ts","../../../src/engine/Util/Actors.ts","../../../src/engine/Graphics/GraphicsSystem.ts","../../src/engine/Particles.ts","../../src/engine/Scene.ts","../../src/engine/Debug.ts","../../../src/engine/Input/Gamepad.ts","../../../src/engine/Input/Pointer.ts","../../../src/engine/Input/PointerEvents.ts","../../../src/engine/Input/Pointers.ts","../../../src/engine/Input/Keyboard.ts","../../../src/engine/Input/Index.ts","../../../src/engine/Util/Browser.ts","../../src/engine/Engine.ts","../../../src/engine/Events/MediaEvents.ts","../../../src/engine/Actions/Index.ts","../../../src/engine/Drawing/Animation.ts","../../../src/engine/Drawing/Polygon.ts","../../../src/engine/Drawing/SpriteSheet.ts","../../../src/engine/Drawing/Index.ts","../../../src/engine/Interfaces/AudioImplementation.ts","../../../src/engine/Interfaces/Index.ts","../../../src/engine/Math/PerlinNoise.ts","../../../src/engine/Math/Index.ts","../../../src/engine/PostProcessing/ColorBlindCorrector.ts","../../../src/engine/PostProcessing/Index.ts","../../../../src/engine/Resources/Sound/AudioInstance.ts","../../../src/engine/Util/Sound.ts","../../../../src/engine/Resources/Sound/Sound.ts","../../../../src/engine/Resources/Sound/Index.ts","../../../src/engine/Resources/Gif.ts","../../../src/engine/Resources/Index.ts","../../../src/engine/Util/Index.ts","../../src/engine/index.ts","node_modules/pako/lib/utils/common.js","node_modules/pako/lib/zlib/trees.js","node_modules/pako/lib/zlib/adler32.js","node_modules/pako/lib/zlib/crc32.js","node_modules/pako/lib/zlib/messages.js","node_modules/pako/lib/zlib/deflate.js","node_modules/pako/lib/utils/strings.js","node_modules/pako/lib/zlib/zstream.js","node_modules/pako/lib/deflate.js","node_modules/pako/lib/zlib/inffast.js","node_modules/pako/lib/zlib/inftrees.js","node_modules/pako/lib/zlib/inflate.js","node_modules/pako/lib/zlib/constants.js","node_modules/pako/lib/zlib/gzheader.js","node_modules/pako/lib/inflate.js","node_modules/pako/index.js","lib/excalibur-tiled-v2/index.ts","src/resources.ts","src/config.ts","src/stats.ts","src/constants.ts","src/player.ts","src/items.ts","src/cuecard.ts","src/cuecardmanager.ts","src/cuecardtrigger.ts","node_modules/classnames/index.js","node_modules/store/src/util.js","node_modules/store/src/store-engine.js","node_modules/store/storages/localStorage.js","node_modules/store/storages/oldFF-globalStorage.js","node_modules/store/storages/oldIE-userDataStorage.js","node_modules/store/storages/cookieStorage.js","node_modules/store/storages/sessionStorage.js","node_modules/store/storages/memoryStorage.js","node_modules/store/storages/all.js","node_modules/store/plugins/lib/json2.js","node_modules/store/plugins/json2.js","node_modules/store/dist/store.legacy.js","src/preferences.ts","src/soundManager.ts","src/dialogCard.ts","src/director.ts","src/audienceMeter.ts","src/tomatoEmitter.ts","src/theater-scene.ts","src/inventory.ts","src/button.ts","src/gameover.ts","src/session.ts","src/index.ts"],"names":["module","exports"],"mappings":"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,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,IAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAzgBA,SAAS,EAAM,EAAc,EAAW,GAC/B,OAAA,EAAI,GAAQ,EAAI,GAGzB,SAAS,EAAM,GACN,OAAA,EAAI,EAAI,GAAK,GAAS,EAAJ,EAAQ,IAAM,IAqCzC,IAAA,EAAA,WAqSE,SAAA,EAAY,GApSJ,KAAA,MAAkB,CACxB,IACA,IACA,IACA,GACA,GACA,GACA,IACA,GACA,IACA,GACA,GACA,GACA,IACA,IACA,EACA,IACA,IACA,GACA,IACA,GACA,GACA,IACA,EACA,GACA,GACA,IACA,GACA,GACA,GACA,IACA,EACA,IACA,IACA,IACA,IACA,GACA,EACA,GACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,GACA,GACA,IACA,IACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,GACA,IACA,GACA,IACA,IACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,EACA,IACA,GACA,GACA,IACA,GACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,EACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,IACA,GACA,GACA,GACA,GACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,EACA,IACA,GACA,GACA,IACA,GACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,GACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,EACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,GACA,GACA,GACA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,GACA,IACA,KAEM,KAAA,GAAiB,IAAI,WAAW,KAGhC,KAAA,sBAAuC,CAC7C,QAAS,EACT,UAAW,EACX,UAAW,EACX,YAAa,IA4Bb,EAAU,EAAK,OAAO,GAAI,KAAK,sBAAuB,GAEjD,KAAA,YAAc,EAAQ,YACtB,KAAA,UAAY,EAAQ,UACpB,KAAA,UAAY,EAAQ,UACpB,KAAA,QAAU,EAAQ,QAEnB,EAAQ,KACL,KAAA,QAAU,IAAI,EAAJ,OAAW,EAAQ,MAE7B,KAAA,QAAU,IAAI,EAAJ,OAGZ,KAAA,MAAQ,KAAK,QAAQ,QAAQ,KAAK,OAElC,IAAA,IAAI,EAAI,EAAG,EAAI,IAAK,IAClB,KAAA,GAAG,GAA2B,IAAtB,KAAK,MAAM,EAAI,KAoKlC,OApJS,EAAA,UAAA,MAAP,WAMO,IALD,IAAA,EAAM,KAAK,UACX,EAAO,KAAK,UAEZ,EAAQ,EACR,EAAW,EACN,EAAI,EAAG,EAAI,KAAK,QAAS,IAAK,CAC7B,OAAA,UAAU,QACX,KAAA,EACH,GAAS,KAAK,SAAS,UAAU,GAAK,GA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","file":"src.56e9a63a.js","sourceRoot":"..","sourcesContent":["var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  Function('return this')();\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","module.exports = false;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.6.4',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) createNonEnumerableProperty(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // Chrome 38 Symbol has incorrect toString conversion\n  // eslint-disable-next-line no-undef\n  return !String(Symbol());\n});\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  // eslint-disable-next-line no-undef\n  && !Symbol.sham\n  // eslint-disable-next-line no-undef\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name)) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];\n    else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.github.io/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nif (IteratorPrototype == undefined) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif (!IS_PURE && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.github.io/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","module.exports = {};\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","var anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var anObject = require('../internals/an-object');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (error) {\n    var returnMethod = iterator['return'];\n    if (returnMethod !== undefined) anObject(returnMethod.call(iterator));\n    throw error;\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\n// `Array.from` method implementation\n// https://tc39.github.io/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var C = typeof this == 'function' ? this : Array;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    result = new C();\n    for (;!(step = next.call(iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = toLength(O.length);\n    result = new C(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.github.io/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.github.io/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\n\n// `Array.isArray` method\n// https://tc39.github.io/ecma262/#sec-array.isarray\n$({ target: 'Array', stat: true }, {\n  isArray: isArray\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar createProperty = require('../internals/create-property');\n\nvar ISNT_GENERIC = fails(function () {\n  function F() { /* empty */ }\n  return !(Array.of.call(F) instanceof F);\n});\n\n// `Array.of` method\n// https://tc39.github.io/ecma262/#sec-array.of\n// WebKit Array.of isn't generic\n$({ target: 'Array', stat: true, forced: ISNT_GENERIC }, {\n  of: function of(/* ...args */) {\n    var index = 0;\n    var argumentsLength = arguments.length;\n    var result = new (typeof this == 'function' ? this : Array)(argumentsLength);\n    while (argumentsLength > index) createProperty(result, index, arguments[index++]);\n    result.length = argumentsLength;\n    return result;\n  }\n});\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.github.io/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\nvar min = Math.min;\n\n// `Array.prototype.copyWithin` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.copywithin\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var $ = require('../internals/export');\nvar copyWithin = require('../internals/array-copy-within');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.copyWithin` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.copywithin\n$({ target: 'Array', proto: true }, {\n  copyWithin: copyWithin\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('copyWithin');\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6)\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\n\nvar defineProperty = Object.defineProperty;\nvar cache = {};\n\nvar thrower = function (it) { throw it; };\n\nmodule.exports = function (METHOD_NAME, options) {\n  if (has(cache, METHOD_NAME)) return cache[METHOD_NAME];\n  if (!options) options = {};\n  var method = [][METHOD_NAME];\n  var ACCESSORS = has(options, 'ACCESSORS') ? options.ACCESSORS : false;\n  var argument0 = has(options, 0) ? options[0] : thrower;\n  var argument1 = has(options, 1) ? options[1] : undefined;\n\n  return cache[METHOD_NAME] = !!method && !fails(function () {\n    if (ACCESSORS && !DESCRIPTORS) return true;\n    var O = { length: -1 };\n\n    if (ACCESSORS) defineProperty(O, 1, { enumerable: true, get: thrower });\n    else O[1] = 1;\n\n    method.call(O, argument0, argument1);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $every = require('../internals/array-iteration').every;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('every');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('every');\n\n// `Array.prototype.every` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.every\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n// Edge 14- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar aFunction = require('../internals/a-function');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://github.com/tc39/proposal-flatMap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A;\n    aFunction(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.github.io/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.github.io/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.github.io/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar min = Math.min;\nvar nativeLastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\n// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return nativeLastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = toLength(O.length);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : nativeLastIndexOf;\n","var $ = require('../internals/export');\nvar lastIndexOf = require('../internals/array-last-index-of');\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.lastindexof\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduce` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduceRight = require('../internals/array-reduce').right;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduceRight');\n// For preventing possible almost infinite loop in non-standard implementations, test the forward version of the method\nvar USES_TO_LENGTH = arrayMethodUsesToLength('reduce', { 1: 0 });\n\n// `Array.prototype.reduceRight` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reduceright\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  reduceRight: function reduceRight(callbackfn /* , initialValue */) {\n    return $reduceRight(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\n\nvar nativeReverse = [].reverse;\nvar test = [1, 2];\n\n// `Array.prototype.reverse` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.reverse\n// fix for Safari 12.0 bug\n// https://bugs.webkit.org/show_bug.cgi?id=188794\n$({ target: 'Array', proto: true, forced: String(test) === String(test.reverse()) }, {\n  reverse: function reverse() {\n    // eslint-disable-next-line no-self-assign\n    if (isArray(this)) this.length = this.length;\n    return nativeReverse.call(this);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('some');\n\n// `Array.prototype.some` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","var setSpecies = require('../internals/set-species');\n\n// `Array[@@species]` getter\n// https://tc39.github.io/ecma262/#sec-get-array-@@species\nsetSpecies('Array');\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('splice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flat');\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\naddToUnscopables('flatMap');\n","require('../../modules/es.string.iterator');\nrequire('../../modules/es.array.from');\nrequire('../../modules/es.array.is-array');\nrequire('../../modules/es.array.of');\nrequire('../../modules/es.array.concat');\nrequire('../../modules/es.array.copy-within');\nrequire('../../modules/es.array.every');\nrequire('../../modules/es.array.fill');\nrequire('../../modules/es.array.filter');\nrequire('../../modules/es.array.find');\nrequire('../../modules/es.array.find-index');\nrequire('../../modules/es.array.flat');\nrequire('../../modules/es.array.flat-map');\nrequire('../../modules/es.array.for-each');\nrequire('../../modules/es.array.includes');\nrequire('../../modules/es.array.index-of');\nrequire('../../modules/es.array.iterator');\nrequire('../../modules/es.array.join');\nrequire('../../modules/es.array.last-index-of');\nrequire('../../modules/es.array.map');\nrequire('../../modules/es.array.reduce');\nrequire('../../modules/es.array.reduce-right');\nrequire('../../modules/es.array.reverse');\nrequire('../../modules/es.array.slice');\nrequire('../../modules/es.array.some');\nrequire('../../modules/es.array.sort');\nrequire('../../modules/es.array.species');\nrequire('../../modules/es.array.splice');\nrequire('../../modules/es.array.unscopables.flat');\nrequire('../../modules/es.array.unscopables.flat-map');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Array;\n","'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\n\nvar slice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.github.io/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = slice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(slice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n","var $ = require('../internals/export');\nvar bind = require('../internals/function-bind');\n\n// `Function.prototype.bind` method\n// https://tc39.github.io/ecma262/#sec-function.prototype.bind\n$({ target: 'Function', proto: true }, {\n  bind: bind\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","'use strict';\nvar isObject = require('../internals/is-object');\nvar definePropertyModule = require('../internals/object-define-property');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar HAS_INSTANCE = wellKnownSymbol('hasInstance');\nvar FunctionPrototype = Function.prototype;\n\n// `Function.prototype[@@hasInstance]` method\n// https://tc39.github.io/ecma262/#sec-function.prototype-@@hasinstance\nif (!(HAS_INSTANCE in FunctionPrototype)) {\n  definePropertyModule.f(FunctionPrototype, HAS_INSTANCE, { value: function (O) {\n    if (typeof this != 'function' || !isObject(O)) return false;\n    if (!isObject(this.prototype)) return O instanceof this;\n    // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:\n    while (O = getPrototypeOf(O)) if (this.prototype === O) return true;\n    return false;\n  } });\n}\n","require('../../modules/es.function.bind');\nrequire('../../modules/es.function.name');\nrequire('../../modules/es.function.has-instance');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Function;\n","import 'core-js/es/array';\nimport 'core-js/es/function';\n\nexport function polyfill() {\n  /* istanbul ignore next */\n  if (typeof window === 'undefined') {\n    window = <any>{\n      audioContext: function() {\n        return;\n      }\n    };\n  }\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !window.requestAnimationFrame) {\n    (<any>window).requestAnimationFrame =\n      (<any>window).webkitRequestAnimationFrame ||\n      (<any>window).mozRequestAnimationFrame ||\n      function(callback: Function) {\n        window.setInterval(callback, 1000 / 60);\n      };\n  }\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !window.cancelAnimationFrame) {\n    (<any>window).cancelAnimationFrame =\n      (<any>window).webkitCancelAnimationFrame ||\n      (<any>window).mozCancelAnimationFrame ||\n      function() {\n        return;\n      };\n  }\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !(<any>window).AudioContext) {\n    (<any>window).AudioContext =\n      (<any>window).AudioContext ||\n      (<any>window).webkitAudioContext ||\n      (<any>window).mozAudioContext ||\n      (<any>window).msAudioContext ||\n      (<any>window).oAudioContext;\n  }\n\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !(<any>window).devicePixelRatio) {\n    (<any>window).devicePixelRatio = window.devicePixelRatio || 1;\n  }\n}\n","/**\n * Pseudo-Random Utility\n *\n * A pseudo-random utility to add seeded random support for help in\n * generating things like terrain or reproducible randomness. Uses the\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\n *\n * [[include:Random.md]]\n */\n\n/**\n * 32-bit mask\n */\nconst BITMASK32: number = 0xffffffff;\n\n/**\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence\n * of numbers each time it is called.\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\n *\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\n */\nexport class Random {\n  // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\n  private _lowerMask: number = 0x7fffffff; // 31 bits same as _r\n  private _upperMask: number = 0x80000000; // 34 high bits\n\n  // Word size, 64 bits\n  private _w: number = 32;\n\n  // Degree of recurrence\n  private _n: number = 624;\n\n  // Middle word, an offset used in the recurrence defining the series x, 1<=m<n\n  private _m: number = 397;\n  // coefficients of teh rational normal form twist matrix\n  private _a: number = 0x9908b0df;\n\n  // tempering bit shifts and masks\n  private _u: number = 11;\n  private _s: number = 7;\n  private _b: number = 0x9d2c5680;\n  private _t: number = 15;\n  private _c: number = 0xefc60000;\n  private _l: number = 18;\n  private _f: number = 1812433253;\n\n  private _mt: number[];\n\n  private _index: number;\n\n  /**\n   * If no seed is specified, the Date.now() is used\n   */\n  constructor(public seed?: number) {\n    this._mt = new Array<number>(this._n);\n    // need to mask to support higher bit machines\n    this._mt[0] = (seed || Date.now()) >>> 0;\n\n    for (let i = 1; i < this._n; i++) {\n      const s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\n      // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits\n      this._mt[i] = (((this._f * ((s & 0xffff0000) >>> 16)) << 16) + this._f * (s & 0xffff) + i) >>> 0;\n    }\n    this._index = this._n;\n  }\n\n  /**\n   * Apply the twist\n   */\n  private _twist(): void {\n    const mag01 = [0x0, this._a];\n    let y = 0,\n      i = 0;\n    for (; i < this._n - this._m; i++) {\n      y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n      this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n    }\n    for (; i < this._n - 1; i++) {\n      y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n      this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n    }\n    y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\n    this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n\n    this._index = 0;\n  }\n\n  /**\n   * Return next 32 bit integer number in sequence\n   */\n  public nextInt(): number {\n    if (this._index >= this._n) {\n      this._twist();\n    }\n\n    let y = this._mt[this._index++];\n\n    y ^= y >>> this._u;\n    y ^= (y << this._s) & this._b;\n    y ^= (y << this._t) & this._c;\n    y ^= y >>> this._l;\n\n    return y >>> 0;\n  }\n\n  /**\n   * Return a random floating point number between [0, 1)\n   */\n  public next(): number {\n    return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\n  }\n\n  /**\n   * Return a random floating point in range [min, max) min is included, max is not included\n   */\n  public floating(min: number, max: number): number {\n    return (max - min) * this.next() + min;\n  }\n\n  /**\n   * Return a random integer in range [min, max] min is included, max is included.\n   * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\n   */\n  public integer(min: number, max: number): number {\n    return Math.floor((max - min + 1) * this.next() + min);\n  }\n\n  /**\n   * Returns true or false randomly with 50/50 odds by default.\n   * By default the likelihood of returning a true is .5 (50%).\n   * @param likelihood takes values between [0, 1]\n   */\n  public bool(likelihood: number = 0.5): boolean {\n    return this.next() <= likelihood;\n  }\n\n  /**\n   * Returns one element from an array at random\n   */\n  public pickOne<T>(array: Array<T>): T {\n    return array[this.integer(0, array.length - 1)];\n  }\n\n  /**\n   * Returns a new array random picking elements from the original\n   * @param array Original array to pick from\n   * @param numPicks can be any positive number\n   * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates\n   * just that it is possible)\n   */\n  public pickSet<T>(array: Array<T>, numPicks: number, allowDuplicates: boolean = false): Array<T> {\n    if (allowDuplicates) {\n      return this._pickSetWithDuplicates(array, numPicks);\n    } else {\n      return this._pickSetWithoutDuplicates(array, numPicks);\n    }\n  }\n\n  /**\n   * Returns a new array randomly picking elements in the original (not reused)\n   * @param numPicks must be less than or equal to the number of elements in the array.\n   */\n  private _pickSetWithoutDuplicates<T>(array: Array<T>, numPicks: number): Array<T> {\n    if (numPicks > array.length || numPicks < 0) {\n      throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\n    }\n    if (numPicks === array.length) {\n      return array;\n    }\n\n    const result: Array<T> = new Array<T>(numPicks);\n    let currentPick = 0;\n    const tempArray = array.slice(0);\n    while (currentPick < numPicks) {\n      const index = this.integer(0, tempArray.length - 1);\n      result[currentPick++] = tempArray[index];\n      tempArray.splice(index, 1);\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns a new array random picking elements from the original allowing duplicates\n   * @param numPicks can be any positive number\n   */\n  private _pickSetWithDuplicates<T>(array: Array<T>, numPicks: number): Array<T> {\n    // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\n    if (numPicks < 0) {\n      throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\n    }\n    const result = new Array<T>(numPicks);\n    for (let i = 0; i < numPicks; i++) {\n      result[i] = this.pickOne(array);\n    }\n    return result;\n  }\n\n  /**\n   * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\n   * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\n   */\n  public shuffle<T>(array: Array<T>): Array<T> {\n    const tempArray = array.slice(0);\n    let swap: T = null;\n    for (let i = 0; i < tempArray.length - 2; i++) {\n      const randomIndex = this.integer(i, tempArray.length - 1);\n      swap = tempArray[i];\n      tempArray[i] = tempArray[randomIndex];\n      tempArray[randomIndex] = swap;\n    }\n\n    return tempArray;\n  }\n\n  /**\n   * Generate a list of random integer numbers\n   * @param length the length of the final array\n   * @param min the minimum integer number to generate inclusive\n   * @param max the maximum integer number to generate inclusive\n   */\n  public range(length: number, min: number, max: number): Array<number> {\n    const result: Array<number> = new Array(length);\n    for (let i = 0; i < length; i++) {\n      result[i] = this.integer(min, max);\n    }\n    return result;\n  }\n\n  /**\n   * Returns the result of a d4 dice roll\n   */\n  public d4() {\n    return this.integer(1, 4);\n  }\n\n  /**\n   * Returns the result of a d6 dice roll\n   */\n  public d6() {\n    return this.integer(1, 6);\n  }\n\n  /**\n   * Returns the result of a d8 dice roll\n   */\n  public d8() {\n    return this.integer(1, 8);\n  }\n\n  /**\n   * Returns the result of a d10 dice roll\n   */\n  public d10() {\n    return this.integer(1, 10);\n  }\n\n  /**\n   * Returns the result of a d12 dice roll\n   */\n  public d12() {\n    return this.integer(1, 12);\n  }\n\n  /**\n   * Returns the result of a d20 dice roll\n   */\n  public d20() {\n    return this.integer(1, 20);\n  }\n}\n","/**\n * An enum that describes the sides of an Actor for collision\n */\nexport enum Side {\n  None = 'None',\n  Top = 'Top',\n  Bottom = 'Bottom',\n  Left = 'Left',\n  Right = 'Right'\n}\n","import { Vector } from '../Algebra';\nimport { Random } from '../Math/Random';\nimport { Side } from '../Collision/Side';\n\n/**\n * Two PI constant\n */\nexport const TwoPI: number = Math.PI * 2;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param deep Whether or not to do a deep clone\n * @param target The target object to attach properties on\n * @param objects The objects whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend(deep: boolean, target: any, ...objects: any[]): any;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param target The target object to attach properties on\n * @param object2 The second object whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend<T1, T2>(target: T1, object2: T2): T1 & T2;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param target The target object to attach properties on\n * @param object2 The second object whose properties to merge\n * @param object3 The third object whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend<T1, T2, T3>(target: T1, object2: T2, object3: T3): T1 & T2 & T3;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param target The target object to attach properties on\n * @param objects The objects whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend(target: any, ...objects: any[]): any;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @returns Merged object with properties from other objects\n * @credit https://gomakethings.com/vanilla-javascript-version-of-jquery-extend/\n */\nexport function extend() {\n  const extended: { [key: string]: any } = {};\n  let deep = false;\n  let i = 0;\n  const length = arguments.length;\n\n  // Check if a deep merge\n  if (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\n    deep = arguments[0];\n    i++;\n  }\n\n  // Merge the object into the extended object\n  const assignExists = typeof (<any>Object).assign === 'function';\n  let merge = null;\n  if (!assignExists) {\n    merge = function (obj: any) {\n      for (const prop in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n          // If deep merge and property is an object, merge properties\n          if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n            extended[prop] = extend(true, extended[prop], obj[prop]);\n          } else {\n            extended[prop] = obj[prop];\n          }\n        }\n      }\n    };\n  } else {\n    merge = (<any>Object).assign;\n  }\n\n  // Loop through each object and conduct a merge\n  for (; i < length; i++) {\n    const obj = arguments[i];\n    if (!assignExists) {\n      merge(obj);\n    } else {\n      merge(extended, obj);\n    }\n  }\n\n  return extended;\n}\n\nexport function base64Encode(inputStr: string) {\n  const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  let outputStr = '';\n  let i = 0;\n\n  while (i < inputStr.length) {\n    //all three \"& 0xff\" added below are there to fix a known bug\n    //with bytes returned by xhr.responseText\n    const byte1 = inputStr.charCodeAt(i++) & 0xff;\n    const byte2 = inputStr.charCodeAt(i++) & 0xff;\n    const byte3 = inputStr.charCodeAt(i++) & 0xff;\n\n    const enc1 = byte1 >> 2;\n    const enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);\n\n    let enc3, enc4;\n    if (isNaN(byte2)) {\n      enc3 = enc4 = 64;\n    } else {\n      enc3 = ((byte2 & 15) << 2) | (byte3 >> 6);\n      if (isNaN(byte3)) {\n        enc4 = 64;\n      } else {\n        enc4 = byte3 & 63;\n      }\n    }\n\n    outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\n  }\n\n  return outputStr;\n}\n\n/**\n * Sugar that will use `nullishVal` if it's not null or undefined. Simulates the `??` operator\n * @param nullishVal\n * @param defaultVal\n */\nexport function nullish<T>(nullishVal: T | undefined | null, defaultVal: T): T {\n  return nullishVal !== null && nullishVal !== undefined ? nullishVal : defaultVal;\n}\n\n/**\n * Clamps a value between a min and max inclusive\n */\nexport function clamp(val: number, min: number, max: number) {\n  return Math.min(Math.max(min, val), max);\n}\n\nexport function randomInRange(min: number, max: number, random: Random = new Random()): number {\n  return random ? random.floating(min, max) : min + Math.random() * (max - min);\n}\n\nexport function randomIntInRange(min: number, max: number, random: Random = new Random()): number {\n  return random ? random.integer(min, max) : Math.round(randomInRange(min, max));\n}\n\nexport function canonicalizeAngle(angle: number): number {\n  let tmpAngle = angle;\n  if (angle > TwoPI) {\n    while (tmpAngle > TwoPI) {\n      tmpAngle -= TwoPI;\n    }\n  }\n\n  if (angle < 0) {\n    while (tmpAngle < 0) {\n      tmpAngle += TwoPI;\n    }\n  }\n  return tmpAngle;\n}\n\nexport function toDegrees(radians: number): number {\n  return (180 / Math.PI) * radians;\n}\n\nexport function toRadians(degrees: number): number {\n  return (degrees / 180) * Math.PI;\n}\n\nexport function getPosition(el: HTMLElement): Vector {\n  let oLeft: number = 0,\n    oTop: number = 0;\n\n  const calcOffsetLeft = (parent: HTMLElement) => {\n    oLeft += parent.offsetLeft;\n\n    if (parent.offsetParent) {\n      calcOffsetLeft(<HTMLElement>parent.offsetParent);\n    }\n  };\n  const calcOffsetTop = (parent: HTMLElement) => {\n    oTop += parent.offsetTop;\n    if (parent.offsetParent) {\n      calcOffsetTop(<HTMLElement>parent.offsetParent);\n    }\n  };\n\n  calcOffsetLeft(el);\n  calcOffsetTop(el);\n\n  return new Vector(oLeft, oTop);\n}\n\nexport function addItemToArray<T>(item: T, array: T[]): boolean {\n  if (array.indexOf(item) === -1) {\n    array.push(item);\n    return true;\n  }\n  return false;\n}\n\nexport function removeItemFromArray<T>(item: T, array: T[]): boolean {\n  let index = -1;\n  if ((index = array.indexOf(item)) > -1) {\n    array.splice(index, 1);\n    return true;\n  }\n\n  return false;\n}\n\nexport function contains(array: Array<any>, obj: any): boolean {\n  for (let i = 0; i < array.length; i++) {\n    if (array[i] === obj) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function getOppositeSide(side: Side) {\n  if (side === Side.Top) {\n    return Side.Bottom;\n  }\n  if (side === Side.Bottom) {\n    return Side.Top;\n  }\n  if (side === Side.Left) {\n    return Side.Right;\n  }\n  if (side === Side.Right) {\n    return Side.Left;\n  }\n\n  return Side.None;\n}\n\n/**\n * Returns the side in the direction of the vector supplied\n * @param direction Vector to check\n */\nexport function getSideFromDirection(direction: Vector) {\n  const directions = [Vector.Left, Vector.Right, Vector.Up, Vector.Down];\n  const directionEnum = [Side.Left, Side.Right, Side.Top, Side.Bottom];\n\n  let max = -Number.MAX_VALUE;\n  let maxIndex = -1;\n  for (let i = 0; i < directions.length; i++) {\n    if (directions[i].dot(direction) > max) {\n      max = directions[i].dot(direction);\n      maxIndex = i;\n    }\n  }\n  return directionEnum[maxIndex];\n}\n\n/**\n * Excalibur's dynamically resizing collection\n */\nexport class Collection<T> {\n  /**\n   * Default collection size\n   */\n  public static DefaultSize = 200;\n  private _internalArray: T[] = null;\n  private _endPointer: number = 0;\n\n  /**\n   * @param initialSize  Initial size of the internal backing array\n   */\n  constructor(initialSize: number = Collection.DefaultSize) {\n    this._internalArray = new Array<T>(initialSize);\n  }\n\n  private _resize() {\n    const newSize = this._internalArray.length * 2;\n    const newArray = new Array<T>(newSize);\n    const count = this.count();\n    for (let i = 0; i < count; i++) {\n      newArray[i] = this._internalArray[i];\n    }\n\n    delete this._internalArray;\n    this._internalArray = newArray;\n  }\n\n  /**\n   * Push elements to the end of the collection\n   */\n  public push(element: T): T {\n    if (this._endPointer === this._internalArray.length) {\n      this._resize();\n    }\n    return (this._internalArray[this._endPointer++] = element);\n  }\n\n  /**\n   * Removes elements from the end of the collection\n   */\n  public pop(): T {\n    this._endPointer = this._endPointer - 1 < 0 ? 0 : this._endPointer - 1;\n    return this._internalArray[this._endPointer];\n  }\n\n  /**\n   * Returns the count of the collection\n   */\n  public count(): number {\n    return this._endPointer;\n  }\n\n  /**\n   * Empties the collection\n   */\n  public clear() {\n    this._endPointer = 0;\n  }\n\n  /**\n   * Returns the size of the internal backing array\n   */\n  public internalSize(): number {\n    return this._internalArray.length;\n  }\n\n  /**\n   * Returns an element at a specific index\n   * @param index  Index of element to retrieve\n   */\n  public elementAt(index: number): T {\n    if (index >= this.count()) {\n      //Logger.getInstance().error('Invalid parameter: ' + index);\n      throw new Error('Invalid index ' + index);\n    }\n    return this._internalArray[index];\n  }\n\n  /**\n   * Inserts an element at a specific index\n   * @param index  Index to insert the element\n   * @param value  Element to insert\n   */\n  public insert(index: number, value: T): T {\n    if (index >= this.count()) {\n      this._resize();\n    }\n    return (this._internalArray[index] = value);\n  }\n\n  /**\n   * Removes an element at a specific index\n   * @param index  Index of element to remove\n   */\n  public remove(index: number): T {\n    const count = this.count();\n    if (count === 0) {\n      //Logger.getInstance().error('Invalid parameter: ' + index);\n      throw new Error('Invalid parameter ' + index);\n    }\n    // O(n) Shift\n    const removed = this._internalArray[index];\n    for (let i = index; i < count; i++) {\n      this._internalArray[i] = this._internalArray[i + 1];\n    }\n    this._endPointer--;\n    return removed;\n  }\n\n  /**\n   * Removes an element by reference\n   * @param element  Element to retrieve\n   */\n  public removeElement(element: T) {\n    const index = this._internalArray.indexOf(element);\n    this.remove(index);\n  }\n\n  /**\n   * Returns a array representing the collection\n   */\n  public toArray(): T[] {\n    return this._internalArray.slice(0, this._endPointer);\n  }\n\n  /**\n   * Iterate over every element in the collection\n   * @param func  Callback to call for each element passing a reference to the element and its index, returned values are ignored\n   */\n  public forEach(func: (element: T, index: number) => any) {\n    let i = 0;\n    const count = this.count();\n    for (i; i < count; i++) {\n      func.call(this, this._internalArray[i], i);\n    }\n  }\n\n  /**\n   * Mutate every element in the collection\n   * @param func  Callback to call for each element passing a reference to the element and its index, any values returned mutate\n   * the collection\n   */\n  public map(func: (element: T, index: number) => any) {\n    const count = this.count();\n    for (let i = 0; i < count; i++) {\n      this._internalArray[i] = func.call(this, this._internalArray[i], i);\n    }\n  }\n}\n\n/**\n * Used for exhaustive checks at compile time\n */\nexport function fail(message: never): never {\n  throw new Error(message);\n}\n\nexport const range = (from: number, to: number) => [...Array(to + 1).keys()].slice(from);\n","/* eslint-disable no-console */\n/**\n * Logging level that Excalibur will tag\n */\nexport enum LogLevel {\n  Debug,\n  Info,\n  Warn,\n  Error,\n  Fatal\n}\n\n/**\n * Static singleton that represents the logging facility for Excalibur.\n * Excalibur comes built-in with a [[ConsoleAppender]] and [[ScreenAppender]].\n * Derive from [[Appender]] to create your own logging appenders.\n *\n * [[include:Logger.md]]\n */\nexport class Logger {\n  private static _instance: Logger = null;\n  private _appenders: Appender[] = [];\n\n  constructor() {\n    if (Logger._instance) {\n      throw new Error('Logger is a singleton');\n    }\n    Logger._instance = this;\n    // Default console appender\n    Logger._instance.addAppender(new ConsoleAppender());\n    return Logger._instance;\n  }\n\n  /**\n   * Gets or sets the default logging level. Excalibur will only log\n   * messages if equal to or above this level. Default: [[LogLevel.Info]]\n   */\n  public defaultLevel: LogLevel = LogLevel.Info;\n\n  /**\n   * Gets the current static instance of Logger\n   */\n  public static getInstance(): Logger {\n    if (Logger._instance == null) {\n      Logger._instance = new Logger();\n    }\n    return Logger._instance;\n  }\n\n  /**\n   * Adds a new [[Appender]] to the list of appenders to write to\n   */\n  public addAppender(appender: Appender): void {\n    this._appenders.push(appender);\n  }\n\n  /**\n   * Clears all appenders from the logger\n   */\n  public clearAppenders(): void {\n    this._appenders.length = 0;\n  }\n\n  /**\n   * Logs a message at a given LogLevel\n   * @param level  The LogLevel`to log the message at\n   * @param args   An array of arguments to write to an appender\n   */\n  private _log(level: LogLevel, args: any[]): void {\n    if (level == null) {\n      level = this.defaultLevel;\n    }\n\n    const len = this._appenders.length;\n\n    for (let i = 0; i < len; i++) {\n      if (level >= this.defaultLevel) {\n        this._appenders[i].log(level, args);\n      }\n    }\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Debug]] level\n   * @param args  Accepts any number of arguments\n   */\n  public debug(...args: any[]): void {\n    this._log(LogLevel.Debug, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Info]] level\n   * @param args  Accepts any number of arguments\n   */\n  public info(...args: any[]): void {\n    this._log(LogLevel.Info, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Warn]] level\n   * @param args  Accepts any number of arguments\n   */\n  public warn(...args: any[]): void {\n    this._log(LogLevel.Warn, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Error]] level\n   * @param args  Accepts any number of arguments\n   */\n  public error(...args: any[]): void {\n    this._log(LogLevel.Error, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Fatal]] level\n   * @param args  Accepts any number of arguments\n   */\n  public fatal(...args: any[]): void {\n    this._log(LogLevel.Fatal, args);\n  }\n}\n\n/**\n * Contract for any log appender (such as console/screen)\n */\nexport interface Appender {\n  /**\n   * Logs a message at the given [[LogLevel]]\n   * @param level  Level to log at\n   * @param args   Arguments to log\n   */\n  log(level: LogLevel, args: any[]): void;\n}\n\n/**\n * Console appender for browsers (i.e. `console.log`)\n */\nexport class ConsoleAppender implements Appender {\n  /**\n   * Logs a message at the given [[LogLevel]]\n   * @param level  Level to log at\n   * @param args   Arguments to log\n   */\n  public log(level: LogLevel, args: any[]): void {\n    // Check for console support\n    if (!console && !console.log && console.warn && console.error) {\n      // todo maybe do something better than nothing\n      return;\n    }\n\n    // Create a new console args array\n    const consoleArgs: any[] = [];\n    consoleArgs.unshift.apply(consoleArgs, args);\n    consoleArgs.unshift('[' + LogLevel[level] + '] : ');\n\n    if (level < LogLevel.Warn) {\n      // Call .log for Debug/Info\n      if (console.log.apply) {\n        // this is required on some older browsers that don't support apply on console.log :(\n        console.log.apply(console, consoleArgs);\n      } else {\n        console.log(consoleArgs.join(' '));\n      }\n    } else if (level < LogLevel.Error) {\n      // Call .warn for Warn\n      if (console.warn.apply) {\n        console.warn.apply(console, consoleArgs);\n      } else {\n        console.warn(consoleArgs.join(' '));\n      }\n    } else {\n      // Call .error for Error/Fatal\n      if (console.error.apply) {\n        console.error.apply(console, consoleArgs);\n      } else {\n        console.error(consoleArgs.join(' '));\n      }\n    }\n  }\n}\n\n/**\n * On-screen (canvas) appender\n */\nexport class ScreenAppender implements Appender {\n  // @todo Clean this up\n\n  private _messages: string[] = [];\n  private _canvas: HTMLCanvasElement;\n  private _ctx: CanvasRenderingContext2D;\n\n  /**\n   * @param width   Width of the screen appender in pixels\n   * @param height  Height of the screen appender in pixels\n   */\n  constructor(width?: number, height?: number) {\n    this._canvas = <HTMLCanvasElement>document.createElement('canvas');\n    this._canvas.width = width || window.innerWidth;\n    this._canvas.height = height || window.innerHeight;\n    this._canvas.style.position = 'absolute';\n    // eslint-disable-next-line\n    this._ctx = <CanvasRenderingContext2D>this._canvas.getContext('2d'); // eslint-disable-line\n    document.body.appendChild(this._canvas);\n  }\n\n  /**\n   * Logs a message at the given [[LogLevel]]\n   * @param level  Level to log at\n   * @param args   Arguments to log\n   */\n  public log(level: LogLevel, args: any[]): void {\n    const message = args.join(',');\n\n    this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n\n    this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\n\n    let pos = 10;\n    let opacity = 1.0;\n    for (let i = 0; i < this._messages.length; i++) {\n      this._ctx.fillStyle = 'rgba(255,255,255,' + opacity.toFixed(2) + ')';\n      this._ctx.fillText(this._messages[i], 200, pos);\n      pos += 10;\n      opacity = opacity > 0 ? opacity - 0.05 : 0;\n    }\n  }\n}\n","import { Logger } from './Log';\nimport * as Util from './Util';\n\n/**\n * Obsolete decorator options\n */\nexport interface ObsoleteOptions {\n  // Optionally specify a custom message\n  message?: string;\n  // Optionally indicate that an alternate method to the obsolete one exists\n  alternateMethod?: string;\n  // Optional show stack trace, by default off\n  showStackTrace?: boolean;\n}\n\nexport const maxMessages = 5;\nconst obsoleteMessage: { [messageCount: string]: number } = {};\nexport const resetObsoleteCounter = () => {\n  for (const message in obsoleteMessage) {\n    obsoleteMessage[message] = 0;\n  }\n};\n\nconst logMessage = (message: string, options: ObsoleteOptions) => {\n  if (obsoleteMessage[message] < maxMessages) {\n    Logger.getInstance().warn(message);\n\n    // tslint:disable-next-line: no-console\n    if (console.trace && options.showStackTrace) {\n      // tslint:disable-next-line: no-console\n      console.trace();\n    }\n  }\n  obsoleteMessage[message]++;\n};\n\n/**\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\n */\nexport function obsolete(options?: ObsoleteOptions): any {\n  options = Util.extend(\n    {},\n    {\n      message: 'This feature will be removed in future versions of Excalibur.',\n      alternateMethod: null,\n      showStackTrack: false\n    },\n    options\n  );\n\n  return function(target: any, property: string, descriptor: PropertyDescriptor): any {\n    if (\n      descriptor &&\n      !(typeof descriptor.value === 'function' || typeof descriptor.get === 'function' || typeof descriptor.set === 'function')\n    ) {\n      throw new SyntaxError('Only classes/functions/getters/setters can be marked as obsolete');\n    }\n    const methodSignature = `${target.name || ''}${target.name && property ? '.' : ''}${property ? property : ''}`;\n\n    const message =\n      `${methodSignature} is marked obsolete: ${options.message}` +\n      (options.alternateMethod ? ` Use ${options.alternateMethod} instead` : '');\n\n    if (!obsoleteMessage[message]) {\n      obsoleteMessage[message] = 0;\n    }\n\n    // If descriptor is null it is a class\n    const method = descriptor ? { ...descriptor } : target;\n    if (!descriptor) {\n      const constructor = function() {\n        const args = Array.prototype.slice.call(arguments);\n        logMessage(message, options);\n        return new method(...args);\n      };\n      constructor.prototype = method.prototype;\n      return constructor;\n    }\n\n    if (descriptor && descriptor.value) {\n      method.value = function(this: any) {\n        logMessage(message, options);\n        return descriptor.value.apply(this, arguments);\n      };\n      return method;\n    }\n\n    if (descriptor && descriptor.get) {\n      method.get = function(this: any) {\n        logMessage(message, options);\n        return descriptor.get.apply(this, arguments);\n      };\n    }\n\n    if (descriptor && descriptor.set) {\n      method.set = function(this: any) {\n        logMessage(message, options);\n        return descriptor.set.apply(this, arguments);\n      };\n    }\n    return method;\n  };\n}\n","import { Engine } from './Engine';\nimport * as Util from './Util/Util';\nimport { Clonable } from './Interfaces/Clonable';\nimport { obsolete } from './Util/Decorators';\n\n/**\n * A 2D vector on a plane.\n */\nexport class Vector implements Clonable<Vector> {\n  /**\n   * A (0, 0) vector\n   */\n  public static get Zero() {\n    return new Vector(0, 0);\n  }\n\n  /**\n   * A (1, 1) vector\n   */\n  public static get One() {\n    return new Vector(1, 1);\n  }\n\n  /**\n   * A (0.5, 0.5) vector\n   */\n  public static get Half() {\n    return new Vector(0.5, 0.5);\n  }\n\n  /**\n   * A unit vector pointing up (0, -1)\n   */\n  public static get Up() {\n    return new Vector(0, -1);\n  }\n\n  /**\n   * A unit vector pointing down (0, 1)\n   */\n  public static get Down() {\n    return new Vector(0, 1);\n  }\n\n  /**\n   * A unit vector pointing left (-1, 0)\n   */\n  public static get Left() {\n    return new Vector(-1, 0);\n  }\n  /**\n   * A unit vector pointing right (1, 0)\n   */\n  public static get Right() {\n    return new Vector(1, 0);\n  }\n\n  /**\n   * Returns a vector of unit length in the direction of the specified angle in Radians.\n   * @param angle The angle to generate the vector\n   */\n  public static fromAngle(angle: number) {\n    return new Vector(Math.cos(angle), Math.sin(angle));\n  }\n\n  /**\n   * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\n   */\n  public static isValid(vec: Vector) {\n    if (vec === null || vec === undefined) {\n      return false;\n    }\n    if (isNaN(vec.x) || isNaN(vec.y)) {\n      return false;\n    }\n\n    if (vec.x === Infinity || vec.y === Infinity || vec.x === -Infinity || vec.y === -Infinity) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Calculates distance between two Vectors\n   * @param vec1\n   * @param vec2\n   */\n  public static distance(vec1: Vector, vec2: Vector) {\n    return Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\n  }\n\n  /**\n   * @param x  X component of the Vector\n   * @param y  Y component of the Vector\n   */\n  constructor(public x: number, public y: number) {}\n\n  /**\n   * Sets the x and y components at once\n   */\n  public setTo(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n\n  /**\n   * Compares this point against another and tests for equality\n   * @param point  The other point to compare to\n   */\n  public equals(vector: Vector, tolerance: number = 0.001): boolean {\n    return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\n  }\n\n  /**\n   * The distance to another vector. If no other Vector is specified, this will return the [[magnitude]].\n   * @param v  The other vector. Leave blank to use origin vector.\n   */\n  public distance(v?: Vector): number {\n    if (!v) {\n      v = Vector.Zero;\n    }\n    return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2));\n  }\n\n  /**\n   * The magnitude (size) of the Vector\n   * @obsolete magnitude will be removed in favour of '.size' in version 0.25.0\n   */\n  @obsolete({ message: 'will be removed in favour of `.size` in version 0.25.0' })\n  public magnitude(): number {\n    return this.distance();\n  }\n\n  /**\n   * The size(magnitude) of the Vector\n   */\n  public get size(): number {\n    return this.distance();\n  }\n\n  public set size(newLength: number) {\n    const v = this.normalize().scale(newLength);\n    this.x = v.x;\n    this.y = v.y;\n  }\n\n  /**\n   * Normalizes a vector to have a magnitude of 1.\n   */\n  public normalize(): Vector {\n    const d = this.distance();\n    if (d > 0) {\n      return new Vector(this.x / d, this.y / d);\n    } else {\n      return new Vector(0, 1);\n    }\n  }\n\n  /**\n   * Returns the average (midpoint) between the current point and the specified\n   */\n  public average(vec: Vector): Vector {\n    return this.add(vec).scale(0.5);\n  }\n\n  /**\n   * Scales a vector's by a factor of size\n   * @param size  The factor to scale the magnitude by\n   */\n  public scale(scale: Vector): Vector;\n  public scale(size: number): Vector;\n  public scale(sizeOrScale: number | Vector): Vector {\n    if (sizeOrScale instanceof Vector) {\n      return new Vector(this.x * sizeOrScale.x, this.y * sizeOrScale.y);\n    } else {\n      return new Vector(this.x * sizeOrScale, this.y * sizeOrScale);\n    }\n  }\n\n  /**\n   * Adds one vector to another\n   * @param v The vector to add\n   */\n  public add(v: Vector): Vector {\n    return new Vector(this.x + v.x, this.y + v.y);\n  }\n\n  /**\n   * Subtracts a vector from another, if you subtract vector `B.sub(A)` the resulting vector points from A -> B\n   * @param v The vector to subtract\n   */\n  public sub(v: Vector): Vector {\n    return new Vector(this.x - v.x, this.y - v.y);\n  }\n\n  /**\n   * Adds one vector to this one modifying the original\n   * @param v The vector to add\n   */\n  public addEqual(v: Vector): Vector {\n    this.x += v.x;\n    this.y += v.y;\n    return this;\n  }\n\n  /**\n   * Subtracts a vector from this one modifying the original\n   * @parallel v The vector to subtract\n   */\n  public subEqual(v: Vector): Vector {\n    this.x -= v.x;\n    this.y -= v.y;\n    return this;\n  }\n\n  /**\n   * Scales this vector by a factor of size and modifies the original\n   */\n  public scaleEqual(size: number): Vector {\n    this.x *= size;\n    this.y *= size;\n    return this;\n  }\n\n  /**\n   * Performs a dot product with another vector\n   * @param v  The vector to dot\n   */\n  public dot(v: Vector): number {\n    return this.x * v.x + this.y * v.y;\n  }\n\n  /**\n   * Performs a 2D cross product with scalar. 2D cross products with a scalar return a vector.\n   * @param v  The scalar to cross\n   */\n  public cross(v: number): Vector;\n  /**\n   * Performs a 2D cross product with another vector. 2D cross products return a scalar value not a vector.\n   * @param v  The vector to cross\n   */\n  public cross(v: Vector): number;\n  public cross(v: any): any {\n    if (v instanceof Vector) {\n      return this.x * v.y - this.y * v.x;\n    } else if (typeof v === 'number') {\n      return new Vector(v * this.y, -v * this.x);\n    }\n  }\n\n  /**\n   * Returns the perpendicular vector to this one\n   */\n  public perpendicular(): Vector {\n    return new Vector(this.y, -this.x);\n  }\n\n  /**\n   * Returns the normal vector to this one, same as the perpendicular of length 1\n   */\n  public normal(): Vector {\n    return this.perpendicular().normalize();\n  }\n\n  /**\n   * Negate the current vector\n   */\n  public negate(): Vector {\n    return this.scale(-1);\n  }\n\n  /**\n   * Returns the angle of this vector.\n   */\n  public toAngle(): number {\n    return Math.atan2(this.y, this.x);\n  }\n\n  /**\n   * Rotates the current vector around a point by a certain number of\n   * degrees in radians\n   */\n  public rotate(angle: number, anchor?: Vector): Vector {\n    if (!anchor) {\n      anchor = new Vector(0, 0);\n    }\n    const sinAngle = Math.sin(angle);\n    const cosAngle = Math.cos(angle);\n    const x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\n    const y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\n    return new Vector(x, y);\n  }\n\n  /**\n   * Creates new vector that has the same values as the previous.\n   */\n  public clone(): Vector {\n    return new Vector(this.x, this.y);\n  }\n\n  /**\n   * Returns a string representation of the vector.\n   */\n  public toString(): string {\n    return `(${this.x}, ${this.y})`;\n  }\n}\n\n/**\n * A 2D ray that can be cast into the scene to do collision detection\n */\nexport class Ray {\n  public pos: Vector;\n  public dir: Vector;\n\n  /**\n   * @param pos The starting position for the ray\n   * @param dir The vector indicating the direction of the ray\n   */\n  constructor(pos: Vector, dir: Vector) {\n    this.pos = pos;\n    this.dir = dir.normalize();\n  }\n\n  /**\n   * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success.\n   * This number indicates the mathematical intersection time.\n   * @param line  The line to test\n   */\n  public intersect(line: Line): number {\n    const numerator = line.begin.sub(this.pos);\n\n    // Test is line and ray are parallel and non intersecting\n    if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\n      return -1;\n    }\n\n    // Lines are parallel\n    const divisor = this.dir.cross(line.getSlope());\n    if (divisor === 0) {\n      return -1;\n    }\n\n    const t = numerator.cross(line.getSlope()) / divisor;\n\n    if (t >= 0) {\n      const u = numerator.cross(this.dir) / divisor / line.getLength();\n      if (u >= 0 && u <= 1) {\n        return t;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Returns the point of intersection given the intersection time\n   */\n  public getPoint(time: number): Vector {\n    return this.pos.add(this.dir.scale(time));\n  }\n}\n\n/**\n * A 2D line segment\n */\nexport class Line {\n  /**\n   * @param begin  The starting point of the line segment\n   * @param end  The ending point of the line segment\n   */\n  constructor(public begin: Vector, public end: Vector) {}\n\n  /**\n   * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\n   */\n  public get slope() {\n    return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\n  }\n\n  /**\n   * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\n   */\n  public get intercept() {\n    return this.begin.y - this.slope * this.begin.x;\n  }\n\n  /**\n   * Gets the normal of the line\n   */\n  public normal(): Vector {\n    return this.end.sub(this.begin).normal();\n  }\n\n  /**\n   * Returns the slope of the line in the form of a vector of length 1\n   */\n  public getSlope(): Vector {\n    const begin = this.begin;\n    const end = this.end;\n    const distance = begin.distance(end);\n    return end.sub(begin).scale(1 / distance);\n  }\n\n  /**\n   * Returns the edge of the line as vector, the length of the vector is the length of the edge\n   */\n  public getEdge(): Vector {\n    const begin = this.begin;\n    const end = this.end;\n    return end.sub(begin);\n  }\n\n  /**\n   * Returns the length of the line segment in pixels\n   */\n  public getLength(): number {\n    const begin = this.begin;\n    const end = this.end;\n    const distance = begin.distance(end);\n    return distance;\n  }\n\n  /**\n   * Returns the midpoint of the edge\n   */\n  public get midpoint(): Vector {\n    return this.begin.add(this.end).scale(0.5);\n  }\n\n  /**\n   * Flips the direction of the line segment\n   */\n  public flip(): Line {\n    return new Line(this.end, this.begin);\n  }\n\n  /**\n   * Find the perpendicular distance from the line to a point\n   * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n   * @param point\n   */\n  public distanceToPoint(point: Vector) {\n    const x0 = point.x;\n    const y0 = point.y;\n\n    const l = this.getLength();\n\n    const dy = this.end.y - this.begin.y;\n    const dx = this.end.x - this.begin.x;\n    const distance = Math.abs(dy * x0 - dx * y0 + this.end.x * this.begin.y - this.end.y * this.begin.x) / l;\n    return distance;\n  }\n\n  /**\n   * Find the perpendicular line from the line to a point\n   * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n   * (a - p) - ((a - p) * n)n\n   * a is a point on the line\n   * p is the arbitrary point above the line\n   * n is a unit vector in direction of the line\n   * @param point\n   */\n  public findVectorToPoint(point: Vector): Vector {\n    const aMinusP = this.begin.sub(point);\n    const n = this.getSlope();\n\n    return aMinusP.sub(n.scale(aMinusP.dot(n)));\n  }\n\n  /**\n   * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\n   * a new point with the calculated Y value and vice-versa.\n   *\n   * @param x The known X value of the target point\n   * @param y The known Y value of the target point\n   * @returns A new point with the other calculated axis value\n   */\n  public findPoint(x: number = null, y: number = null): Vector {\n    const m = this.slope;\n    const b = this.intercept;\n\n    if (x !== null) {\n      return new Vector(x, m * x + b);\n    } else if (y !== null) {\n      return new Vector((y - b) / m, y);\n    } else {\n      throw new Error('You must provide an X or a Y value');\n    }\n  }\n\n  /**\n   * Whether or not the given point lies on this line. This method is precise by default\n   * meaning the point must lie exactly on the line. Adjust threshold to\n   * loosen the strictness of the check for floating-point calculations.\n   */\n  public hasPoint(x: number, y: number, threshold?: number): boolean;\n\n  /**\n   * Whether or not the given point lies on this line. This method is precise by default\n   * meaning the point must lie exactly on the line. Adjust threshold to\n   * loosen the strictness of the check for floating-point calculations.\n   */\n  public hasPoint(v: Vector, threshold?: number): boolean;\n\n  /**\n   * @see http://stackoverflow.com/a/11908158/109458\n   */\n  public hasPoint(): boolean {\n    let currPoint: Vector;\n    let threshold = 0;\n\n    if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\n      currPoint = new Vector(arguments[0], arguments[1]);\n      threshold = arguments[2] || 0;\n    } else if (arguments[0] instanceof Vector) {\n      currPoint = arguments[0];\n      threshold = arguments[1] || 0;\n    } else {\n      throw 'Could not determine the arguments for Vector.hasPoint';\n    }\n\n    const dxc = currPoint.x - this.begin.x;\n    const dyc = currPoint.y - this.begin.y;\n\n    const dx1 = this.end.x - this.begin.x;\n    const dy1 = this.end.y - this.begin.y;\n\n    const cross = dxc * dy1 - dyc * dx1;\n\n    // check whether point lines on the line\n    if (Math.abs(cross) > threshold) {\n      return false;\n    }\n\n    // check whether point lies in-between start and end\n    if (Math.abs(dx1) >= Math.abs(dy1)) {\n      return dx1 > 0 ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\n    } else {\n      return dy1 > 0 ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\n    }\n  }\n}\n\n/**\n * A 1 dimensional projection on an axis, used to test overlaps\n */\nexport class Projection {\n  constructor(public min: number, public max: number) {}\n  public overlaps(projection: Projection): boolean {\n    return this.max > projection.min && projection.max > this.min;\n  }\n\n  public getOverlap(projection: Projection): number {\n    if (this.overlaps(projection)) {\n      if (this.max > projection.max) {\n        return projection.max - this.min;\n      } else {\n        return this.max - projection.min;\n      }\n    }\n    return 0;\n  }\n}\n\nexport class GlobalCoordinates {\n  public static fromPagePosition(x: number, y: number, engine: Engine): GlobalCoordinates;\n  public static fromPagePosition(pos: Vector, engine: Engine): GlobalCoordinates;\n  public static fromPagePosition(xOrPos: number | Vector, yOrEngine: number | Engine, engineOrUndefined?: Engine): GlobalCoordinates {\n    let pageX: number;\n    let pageY: number;\n    let pagePos: Vector;\n    let engine: Engine;\n\n    if (arguments.length === 3) {\n      pageX = <number>xOrPos;\n      pageY = <number>yOrEngine;\n      pagePos = new Vector(pageX, pageY);\n      engine = engineOrUndefined;\n    } else {\n      pagePos = <Vector>xOrPos;\n      pageX = pagePos.x;\n      pageY = pagePos.y;\n      engine = <Engine>yOrEngine;\n    }\n\n    const screenX: number = pageX - Util.getPosition(engine.canvas).x;\n    const screenY: number = pageY - Util.getPosition(engine.canvas).y;\n    const screenPos = new Vector(screenX, screenY);\n    const worldPos = engine.screenToWorldCoordinates(screenPos);\n\n    return new GlobalCoordinates(worldPos, pagePos, screenPos);\n  }\n\n  constructor(public worldPos: Vector, public pagePos: Vector, public screenPos: Vector) {}\n}\n\n/**\n * Shorthand for creating new Vectors - returns a new Vector instance with the\n * provided X and Y components.\n *\n * @param x  X component of the Vector\n * @param y  Y component of the Vector\n */\nexport function vec(x: number, y: number): Vector {\n  return new Vector(x, y);\n}\n","import { Scene } from './Scene';\nimport { Vector } from './Algebra';\nimport { Actor } from './Actor';\nimport { Trigger } from './Trigger';\nimport { FrameStats } from './Debug';\nimport { Engine } from './Engine';\nimport { TileMap } from './TileMap';\nimport { Side } from './Collision/Side';\nimport * as Input from './Input/Index';\nimport { Pair, Camera } from './index';\nimport { Collider } from './Collision/Collider';\n\nexport enum EventTypes {\n  Kill = 'kill',\n  PreKill = 'prekill',\n  PostKill = 'postkill',\n\n  PreDraw = 'predraw',\n  PostDraw = 'postdraw',\n\n  PreDebugDraw = 'predebugdraw',\n  PostDebugDraw = 'postdebugdraw',\n\n  PreUpdate = 'preupdate',\n  PostUpdate = 'postupdate',\n\n  PreFrame = 'preframe',\n  PostFrame = 'postframe',\n\n  PreCollision = 'precollision',\n  CollisionStart = 'collisionstart',\n  CollisionEnd = 'collisionend',\n  PostCollision = 'postcollision',\n\n  Initialize = 'initialize',\n  Activate = 'activate',\n  Deactivate = 'deactivate',\n\n  ExitViewport = 'exitviewport',\n  EnterViewport = 'enterviewport',\n\n  ExitTrigger = 'exit',\n  EnterTrigger = 'enter',\n\n  Connect = 'connect',\n  Disconnect = 'disconnect',\n  Button = 'button',\n  Axis = 'axis',\n\n  Subscribe = 'subscribe',\n  Unsubscribe = 'unsubscribe',\n\n  Visible = 'visible',\n  Hidden = 'hidden',\n  Start = 'start',\n  Stop = 'stop',\n\n  PointerUp = 'pointerup',\n  PointerDown = 'pointerdown',\n  PointerMove = 'pointermove',\n  PointerEnter = 'pointerenter',\n  PointerLeave = 'pointerleave',\n  PointerCancel = 'pointercancel',\n  PointerWheel = 'pointerwheel',\n\n  Up = 'up',\n  Down = 'down',\n  Move = 'move',\n  Enter = 'enter',\n  Leave = 'leave',\n  Cancel = 'cancel',\n  Wheel = 'wheel',\n\n  Press = 'press',\n  Release = 'release',\n  Hold = 'hold',\n\n  PointerDragStart = 'pointerdragstart',\n  PointerDragEnd = 'pointerdragend',\n  PointerDragEnter = 'pointerdragenter',\n  PointerDragLeave = 'pointerdragleave',\n  PointerDragMove = 'pointerdragmove'\n}\n\n/* istanbul ignore next */\n/* compiler only: these are internal to lib */\nexport type kill = 'kill';\nexport type prekill = 'prekill';\nexport type postkill = 'postkill';\n\nexport type predraw = 'predraw';\nexport type postdraw = 'postdraw';\n\nexport type predebugdraw = 'predebugdraw';\nexport type postdebugdraw = 'postdebugdraw';\n\nexport type preupdate = 'preupdate';\nexport type postupdate = 'postupdate';\n\nexport type preframe = 'preframe';\nexport type postframe = 'postframe';\n\nexport type precollision = 'precollision';\nexport type collisionstart = 'collisionstart';\nexport type collisionend = 'collisionend';\nexport type postcollision = 'postcollision';\n\nexport type initialize = 'initialize';\nexport type activate = 'activate';\nexport type deactivate = 'deactivate';\n\nexport type exitviewport = 'exitviewport';\nexport type enterviewport = 'enterviewport';\n\nexport type exittrigger = 'exit';\nexport type entertrigger = 'enter';\n\nexport type connect = 'connect';\nexport type disconnect = 'disconnect';\nexport type button = 'button';\nexport type axis = 'axis';\n\nexport type subscribe = 'subscribe';\nexport type unsubscribe = 'unsubscribe';\n\nexport type visible = 'visible';\nexport type hidden = 'hidden';\nexport type start = 'start';\nexport type stop = 'stop';\n\nexport type pointerup = 'pointerup';\nexport type pointerdown = 'pointerdown';\nexport type pointermove = 'pointermove';\nexport type pointerenter = 'pointerenter';\nexport type pointerleave = 'pointerleave';\nexport type pointercancel = 'pointercancel';\nexport type pointerwheel = 'pointerwheel';\n\nexport type up = 'up';\nexport type down = 'down';\nexport type move = 'move';\nexport type enter = 'enter';\nexport type leave = 'leave';\nexport type cancel = 'cancel';\nexport type wheel = 'wheel';\n\nexport type press = 'press';\nexport type release = 'release';\nexport type hold = 'hold';\n\nexport type pointerdragstart = 'pointerdragstart';\nexport type pointerdragend = 'pointerdragend';\nexport type pointerdragenter = 'pointerdragenter';\nexport type pointerdragleave = 'pointerdragleave';\nexport type pointerdragmove = 'pointerdragmove';\n\n/**\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects,\n * some events are unique to a type, others are not.\n *\n */\nexport class GameEvent<T, U = T> {\n  /**\n   * Target object for this event.\n   */\n  public target: T;\n\n  /**\n   * Other target object for this event\n   */\n  public other: U | null;\n\n  /**\n   * If set to false, prevents event from propagating to other actors. If true it will be propagated\n   * to all actors that apply.\n   */\n  public bubbles: boolean = true;\n\n  /**\n   * Prevents event from bubbling\n   */\n  public stopPropagation() {\n    this.bubbles = false;\n  }\n}\n\n/**\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed.\n */\nexport class KillEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * The 'prekill' event is emitted directly before an actor is killed.\n */\nexport class PreKillEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * The 'postkill' event is emitted directly after the actor is killed.\n */\nexport class PostKillEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * The 'start' event is emitted on engine when has started and is ready for interaction.\n */\nexport class GameStartEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw.\n */\nexport class GameStopEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nexport class PreDrawEvent extends GameEvent<Actor | Scene | Engine | TileMap> {\n  constructor(public ctx: CanvasRenderingContext2D, public delta: number, public target: Actor | Scene | Engine | TileMap) {\n    super();\n  }\n}\n\n/**\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nexport class PostDrawEvent extends GameEvent<Actor | Scene | Engine | TileMap> {\n  constructor(public ctx: CanvasRenderingContext2D, public delta: number, public target: Actor | Scene | Engine | TileMap) {\n    super();\n  }\n}\n\n/**\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\n */\nexport class PreDebugDrawEvent extends GameEvent<Actor | Scene | Engine> {\n  constructor(public ctx: CanvasRenderingContext2D, public target: Actor | Scene | Engine) {\n    super();\n  }\n}\n\n/**\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\n */\nexport class PostDebugDrawEvent extends GameEvent<Actor | Scene | Engine> {\n  constructor(public ctx: CanvasRenderingContext2D, public target: Actor | Scene | Engine) {\n    super();\n  }\n}\n\n/**\n * The 'preupdate' event is emitted on actors, scenes, camera, and engine before the update starts.\n */\nexport class PreUpdateEvent extends GameEvent<Actor | Scene | Engine | TileMap | Camera> {\n  constructor(public engine: Engine, public delta: number, public target: Actor | Scene | Engine | TileMap | Camera) {\n    super();\n  }\n}\n\n/**\n * The 'postupdate' event is emitted on actors, scenes, camera, and engine after the update ends.\n */\nexport class PostUpdateEvent extends GameEvent<Actor | Scene | Engine | TileMap | Camera> {\n  constructor(public engine: Engine, public delta: number, public target: Actor | Scene | Engine | TileMap | Camera) {\n    super();\n  }\n}\n\n/**\n * The 'preframe' event is emitted on the engine, before the frame begins.\n */\nexport class PreFrameEvent extends GameEvent<Engine> {\n  constructor(public engine: Engine, public prevStats: FrameStats) {\n    super();\n    this.target = engine;\n  }\n}\n\n/**\n * The 'postframe' event is emitted on the engine, after a frame ends.\n */\nexport class PostFrameEvent extends GameEvent<Engine> {\n  constructor(public engine: Engine, public stats: FrameStats) {\n    super();\n    this.target = engine;\n  }\n}\n\n/**\n * Event received when a gamepad is connected to Excalibur. [[Gamepads]] receives this event.\n */\nexport class GamepadConnectEvent extends GameEvent<Input.Gamepad> {\n  constructor(public index: number, public gamepad: Input.Gamepad) {\n    super();\n    this.target = gamepad;\n  }\n}\n\n/**\n * Event received when a gamepad is disconnected from Excalibur. [[Gamepads]] receives this event.\n */\nexport class GamepadDisconnectEvent extends GameEvent<Input.Gamepad> {\n  constructor(public index: number, public gamepad: Input.Gamepad) {\n    super();\n    this.target = gamepad;\n  }\n}\n\n/**\n * Gamepad button event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\n */\nexport class GamepadButtonEvent extends GameEvent<Input.Gamepad> {\n  /**\n   * @param button  The Gamepad button\n   * @param value   A numeric value between 0 and 1\n   */\n  constructor(public button: Input.Buttons, public value: number, public target: Input.Gamepad) {\n    super();\n  }\n}\n\n/**\n * Gamepad axis event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\n */\nexport class GamepadAxisEvent extends GameEvent<Input.Gamepad> {\n  /**\n   * @param axis  The Gamepad axis\n   * @param value A numeric value between -1 and 1\n   */\n  constructor(public axis: Input.Axes, public value: number, public target: Input.Gamepad) {\n    super();\n  }\n}\n\n/**\n * Subscribe event thrown when handlers for events other than subscribe are added. Meta event that is received by\n * [[EventDispatcher|event dispatchers]].\n */\nexport class SubscribeEvent<T> extends GameEvent<T> {\n  constructor(public topic: string, public handler: (event: GameEvent<T>) => void) {\n    super();\n  }\n}\n\n/**\n * Unsubscribe event thrown when handlers for events other than unsubscribe are removed. Meta event that is received by\n * [[EventDispatcher|event dispatchers]].\n */\nexport class UnsubscribeEvent<T> extends GameEvent<T> {\n  constructor(public topic: string, public handler: (event: GameEvent<T>) => void) {\n    super();\n  }\n}\n\n/**\n * Event received by the [[Engine]] when the browser window is visible on a screen.\n */\nexport class VisibleEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * Event received by the [[Engine]] when the browser window is hidden from all screens.\n */\nexport class HiddenEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * Event thrown on an [[Actor|actor]] when a collision will occur this frame if it resolves\n */\nexport class PreCollisionEvent<T extends Collider | Actor = Actor> extends GameEvent<T> {\n  /**\n   * @param actor         The actor the event was thrown on\n   * @param other         The actor that will collided with the current actor\n   * @param side          The side that will be collided with the current actor\n   * @param intersection  Intersection vector\n   */\n  constructor(actor: T, public other: T, public side: Side, public intersection: Vector) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown on an [[Actor|actor]] when a collision has been resolved (body reacted) this frame\n */\nexport class PostCollisionEvent<T extends Collider | Actor = Actor> extends GameEvent<T> {\n  /**\n   * @param actor         The actor the event was thrown on\n   * @param other         The actor that did collide with the current actor\n   * @param side          The side that did collide with the current actor\n   * @param intersection  Intersection vector\n   */\n  constructor(actor: T, public other: T, public side: Side, public intersection: Vector) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown the first time an [[Actor|actor]] collides with another, after an actor is in contact normal collision events are fired.\n */\nexport class CollisionStartEvent<T extends Collider | Actor = Actor> extends GameEvent<T> {\n  /**\n   *\n   * @param actor\n   * @param other\n   * @param pair\n   */\n  constructor(actor: T, public other: T, public pair: Pair) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown when the [[Actor|actor]] is no longer colliding with another\n */\nexport class CollisionEndEvent<T extends Collider | Actor = Actor> extends GameEvent<T> {\n  /**\n   *\n   */\n  constructor(actor: T, public other: T) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown on an [[Actor]] and a [[Scene]] only once before the first update call\n */\nexport class InitializeEvent extends GameEvent<Actor | Scene | Engine | Camera> {\n  /**\n   * @param engine  The reference to the current engine\n   */\n  constructor(public engine: Engine, public target: Actor | Scene | Engine | Camera) {\n    super();\n  }\n}\n\n/**\n * Event thrown on a [[Scene]] on activation\n */\nexport class ActivateEvent extends GameEvent<Scene> {\n  /**\n   * @param oldScene  The reference to the old scene\n   */\n  constructor(public oldScene: Scene, public target: Scene) {\n    super();\n  }\n}\n\n/**\n * Event thrown on a [[Scene]] on deactivation\n */\nexport class DeactivateEvent extends GameEvent<Scene> {\n  /**\n   * @param newScene  The reference to the new scene\n   */\n  constructor(public newScene: Scene, public target: Scene) {\n    super();\n  }\n}\n\n/**\n * Event thrown on an [[Actor]] when it completely leaves the screen.\n */\nexport class ExitViewPortEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * Event thrown on an [[Actor]] when it completely leaves the screen.\n */\nexport class EnterViewPortEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\nexport class EnterTriggerEvent extends GameEvent<Actor> {\n  constructor(public target: Trigger, public actor: Actor) {\n    super();\n  }\n}\n\nexport class ExitTriggerEvent extends GameEvent<Actor> {\n  constructor(public target: Trigger, public actor: Actor) {\n    super();\n  }\n}\n","import { GameEvent, SubscribeEvent, UnsubscribeEvent } from './Events';\nimport { Eventable } from './Interfaces/Evented';\n\n/**\n * Excalibur's internal event dispatcher implementation.\n * Callbacks are fired immediately after an event is published.\n * Typically you will use [[Class.eventDispatcher]] since most classes in\n * Excalibur inherit from [[Class]]. You will rarely create an `EventDispatcher`\n * yourself.\n *\n * [[include:Events.md]]\n */\nexport class EventDispatcher<T = any> implements Eventable {\n  private _handlers: { [key: string]: { (event: GameEvent<T>): void }[] } = {};\n  private _wiredEventDispatchers: Eventable[] = [];\n\n  private _target: T;\n\n  /**\n   * @param target  The object that will be the recipient of events from this event dispatcher\n   */\n  constructor(target: T) {\n    this._target = target;\n  }\n\n  /**\n   * Clears any existing handlers or wired event dispatchers on this event dispatcher\n   */\n  public clear() {\n    this._handlers = {};\n    this._wiredEventDispatchers = [];\n  }\n\n  /**\n   * Emits an event for target\n   * @param eventName  The name of the event to publish\n   * @param event      Optionally pass an event data object to the handler\n   */\n  public emit(eventName: string, event: GameEvent<T>) {\n    if (!eventName) {\n      // key not mapped\n      return;\n    }\n    eventName = eventName.toLowerCase();\n    const target = this._target;\n    if (!event) {\n      event = new GameEvent();\n    }\n    event.target = target;\n\n    let i: number, len: number;\n\n    if (this._handlers[eventName]) {\n      i = 0;\n      len = this._handlers[eventName].length;\n\n      for (i; i < len; i++) {\n        this._handlers[eventName][i].call(target, event);\n      }\n    }\n\n    i = 0;\n    len = this._wiredEventDispatchers.length;\n\n    for (i; i < len; i++) {\n      this._wiredEventDispatchers[i].emit(eventName, event);\n    }\n  }\n\n  /**\n   * Subscribe an event handler to a particular event name, multiple handlers per event name are allowed.\n   * @param eventName  The name of the event to subscribe to\n   * @param handler    The handler callback to fire on this event\n   */\n  public on(eventName: string, handler: (event: GameEvent<T>) => void) {\n    eventName = eventName.toLowerCase();\n    if (!this._handlers[eventName]) {\n      this._handlers[eventName] = [];\n    }\n    this._handlers[eventName].push(handler);\n\n    // meta event handlers\n    if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\n      this.emit('subscribe', new SubscribeEvent(eventName, handler));\n    }\n  }\n\n  /**\n   * Unsubscribe an event handler(s) from an event. If a specific handler\n   * is specified for an event, only that handler will be unsubscribed.\n   * Otherwise all handlers will be unsubscribed for that event.\n   *\n   * @param eventName  The name of the event to unsubscribe\n   * @param handler    Optionally the specific handler to unsubscribe\n   *\n   */\n  public off(eventName: string, handler?: (event: GameEvent<T>) => void) {\n    eventName = eventName.toLowerCase();\n    const eventHandlers = this._handlers[eventName];\n\n    if (eventHandlers) {\n      // if no explicit handler is give with the event name clear all handlers\n      if (!handler) {\n        this._handlers[eventName].length = 0;\n      } else {\n        const index = eventHandlers.indexOf(handler);\n        this._handlers[eventName].splice(index, 1);\n      }\n    }\n    // meta event handlers\n    if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\n      this.emit('unsubscribe', new UnsubscribeEvent(eventName, handler));\n    }\n  }\n\n  /**\n   * Once listens to an event one time, then unsubscribes from that event\n   *\n   * @param eventName The name of the event to subscribe to once\n   * @param handler   The handler of the event that will be auto unsubscribed\n   */\n  public once(eventName: string, handler: (event: GameEvent<T>) => void) {\n    const metaHandler = (event: GameEvent<T>) => {\n      const ev = event || new GameEvent();\n      ev.target = ev.target || this._target;\n\n      this.off(eventName, handler);\n      handler.call(ev.target, ev);\n    };\n\n    this.on(eventName, metaHandler);\n  }\n\n  /**\n   * Wires this event dispatcher to also receive events from another\n   */\n  public wire(eventDispatcher: EventDispatcher): void {\n    eventDispatcher._wiredEventDispatchers.push(this);\n  }\n\n  /**\n   * Unwires this event dispatcher from another\n   */\n  public unwire(eventDispatcher: EventDispatcher): void {\n    const index = eventDispatcher._wiredEventDispatchers.indexOf(this);\n    if (index > -1) {\n      eventDispatcher._wiredEventDispatchers.splice(index, 1);\n    }\n  }\n}\n","import { GameEvent } from './Events';\nimport { EventDispatcher } from './EventDispatcher';\nimport { Eventable } from './Interfaces/Evented';\n\n/**\n * Excalibur base class that provides basic functionality such as [[EventDispatcher]]\n * and extending abilities for vanilla Javascript projects\n */\nexport class Class implements Eventable {\n  /**\n   * Direct access to the game object event dispatcher.\n   */\n  public eventDispatcher: EventDispatcher;\n\n  constructor() {\n    this.eventDispatcher = new EventDispatcher(this);\n  }\n\n  /**\n   * Alias for `addEventListener`. You can listen for a variety of\n   * events off of the engine; see the events section below for a complete list.\n   * @param eventName  Name of the event to listen for\n   * @param handler    Event handler for the thrown event\n   */\n  public on(eventName: string, handler: (event: GameEvent<any>) => void) {\n    this.eventDispatcher.on(eventName, handler);\n  }\n\n  /**\n   * Alias for `removeEventListener`. If only the eventName is specified\n   * it will remove all handlers registered for that specific event. If the eventName\n   * and the handler instance are specified only that handler will be removed.\n   *\n   * @param eventName  Name of the event to listen for\n   * @param handler    Event handler for the thrown event\n   */\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void) {\n    this.eventDispatcher.off(eventName, handler);\n  }\n\n  /**\n   * Emits a new event\n   * @param eventName   Name of the event to emit\n   * @param eventObject Data associated with this event\n   */\n  public emit(eventName: string, eventObject: GameEvent<any>) {\n    this.eventDispatcher.emit(eventName, eventObject);\n  }\n\n  /**\n   * Once listens to an event one time, then unsubscribes from that event\n   *\n   * @param eventName The name of the event to subscribe to once\n   * @param handler   The handler of the event that will be auto unsubscribed\n   */\n  public once(eventName: string, handler: (event: GameEvent<any>) => void) {\n    this.eventDispatcher.once(eventName, handler);\n  }\n}\n","import { Loadable } from '../Interfaces/Loadable';\nimport { Class } from '../Class';\nimport { Engine } from '../Engine';\nimport { Logger } from '../Util/Log';\n\n/**\n * The [[Resource]] type allows games built in Excalibur to load generic resources.\n * For any type of remote resource it is recommended to use [[Resource]] for preloading.\n *\n * [[include:Resources.md]]\n */\nexport class Resource<T> extends Class implements Loadable<T> {\n  public data: T = null;\n  public logger: Logger = Logger.getInstance();\n  public arrayBuffer: ArrayBuffer = null;\n\n  /**\n   * @param path          Path to the remote resource\n   * @param responseType  The type to expect as a response: \"\" | \"arraybuffer\" | \"blob\" | \"document\" | \"json\" | \"text\";\n   * @param bustCache     Whether or not to cache-bust requests\n   */\n  constructor(\n    public path: string,\n    public responseType: '' | 'arraybuffer' | 'blob' | 'document' | 'json' | 'text',\n    public bustCache: boolean = true\n  ) {\n    super();\n  }\n\n  /**\n   * Returns true if the Resource is completely loaded and is ready\n   * to be used.\n   */\n  public isLoaded(): boolean {\n    return this.data !== null;\n  }\n\n  public wireEngine(_engine: Engine) {\n    // override me\n  }\n\n  private _cacheBust(uri: string): string {\n    const query: RegExp = /\\?\\w*=\\w*/;\n    if (query.test(uri)) {\n      uri += '&__=' + Date.now();\n    } else {\n      uri += '?__=' + Date.now();\n    }\n    return uri;\n  }\n\n  private _start() {\n    this.logger.debug('Started loading resource ' + this.path);\n  }\n\n  /**\n   * Begin loading the resource and returns a promise to be resolved on completion\n   */\n  public load(): Promise<T> {\n    return new Promise((resolve, reject) => {\n      // Exit early if we already have data\n      if (this.data !== null) {\n        this.logger.debug('Already have data for resource', this.path);\n        resolve(this.data);\n        this.oncomplete();\n        return;\n      }\n\n      const request = new XMLHttpRequest();\n      request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\n      request.responseType = this.responseType;\n      request.onloadstart = () => {\n        this._start();\n      };\n      request.onprogress = this.onprogress;\n      request.onerror = this.onerror;\n      request.onload = () => {\n        // XHR on file:// success status is 0, such as with PhantomJS\n        if (request.status !== 0 && request.status !== 200) {\n          this.logger.error('Failed to load resource ', this.path, ' server responded with error code', request.status);\n          this.onerror(request.response);\n          reject(request.response);\n          return;\n        }\n\n        this.data = this.processData(request.response);\n\n        this.oncomplete();\n        this.logger.debug('Completed loading resource', this.path);\n        resolve(this.data);\n      };\n      request.send();\n    });\n  }\n\n  /**\n   * Returns the loaded data once the resource is loaded\n   */\n  public getData(): any {\n    return this.data;\n  }\n\n  public getArrayData(): any {\n    return this.arrayBuffer;\n  }\n\n  /**\n   * Sets the data for this resource directly\n   */\n  public setData(data: any) {\n    this.data = this.processData(data);\n  }\n\n  /**\n   * This method is meant to be overriden to handle any additional\n   * processing. Such as decoding downloaded audio bits.\n   */\n  public processData(data: T): any {\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType\n    // Blob requires an object url\n    if (this.responseType === 'blob') {\n      return URL.createObjectURL(data);\n    }\n    return data;\n  }\n\n  public onprogress: (e: any) => void = () => {\n    return;\n  };\n\n  public oncomplete: () => void = () => {\n    return;\n  };\n\n  public onerror: (e: any) => void = () => {\n    return;\n  };\n}\n","import { obsolete } from '../Util/Decorators';\n\n/**\n * Provides standard colors (e.g. [[Color.Black]])\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\n * useful color operations like [[Color.lighten]], [[Color.darken]], and more.\n *\n * [[include:Colors.md]]\n */\nexport class Color {\n  /**\n   * Red channel (between 0 and 255)\n   */\n  public r: number;\n  /**\n   * Green channel (between 0 and 255)\n   */\n  public g: number;\n  /**\n   * Blue channel (between 0 and 255)\n   */\n  public b: number;\n  /**\n   * Alpha channel (between 0 and 1)\n   */\n  public a: number;\n\n  /**\n   * Hue\n   */\n  public h: number;\n  /**\n   * Saturation\n   */\n  public s: number;\n  /**\n   * Lightness\n   */\n  public l: number;\n\n  /**\n   * Creates a new instance of Color from an r, g, b, a\n   *\n   * @param r  The red component of color (0-255)\n   * @param g  The green component of color (0-255)\n   * @param b  The blue component of color (0-255)\n   * @param a  The alpha component of color (0-1.0)\n   */\n  constructor(r: number, g: number, b: number, a?: number) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a != null ? a : 1;\n  }\n\n  /**\n   * Creates a new instance of Color from an r, g, b, a\n   *\n   * @param r  The red component of color (0-255)\n   * @param g  The green component of color (0-255)\n   * @param b  The blue component of color (0-255)\n   * @param a  The alpha component of color (0-1.0)\n   */\n  public static fromRGB(r: number, g: number, b: number, a?: number): Color {\n    return new Color(r, g, b, a);\n  }\n\n  /**\n   * Creates a new instance of Color from a hex string\n   *\n   * @param hex  CSS color string of the form #ffffff, the alpha component is optional\n   */\n  public static fromHex(hex: string): Color {\n    const hexRegEx: RegExp = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\n    let match = null;\n    if ((match = hex.match(hexRegEx))) {\n      const r = parseInt(match[1], 16);\n      const g = parseInt(match[2], 16);\n      const b = parseInt(match[3], 16);\n      let a = 1;\n      if (match[4]) {\n        a = parseInt(match[4], 16) / 255;\n      }\n      return new Color(r, g, b, a);\n    } else {\n      throw new Error('Invalid hex string: ' + hex);\n    }\n  }\n\n  /**\n   * Creates a new instance of Color from hsla values\n   *\n   * @param h  Hue is represented [0-1]\n   * @param s  Saturation is represented [0-1]\n   * @param l  Luminance is represented [0-1]\n   * @param a  Alpha is represented [0-1]\n   */\n  public static fromHSL(h: number, s: number, l: number, a: number = 1.0): Color {\n    const temp = new HSLColor(h, s, l, a);\n    return temp.toRGBA();\n  }\n\n  /**\n   * Lightens the current color by a specified amount\n   *\n   * @param factor  The amount to lighten by [0-1]\n   */\n  public lighten(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.l += (1 - temp.l) * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Darkens the current color by a specified amount\n   *\n   * @param factor  The amount to darken by [0-1]\n   */\n  public darken(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.l -= temp.l * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Saturates the current color by a specified amount\n   *\n   * @param factor  The amount to saturate by [0-1]\n   */\n  public saturate(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.s += temp.s * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Desaturates the current color by a specified amount\n   *\n   * @param factor  The amount to desaturate by [0-1]\n   */\n  public desaturate(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.s -= temp.s * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Multiplies a color by another, results in a darker color\n   *\n   * @param color  The other color\n   */\n  public multiply(color: Color): Color {\n    const newR = (((color.r / 255) * this.r) / 255) * 255;\n    const newG = (((color.g / 255) * this.g) / 255) * 255;\n    const newB = (((color.b / 255) * this.b) / 255) * 255;\n    const newA = color.a * this.a;\n    return new Color(newR, newG, newB, newA);\n  }\n\n  /**\n   * Multiplies a color by another, results in a darker color\n   * @param color\n   * @obsolete Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0\n   */\n  @obsolete({ message: 'Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0' })\n  public mulitiply(color: Color): Color {\n    return this.multiply(color);\n  }\n\n  /**\n   * Screens a color by another, results in a lighter color\n   *\n   * @param color  The other color\n   */\n  public screen(color: Color): Color {\n    const color1 = color.invert();\n    const color2 = color.invert();\n    return color1.multiply(color2).invert();\n  }\n\n  /**\n   * Inverts the current color\n   */\n  public invert(): Color {\n    return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\n  }\n\n  /**\n   * Averages the current color with another\n   *\n   * @param color  The other color\n   */\n  public average(color: Color): Color {\n    const newR = (color.r + this.r) / 2;\n    const newG = (color.g + this.g) / 2;\n    const newB = (color.b + this.b) / 2;\n    const newA = (color.a + this.a) / 2;\n    return new Color(newR, newG, newB, newA);\n  }\n\n  /**\n   * Returns a CSS string representation of a color.\n   *\n   * @param format Color representation, accepts: rgb, hsl, or hex\n   */\n  public toString(format: 'rgb' | 'hsl' | 'hex' = 'rgb') {\n    switch (format) {\n      case 'rgb':\n        return this.toRGBA();\n      case 'hsl':\n        return this.toHSLA();\n      case 'hex':\n        return this.toHex();\n      default:\n        throw new Error('Invalid Color format');\n    }\n  }\n\n  /**\n   * Returns Hex Value of a color component\n   * @param c color component\n   * @see https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n   */\n  private _componentToHex(c: number) {\n    const hex = c.toString(16);\n    return hex.length === 1 ? '0' + hex : hex;\n  }\n\n  /**\n   * Return Hex representation of a color.\n   */\n  public toHex() {\n    return '#' + this._componentToHex(this.r) + this._componentToHex(this.g) + this._componentToHex(this.b);\n  }\n\n  /**\n   * Return RGBA representation of a color.\n   */\n  public toRGBA() {\n    const result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\n    if (this.a !== undefined || this.a !== null) {\n      return 'rgba(' + result + ', ' + String(this.a) + ')';\n    }\n    return 'rgb(' + result + ')';\n  }\n\n  /**\n   * Return HSLA representation of a color.\n   */\n  public toHSLA() {\n    return HSLColor.fromRGBA(this.r, this.g, this.b, this.a).toString();\n  }\n\n  /**\n   * Returns a CSS string representation of a color.\n   */\n  public fillStyle() {\n    return this.toString();\n  }\n\n  /**\n   * Returns a clone of the current color.\n   */\n  public clone(): Color {\n    return new Color(this.r, this.g, this.b, this.a);\n  }\n\n  /**\n   * Black (#000000)\n   */\n  public static get Black(): Color {\n    return Color.fromHex('#000000');\n  }\n\n  /**\n   * White (#FFFFFF)\n   */\n  public static get White(): Color {\n    return Color.fromHex('#FFFFFF');\n  }\n\n  /**\n   * Gray (#808080)\n   */\n  public static get Gray(): Color {\n    return Color.fromHex('#808080');\n  }\n\n  /**\n   * Light gray (#D3D3D3)\n   */\n  public static get LightGray(): Color {\n    return Color.fromHex('#D3D3D3');\n  }\n\n  /**\n   * Dark gray (#A9A9A9)\n   */\n  public static get DarkGray(): Color {\n    return Color.fromHex('#A9A9A9');\n  }\n\n  /**\n   * Yellow (#FFFF00)\n   */\n  public static get Yellow(): Color {\n    return Color.fromHex('#FFFF00');\n  }\n\n  /**\n   * Orange (#FFA500)\n   */\n  public static get Orange(): Color {\n    return Color.fromHex('#FFA500');\n  }\n\n  /**\n   * Red (#FF0000)\n   */\n  public static get Red(): Color {\n    return Color.fromHex('#FF0000');\n  }\n\n  /**\n   * Vermilion (#FF5B31)\n   */\n  public static get Vermilion(): Color {\n    return Color.fromHex('#FF5B31');\n  }\n\n  /**\n   * Vermilion (#FF5B31)\n   * @obsolete Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0\n   */\n  @obsolete({\n    message: 'Alias for incorrect spelling used in older versions',\n    alternateMethod: 'Vermilion'\n  })\n  public static get Vermillion(): Color {\n    return Color.Vermilion;\n  }\n\n  /**\n   * Rose (#FF007F)\n   */\n  public static get Rose(): Color {\n    return Color.fromHex('#FF007F');\n  }\n\n  /**\n   * Magenta (#FF00FF)\n   */\n  public static get Magenta(): Color {\n    return Color.fromHex('#FF00FF');\n  }\n\n  /**\n   * Violet (#7F00FF)\n   */\n  public static get Violet(): Color {\n    return Color.fromHex('#7F00FF');\n  }\n\n  /**\n   * Blue (#0000FF)\n   */\n  public static get Blue(): Color {\n    return Color.fromHex('#0000FF');\n  }\n\n  /**\n   * Azure (#007FFF)\n   */\n  public static get Azure(): Color {\n    return Color.fromHex('#007FFF');\n  }\n\n  /**\n   * Cyan (#00FFFF)\n   */\n  public static get Cyan(): Color {\n    return Color.fromHex('#00FFFF');\n  }\n\n  /**\n   * Viridian (#59978F)\n   */\n  public static get Viridian(): Color {\n    return Color.fromHex('#59978F');\n  }\n\n  /**\n   * Green (#00FF00)\n   */\n  public static get Green(): Color {\n    return Color.fromHex('#00FF00');\n  }\n\n  /**\n   * Chartreuse (#7FFF00)\n   */\n  public static get Chartreuse(): Color {\n    return Color.fromHex('#7FFF00');\n  }\n\n  /**\n   * Transparent (#FFFFFF00)\n   */\n  public static get Transparent(): Color {\n    return Color.fromHex('#FFFFFF00');\n  }\n\n  /**\n   * ExcaliburBlue (#176BAA)\n   */\n  public static get ExcaliburBlue(): Color {\n    return Color.fromHex('#176BAA');\n  }\n}\n\n/**\n * Internal HSL Color representation\n *\n * http://en.wikipedia.org/wiki/HSL_and_HSV\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\n */\nclass HSLColor {\n  constructor(public h: number, public s: number, public l: number, public a: number) {}\n\n  public static hue2rgb(p: number, q: number, t: number): number {\n    if (t < 0) {\n      t += 1;\n    }\n    if (t > 1) {\n      t -= 1;\n    }\n    if (t < 1 / 6) {\n      return p + (q - p) * 6 * t;\n    }\n    if (t < 1 / 2) {\n      return q;\n    }\n    if (t < 2 / 3) {\n      return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n  }\n\n  public static fromRGBA(r: number, g: number, b: number, a: number): HSLColor {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const max = Math.max(r, g, b),\n      min = Math.min(r, g, b);\n    let h, s;\n    const l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0; // achromatic\n    } else {\n      const d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n\n    return new HSLColor(h, s, l, a);\n  }\n\n  public toRGBA(): Color {\n    let r: number, g: number, b: number;\n\n    if (this.s === 0) {\n      r = g = b = this.l; // achromatic\n    } else {\n      const q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\n      const p = 2 * this.l - q;\n      r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\n      g = HSLColor.hue2rgb(p, q, this.h);\n      b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\n    }\n\n    return new Color(r * 255, g * 255, b * 255, this.a);\n  }\n\n  public toString(): string {\n    const h = this.h.toFixed(0),\n      s = this.s.toFixed(0),\n      l = this.l.toFixed(0),\n      a = this.a.toFixed(0);\n    return `hsla(${h}, ${s}, ${l}, ${a})`;\n  }\n}\n","/**\n * These effects can be applied to any bitmap image but are mainly used\n * for [[Sprite]] effects or [[Animation]] effects.\n *\n * [[include:SpriteEffects.md]]\n */\n\n/**\n * @typedoc\n */\n\nimport { Color } from './Color';\n\n/**\n * The interface that all sprite effects must implement\n */\nexport interface SpriteEffect {\n  /**\n   * Should update individual pixels values\n   * @param x          The pixel's x coordinate\n   * @param y          The pixel's y coordinate\n   * @param imageData  The sprite's raw pixel data\n   */\n  updatePixel(x: number, y: number, imageData: ImageData): void;\n}\n\n/**\n * Applies the \"Grayscale\" effect to a sprite, removing color information.\n */\nexport class Grayscale implements SpriteEffect {\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const avg = (pixel[firstPixel + 0] + pixel[firstPixel + 1] + pixel[firstPixel + 2]) / 3;\n    pixel[firstPixel + 0] = avg;\n    pixel[firstPixel + 1] = avg;\n    pixel[firstPixel + 2] = avg;\n  }\n}\n\n/**\n * Applies the \"Invert\" effect to a sprite, inverting the pixel colors.\n */\nexport class Invert implements SpriteEffect {\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    pixel[firstPixel + 0] = 255 - pixel[firstPixel + 0];\n    pixel[firstPixel + 1] = 255 - pixel[firstPixel + 1];\n    pixel[firstPixel + 2] = 255 - pixel[firstPixel + 2];\n  }\n}\n\n/**\n * Applies the \"Opacity\" effect to a sprite, setting the alpha of all pixels to a given value.\n */\nexport class Opacity implements SpriteEffect {\n  /**\n   * @param opacity  The new opacity of the sprite from 0-1.0\n   */\n  constructor(public opacity: number) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    if (pixel[firstPixel + 3] !== 0) {\n      pixel[firstPixel + 3] = Math.round(this.opacity * pixel[firstPixel + 3]);\n    }\n  }\n}\n\n/**\n * Applies the \"Colorize\" effect to a sprite, changing the color channels of all the pixels to an\n * average of the original color and the provided color\n */\nexport class Colorize implements SpriteEffect {\n  /**\n   * @param color  The color to apply to the sprite\n   */\n  constructor(public color: Color) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    if (pixel[firstPixel + 3] !== 0) {\n      pixel[firstPixel + 0] = (pixel[firstPixel + 0] + this.color.r) / 2;\n      pixel[firstPixel + 1] = (pixel[firstPixel + 1] + this.color.g) / 2;\n      pixel[firstPixel + 2] = (pixel[firstPixel + 2] + this.color.b) / 2;\n    }\n  }\n}\n\n/**\n * Applies the \"Lighten\" effect to a sprite, changes the lightness of the color according to HSL\n */\nexport class Lighten implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).lighten(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Darken\" effect to a sprite, changes the darkness of the color according to HSL\n */\nexport class Darken implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).darken(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Saturate\" effect to a sprite, saturates the color according to HSL\n */\nexport class Saturate implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).saturate(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Desaturate\" effect to a sprite, desaturates the color according to HSL\n */\nexport class Desaturate implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).desaturate(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Fill\" effect to a sprite, changing the color channels of all non-transparent pixels to match\n * a given color\n */\nexport class Fill implements SpriteEffect {\n  /**\n   * @param color  The color to apply to the sprite\n   */\n  constructor(public color: Color) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    if (pixel[firstPixel + 3] !== 0) {\n      pixel[firstPixel + 0] = this.color.r;\n      pixel[firstPixel + 1] = this.color.g;\n      pixel[firstPixel + 2] = this.color.b;\n    }\n  }\n}\n","export type Constructor<T> = {\n  new (...args: any[]): T;\n};\nexport function Configurable<T extends Constructor<{}>>(base: T): T {\n  return class extends base {\n    public assign(props: Partial<T>) {\n      //set the value of every property that was passed in,\n      //if the constructor previously set this value, it will be overridden here\n      for (const k in props) {\n        // eslint-disable-next-line\n        if (typeof (<any>this)[k] !== 'function') {\n          // eslint-disable-next-line\n          (<any>this)[k] = (<any>props)[k];\n        }\n      }\n    }\n\n    constructor(...args: any[]) {\n      super(...args);\n      //get the number of arguments that aren't undefined. TS passes a value to all parameters\n      //of whatever ctor is the implementation, so args.length doesn't work here.\n      const size = args.filter(function(value) {\n        return value !== undefined;\n      }).length;\n      if (size === 1 && args[0] && typeof args[0] === 'object' && !(args[0] instanceof Array)) {\n        this.assign(args[0]);\n      }\n    }\n  };\n}\n","import * as Effects from './SpriteEffects';\nimport { Color } from './Color';\n\nimport { Drawable, DrawOptions } from '../Interfaces/Drawable';\nimport { Texture } from '../Resources/Texture';\nimport { Vector } from '../Algebra';\nimport { Logger } from '../Util/Log';\nimport { clamp, nullish } from '../Util/Util';\nimport { Configurable } from '../Configurable';\n\n/**\n * @hidden\n */\nexport class SpriteImpl implements Drawable {\n  private static __ID = 0;\n  public id: number = SpriteImpl.__ID++;\n  private _texture: Texture;\n\n  public x: number = 0;\n  public y: number = 0;\n\n  public get drawWidth(): number {\n    return this.width * this.scale.x;\n  }\n\n  public get drawHeight(): number {\n    return this.height * this.scale.y;\n  }\n\n  public rotation: number = 0.0;\n  public anchor: Vector = new Vector(0.0, 0.0);\n  public offset: Vector = Vector.Zero;\n  public scale: Vector = Vector.One;\n\n  public logger: Logger = Logger.getInstance();\n\n  /**\n   * Draws the sprite flipped vertically\n   */\n  public flipVertical: boolean = false;\n\n  /**\n   * Draws the sprite flipped horizontally\n   */\n  public flipHorizontal: boolean = false;\n\n  public effects: Effects.SpriteEffect[] = [];\n\n  public width: number = 0;\n  public height: number = 0;\n\n  private _spriteCanvas: HTMLCanvasElement = null;\n  private _spriteCtx: CanvasRenderingContext2D = null;\n  private _pixelData: ImageData = null;\n  private _pixelsLoaded: boolean = false;\n  private _dirtyEffect: boolean = true;\n\n  // private __dirtyEffect: boolean = true;\n  // private get _dirtyEffect() {\n  //   return this.__dirtyEffect;\n  // }\n\n  // private set _dirtyEffect(value) {\n  //   this.__dirtyEffect = value;\n  // }\n\n  /**\n   * @param image   The backing image texture to build the Sprite\n   * @param x      The x position of the sprite\n   * @param y      The y position of the sprite\n   * @param width  The width of the sprite in pixels\n   * @param height The height of the sprite in pixels\n   */\n  constructor(imageOrConfig: Texture | SpriteArgs, x: number, y: number, width: number, height: number) {\n    let image = imageOrConfig;\n    if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\n      x = imageOrConfig.x | 0;\n      y = imageOrConfig.y | 0;\n      width = imageOrConfig.width | 0;\n      height = imageOrConfig.height | 0;\n      image = imageOrConfig.image;\n      if (!image) {\n        const message = 'An image texture is required to contsruct a sprite';\n        throw new Error(message);\n      }\n    }\n\n    this.x = x || 0;\n    this.y = y || 0;\n\n    this._texture = <Texture>image;\n    this._spriteCanvas = document.createElement('canvas');\n    this._spriteCtx = <CanvasRenderingContext2D>this._spriteCanvas.getContext('2d'); // eslint-disable-line\n    this._spriteCanvas.width = width;\n    this._spriteCanvas.height = height;\n    // let me = this;\n    // this._texture.onLoaded = () => {\n    //   me.width = this.width || this._texture.image.naturalWidth;\n    //   me.height = this.height || this._texture.image.naturalHeight;\n    //   me._spriteCanvas.width = this._spriteCanvas.width || this._texture.image.naturalWidth;\n    //   me._spriteCanvas.height = this._spriteCanvas.height || this._texture.image.naturalHeight;\n    //   me._loadPixels();\n    //   // this._applyEffects();\n    //   me._dirtyEffect = true;\n    // };\n    this._texture.loaded\n      .then(() => {\n        this.width = this.width || this._texture.image.naturalWidth;\n        this.height = this.height || this._texture.image.naturalHeight;\n        this._spriteCanvas.width = this._spriteCanvas.width || this._texture.image.naturalWidth;\n        this._spriteCanvas.height = this._spriteCanvas.height || this._texture.image.naturalHeight;\n        this._loadPixels();\n        this._dirtyEffect = true;\n      })\n      .catch((e) => {\n        this.logger.error('Error loading texture ', this._texture.path, e);\n      });\n\n    this.width = width;\n    this.height = height;\n  }\n\n  private _loadPixels() {\n    if (this._texture.isLoaded() && !this._pixelsLoaded) {\n      const naturalWidth = this._texture.image.naturalWidth || 0;\n      const naturalHeight = this._texture.image.naturalHeight || 0;\n\n      if (this.width > naturalWidth) {\n        this.logger.warn(`The sprite width ${this.width} exceeds the width \n                              ${naturalWidth} of the backing texture ${this._texture.path}`);\n      }\n\n      if (this.width <= 0 || naturalWidth <= 0) {\n        throw new Error(`The width of a sprite cannot be 0 or negative, sprite width: ${this.width}, original width: ${naturalWidth}`);\n      }\n\n      if (this.height > naturalHeight) {\n        this.logger.warn(`The sprite height ${this.height} exceeds the height \n                              ${naturalHeight} of the backing texture ${this._texture.path}`);\n      }\n\n      if (this.height <= 0 || naturalHeight <= 0) {\n        throw new Error(`The height of a sprite cannot be 0 or negative, sprite height: ${this.height}, original height: ${naturalHeight}`);\n      }\n\n      this._spriteCtx.drawImage(\n        this._texture.image,\n        clamp(this.x, 0, naturalWidth),\n        clamp(this.y, 0, naturalHeight),\n        clamp(this.width, 0, naturalWidth),\n        clamp(this.height, 0, naturalHeight),\n        0,\n        0,\n        this.width,\n        this.height\n      );\n\n      this._pixelsLoaded = true;\n    }\n  }\n\n  private _opacity: number = 1;\n  /**\n   * Applies the [[Opacity]] effect to a sprite, setting the alpha of all pixels to a given value\n   */\n  public opacity(value: number) {\n    this._opacity = value;\n    // this.addEffect(new Effects.Opacity(value));\n  }\n\n  /**\n   * Applies the [[Grayscale]] effect to a sprite, removing color information.\n   */\n  public grayscale() {\n    this.addEffect(new Effects.Grayscale());\n  }\n\n  /**\n   * Applies the [[Invert]] effect to a sprite, inverting the pixel colors.\n   */\n  public invert() {\n    this.addEffect(new Effects.Invert());\n  }\n\n  /**\n   * Applies the [[Fill]] effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\n   */\n  public fill(color: Color) {\n    this.addEffect(new Effects.Fill(color));\n  }\n\n  /**\n   * Applies the [[Colorize]] effect to a sprite, changing the color channels of all pixels to be the average of the original color\n   * and the provided color.\n   */\n  public colorize(color: Color) {\n    this.addEffect(new Effects.Colorize(color));\n  }\n\n  /**\n   * Applies the [[Lighten]] effect to a sprite, changes the lightness of the color according to HSL\n   */\n  public lighten(factor: number = 0.1) {\n    this.addEffect(new Effects.Lighten(factor));\n  }\n\n  /**\n   * Applies the [[Darken]] effect to a sprite, changes the darkness of the color according to HSL\n   */\n  public darken(factor: number = 0.1) {\n    this.addEffect(new Effects.Darken(factor));\n  }\n\n  /**\n   * Applies the [[Saturate]] effect to a sprite, saturates the color according to HSL\n   */\n  public saturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Saturate(factor));\n  }\n\n  /**\n   * Applies the [[Desaturate]] effect to a sprite, desaturates the color according to HSL\n   */\n  public desaturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Desaturate(factor));\n  }\n\n  /**\n   * Adds a new [[SpriteEffect]] to this drawing.\n   * @param effect  Effect to add to the this drawing\n   */\n  public addEffect(effect: Effects.SpriteEffect) {\n    this.effects.push(effect);\n    // We must check if the texture and the backing sprite pixels are loaded as well before\n    // an effect can be applied\n    if (!this._texture.isLoaded() || !this._pixelsLoaded) {\n      this._dirtyEffect = true;\n    } else {\n      this._applyEffects();\n    }\n  }\n\n  /**\n   * Removes a [[SpriteEffect]] from this sprite.\n   * @param effect  Effect to remove from this sprite\n   */\n  public removeEffect(effect: Effects.SpriteEffect): void;\n\n  /**\n   * Removes an effect given the index from this sprite.\n   * @param index  Index of the effect to remove from this sprite\n   */\n  public removeEffect(index: number): void;\n  public removeEffect(param: any) {\n    let indexToRemove = -1;\n    if (typeof param === 'number') {\n      indexToRemove = param;\n    } else {\n      indexToRemove = this.effects.indexOf(param);\n    }\n\n    // bounds check\n    if (indexToRemove < 0 || indexToRemove >= this.effects.length) {\n      return;\n    }\n\n    this.effects.splice(indexToRemove, 1);\n\n    // We must check if the texture and the backing sprite pixels are loaded as well before\n    // an effect can be applied\n    if (!this._texture.isLoaded() || !this._pixelsLoaded) {\n      this._dirtyEffect = true;\n    } else {\n      this._applyEffects();\n    }\n  }\n\n  private _applyEffects() {\n    const naturalWidth = this._texture.image.naturalWidth || 0;\n    const naturalHeight = this._texture.image.naturalHeight || 0;\n\n    this._spriteCtx.clearRect(0, 0, this.width, this.height);\n    this._spriteCtx.drawImage(\n      this._texture.image,\n      clamp(this.x, 0, naturalWidth),\n      clamp(this.y, 0, naturalHeight),\n      clamp(this.width, 0, naturalWidth),\n      clamp(this.height, 0, naturalHeight),\n      0,\n      0,\n      this.width,\n      this.height\n    );\n    this._pixelData = this._spriteCtx.getImageData(0, 0, this.width, this.height);\n\n    const len = this.effects.length;\n    for (let i = 0; i < len; i++) {\n      for (let y = 0; y < this.height; y++) {\n        for (let x = 0; x < this.width; x++) {\n          this.effects[i].updatePixel(x, y, this._pixelData);\n        }\n      }\n    }\n    this._spriteCtx.clearRect(0, 0, this.width, this.height);\n    this._spriteCtx.putImageData(this._pixelData, 0, 0);\n\n    this._dirtyEffect = false;\n  }\n\n  /**\n   * Clears all effects from the drawing and return it to its original state.\n   */\n  public clearEffects() {\n    this.effects.length = 0;\n    this._applyEffects();\n  }\n\n  /**\n   * Resets the internal state of the drawing (if any)\n   */\n  public reset() {\n    // do nothing\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D, x: number, y: number) {\n    ctx.save();\n    ctx.translate(x, y);\n    ctx.rotate(this.rotation);\n    const xpoint = this.drawWidth * this.anchor.x;\n    const ypoint = this.drawHeight * this.anchor.y;\n\n    ctx.strokeStyle = Color.Black.toString();\n    ctx.strokeRect(-xpoint, -ypoint, this.drawWidth, this.drawHeight);\n    ctx.restore();\n  }\n\n  /**\n   * Draws the sprite appropriately to the 2D rendering context, at an x and y coordinate.\n   * @param ctx  The 2D rendering context\n   * @param x    The x coordinate of where to draw\n   * @param y    The y coordinate of where to draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number): void;\n  /**\n   * Draws the sprite with custom options to override internals without mutating them.\n   * @param options\n   */\n  public draw(options: DrawOptions): void;\n  public draw(ctxOrOptions: CanvasRenderingContext2D | DrawOptions, x?: number, y?: number): void {\n    if (ctxOrOptions instanceof CanvasRenderingContext2D) {\n      this._drawWithOptions({ ctx: ctxOrOptions, x, y });\n    } else {\n      this._drawWithOptions(ctxOrOptions);\n    }\n  }\n\n  private _drawWithOptions(options: DrawOptions) {\n    const { ctx, x, y, rotation, drawWidth, drawHeight, anchor, offset, opacity, flipHorizontal, flipVertical } = {\n      ...options,\n      rotation: nullish(options.rotation, this.rotation),\n      drawWidth: nullish(options.drawWidth, this.drawWidth),\n      drawHeight: nullish(options.drawHeight, this.drawHeight),\n      flipHorizontal: nullish(options.flipHorizontal, this.flipHorizontal),\n      flipVertical: nullish(options.flipVertical, this.flipVertical),\n      anchor: nullish(options.anchor, this.anchor),\n      offset: nullish(options.offset, this.offset),\n      opacity: nullish(options.opacity, this._opacity)\n    };\n\n    if (this._dirtyEffect) {\n      this._applyEffects();\n    }\n\n    // calculating current dimensions\n    ctx.save();\n    const xpoint = drawWidth * anchor.x + offset.x;\n    const ypoint = drawHeight * anchor.y + offset.y;\n    ctx.translate(x, y);\n    ctx.rotate(rotation);\n\n    // todo cache flipped sprites\n    if (flipHorizontal) {\n      ctx.translate(drawWidth, 0);\n      ctx.scale(-1, 1);\n    }\n\n    if (flipVertical) {\n      ctx.translate(0, drawHeight);\n      ctx.scale(1, -1);\n    }\n\n    const oldAlpha = ctx.globalAlpha;\n    ctx.globalAlpha = nullish(opacity, 1);\n    ctx.drawImage(this._spriteCanvas, 0, 0, this.width, this.height, -xpoint, -ypoint, drawWidth, drawHeight);\n    ctx.globalAlpha = oldAlpha;\n\n    ctx.restore();\n  }\n\n  /**\n   * Produces a copy of the current sprite\n   */\n  public clone(): SpriteImpl {\n    const result = new Sprite(this._texture, this.x, this.y, this.width, this.height);\n    result.scale = this.scale.clone();\n    result.rotation = this.rotation;\n    result.flipHorizontal = this.flipHorizontal;\n    result.flipVertical = this.flipVertical;\n\n    const len = this.effects.length;\n    for (let i = 0; i < len; i++) {\n      result.addEffect(this.effects[i]);\n    }\n    return result;\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface SpriteArgs extends Partial<SpriteImpl> {\n  image?: Texture;\n  x?: number;\n  width?: number;\n  height?: number;\n  rotation?: number;\n  anchor?: Vector;\n  scale?: Vector;\n  flipVertical?: boolean;\n  flipHorizontal?: boolean;\n}\n\n/**\n * A [[Sprite]] is one of the main drawing primitives. It is responsible for drawing\n * images or parts of images from a [[Texture]] resource to the screen.\n *\n * [[include:Sprites.md]]\n */\nexport class Sprite extends Configurable(SpriteImpl) {\n  constructor(config: SpriteArgs);\n  constructor(image: Texture, x: number, y: number, width: number, height: number);\n  constructor(imageOrConfig: Texture | SpriteArgs, x?: number, y?: number, width?: number, height?: number) {\n    super(imageOrConfig, x, y, width, height);\n  }\n}\n","import { Resource } from './Resource';\nimport { Sprite } from '../Drawing/Sprite';\n/**\n * The [[Texture]] object allows games built in Excalibur to load image resources.\n * [[Texture]] is an [[ILoadable]] which means it can be passed to a [[Loader]]\n * to pre-load before starting a level or game.\n *\n * [[include:Textures.md]]\n */\nexport class Texture extends Resource<HTMLImageElement> {\n  /**\n   * The width of the texture in pixels\n   */\n  public width: number;\n\n  /**\n   * The height of the texture in pixels\n   */\n  public height: number;\n\n  /**\n   * A [[Promise]] that resolves when the Texture is loaded.\n   */\n  public loaded: Promise<any> = new Promise<any>((resolve) => {\n    this._loadedResolve = resolve;\n  });\n\n  // public onLoaded: (image: HTMLImageElement) => void = () => {};\n\n  private _isLoaded: boolean = false;\n  private _sprite: Sprite = null;\n\n  /**\n   * Populated once loading is complete\n   */\n  public image: HTMLImageElement;\n\n  private _loadedResolve: (value?: any) => void;\n\n  /**\n   * @param path       Path to the image resource\n   * @param bustCache  Optionally load texture with cache busting\n   */\n  constructor(public path: string, public bustCache = true) {\n    super(path, 'blob', bustCache);\n    this._sprite = new Sprite(this, 0, 0, 0, 0);\n  }\n\n  /**\n   * Returns true if the Texture is completely loaded and is ready\n   * to be drawn.\n   */\n  public isLoaded(): boolean {\n    return this._isLoaded;\n  }\n\n  /**\n   * Begins loading the texture and returns a promise to be resolved on completion\n   */\n  public load(): Promise<HTMLImageElement> {\n    const complete = new Promise<HTMLImageElement>((resolve, reject) => {\n      if (this.path.indexOf('data:image/') > -1) {\n        this.image = new Image();\n        this.image.addEventListener('load', () => {\n          this.width = this._sprite.width = this.image.naturalWidth;\n          this.height = this._sprite.height = this.image.naturalHeight;\n          this._sprite = new Sprite(this, 0, 0, this.width, this.height);\n          this._loadedResolve(this.image);\n          resolve(this.image);\n        });\n        this.image.src = this.path;\n      } else {\n        const loaded = super.load();\n        loaded.then(\n          () => {\n            this.image = new Image();\n            this.image.addEventListener('load', () => {\n              this._isLoaded = true;\n              this.width = this._sprite.width = this.image.naturalWidth;\n              this.height = this._sprite.height = this.image.naturalHeight;\n              // this.onLoaded(this.image);\n              this._loadedResolve(this.image);\n              resolve(this.image);\n            });\n            this.image.src = super.getData();\n          },\n          () => {\n            reject('Error loading texture.');\n          }\n        );\n      }\n    });\n    return complete;\n  }\n\n  public asSprite(): Sprite {\n    return this._sprite;\n  }\n}\n","/**\n * An enum that describes the strategies that rotation actions can use\n */\nexport enum RotationType {\n  /**\n   * Rotation via `ShortestPath` will use the smallest angle\n   * between the starting and ending points. This strategy is the default behavior.\n   */\n  ShortestPath = 0,\n  /**\n   * Rotation via `LongestPath` will use the largest angle\n   * between the starting and ending points.\n   */\n  LongestPath = 1,\n  /**\n   * Rotation via `Clockwise` will travel in a clockwise direction,\n   * regardless of the starting and ending points.\n   */\n  Clockwise = 2,\n  /**\n   * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\n   * regardless of the starting and ending points.\n   */\n  CounterClockwise = 3\n}\n","import { RotationType } from './RotationType';\n\nimport { Actor } from '../Actor';\nimport { Vector } from '../Algebra';\nimport { Logger } from '../Util/Log';\nimport * as Util from '../Util/Util';\nimport { obsolete } from '../Util/Decorators';\n\n/**\n * Used for implementing actions for the [[ActionContext|Action API]].\n */\nexport interface Action {\n  update(delta: number): void;\n  isComplete(actor: Actor): boolean;\n  reset(): void;\n  stop(): void;\n}\n\nexport class EaseTo implements Action {\n  private _currentLerpTime: number = 0;\n  private _lerpDuration: number = 1 * 1000; // 1 second\n  private _lerpStart: Vector = new Vector(0, 0);\n  private _lerpEnd: Vector = new Vector(0, 0);\n  private _initialized: boolean = false;\n  private _stopped: boolean = false;\n  private _distance: number = 0;\n  constructor(\n    public actor: Actor,\n    x: number,\n    y: number,\n    duration: number,\n    public easingFcn: (currentTime: number, startValue: number, endValue: number, duration: number) => number\n  ) {\n    this._lerpDuration = duration;\n    this._lerpEnd = new Vector(x, y);\n  }\n  private _initialize() {\n    this._lerpStart = new Vector(this.actor.pos.x, this.actor.pos.y);\n    this._currentLerpTime = 0;\n    this._distance = this._lerpStart.distance(this._lerpEnd);\n  }\n\n  public update(delta: number): void {\n    if (!this._initialized) {\n      this._initialize();\n      this._initialized = true;\n    }\n\n    let newX = this.actor.pos.x;\n    let newY = this.actor.pos.y;\n    if (this._currentLerpTime < this._lerpDuration) {\n      if (this._lerpEnd.x < this._lerpStart.x) {\n        newX =\n          this._lerpStart.x -\n          (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\n      } else {\n        newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\n      }\n\n      if (this._lerpEnd.y < this._lerpStart.y) {\n        newY =\n          this._lerpStart.y -\n          (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\n      } else {\n        newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\n      }\n      this.actor.pos.x = newX;\n      this.actor.pos.y = newY;\n\n      this._currentLerpTime += delta;\n    } else {\n      this.actor.pos.x = this._lerpEnd.x;\n      this.actor.pos.y = this._lerpEnd.y;\n      //this._lerpStart = null;\n      //this._lerpEnd = null;\n      //this._currentLerpTime = 0;\n    }\n  }\n  public isComplete(actor: Actor): boolean {\n    return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._lerpStart) >= this._distance;\n  }\n\n  public reset(): void {\n    this._initialized = false;\n  }\n  public stop(): void {\n    this._stopped = true;\n  }\n}\n\nexport class MoveTo implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _start: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _speed: number;\n  private _distance: number;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, destx: number, desty: number, speed: number) {\n    this._actor = actor;\n    this._end = new Vector(destx, desty);\n    this._speed = speed;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\n      this._distance = this._start.distance(this._end);\n      this._dir = this._end.sub(this._start).normalize();\n    }\n    const m = this._dir.scale(this._speed);\n    this._actor.vel.x = m.x;\n    this._actor.vel.y = m.y;\n\n    if (this.isComplete(this._actor)) {\n      this._actor.pos.x = this._end.x;\n      this._actor.pos.y = this._end.y;\n      this._actor.vel.y = 0;\n      this._actor.vel.x = 0;\n    }\n  }\n\n  public isComplete(actor: Actor): boolean {\n    return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._start) >= this._distance;\n  }\n\n  public stop(): void {\n    this._actor.vel.y = 0;\n    this._actor.vel.x = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class MoveBy implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _distance: number;\n  private _speed: number;\n\n  private _start: Vector;\n  private _offset: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _started = false;\n  private _stopped = false;\n\n  constructor(actor: Actor, offsetX: number, offsetY: number, speed: number) {\n    this._actor = actor;\n    this._speed = speed;\n    this._offset = new Vector(offsetX, offsetY);\n    if (speed <= 0) {\n      Logger.getInstance().error('Attempted to moveBy with speed less than or equal to zero : ' + speed);\n      throw new Error('Speed must be greater than 0 pixels per second');\n    }\n  }\n\n  public update(_delta: number) {\n    if (!this._started) {\n      this._started = true;\n      this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\n      this._end = this._start.add(this._offset);\n      this._distance = this._offset.size;\n      this._dir = this._end.sub(this._start).normalize();\n    }\n\n    this._actor.vel = this._dir.scale(this._speed);\n\n    if (this.isComplete(this._actor)) {\n      this._actor.pos.x = this._end.x;\n      this._actor.pos.y = this._end.y;\n      this._actor.vel.y = 0;\n      this._actor.vel.x = 0;\n    }\n  }\n\n  public isComplete(actor: Actor): boolean {\n    return this._stopped || actor.pos.distance(this._start) >= this._distance;\n  }\n\n  public stop(): void {\n    this._actor.vel.y = 0;\n    this._actor.vel.x = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class Follow implements Action {\n  private _actor: Actor;\n  private _actorToFollow: Actor;\n  public x: number;\n  public y: number;\n  private _current: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _speed: number;\n  private _maximumDistance: number;\n  private _distanceBetween: number;\n  private _started = false;\n  private _stopped = false;\n\n  constructor(actor: Actor, actorToFollow: Actor, followDistance?: number) {\n    this._actor = actor;\n    this._actorToFollow = actorToFollow;\n    this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\n    this._end = new Vector(actorToFollow.pos.x, actorToFollow.pos.y);\n    this._maximumDistance = followDistance !== undefined ? followDistance : this._current.distance(this._end);\n    this._speed = 0;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._distanceBetween = this._current.distance(this._end);\n      this._dir = this._end.sub(this._current).normalize();\n    }\n\n    const actorToFollowSpeed = Math.sqrt(Math.pow(this._actorToFollow.vel.x, 2) + Math.pow(this._actorToFollow.vel.y, 2));\n    if (actorToFollowSpeed !== 0) {\n      this._speed = actorToFollowSpeed;\n    }\n    this._current.x = this._actor.pos.x;\n    this._current.y = this._actor.pos.y;\n\n    this._end.x = this._actorToFollow.pos.x;\n    this._end.y = this._actorToFollow.pos.y;\n    this._distanceBetween = this._current.distance(this._end);\n    this._dir = this._end.sub(this._current).normalize();\n\n    if (this._distanceBetween >= this._maximumDistance) {\n      const m = this._dir.scale(this._speed);\n      this._actor.vel.x = m.x;\n      this._actor.vel.y = m.y;\n    } else {\n      this._actor.vel.x = 0;\n      this._actor.vel.y = 0;\n    }\n\n    if (this.isComplete()) {\n      this._actor.pos.x = this._end.x;\n      this._actor.pos.y = this._end.y;\n      this._actor.vel.y = 0;\n      this._actor.vel.x = 0;\n    }\n  }\n\n  public stop(): void {\n    this._actor.vel.y = 0;\n    this._actor.vel.x = 0;\n    this._stopped = true;\n  }\n\n  public isComplete(): boolean {\n    // the actor following should never stop unless specified to do so\n    return this._stopped;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class Meet implements Action {\n  private _actor: Actor;\n  private _actorToMeet: Actor;\n  public x: number;\n  public y: number;\n  private _current: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _speed: number;\n  private _distanceBetween: number;\n  private _started = false;\n  private _stopped = false;\n  private _speedWasSpecified = false;\n\n  constructor(actor: Actor, actorToMeet: Actor, speed?: number) {\n    this._actor = actor;\n    this._actorToMeet = actorToMeet;\n    this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\n    this._end = new Vector(actorToMeet.pos.x, actorToMeet.pos.y);\n    this._speed = speed || 0;\n\n    if (speed !== undefined) {\n      this._speedWasSpecified = true;\n    }\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._distanceBetween = this._current.distance(this._end);\n      this._dir = this._end.sub(this._current).normalize();\n    }\n\n    const actorToMeetSpeed = Math.sqrt(Math.pow(this._actorToMeet.vel.x, 2) + Math.pow(this._actorToMeet.vel.y, 2));\n    if (actorToMeetSpeed !== 0 && !this._speedWasSpecified) {\n      this._speed = actorToMeetSpeed;\n    }\n    this._current.x = this._actor.pos.x;\n    this._current.y = this._actor.pos.y;\n\n    this._end.x = this._actorToMeet.pos.x;\n    this._end.y = this._actorToMeet.pos.y;\n    this._distanceBetween = this._current.distance(this._end);\n    this._dir = this._end.sub(this._current).normalize();\n\n    const m = this._dir.scale(this._speed);\n    this._actor.vel.x = m.x;\n    this._actor.vel.y = m.y;\n\n    if (this.isComplete()) {\n      this._actor.pos.x = this._end.x;\n      this._actor.pos.y = this._end.y;\n      this._actor.vel.y = 0;\n      this._actor.vel.x = 0;\n    }\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || this._distanceBetween <= 1;\n  }\n\n  public stop(): void {\n    this._actor.vel.y = 0;\n    this._actor.vel.x = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class RotateTo implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _start: number;\n  private _end: number;\n  private _speed: number;\n  private _rotationType: RotationType;\n  private _direction: number;\n  private _distance: number;\n  private _shortDistance: number;\n  private _longDistance: number;\n  private _shortestPathIsPositive: boolean;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, angleRadians: number, speed: number, rotationType?: RotationType) {\n    this._actor = actor;\n    this._end = angleRadians;\n    this._speed = speed;\n    this._rotationType = rotationType || RotationType.ShortestPath;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._start = this._actor.rotation;\n      const distance1 = Math.abs(this._end - this._start);\n      const distance2 = Util.TwoPI - distance1;\n      if (distance1 > distance2) {\n        this._shortDistance = distance2;\n        this._longDistance = distance1;\n      } else {\n        this._shortDistance = distance1;\n        this._longDistance = distance2;\n      }\n\n      this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\n\n      switch (this._rotationType) {\n        case RotationType.ShortestPath:\n          this._distance = this._shortDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = 1;\n          } else {\n            this._direction = -1;\n          }\n          break;\n        case RotationType.LongestPath:\n          this._distance = this._longDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = -1;\n          } else {\n            this._direction = 1;\n          }\n          break;\n        case RotationType.Clockwise:\n          this._direction = 1;\n          if (this._shortestPathIsPositive) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n        case RotationType.CounterClockwise:\n          this._direction = -1;\n          if (!this._shortestPathIsPositive) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n      }\n    }\n\n    this._actor.rx = this._direction * this._speed;\n\n    if (this.isComplete()) {\n      this._actor.rotation = this._end;\n      this._actor.rx = 0;\n      this._stopped = true;\n    }\n  }\n\n  public isComplete(): boolean {\n    const distanceTravelled = Math.abs(this._actor.rotation - this._start);\n    return this._stopped || distanceTravelled >= Math.abs(this._distance);\n  }\n\n  public stop(): void {\n    this._actor.rx = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class RotateBy implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _start: number;\n  private _end: number;\n  private _speed: number;\n  private _offset: number;\n\n  private _rotationType: RotationType;\n  private _direction: number;\n  private _distance: number;\n  private _shortDistance: number;\n  private _longDistance: number;\n  private _shortestPathIsPositive: boolean;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, angleRadiansOffset: number, speed: number, rotationType?: RotationType) {\n    this._actor = actor;\n    this._speed = speed;\n    this._offset = angleRadiansOffset;\n    this._rotationType = rotationType || RotationType.ShortestPath;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._start = this._actor.rotation;\n      this._end = this._start + this._offset;\n\n      const distance1 = Math.abs(this._end - this._start);\n      const distance2 = Util.TwoPI - distance1;\n      if (distance1 > distance2) {\n        this._shortDistance = distance2;\n        this._longDistance = distance1;\n      } else {\n        this._shortDistance = distance1;\n        this._longDistance = distance2;\n      }\n\n      this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\n\n      switch (this._rotationType) {\n        case RotationType.ShortestPath:\n          this._distance = this._shortDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = 1;\n          } else {\n            this._direction = -1;\n          }\n          break;\n        case RotationType.LongestPath:\n          this._distance = this._longDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = -1;\n          } else {\n            this._direction = 1;\n          }\n          break;\n        case RotationType.Clockwise:\n          this._direction = 1;\n          if (this._shortDistance >= 0) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n        case RotationType.CounterClockwise:\n          this._direction = -1;\n          if (this._shortDistance <= 0) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n      }\n    }\n\n    this._actor.rx = this._direction * this._speed;\n\n    if (this.isComplete()) {\n      this._actor.rotation = this._end;\n      this._actor.rx = 0;\n      this._stopped = true;\n    }\n  }\n\n  public isComplete(): boolean {\n    const distanceTravelled = Math.abs(this._actor.rotation - this._start);\n    return this._stopped || distanceTravelled >= Math.abs(this._distance);\n  }\n\n  public stop(): void {\n    this._actor.rx = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\n@obsolete({ message: 'ex.Action.ScaleTo will be removed in v0.25.0', alternateMethod: 'Set width and hight directly' })\nexport class ScaleTo implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _startX: number;\n  private _startY: number;\n  private _endX: number;\n  private _endY: number;\n  private _speedX: number;\n  private _speedY: number;\n  private _distanceX: number;\n  private _distanceY: number;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, scaleX: number, scaleY: number, speedX: number, speedY: number) {\n    this._actor = actor;\n    this._endX = scaleX;\n    this._endY = scaleY;\n    this._speedX = speedX;\n    this._speedY = speedY;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._startX = this._actor.scale.x;\n      this._startY = this._actor.scale.y;\n      this._distanceX = Math.abs(this._endX - this._startX);\n      this._distanceY = Math.abs(this._endY - this._startY);\n    }\n\n    if (!(Math.abs(this._actor.scale.x - this._startX) >= this._distanceX)) {\n      const directionX = this._endY < this._startY ? -1 : 1;\n      this._actor.sx = this._speedX * directionX;\n    } else {\n      this._actor.sx = 0;\n    }\n\n    if (!(Math.abs(this._actor.scale.y - this._startY) >= this._distanceY)) {\n      const directionY = this._endY < this._startY ? -1 : 1;\n      this._actor.sy = this._speedY * directionY;\n    } else {\n      this._actor.sy = 0;\n    }\n\n    if (this.isComplete()) {\n      this._actor.scale.x = this._endX;\n      this._actor.scale.y = this._endY;\n      this._actor.sx = 0;\n      this._actor.sy = 0;\n    }\n  }\n\n  public isComplete(): boolean {\n    return (\n      this._stopped ||\n      (Math.abs(this._actor.scale.y - this._startX) >= this._distanceX && Math.abs(this._actor.scale.y - this._startY) >= this._distanceY)\n    );\n  }\n\n  public stop(): void {\n    this._actor.sx = 0;\n    this._actor.sy = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\n@obsolete({ message: 'ex.Action.ScaleBy will be removed in v0.25.0', alternateMethod: 'Set width and hight directly' })\nexport class ScaleBy implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _startScale: Vector;\n  private _endScale: Vector;\n  private _offset: Vector;\n  private _distanceX: number;\n  private _distanceY: number;\n  private _directionX: number;\n  private _directionY: number;\n  private _started = false;\n  private _stopped = false;\n  private _speedX: number;\n  private _speedY: number;\n  constructor(actor: Actor, scaleOffsetX: number, scaleOffsetY: number, speed: number) {\n    this._actor = actor;\n    this._offset = new Vector(scaleOffsetX, scaleOffsetY);\n    this._speedX = this._speedY = speed;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._startScale = this._actor.scale.clone();\n      this._endScale = this._startScale.add(this._offset);\n      this._distanceX = Math.abs(this._endScale.x - this._startScale.x);\n      this._distanceY = Math.abs(this._endScale.y - this._startScale.y);\n      this._directionX = this._endScale.x < this._startScale.x ? -1 : 1;\n      this._directionY = this._endScale.y < this._startScale.y ? -1 : 1;\n    }\n\n    this._actor.sx = this._speedX * this._directionX;\n    this._actor.sy = this._speedY * this._directionY;\n\n    if (this.isComplete()) {\n      this._actor.scale = this._endScale;\n      this._actor.sx = 0;\n      this._actor.sy = 0;\n    }\n  }\n\n  public isComplete(): boolean {\n    return (\n      this._stopped ||\n      (Math.abs(this._actor.scale.x - this._startScale.x) >= this._distanceX &&\n        Math.abs(this._actor.scale.y - this._startScale.y) >= this._distanceY)\n    );\n  }\n\n  public stop(): void {\n    this._actor.sx = 0;\n    this._actor.sy = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class Delay implements Action {\n  public x: number;\n  public y: number;\n  private _actor: Actor;\n  private _elapsedTime: number = 0;\n  private _delay: number;\n  private _started: boolean = false;\n  private _stopped = false;\n  constructor(actor: Actor, delay: number) {\n    this._actor = actor;\n    this._delay = delay;\n  }\n\n  public update(delta: number): void {\n    if (!this._started) {\n      this._started = true;\n    }\n\n    this.x = this._actor.pos.x;\n    this.y = this._actor.pos.y;\n\n    this._elapsedTime += delta;\n  }\n\n  isComplete(): boolean {\n    return this._stopped || this._elapsedTime >= this._delay;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n  }\n\n  reset(): void {\n    this._elapsedTime = 0;\n    this._started = false;\n  }\n}\n\nexport class Blink implements Action {\n  private _timeVisible: number = 0;\n  private _timeNotVisible: number = 0;\n  private _elapsedTime: number = 0;\n  private _totalTime: number = 0;\n  private _actor: Actor;\n  private _duration: number;\n  private _stopped: boolean = false;\n  private _started: boolean = false;\n  constructor(actor: Actor, timeVisible: number, timeNotVisible: number, numBlinks: number = 1) {\n    this._actor = actor;\n    this._timeVisible = timeVisible;\n    this._timeNotVisible = timeNotVisible;\n    this._duration = (timeVisible + timeNotVisible) * numBlinks;\n  }\n\n  public update(delta: number): void {\n    if (!this._started) {\n      this._started = true;\n    }\n\n    this._elapsedTime += delta;\n    this._totalTime += delta;\n    if (this._actor.visible && this._elapsedTime >= this._timeVisible) {\n      this._actor.visible = false;\n      this._elapsedTime = 0;\n    }\n\n    if (!this._actor.visible && this._elapsedTime >= this._timeNotVisible) {\n      this._actor.visible = true;\n      this._elapsedTime = 0;\n    }\n\n    if (this.isComplete()) {\n      this._actor.visible = true;\n    }\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || this._totalTime >= this._duration;\n  }\n\n  public stop(): void {\n    this._actor.visible = true;\n    this._stopped = true;\n  }\n\n  public reset() {\n    this._started = false;\n    this._elapsedTime = 0;\n    this._totalTime = 0;\n  }\n}\n\nexport class Fade implements Action {\n  public x: number;\n  public y: number;\n\n  private _actor: Actor;\n  private _endOpacity: number;\n  private _speed: number;\n  private _multiplier: number = 1;\n  private _started = false;\n  private _stopped = false;\n\n  constructor(actor: Actor, endOpacity: number, speed: number) {\n    this._actor = actor;\n    this._endOpacity = endOpacity;\n    this._speed = speed;\n  }\n\n  public update(delta: number): void {\n    if (!this._started) {\n      this._started = true;\n\n      // determine direction when we start\n      if (this._endOpacity < this._actor.opacity) {\n        this._multiplier = -1;\n      } else {\n        this._multiplier = 1;\n      }\n    }\n\n    if (this._speed > 0) {\n      this._actor.opacity += (this._multiplier * (Math.abs(this._actor.opacity - this._endOpacity) * delta)) / this._speed;\n    }\n\n    this._speed -= delta;\n\n    if (this.isComplete()) {\n      this._actor.opacity = this._endOpacity;\n    }\n\n    Logger.getInstance().debug('[Action fade] Actor opacity:', this._actor.opacity);\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || Math.abs(this._actor.opacity - this._endOpacity) < 0.05;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n\nexport class Die implements Action {\n  public x: number;\n  public y: number;\n\n  private _actor: Actor;\n  private _stopped = false;\n\n  constructor(actor: Actor) {\n    this._actor = actor;\n  }\n\n  public update(_delta: number): void {\n    this._actor.actionQueue.clearActions();\n    this._actor.kill();\n    this._stopped = true;\n  }\n\n  public isComplete(): boolean {\n    return this._stopped;\n  }\n\n  public stop(): void {\n    return;\n  }\n\n  public reset(): void {\n    return;\n  }\n}\n\nexport class CallMethod implements Action {\n  public x: number;\n  public y: number;\n  private _method: () => any = null;\n  private _actor: Actor = null;\n  private _hasBeenCalled: boolean = false;\n  constructor(actor: Actor, method: () => any) {\n    this._actor = actor;\n    this._method = method;\n  }\n\n  public update(_delta: number) {\n    this._method.call(this._actor);\n    this._hasBeenCalled = true;\n  }\n  public isComplete() {\n    return this._hasBeenCalled;\n  }\n  public reset() {\n    this._hasBeenCalled = false;\n  }\n  public stop() {\n    this._hasBeenCalled = true;\n  }\n}\n\nexport class Repeat implements Action {\n  public x: number;\n  public y: number;\n  private _actor: Actor;\n  private _actionQueue: ActionQueue;\n  private _repeat: number;\n  private _originalRepeat: number;\n  private _stopped: boolean = false;\n  constructor(actor: Actor, repeat: number, actions: Action[]) {\n    this._actor = actor;\n    this._actionQueue = new ActionQueue(actor);\n    this._repeat = repeat;\n    this._originalRepeat = repeat;\n\n    const len = actions.length;\n    for (let i = 0; i < len; i++) {\n      actions[i].reset();\n      this._actionQueue.add(actions[i]);\n    }\n  }\n\n  public update(delta: number): void {\n    this.x = this._actor.pos.x;\n    this.y = this._actor.pos.y;\n    if (!this._actionQueue.hasNext()) {\n      this._actionQueue.reset();\n      this._repeat--;\n    }\n    this._actionQueue.update(delta);\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || this._repeat <= 0;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._repeat = this._originalRepeat;\n  }\n}\n\nexport class RepeatForever implements Action {\n  public x: number;\n  public y: number;\n  private _actor: Actor;\n  private _actionQueue: ActionQueue;\n  private _stopped: boolean = false;\n  constructor(actor: Actor, actions: Action[]) {\n    this._actor = actor;\n    this._actionQueue = new ActionQueue(actor);\n\n    const len = actions.length;\n    for (let i = 0; i < len; i++) {\n      actions[i].reset();\n      this._actionQueue.add(actions[i]);\n    }\n  }\n\n  public update(delta: number): void {\n    this.x = this._actor.pos.x;\n    this.y = this._actor.pos.y;\n    if (this._stopped) {\n      return;\n    }\n\n    if (!this._actionQueue.hasNext()) {\n      this._actionQueue.reset();\n    }\n\n    this._actionQueue.update(delta);\n  }\n\n  public isComplete(): boolean {\n    return this._stopped;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n    this._actionQueue.clearActions();\n  }\n\n  public reset(): void {\n    return;\n  }\n}\n\n/**\n * Action Queues\n *\n * Action queues are part of the [[ActionContext|Action API]] and\n * store the list of actions to be executed for an [[Actor]].\n *\n * Actors implement [[Actor.actions]] which can be manipulated by\n * advanced users to adjust the actions currently being executed in the\n * queue.\n */\nexport class ActionQueue {\n  private _actor: Actor;\n  private _actions: Action[] = [];\n  private _currentAction: Action;\n  private _completedActions: Action[] = [];\n  constructor(actor: Actor) {\n    this._actor = actor;\n  }\n\n  public add(action: Action) {\n    this._actions.push(action);\n  }\n\n  public remove(action: Action) {\n    const index = this._actions.indexOf(action);\n    this._actions.splice(index, 1);\n  }\n\n  public clearActions(): void {\n    this._actions.length = 0;\n    this._completedActions.length = 0;\n    if (this._currentAction) {\n      this._currentAction.stop();\n    }\n  }\n\n  public getActions(): Action[] {\n    return this._actions.concat(this._completedActions);\n  }\n\n  public hasNext(): boolean {\n    return this._actions.length > 0;\n  }\n\n  public reset(): void {\n    this._actions = this.getActions();\n\n    const len = this._actions.length;\n    for (let i = 0; i < len; i++) {\n      this._actions[i].reset();\n    }\n    this._completedActions = [];\n  }\n\n  public update(delta: number) {\n    if (this._actions.length > 0) {\n      this._currentAction = this._actions[0];\n      this._currentAction.update(delta);\n\n      if (this._currentAction.isComplete(this._actor)) {\n        this._completedActions.push(this._actions.shift());\n      }\n    }\n  }\n}\n","﻿import { Vector } from '../Algebra';\nimport { obsolete } from '../Util/Decorators';\n\n/**\n * A definition of an EasingFunction. See [[EasingFunctions]].\n */\n// tslint:disable-next-line\nexport interface EasingFunction {\n  (currentTime: number, startValue: number, endValue: number, duration: number): number;\n}\n\n/**\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\n * Given a time, the function will return a value from positive startValue to positive endValue.\n *\n * ```js\n * function Linear (t) {\n *    return t * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInQuad (t) {\n *    return t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutQuad (t) {\n *    return t * (2 - t);\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutQuad (t) {\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInCubic (t) {\n *    return t * t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutCubic (t) {\n *    return (--t) * t * t + 1;\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutCubic (t) {\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n * }\n * ```\n */\nexport class EasingFunctions {\n  public static CreateReversibleEasingFunction(easing: EasingFunction) {\n    return (time: number, start: number, end: number, duration: number) => {\n      if (end < start) {\n        return start - (easing(time, end, start, duration) - end);\n      } else {\n        return easing(time, start, end, duration);\n      }\n    };\n  }\n\n  @obsolete({\n    message: 'Alias for incorrect spelling used in older versions, will be removed in v0.25.0',\n    alternateMethod: 'CreateReversibleEasingFunction'\n  })\n  public static CreateReversableEasingFunction(easing: EasingFunction) {\n    return EasingFunctions.CreateReversibleEasingFunction(easing);\n  }\n\n  public static CreateVectorEasingFunction(easing: EasingFunction) {\n    return (time: number, start: Vector, end: Vector, duration: number) => {\n      return new Vector(easing(time, start.x, end.x, duration), easing(time, start.y, end.y, duration));\n    };\n  }\n\n  public static Linear: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      return (endValue * currentTime) / duration + startValue;\n    }\n  );\n\n  public static EaseInQuad = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n\n      return endValue * currentTime * currentTime + startValue;\n    }\n  );\n\n  public static EaseOutQuad: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n      return -endValue * currentTime * (currentTime - 2) + startValue;\n    }\n  );\n\n  public static EaseInOutQuad: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration / 2;\n\n      if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime + startValue;\n      }\n      currentTime--;\n\n      return (-endValue / 2) * (currentTime * (currentTime - 2) - 1) + startValue;\n    }\n  );\n\n  public static EaseInCubic: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n      return endValue * currentTime * currentTime * currentTime + startValue;\n    }\n  );\n\n  public static EaseOutCubic: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n      currentTime--;\n      return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\n    }\n  );\n\n  public static EaseInOutCubic: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration / 2;\n      if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime * currentTime + startValue;\n      }\n      currentTime -= 2;\n      return (endValue / 2) * (currentTime * currentTime * currentTime + 2) + startValue;\n    }\n  );\n}\n","import * as Actions from './Action';\nimport { RotationType } from './RotationType';\n\nimport { Actor } from '../Actor';\nimport { EasingFunction, EasingFunctions } from '../Util/EasingFunctions';\n\n/**\n * The fluent Action API allows you to perform \"actions\" on\n * [[Actor|Actors]] such as following, moving, rotating, and\n * more. You can implement your own actions by implementing\n * the [[Action]] interface.\n *\n * [[include:Actions.md]]\n */\nexport class ActionContext {\n  private _actors: Actor[] = [];\n  private _queues: Actions.ActionQueue[] = [];\n\n  constructor();\n  constructor(actor: Actor);\n  constructor(actors: Actor[]);\n  constructor() {\n    if (arguments !== null) {\n      this._actors = Array.prototype.slice.call(arguments, 0);\n      this._queues = this._actors.map((a) => {\n        return a.actionQueue;\n      });\n    }\n  }\n\n  /**\n   * Clears all queued actions from the Actor\n   */\n  public clearActions(): void {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].clearActions();\n    }\n  }\n\n  public addActorToContext(actor: Actor) {\n    this._actors.push(actor);\n    // if we run into problems replace the line below with:\n    this._queues.push(actor.actionQueue);\n  }\n\n  public removeActorFromContext(actor: Actor) {\n    const index = this._actors.indexOf(actor);\n    if (index > -1) {\n      this._actors.splice(index, 1);\n      this._queues.splice(index, 1);\n    }\n  }\n\n  /**\n   * This method will move an actor to the specified `x` and `y` position over the\n   * specified duration using a given [[EasingFunctions]] and return back the actor. This\n   * method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param x         The x location to move the actor to\n   * @param y         The y location to move the actor to\n   * @param duration  The time it should take the actor to move to the new location in milliseconds\n   * @param easingFcn Use [[EasingFunctions]] or a custom function to use to calculate position\n   */\n  public easeTo(x: number, y: number, duration: number, easingFcn: EasingFunction = EasingFunctions.Linear) {\n    const len = this._queues.length;\n\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.EaseTo(this._actors[i], x, y, duration, easingFcn));\n    }\n\n    return this;\n  }\n\n  /**\n   * This method will move an actor to the specified x and y position at the\n   * speed specified (in pixels per second) and return back the actor. This\n   * method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param x      The x location to move the actor to\n   * @param y      The y location to move the actor to\n   * @param speed  The speed in pixels per second to move\n   */\n  public moveTo(x: number, y: number, speed: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.MoveTo(this._actors[i], x, y, speed));\n    }\n\n    return this;\n  }\n\n  /**\n   * This method will move an actor by the specified x offset and y offset from its current position, at a certain speed.\n   * This method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param xOffset     The x offset to apply to this actor\n   * @param yOffset     The y location to move the actor to\n   * @param speed  The speed in pixels per second the actor should move\n   */\n  public moveBy(xOffset: number, yOffset: number, speed: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.MoveBy(this._actors[i], xOffset, yOffset, speed));\n    }\n    return this;\n  }\n\n  /**\n   * This method will rotate an actor to the specified angle at the speed\n   * specified (in radians per second) and return back the actor. This\n   * method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param angleRadians  The angle to rotate to in radians\n   * @param speed         The angular velocity of the rotation specified in radians per second\n   * @param rotationType  The [[RotationType]] to use for this rotation\n   */\n  public rotateTo(angleRadians: number, speed: number, rotationType?: RotationType): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.RotateTo(this._actors[i], angleRadians, speed, rotationType));\n    }\n    return this;\n  }\n\n  /**\n   * This method will rotate an actor by the specified angle offset, from it's current rotation given a certain speed\n   * in radians/sec and return back the actor. This method is part\n   * of the actor 'Action' fluent API allowing action chaining.\n   * @param angleRadiansOffset  The angle to rotate to in radians relative to the current rotation\n   * @param speed          The speed in radians/sec the actor should rotate at\n   * @param rotationType  The [[RotationType]] to use for this rotation, default is shortest path\n   */\n  public rotateBy(angleRadiansOffset: number, speed: number, rotationType?: RotationType): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.RotateBy(this._actors[i], angleRadiansOffset, speed, rotationType));\n    }\n    return this;\n  }\n\n  /**\n   * This method will scale an actor to the specified size at the speed\n   * specified (in magnitude increase per second) and return back the\n   * actor. This method is part of the actor 'Action' fluent API allowing\n   * action chaining.\n   * @param sizeX   The scaling factor to apply on X axis\n   * @param sizeY   The scaling factor to apply on Y axis\n   * @param speedX  The speed of scaling specified in magnitude increase per second on X axis\n   * @param speedY  The speed of scaling specified in magnitude increase per second on Y axis\n   */\n  public scaleTo(sizeX: number, sizeY: number, speedX: number, speedY: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.ScaleTo(this._actors[i], sizeX, sizeY, speedX, speedY));\n    }\n    return this;\n  }\n\n  /**\n   * This method will scale an actor by an amount relative to the current scale at a certain speed in scale units/sec\n   * and return back the actor. This method is part of the\n   * actor 'Action' fluent API allowing action chaining.\n   * @param sizeOffsetX   The scaling factor to apply on X axis\n   * @param sizeOffsetY   The scaling factor to apply on Y axis\n   * @param speed    The speed to scale at in scale units/sec\n   */\n  public scaleBy(sizeOffsetX: number, sizeOffsetY: number, speed: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.ScaleBy(this._actors[i], sizeOffsetX, sizeOffsetY, speed));\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause an actor to blink (become visible and not\n   * visible). Optionally, you may specify the number of blinks. Specify the amount of time\n   * the actor should be visible per blink, and the amount of time not visible.\n   * This method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param timeVisible     The amount of time to stay visible per blink in milliseconds\n   * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\n   * @param numBlinks       The number of times to blink\n   */\n  public blink(timeVisible: number, timeNotVisible: number, numBlinks: number = 1): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Blink(this._actors[i], timeVisible, timeNotVisible, numBlinks));\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause an actor's opacity to change from its current value\n   * to the provided value by a specified time (in milliseconds). This method is\n   * part of the actor 'Action' fluent API allowing action chaining.\n   * @param opacity  The ending opacity\n   * @param time     The time it should take to fade the actor (in milliseconds)\n   */\n  public fade(opacity: number, time: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Fade(this._actors[i], opacity, time));\n    }\n    return this;\n  }\n\n  /**\n   * This method will delay the next action from executing for a certain\n   * amount of time (in milliseconds). This method is part of the actor\n   * 'Action' fluent API allowing action chaining.\n   * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\n   */\n  public delay(time: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Delay(this._actors[i], time));\n    }\n    return this;\n  }\n\n  /**\n   * This method will add an action to the queue that will remove the actor from the\n   * scene once it has completed its previous actions. Any actions on the\n   * action queue after this action will not be executed.\n   */\n  public die(): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Die(this._actors[i]));\n    }\n    return this;\n  }\n\n  /**\n   * This method allows you to call an arbitrary method as the next action in the\n   * action queue. This is useful if you want to execute code in after a specific\n   * action, i.e An actor arrives at a destination after traversing a path\n   */\n  public callMethod(method: () => any): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.CallMethod(this._actors[i], method));\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to repeat all of the previously\n   * called actions a certain number of times. If the number of repeats\n   * is not specified it will repeat forever. This method is part of\n   * the actor 'Action' fluent API allowing action chaining\n   * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\n   * will repeat forever\n   */\n  public repeat(times?: number): ActionContext {\n    if (!times) {\n      this.repeatForever();\n      return this;\n    }\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.Repeat(this._actors[i], times, this._actors[i].actionQueue.getActions()));\n    }\n\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to repeat all of the previously\n   * called actions forever. This method is part of the actor 'Action'\n   * fluent API allowing action chaining.\n   */\n  public repeatForever(): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      this._queues[i].add(new Actions.RepeatForever(this._actors[i], this._actors[i].actionQueue.getActions()));\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to follow another at a specified distance\n   * @param actor           The actor to follow\n   * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\n   */\n  public follow(actor: Actor, followDistance?: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      if (followDistance === undefined) {\n        this._queues[i].add(new Actions.Follow(this._actors[i], actor));\n      } else {\n        this._queues[i].add(new Actions.Follow(this._actors[i], actor, followDistance));\n      }\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to move towards another until they\n   * collide \"meet\" at a specified speed.\n   * @param actor  The actor to meet\n   * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\n   */\n  public meet(actor: Actor, speed?: number): ActionContext {\n    const len = this._queues.length;\n    for (let i = 0; i < len; i++) {\n      if (speed === undefined) {\n        this._queues[i].add(new Actions.Meet(this._actors[i], actor));\n      } else {\n        this._queues[i].add(new Actions.Meet(this._actors[i], actor, speed));\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Returns a promise that resolves when the current action queue up to now\n   * is finished.\n   */\n  public asPromise<T>(): Promise<T[]> {\n    const promises = this._queues.map((q, i) => {\n      const temp = new Promise<T>((resolve) => {\n        q.add(\n          new Actions.CallMethod(this._actors[i], () => {\n            resolve();\n          })\n        );\n      });\n      return temp;\n    });\n    return Promise.all(promises);\n  }\n}\n","/**\n * An enum that describes the types of collisions actors can participate in\n */\nexport enum CollisionType {\n  /**\n   * Actors with the `PreventCollision` setting do not participate in any\n   * collisions and do not raise collision events.\n   */\n  PreventCollision = 'PreventCollision',\n  /**\n   * Actors with the `Passive` setting only raise collision events, but are not\n   * influenced or moved by other actors and do not influence or move other actors.\n   */\n  Passive = 'Passive',\n  /**\n   * Actors with the `Active` setting raise collision events and participate\n   * in collisions with other actors and will be push or moved by actors sharing\n   * the `Active` or `Fixed` setting.\n   */\n  Active = 'Active',\n  /**\n   * Actors with the `Fixed` setting raise collision events and participate in\n   * collisions with other actors. Actors with the `Fixed` setting will not be\n   * pushed or moved by other actors sharing the `Fixed`. Think of Fixed\n   * actors as \"immovable/unstoppable\" objects. If two `Fixed` actors meet they will\n   * not be pushed or moved by each other, they will not interact except to throw\n   * collision events.\n   */\n  Fixed = 'Fixed'\n}\n","import { Vector } from './Algebra';\nimport { obsolete } from './Util/Decorators';\n\n/**\n * Possible collision resolution strategies\n *\n * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\n *\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\n * simulated physical interactions.\n */\nexport enum CollisionResolutionStrategy {\n  Box,\n  RigidBody\n}\n\n/**\n * Possible broadphase collision pair identification strategies\n *\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\n * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\n * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\n */\nexport enum BroadphaseStrategy {\n  Naive,\n  DynamicAABBTree\n}\n\n/**\n * Possible numerical integrators for position and velocity\n */\nexport enum Integrator {\n  Euler\n}\n\n/**\n * The [[Physics]] object is the global configuration object for all Excalibur physics.\n *\n * [[include:Physics.md]]\n */\n/* istanbul ignore next */\nexport class Physics {\n  /**\n   * Global acceleration that is applied to all vanilla actors that have a [[CollisionType.Active|active]] collision type.\n   * Global acceleration won't effect [[Label|labels]], [[ScreenElement|ui actors]], or [[Trigger|triggers]] in Excalibur.\n   *\n   * This is a great way to globally simulate effects like gravity.\n   */\n  public static acc = new Vector(0, 0);\n\n  /**\n   * Globally switches all Excalibur physics behavior on or off.\n   */\n  public static enabled = true;\n\n  /**\n   * Gets or sets the number of collision passes for Excalibur to perform on physics bodies.\n   *\n   * Reducing collision passes may cause things not to collide as expected in your game, but may increase performance.\n   *\n   * More passes can improve the visual quality of collisions when many objects are on the screen. This can reduce jitter, improve the\n   * collision resolution of fast move objects, or the stability of large numbers of objects stacked together.\n   *\n   * Fewer passes will improve the performance of the game at the cost of collision quality, more passes will improve quality at the\n   * cost of performance.\n   *\n   * The default is set to 5 passes which is a good start.\n   */\n  public static collisionPasses = 5;\n\n  /**\n   * Gets or sets the broadphase pair identification strategy.\n   *\n   * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\n   * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\n   * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\n   */\n  public static broadphaseStrategy: BroadphaseStrategy = BroadphaseStrategy.DynamicAABBTree;\n\n  /**\n   * Globally switches the debug information for the broadphase strategy\n   */\n  public static broadphaseDebug: boolean = false;\n  /**\n   * Show the normals as a result of collision on the screen.\n   */\n  public static showCollisionNormals: boolean = false;\n  /**\n   * Show the position, velocity, and acceleration as graphical vectors.\n   */\n  public static showMotionVectors: boolean = false;\n  /**\n   * Show the axis-aligned bounding boxes of the collision bodies on the screen.\n   */\n  public static showBounds: boolean = false;\n  /**\n   * Show the bounding collision area shapes\n   */\n  public static showArea: boolean = false;\n  /**\n   * Show points of collision interpreted by excalibur as a result of collision.\n   */\n  public static showContacts: boolean = false;\n  /**\n   * Show the surface normals of the collision areas.\n   */\n  public static showNormals: boolean = false;\n  /**\n   * Gets or sets the global collision resolution strategy (narrowphase).\n   *\n   * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\n   *\n   * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\n   * simulated physical interactions.\n   */\n  public static collisionResolutionStrategy: CollisionResolutionStrategy = CollisionResolutionStrategy.Box;\n  /**\n   * The default mass to use if none is specified\n   */\n  public static defaultMass: number = 10;\n  /**\n   * Gets or sets the position and velocity positional integrator, currently only Euler is supported.\n   */\n  public static integrator: Integrator = Integrator.Euler;\n  /**\n   * Number of steps to use in integration. A higher number improves the positional accuracy over time. This can be useful to increase\n   * if you have fast moving objects in your simulation or you have a large number of objects and need to increase stability.\n   */\n  public static integrationSteps = 1;\n  /**\n   * Gets or sets whether rotation is allowed in a RigidBody collision resolution\n   */\n  public static allowRigidBodyRotation = true;\n\n  /**\n   * Configures Excalibur to use box physics. Box physics which performs simple axis aligned arcade style physics.\n   */\n  public static useBoxPhysics(): void {\n    Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Box;\n  }\n\n  /**\n   * Configures Excalibur to use rigid body physics. Rigid body physics allows for complicated\n   * simulated physical interactions.\n   */\n  public static useRigidBodyPhysics(): void {\n    Physics.collisionResolutionStrategy = CollisionResolutionStrategy.RigidBody;\n  }\n\n  /**\n   * Small value to help collision passes settle themselves after the narrowphase.\n   */\n  public static collisionShift = 0.001;\n\n  /**\n   * Factor to add to the RigidBody BoundingBox, bounding box (dimensions += vel * dynamicTreeVelocityMultiplier);\n   */\n  public static dynamicTreeVelocityMultiplier = 2;\n\n  @obsolete({\n    message: 'Alias for incorrect spelling used in older versions, will be removed in v0.25.0',\n    alternateMethod: 'dynamicTreeVelocityMultiplier'\n  })\n  public static get dynamicTreeVelocityMultiplyer() {\n    return Physics.dynamicTreeVelocityMultiplier;\n  }\n\n  public static set dynamicTreeVelocityMultiplyer(value: number) {\n    Physics.dynamicTreeVelocityMultiplier = value;\n  }\n\n  /**\n   * Pad RigidBody BoundingBox by a constant amount\n   */\n  public static boundsPadding = 5;\n\n  /**\n   * Surface epsilon is used to help deal with surface penetration\n   */\n  public static surfaceEpsilon = 0.1;\n\n  /**\n   * Enable fast moving body checking, this enables checking for collision pairs via raycast for fast moving objects to prevent\n   * bodies from tunneling through one another.\n   */\n  public static checkForFastBodies = true;\n\n  /**\n   * Disable minimum fast moving body raycast, by default if ex.Physics.checkForFastBodies = true Excalibur will only check if the\n   * body is moving at least half of its minimum dimension in an update. If ex.Physics.disableMinimumSpeedForFastBody is set to true,\n   * Excalibur will always perform the fast body raycast regardless of speed.\n   */\n  public static disableMinimumSpeedForFastBody = false;\n}\n","import { ConvexPolygon } from './ConvexPolygon';\n\nimport { Actor } from '../Actor';\nimport { Vector, Ray } from '../Algebra';\nimport { Color } from '../Drawing/Color';\nimport { Side } from './Side';\n\nexport interface BoundingBoxOptions {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n}\n\n/**\n * Axis Aligned collision primitive for Excalibur.\n */\nexport class BoundingBox {\n  public top: number;\n  public right: number;\n  public bottom: number;\n  public left: number;\n\n  /**\n   * Constructor allows passing of either an object with all coordinate components,\n   * or the coordinate components passed separately.\n   * @param leftOrOptions    Either x coordinate of the left edge or an options object\n   * containing the four coordinate components.\n   * @param top     y coordinate of the top edge\n   * @param right   x coordinate of the right edge\n   * @param bottom  y coordinate of the bottom edge\n   */\n  constructor(leftOrOptions: number | BoundingBoxOptions = 0, top: number = 0, right: number = 0, bottom: number = 0) {\n    if (typeof leftOrOptions === 'object') {\n      this.left = leftOrOptions.left;\n      this.top = leftOrOptions.top;\n      this.right = leftOrOptions.right;\n      this.bottom = leftOrOptions.bottom;\n    } else if (typeof leftOrOptions === 'number') {\n      this.left = leftOrOptions;\n      this.top = top;\n      this.right = right;\n      this.bottom = bottom;\n    }\n  }\n\n  /**\n   * Given bounding box A & B, returns the side relative to A when intersection is performed.\n   * @param intersection Intersection vector between 2 bounding boxes\n   */\n  public static getSideFromIntersection(intersection: Vector): Side {\n    if (!intersection) {\n      return Side.None;\n    }\n    if (intersection) {\n      if (Math.abs(intersection.x) > Math.abs(intersection.y)) {\n        if (intersection.x < 0) {\n          return Side.Right;\n        }\n        return Side.Left;\n      } else {\n        if (intersection.y < 0) {\n          return Side.Bottom;\n        }\n        return Side.Top;\n      }\n    }\n    return Side.None;\n  }\n\n  public static fromPoints(points: Vector[]): BoundingBox {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    for (let i = 0; i < points.length; i++) {\n      if (points[i].x < minX) {\n        minX = points[i].x;\n      }\n      if (points[i].x > maxX) {\n        maxX = points[i].x;\n      }\n      if (points[i].y < minY) {\n        minY = points[i].y;\n      }\n      if (points[i].y > maxY) {\n        maxY = points[i].y;\n      }\n    }\n    return new BoundingBox(minX, minY, maxX, maxY);\n  }\n\n  public static fromDimension(width: number, height: number, anchor: Vector = Vector.Half, pos: Vector = Vector.Zero) {\n    return new BoundingBox(\n      -width * anchor.x + pos.x,\n      -height * anchor.y + pos.y,\n      width - width * anchor.x + pos.x,\n      height - height * anchor.y + pos.y\n    );\n  }\n\n  /**\n   * Returns the calculated width of the bounding box\n   */\n  public get width() {\n    return this.right - this.left;\n  }\n\n  /**\n   * Returns the calculated height of the bounding box\n   */\n  public get height() {\n    return this.bottom - this.top;\n  }\n\n  /**\n   * Returns the center of the bounding box\n   */\n  public get center(): Vector {\n    return new Vector((this.left + this.right) / 2, (this.top + this.bottom) / 2);\n  }\n\n  public translate(pos: Vector): BoundingBox {\n    return new BoundingBox(this.left + pos.x, this.top + pos.y, this.right + pos.x, this.bottom + pos.y);\n  }\n\n  /**\n   * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default. The resulting bounding\n   * box is also axis-align. This is useful when a new axis-aligned bounding box is needed for rotated geometry.\n   */\n  public rotate(angle: number, point: Vector = Vector.Zero): BoundingBox {\n    const points = this.getPoints().map((p) => p.rotate(angle, point));\n    return BoundingBox.fromPoints(points);\n  }\n\n  public scale(scale: Vector, point: Vector = Vector.Zero): BoundingBox {\n    const shifted = this.translate(point);\n    return new BoundingBox(shifted.left * scale.x, shifted.top * scale.y, shifted.right * scale.x, shifted.bottom * scale.y);\n  }\n\n  /**\n   * Returns the perimeter of the bounding box\n   */\n  public getPerimeter(): number {\n    const wx = this.width;\n    const wy = this.height;\n    return 2 * (wx + wy);\n  }\n\n  public getPoints(): Vector[] {\n    const results = [];\n    results.push(new Vector(this.left, this.top));\n    results.push(new Vector(this.right, this.top));\n    results.push(new Vector(this.right, this.bottom));\n    results.push(new Vector(this.left, this.bottom));\n    return results;\n  }\n\n  /**\n   * Creates a Polygon collision area from the points of the bounding box\n   */\n  public toPolygon(actor?: Actor): ConvexPolygon {\n    let maybeCollider = null;\n    if (actor && actor.body && actor.body.collider) {\n      maybeCollider = actor.body.collider;\n    }\n    return new ConvexPolygon({\n      collider: maybeCollider,\n      points: this.getPoints(),\n      offset: Vector.Zero\n    });\n  }\n\n  /**\n   * Determines whether a ray intersects with a bounding box\n   */\n  public rayCast(ray: Ray, farClipDistance = Infinity): boolean {\n    // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n    let tmin = -Infinity;\n    let tmax = +Infinity;\n\n    const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n    const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n\n    const tx1 = (this.left - ray.pos.x) * xinv;\n    const tx2 = (this.right - ray.pos.x) * xinv;\n    tmin = Math.min(tx1, tx2);\n    tmax = Math.max(tx1, tx2);\n\n    const ty1 = (this.top - ray.pos.y) * yinv;\n    const ty2 = (this.bottom - ray.pos.y) * yinv;\n    tmin = Math.max(tmin, Math.min(ty1, ty2));\n    tmax = Math.min(tmax, Math.max(ty1, ty2));\n\n    return tmax >= Math.max(0, tmin) && tmin < farClipDistance;\n  }\n\n  public rayCastTime(ray: Ray, farClipDistance = Infinity): number {\n    // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n    let tmin = -Infinity;\n    let tmax = +Infinity;\n\n    const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n    const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n\n    const tx1 = (this.left - ray.pos.x) * xinv;\n    const tx2 = (this.right - ray.pos.x) * xinv;\n    tmin = Math.min(tx1, tx2);\n    tmax = Math.max(tx1, tx2);\n\n    const ty1 = (this.top - ray.pos.y) * yinv;\n    const ty2 = (this.bottom - ray.pos.y) * yinv;\n    tmin = Math.max(tmin, Math.min(ty1, ty2));\n    tmax = Math.min(tmax, Math.max(ty1, ty2));\n\n    if (tmax >= Math.max(0, tmin) && tmin < farClipDistance) {\n      return tmin;\n    }\n    return -1;\n  }\n\n  /**\n   * Tests whether a point is contained within the bounding box\n   * @param p  The point to test\n   */\n  public contains(p: Vector): boolean;\n\n  /**\n   * Tests whether another bounding box is totally contained in this one\n   * @param bb  The bounding box to test\n   */\n  public contains(bb: BoundingBox): boolean;\n  public contains(val: any): boolean {\n    if (val instanceof Vector) {\n      return this.left <= val.x && this.top <= val.y && this.bottom >= val.y && this.right >= val.x;\n    } else if (val instanceof BoundingBox) {\n      if (this.left < val.left && this.top < val.top && val.bottom < this.bottom && val.right < this.right) {\n        return true;\n      }\n      return false;\n    }\n    return false;\n  }\n\n  /**\n   * Combines this bounding box and another together returning a new bounding box\n   * @param other  The bounding box to combine\n   */\n  public combine(other: BoundingBox): BoundingBox {\n    const compositeBB = new BoundingBox(\n      Math.min(this.left, other.left),\n      Math.min(this.top, other.top),\n      Math.max(this.right, other.right),\n      Math.max(this.bottom, other.bottom)\n    );\n    return compositeBB;\n  }\n\n  public get dimensions(): Vector {\n    return new Vector(this.width, this.height);\n  }\n\n  /**\n   * Test wether this bounding box intersects with another returning\n   * the intersection vector that can be used to resolve the collision. If there\n   * is no intersection null is returned.\n   *\n   * @param other  Other [[BoundingBox]] to test intersection with\n   * @returns A Vector in the direction of the current BoundingBox, this <- other\n   */\n  public intersect(other: BoundingBox): Vector {\n    const totalBoundingBox = this.combine(other);\n\n    // If the total bounding box is less than or equal the sum of the 2 bounds then there is collision\n    if (\n      totalBoundingBox.width < other.width + this.width &&\n      totalBoundingBox.height < other.height + this.height &&\n      !totalBoundingBox.dimensions.equals(other.dimensions) &&\n      !totalBoundingBox.dimensions.equals(this.dimensions)\n    ) {\n      // collision\n      let overlapX = 0;\n      // right edge is between the other's left and right edge\n      /**\n       *     +-this-+\n       *     |      |\n       *     |    +-other-+\n       *     +----|-+     |\n       *          |       |\n       *          +-------+\n       *         <---\n       *          ^ overlap\n       */\n      if (this.right >= other.left && this.right <= other.right) {\n        overlapX = other.left - this.right;\n        // right edge is past the other's right edge\n        /**\n         *     +-other-+\n         *     |       |\n         *     |    +-this-+\n         *     +----|--+   |\n         *          |      |\n         *          +------+\n         *          --->\n         *          ^ overlap\n         */\n      } else {\n        overlapX = other.right - this.left;\n      }\n\n      let overlapY = 0;\n      // top edge is between the other's top and bottom edge\n      /**\n       *     +-other-+\n       *     |       |\n       *     |    +-this-+   | <- overlap\n       *     +----|--+   |   |\n       *          |      |  \\ /\n       *          +------+   '\n       */\n      if (this.top <= other.bottom && this.top >= other.top) {\n        overlapY = other.bottom - this.top;\n        // top edge is above the other top edge\n        /**\n         *     +-this-+         .\n         *     |      |        / \\\n         *     |    +-other-+   | <- overlap\n         *     +----|-+     |   |\n         *          |       |\n         *          +-------+\n         */\n      } else {\n        overlapY = other.top - this.bottom;\n      }\n\n      if (Math.abs(overlapX) < Math.abs(overlapY)) {\n        return new Vector(overlapX, 0);\n      } else {\n        return new Vector(0, overlapY);\n      }\n      // Case of total containment of one bounding box by another\n    } else if (totalBoundingBox.dimensions.equals(other.dimensions) || totalBoundingBox.dimensions.equals(this.dimensions)) {\n      let overlapX = 0;\n      // this is wider than the other\n      if (this.width - other.width >= 0) {\n        // This right edge is closest to the others right edge\n        if (this.right - other.right <= other.left - this.left) {\n          overlapX = other.left - this.right;\n          // This left edge is closest to the others left edge\n        } else {\n          overlapX = other.right - this.left;\n        }\n        // other is wider than this\n      } else {\n        // This right edge is closest to the others right edge\n        if (other.right - this.right <= this.left - other.left) {\n          overlapX = this.left - other.right;\n          // This left edge is closest to the others left edge\n        } else {\n          overlapX = this.right - other.left;\n        }\n      }\n\n      let overlapY = 0;\n      // this is taller than other\n      if (this.height - other.height >= 0) {\n        // The bottom edge is closest to the others bottom edge\n        if (this.bottom - other.bottom <= other.top - this.top) {\n          overlapY = other.top - this.bottom;\n        } else {\n          overlapY = other.bottom - this.top;\n        }\n        // other is taller than this\n      } else {\n        // The bottom edge is closest to the others bottom edge\n        if (other.bottom - this.bottom <= this.top - other.top) {\n          overlapY = this.top - other.bottom;\n        } else {\n          overlapY = this.bottom - other.top;\n        }\n      }\n\n      if (Math.abs(overlapX) < Math.abs(overlapY)) {\n        return new Vector(overlapX, 0);\n      } else {\n        return new Vector(0, overlapY);\n      }\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Test whether the bounding box has intersected with another bounding box, returns the side of the current bb that intersected.\n   * @param bb The other actor to test\n   */\n  public intersectWithSide(bb: BoundingBox): Side {\n    const intersect = this.intersect(bb);\n    return BoundingBox.getSideFromIntersection(intersect);\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Yellow) {\n    ctx.strokeStyle = color.toString();\n    ctx.strokeRect(this.left, this.top, this.width, this.height);\n  }\n}\n","import { Body } from './Body';\nimport { Vector } from '../Algebra';\nimport { Physics, CollisionResolutionStrategy } from '../Physics';\nimport { PostCollisionEvent, PreCollisionEvent } from '../Events';\nimport * as Util from '../Util/Util';\nimport { CollisionType } from './CollisionType';\nimport { Collider } from './Collider';\n\n/**\n * Collision contacts are used internally by Excalibur to resolve collision between colliders. This\n * Pair prevents collisions from being evaluated more than one time\n */\nexport class CollisionContact {\n  /**\n   * The id of this collision contact\n   */\n  id: string;\n  /**\n   * The first collider in the collision\n   */\n  colliderA: Collider;\n  /**\n   * The second collider in the collision\n   */\n  colliderB: Collider;\n  /**\n   * The minimum translation vector to resolve penetration, pointing away from colliderA\n   */\n  mtv: Vector;\n  /**\n   * The point of collision shared between colliderA and colliderB\n   */\n  point: Vector;\n  /**\n   * The collision normal, pointing away from colliderA\n   */\n  normal: Vector;\n\n  constructor(colliderA: Collider, colliderB: Collider, mtv: Vector, point: Vector, normal: Vector) {\n    this.colliderA = colliderA;\n    this.colliderB = colliderB;\n    this.mtv = mtv;\n    this.point = point;\n    this.normal = normal;\n  }\n\n  resolve(strategy: CollisionResolutionStrategy) {\n    if (strategy === CollisionResolutionStrategy.RigidBody) {\n      this._resolveRigidBodyCollision();\n    } else if (strategy === CollisionResolutionStrategy.Box) {\n      this._resolveBoxCollision();\n    } else {\n      throw new Error('Unknown collision resolution strategy');\n    }\n  }\n\n  private _applyBoxImpulse(colliderA: Collider, colliderB: Collider, mtv: Vector) {\n    if (colliderA.type === CollisionType.Active && colliderB.type !== CollisionType.Passive) {\n      // Resolve overlaps\n      if (colliderA.type === CollisionType.Active && colliderB.type === CollisionType.Active) {\n        // split overlaps if both are Active\n        mtv = mtv.scale(0.5);\n      }\n      // Apply mtv\n      colliderA.body.pos.y += mtv.y;\n      colliderA.body.pos.x += mtv.x;\n\n      const mtvDir = mtv.normalize();\n\n      // only adjust if velocity is opposite\n      if (mtvDir.dot(colliderA.body.vel) < 0) {\n        // Cancel out velocity in direction of mtv\n        const velAdj = mtvDir.scale(mtvDir.dot(colliderA.body.vel.negate()));\n\n        colliderA.body.vel = colliderA.body.vel.add(velAdj);\n      }\n\n      colliderA.emit('postcollision', new PostCollisionEvent(colliderA, colliderB, Util.getSideFromDirection(mtv), mtv));\n    }\n  }\n\n  private _resolveBoxCollision() {\n    const side = Util.getSideFromDirection(this.mtv);\n    const mtv = this.mtv.negate();\n    // Publish collision events on both participants\n    this.colliderA.emit('precollision', new PreCollisionEvent(this.colliderA, this.colliderB, side, mtv));\n    this.colliderB.emit('precollision', new PreCollisionEvent(this.colliderB, this.colliderA, Util.getOppositeSide(side), mtv.negate()));\n\n    this._applyBoxImpulse(this.colliderA, this.colliderB, mtv);\n    this._applyBoxImpulse(this.colliderB, this.colliderA, mtv.negate());\n  }\n\n  private _resolveRigidBodyCollision() {\n    // perform collision on bounding areas\n    const bodyA: Body = this.colliderA.body;\n    const bodyB: Body = this.colliderB.body;\n    const mtv = this.mtv; // normal pointing away from colliderA\n    let normal = this.normal; // normal pointing away from colliderA\n    if (bodyA === bodyB) {\n      // sanity check for existing pairs\n      return;\n    }\n\n    // Publish collision events on both participants\n    const side = Util.getSideFromDirection(this.mtv);\n    this.colliderA.emit('precollision', new PreCollisionEvent(this.colliderA, this.colliderB, side, this.mtv));\n    this.colliderB.emit(\n      'precollision',\n      new PreCollisionEvent(this.colliderB, this.colliderA, Util.getOppositeSide(side), this.mtv.negate())\n    );\n\n    // If any of the participants are passive then short circuit\n    if (this.colliderA.type === CollisionType.Passive || this.colliderB.type === CollisionType.Passive) {\n      return;\n    }\n\n    const invMassA = this.colliderA.type === CollisionType.Fixed ? 0 : 1 / this.colliderA.mass;\n    const invMassB = this.colliderB.type === CollisionType.Fixed ? 0 : 1 / this.colliderB.mass;\n\n    const invMoiA = this.colliderA.type === CollisionType.Fixed ? 0 : 1 / this.colliderA.inertia;\n    const invMoiB = this.colliderB.type === CollisionType.Fixed ? 0 : 1 / this.colliderB.inertia;\n\n    // average restitution more realistic\n    const coefRestitution = Math.min(this.colliderA.bounciness, this.colliderB.bounciness);\n\n    const coefFriction = Math.min(this.colliderA.friction, this.colliderB.friction);\n\n    normal = normal.normalize();\n    const tangent = normal.normal().normalize();\n\n    const ra = this.point.sub(this.colliderA.center); // point relative to colliderA position\n    const rb = this.point.sub(this.colliderB.center); /// point relative to colliderB\n\n    // Relative velocity in linear terms\n    // Angular to linear velocity formula -> omega = v/r\n    const rv = bodyB.vel.add(rb.cross(-bodyB.rx)).sub(bodyA.vel.sub(ra.cross(bodyA.rx)));\n    const rvNormal = rv.dot(normal);\n    const rvTangent = rv.dot(tangent);\n\n    const raTangent = ra.dot(tangent);\n    const raNormal = ra.dot(normal);\n\n    const rbTangent = rb.dot(tangent);\n    const rbNormal = rb.dot(normal);\n\n    // If objects are moving away ignore\n    if (rvNormal > 0) {\n      return;\n    }\n\n    // Collision impulse formula from Chris Hecker\n    // https://en.wikipedia.org/wiki/Collision_response\n    const impulse =\n      -((1 + coefRestitution) * rvNormal) / (invMassA + invMassB + invMoiA * raTangent * raTangent + invMoiB * rbTangent * rbTangent);\n\n    if (this.colliderA.type === CollisionType.Fixed) {\n      bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\n      if (Physics.allowRigidBodyRotation) {\n        bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\n      }\n      bodyB.addMtv(mtv);\n    } else if (this.colliderB.type === CollisionType.Fixed) {\n      bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\n      if (Physics.allowRigidBodyRotation) {\n        bodyA.rx += impulse * invMoiA * -ra.cross(normal);\n      }\n      bodyA.addMtv(mtv.negate());\n    } else {\n      bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\n      bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\n\n      if (Physics.allowRigidBodyRotation) {\n        bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\n        bodyA.rx += impulse * invMoiA * -ra.cross(normal);\n      }\n\n      // Split the mtv in half for the two bodies, potentially we could do something smarter here\n      bodyB.addMtv(mtv.scale(0.5));\n      bodyA.addMtv(mtv.scale(-0.5));\n    }\n\n    // Friction portion of impulse\n    if (coefFriction && rvTangent) {\n      // Columb model of friction, formula for impulse due to friction from\n      // https://en.wikipedia.org/wiki/Collision_response\n\n      // tangent force exerted by body on another in contact\n      const t = rv.sub(normal.scale(rv.dot(normal))).normalize();\n\n      // impulse in the direction of tangent force\n      const jt = rv.dot(t) / (invMassA + invMassB + raNormal * raNormal * invMoiA + rbNormal * rbNormal * invMoiB);\n\n      let frictionImpulse = new Vector(0, 0);\n      if (Math.abs(jt) <= impulse * coefFriction) {\n        frictionImpulse = t.scale(jt).negate();\n      } else {\n        frictionImpulse = t.scale(-impulse * coefFriction);\n      }\n\n      if (this.colliderA.type === CollisionType.Fixed) {\n        // apply frictional impulse\n        bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\n        if (Physics.allowRigidBodyRotation) {\n          bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\n        }\n      } else if (this.colliderB.type === CollisionType.Fixed) {\n        // apply frictional impulse\n        bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\n        if (Physics.allowRigidBodyRotation) {\n          bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\n        }\n      } else {\n        // apply frictional impulse\n        bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\n        bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\n\n        // apply frictional impulse\n        if (Physics.allowRigidBodyRotation) {\n          bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\n          bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\n        }\n      }\n    }\n\n    this.colliderA.emit('postcollision', new PostCollisionEvent(this.colliderA, this.colliderB, side, this.mtv));\n    this.colliderB.emit(\n      'postcollision',\n      new PostCollisionEvent(this.colliderB, this.colliderA, Util.getOppositeSide(side), this.mtv.negate())\n    );\n  }\n}\n","﻿import { Circle } from './Circle';\nimport { CollisionContact } from './CollisionContact';\nimport { ConvexPolygon } from './ConvexPolygon';\nimport { Edge } from './Edge';\n\nimport { Vector } from '../Algebra';\n\nexport const CollisionJumpTable = {\n  CollideCircleCircle(circleA: Circle, circleB: Circle): CollisionContact {\n    const radius = circleA.radius + circleB.radius;\n    const circleAPos = circleA.worldPos;\n    const circleBPos = circleB.worldPos;\n    if (circleAPos.distance(circleBPos) > radius) {\n      return null;\n    }\n\n    const axisOfCollision = circleBPos.sub(circleAPos).normalize();\n    const mvt = axisOfCollision.scale(radius - circleBPos.distance(circleAPos));\n\n    const pointOfCollision = circleA.getFurthestPoint(axisOfCollision);\n\n    return new CollisionContact(circleA.collider, circleB.collider, mvt, pointOfCollision, axisOfCollision);\n  },\n\n  CollideCirclePolygon(circle: Circle, polygon: ConvexPolygon): CollisionContact {\n    let minAxis = circle.testSeparatingAxisTheorem(polygon);\n    if (!minAxis) {\n      return null;\n    }\n\n    // make sure that the minAxis is pointing away from circle\n    const samedir = minAxis.dot(polygon.center.sub(circle.center));\n    minAxis = samedir < 0 ? minAxis.negate() : minAxis;\n\n    const verts: Vector[] = [];\n\n    const point1 = polygon.getFurthestPoint(minAxis.negate());\n    const point2 = circle.getFurthestPoint(minAxis); //.add(cc);\n    if (circle.contains(point1)) {\n      verts.push(point1);\n    }\n    if (polygon.contains(point2)) {\n      verts.push(point2);\n    }\n    if (verts.length === 0) {\n      return null;\n    }\n\n    return new CollisionContact(\n      circle.collider,\n      polygon.collider,\n      minAxis,\n      verts.length === 2 ? verts[0].average(verts[1]) : verts[0],\n      minAxis.normalize()\n    );\n  },\n\n  CollideCircleEdge(circle: Circle, edge: Edge): CollisionContact {\n    // center of the circle\n    const cc = circle.center;\n    // vector in the direction of the edge\n    const e = edge.end.sub(edge.begin);\n\n    // amount of overlap with the circle's center along the edge direction\n    const u = e.dot(edge.end.sub(cc));\n    const v = e.dot(cc.sub(edge.begin));\n\n    // Potential region A collision (circle is on the left side of the edge, before the beginning)\n    if (v <= 0) {\n      const da = edge.begin.sub(cc);\n      const dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\n      // save some sqrts\n      if (dda > circle.radius * circle.radius) {\n        return null; // no collision\n      }\n      return new CollisionContact(\n        circle.collider,\n        edge.collider,\n        da.normalize().scale(circle.radius - Math.sqrt(dda)),\n        edge.begin,\n        da.normalize()\n      );\n    }\n\n    // Potential region B collision (circle is on the right side of the edge, after the end)\n    if (u <= 0) {\n      const db = edge.end.sub(cc);\n      const ddb = db.dot(db);\n      if (ddb > circle.radius * circle.radius) {\n        return null;\n      }\n      return new CollisionContact(\n        circle.collider,\n        edge.collider,\n        db.normalize().scale(circle.radius - Math.sqrt(ddb)),\n        edge.end,\n        db.normalize()\n      );\n    }\n\n    // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\n    const den = e.dot(e);\n    const pointOnEdge = edge.begin\n      .scale(u)\n      .add(edge.end.scale(v))\n      .scale(1 / den);\n    const d = cc.sub(pointOnEdge);\n\n    const dd = d.dot(d);\n    if (dd > circle.radius * circle.radius) {\n      return null; // no collision\n    }\n\n    let n = e.perpendicular();\n    // flip correct direction\n    if (n.dot(cc.sub(edge.begin)) < 0) {\n      n.x = -n.x;\n      n.y = -n.y;\n    }\n\n    n = n.normalize();\n\n    const mvt = n.scale(Math.abs(circle.radius - Math.sqrt(dd)));\n    return new CollisionContact(circle.collider, edge.collider, mvt.negate(), pointOnEdge, n.negate());\n  },\n\n  CollideEdgeEdge(): CollisionContact {\n    // Edge-edge collision doesn't make sense\n    return null;\n  },\n\n  CollidePolygonEdge(polygon: ConvexPolygon, edge: Edge): CollisionContact {\n    // 3 cases:\n    // (1) Polygon lands on the full face\n    // (2) Polygon lands on the right point\n    // (3) Polygon lands on the left point\n\n    const e = edge.end.sub(edge.begin);\n    let edgeNormal = e.normal();\n\n    if (polygon.contains(edge.begin)) {\n      const { distance: mtv, face } = polygon.getClosestFace(edge.begin);\n      if (mtv) {\n        return new CollisionContact(polygon.collider, edge.collider, mtv.negate(), edge.begin.add(mtv.negate()), face.normal().negate());\n      }\n    }\n\n    if (polygon.contains(edge.end)) {\n      const { distance: mtv, face } = polygon.getClosestFace(edge.end);\n      if (mtv) {\n        return new CollisionContact(polygon.collider, edge.collider, mtv.negate(), edge.end.add(mtv.negate()), face.normal().negate());\n      }\n    }\n\n    const pc = polygon.center;\n    const ec = edge.center;\n    const dir = ec.sub(pc).normalize();\n\n    // build a temporary polygon from the edge to use SAT\n    const linePoly = new ConvexPolygon({\n      collider: edge.collider,\n      points: [edge.begin, edge.end, edge.end.add(dir.scale(30)), edge.begin.add(dir.scale(30))]\n    });\n\n    let minAxis = polygon.testSeparatingAxisTheorem(linePoly);\n\n    // no minAxis, no overlap, no collision\n    if (!minAxis) {\n      return null;\n    }\n\n    // flip the normal and axis to always have positive collisions\n    edgeNormal = edgeNormal.dot(dir) < 0 ? edgeNormal.negate() : edgeNormal;\n    minAxis = minAxis.dot(dir) < 0 ? minAxis.negate() : minAxis;\n\n    return new CollisionContact(polygon.collider, edge.collider, minAxis, polygon.getFurthestPoint(edgeNormal), edgeNormal);\n  },\n\n  CollidePolygonPolygon(polyA: ConvexPolygon, polyB: ConvexPolygon): CollisionContact {\n    // do a SAT test to find a min axis if it exists\n    let minAxis = polyA.testSeparatingAxisTheorem(polyB);\n\n    // no overlap, no collision return null\n    if (!minAxis) {\n      return null;\n    }\n\n    // make sure that minAxis is pointing from A -> B\n    const sameDir = minAxis.dot(polyB.center.sub(polyA.center));\n    minAxis = sameDir < 0 ? minAxis.negate() : minAxis;\n\n    // find rough point of collision\n    // todo this could be better\n    const verts: Vector[] = [];\n    const pointA = polyA.getFurthestPoint(minAxis);\n    const pointB = polyB.getFurthestPoint(minAxis.negate());\n\n    if (polyB.contains(pointA)) {\n      verts.push(pointA);\n    }\n\n    if (polyA.contains(pointB)) {\n      verts.push(pointB);\n    }\n    // no candidates, pick something\n    if (verts.length === 0) {\n      verts.push(pointB);\n    }\n\n    const contact = verts.length === 2 ? verts[0].add(verts[1]).scale(0.5) : verts[0];\n\n    return new CollisionContact(polyA.collider, polyB.collider, minAxis, contact, minAxis.normalize());\n  }\n};\n","import { Line, Vector, Ray } from '../Algebra';\nimport { ConvexPolygon } from './ConvexPolygon';\nimport { Edge } from './Edge';\nimport { Circle } from './Circle';\n\n/**\n * Finds the closes line between 2 line segments, were the magnitude of u, v are the lengths of each segment\n * L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n * L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n * @param p0 Point where L1 begins\n * @param u Direction and length of L1\n * @param q0 Point were L2 begins\n * @param v Direction and length of L2\n */\nexport function ClosestLine(p0: Vector, u: Vector, q0: Vector, v: Vector) {\n  // Distance between 2 lines http://geomalgorithms.com/a07-_distance.html\n\n  // w(s, t) = P(s) - Q(t)\n  // The w(s, t) that has the minimum distance we will say is w(sClosest, tClosest) = wClosest\n  //\n  // wClosest is the vector that is uniquely perpendicular to the 2 line directions u & v.\n  // wClosest = w0 + sClosest * u - tClosest * v, where w0 is p0 - q0\n  //\n  // The closest point between 2 lines then satisfies this pair of equations\n  // 1: u * wClosest = 0\n  // 2: v * wClosest = 0\n  //\n  // Substituting wClosest into the equations we get\n  //\n  // 1: (u * u) * sClosest - (u * v) tClosest = -u * w0\n  // 2: (v * u) * sClosest - (v * v) tClosest = -v * w0\n\n  // simplify w0\n  const w0 = p0.sub(q0);\n\n  // simplify (u * u);\n  const a = u.dot(u);\n  // simplify (u * v);\n  const b = u.dot(v);\n  // simplify (v * v)\n  const c = v.dot(v);\n  // simplify (u * w0)\n  const d = u.dot(w0);\n  // simplify (v * w0)\n  const e = v.dot(w0);\n\n  // denominator ac - b^2\n  const denom = a * c - b * b;\n  let sDenom = denom;\n  let tDenom = denom;\n  // if denom is 0 they are parallel, use any point from either as the start in this case p0\n  if (denom === 0 || denom <= 0.01) {\n    const tClosestParallel = d / b;\n    return new Line(p0, q0.add(v.scale(tClosestParallel)));\n  }\n\n  // Solve for sClosest for infinite line\n  let sClosest = b * e - c * d; // / denom;\n\n  // Solve for tClosest for infinite line\n  let tClosest = a * e - b * d; // / denom;\n\n  // Solve for segments candidate edges, if sClosest and tClosest are outside their segments\n  if (sClosest < 0) {\n    sClosest = 0;\n    tClosest = e;\n    tDenom = c;\n  } else if (sClosest > sDenom) {\n    sClosest = sDenom;\n    tClosest = e + b;\n    tDenom = c;\n  }\n\n  if (tClosest < 0) {\n    tClosest = 0;\n    if (-d < 0) {\n      sClosest = 0;\n    } else if (-d > a) {\n      sClosest = sDenom;\n    } else {\n      sClosest = -d;\n      sDenom = a;\n    }\n  } else if (tClosest > tDenom) {\n    tClosest = tDenom;\n    if (-d + b < 0) {\n      sClosest = 0;\n    } else if (-d + b > a) {\n      sClosest = sDenom;\n    } else {\n      sClosest = -d + b;\n      sDenom = a;\n    }\n  }\n  sClosest = Math.abs(sClosest) < 0.001 ? 0 : sClosest / sDenom;\n  tClosest = Math.abs(tClosest) < 0.001 ? 0 : tClosest / tDenom;\n\n  return new Line(p0.add(u.scale(sClosest)), q0.add(v.scale(tClosest)));\n}\n\nexport const ClosestLineJumpTable = {\n  PolygonPolygonClosestLine(polygonA: ConvexPolygon, polygonB: ConvexPolygon) {\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = polygonB.worldPos;\n    const otherDirection = otherWorldPos.sub(polygonA.worldPos);\n    const thisDirection = otherDirection.negate();\n\n    const rayTowardsOther = new Ray(polygonA.worldPos, otherDirection);\n    const rayTowardsThis = new Ray(otherWorldPos, thisDirection);\n\n    const thisPoint = polygonA.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\n    const otherPoint = polygonB.rayCast(rayTowardsThis).add(rayTowardsThis.dir.scale(0.1));\n\n    const thisFace = polygonA.getClosestFace(thisPoint);\n    const otherFace = polygonB.getClosestFace(otherPoint);\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const p0 = thisFace.face.begin;\n    const u = thisFace.face.getEdge();\n\n    // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n    const q0 = otherFace.face.begin;\n    const v = otherFace.face.getEdge();\n\n    return ClosestLine(p0, u, q0, v);\n  },\n\n  PolygonEdgeClosestLine(polygon: ConvexPolygon, edge: Edge) {\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = edge.worldPos;\n    const otherDirection = otherWorldPos.sub(polygon.worldPos);\n\n    const rayTowardsOther = new Ray(polygon.worldPos, otherDirection);\n\n    const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\n\n    const thisFace = polygon.getClosestFace(thisPoint);\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const p0 = thisFace.face.begin;\n    const u = thisFace.face.getEdge();\n\n    // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n    const edgeLine = edge.asLine();\n    const edgeStart = edgeLine.begin;\n    const edgeVector = edgeLine.getEdge();\n    const q0 = edgeStart;\n    const v = edgeVector;\n\n    return ClosestLine(p0, u, q0, v);\n  },\n\n  PolygonCircleClosestLine(polygon: ConvexPolygon, circle: Circle) {\n    // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = circle.worldPos;\n    const otherDirection = otherWorldPos.sub(polygon.worldPos);\n\n    const rayTowardsOther = new Ray(polygon.worldPos, otherDirection.normalize());\n\n    const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\n\n    const thisFace = polygon.getClosestFace(thisPoint);\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const p0 = thisFace.face.begin;\n    const u = thisFace.face.getEdge();\n\n    // Time of minimum distance\n    let t = (u.x * (otherWorldPos.x - p0.x) + u.y * (otherWorldPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n\n    // If time of minimum is past the edge clamp\n    if (t > 1) {\n      t = 1;\n    } else if (t < 0) {\n      t = 0;\n    }\n\n    // Minimum distance\n    const d = Math.sqrt(Math.pow(p0.x + u.x * t - otherWorldPos.x, 2) + Math.pow(p0.y + u.y * t - otherWorldPos.y, 2)) - circle.radius;\n\n    const circlex = ((p0.x + u.x * t - otherWorldPos.x) * circle.radius) / (circle.radius + d);\n    const circley = ((p0.y + u.y * t - otherWorldPos.y) * circle.radius) / (circle.radius + d);\n    return new Line(u.scale(t).add(p0), new Vector(otherWorldPos.x + circlex, otherWorldPos.y + circley));\n  },\n\n  CircleCircleClosestLine(circleA: Circle, circleB: Circle) {\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = circleB.worldPos;\n    const otherDirection = otherWorldPos.sub(circleA.worldPos);\n\n    const thisWorldPos = circleA.worldPos;\n    const thisDirection = thisWorldPos.sub(circleB.worldPos);\n\n    const rayTowardsOther = new Ray(circleA.worldPos, otherDirection);\n    const rayTowardsThis = new Ray(circleB.worldPos, thisDirection);\n\n    const thisPoint = circleA.rayCast(rayTowardsOther);\n    const otherPoint = circleB.rayCast(rayTowardsThis);\n\n    return new Line(thisPoint, otherPoint);\n  },\n\n  CircleEdgeClosestLine(circle: Circle, edge: Edge) {\n    // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n    const circleWorlPos = circle.worldPos;\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const edgeLine = edge.asLine();\n    const edgeStart = edgeLine.begin;\n    const edgeVector = edgeLine.getEdge();\n    const p0 = edgeStart;\n    const u = edgeVector;\n\n    // Time of minimum distance\n    let t = (u.x * (circleWorlPos.x - p0.x) + u.y * (circleWorlPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n\n    // If time of minimum is past the edge clamp to edge\n    if (t > 1) {\n      t = 1;\n    } else if (t < 0) {\n      t = 0;\n    }\n\n    // Minimum distance\n    const d = Math.sqrt(Math.pow(p0.x + u.x * t - circleWorlPos.x, 2) + Math.pow(p0.y + u.y * t - circleWorlPos.y, 2)) - circle.radius;\n\n    const circlex = ((p0.x + u.x * t - circleWorlPos.x) * circle.radius) / (circle.radius + d);\n    const circley = ((p0.y + u.y * t - circleWorlPos.y) * circle.radius) / (circle.radius + d);\n    return new Line(u.scale(t).add(p0), new Vector(circleWorlPos.x + circlex, circleWorlPos.y + circley));\n  },\n\n  EdgeEdgeClosestLine(edgeA: Edge, edgeB: Edge) {\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const edgeLineA = edgeA.asLine();\n    const edgeStartA = edgeLineA.begin;\n    const edgeVectorA = edgeLineA.getEdge();\n    const p0 = edgeStartA;\n    const u = edgeVectorA;\n\n    // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n    const edgeLineB = edgeB.asLine();\n    const edgeStartB = edgeLineB.begin;\n    const edgeVectorB = edgeLineB.getEdge();\n    const q0 = edgeStartB;\n    const v = edgeVectorB;\n\n    return ClosestLine(p0, u, q0, v);\n  }\n};\n","import { BoundingBox } from './BoundingBox';\nimport { CollisionJumpTable } from './CollisionJumpTable';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionShape } from './CollisionShape';\nimport { ConvexPolygon } from './ConvexPolygon';\nimport { Edge } from './Edge';\n\nimport { Vector, Ray, Projection, Line } from '../Algebra';\nimport { Physics } from '../Physics';\nimport { Color } from '../Drawing/Color';\nimport { Collider } from './Collider';\n\nimport { ClosestLineJumpTable } from './ClosestLineJumpTable';\n\nexport interface CircleOptions {\n  /**\n   * Optional pixel offset to shift the circle relative to the collider, by default (0, 0).\n   */\n  offset?: Vector;\n  /**\n   * Required radius of the circle\n   */\n  radius: number;\n  /**\n   * Optional collider to associate with this shape\n   */\n  collider?: Collider;\n}\n\n/**\n * This is a circle collision shape for the excalibur rigid body physics simulation\n *\n * Example:\n * [[include:CircleShape.md]]\n */\nexport class Circle implements CollisionShape {\n  /**\n   * Position of the circle relative to the collider, by default (0, 0) meaning the shape is positioned on top of the collider.\n   */\n  public offset: Vector = Vector.Zero;\n\n  public get worldPos(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.collider.body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * This is the radius of the circle\n   */\n  public radius: number;\n\n  /**\n   * The collider associated for this shape, if any.\n   */\n  public collider?: Collider;\n\n  constructor(options: CircleOptions) {\n    this.offset = options.offset || Vector.Zero;\n    this.radius = options.radius || 0;\n    this.collider = options.collider || null;\n  }\n\n  /**\n   * Returns a clone of this shape, not associated with any collider\n   */\n  public clone(): Circle {\n    return new Circle({\n      offset: this.offset.clone(),\n      radius: this.radius,\n      collider: null\n    });\n  }\n\n  /**\n   * Get the center of the collision shape in world coordinates\n   */\n  public get center(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.offset.add(this.collider.body.pos);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Tests if a point is contained in this collision shape\n   */\n  public contains(point: Vector): boolean {\n    let pos = this.offset;\n    if (this.collider && this.collider.body) {\n      pos = this.collider.body.pos;\n    }\n    const distance = pos.distance(point);\n    if (distance <= this.radius) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Casts a ray at the Circle shape and returns the nearest point of collision\n   * @param ray\n   */\n  public rayCast(ray: Ray, max: number = Infinity): Vector {\n    //https://en.wikipedia.org/wiki/Line%E2%80%93sphere_intersection\n    const c = this.center;\n    const dir = ray.dir;\n    const orig = ray.pos;\n\n    const discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) - Math.pow(orig.sub(c).distance(), 2) + Math.pow(this.radius, 2));\n\n    if (discriminant < 0) {\n      // no intersection\n      return null;\n    } else {\n      let toi = 0;\n      if (discriminant === 0) {\n        toi = -dir.dot(orig.sub(c));\n        if (toi > 0 && toi < max) {\n          return ray.getPoint(toi);\n        }\n        return null;\n      } else {\n        const toi1 = -dir.dot(orig.sub(c)) + discriminant;\n        const toi2 = -dir.dot(orig.sub(c)) - discriminant;\n\n        const positiveToi: number[] = [];\n        if (toi1 >= 0) {\n          positiveToi.push(toi1);\n        }\n\n        if (toi2 >= 0) {\n          positiveToi.push(toi2);\n        }\n\n        const mintoi = Math.min(...positiveToi);\n        if (mintoi <= max) {\n          return ray.getPoint(mintoi);\n        }\n        return null;\n      }\n    }\n  }\n\n  public getClosestLineBetween(shape: CollisionShape): Line {\n    if (shape instanceof Circle) {\n      return ClosestLineJumpTable.CircleCircleClosestLine(this, shape);\n    } else if (shape instanceof ConvexPolygon) {\n      return ClosestLineJumpTable.PolygonCircleClosestLine(shape, this).flip();\n    } else if (shape instanceof Edge) {\n      return ClosestLineJumpTable.CircleEdgeClosestLine(this, shape).flip();\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public collide(shape: CollisionShape): CollisionContact {\n    if (shape instanceof Circle) {\n      return CollisionJumpTable.CollideCircleCircle(this, shape);\n    } else if (shape instanceof ConvexPolygon) {\n      return CollisionJumpTable.CollideCirclePolygon(this, shape);\n    } else if (shape instanceof Edge) {\n      return CollisionJumpTable.CollideCircleEdge(this, shape);\n    } else {\n      throw new Error(`Circle could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Find the point on the shape furthest in the direction specified\n   */\n  public getFurthestPoint(direction: Vector): Vector {\n    return this.center.add(direction.normalize().scale(this.radius));\n  }\n\n  /**\n   * Get the axis aligned bounding box for the circle shape in world coordinates\n   */\n  public get bounds(): BoundingBox {\n    let bodyPos = Vector.Zero;\n    if (this.collider && this.collider.body) {\n      bodyPos = this.collider.body.pos;\n    }\n    return new BoundingBox(\n      this.offset.x + bodyPos.x - this.radius,\n      this.offset.y + bodyPos.y - this.radius,\n      this.offset.x + bodyPos.x + this.radius,\n      this.offset.y + bodyPos.y + this.radius\n    );\n  }\n\n  /**\n   * Get the axis aligned bounding box for the circle shape in local coordinates\n   */\n  public get localBounds(): BoundingBox {\n    return new BoundingBox(\n      this.offset.x - this.radius,\n      this.offset.y - this.radius,\n      this.offset.x + this.radius,\n      this.offset.y + this.radius\n    );\n  }\n\n  /**\n   * Get axis not implemented on circles, since there are infinite axis in a circle\n   */\n  public get axes(): Vector[] {\n    return null;\n  }\n\n  /**\n   * Returns the moment of inertia of a circle given it's mass\n   * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n  public get inertia(): number {\n    const mass = this.collider ? this.collider.mass : Physics.defaultMass;\n    return (mass * this.radius * this.radius) / 2;\n  }\n\n  /**\n   * Tests the separating axis theorem for circles against polygons\n   */\n  public testSeparatingAxisTheorem(polygon: ConvexPolygon): Vector {\n    const axes = polygon.axes;\n    const pc = polygon.center;\n    // Special SAT with circles\n    const closestPointOnPoly = polygon.getFurthestPoint(this.offset.sub(pc));\n    axes.push(this.offset.sub(closestPointOnPoly).normalize());\n\n    let minOverlap = Number.MAX_VALUE;\n    let minAxis = null;\n    let minIndex = -1;\n    for (let i = 0; i < axes.length; i++) {\n      const proj1 = polygon.project(axes[i]);\n      const proj2 = this.project(axes[i]);\n      const overlap = proj1.getOverlap(proj2);\n      if (overlap <= 0) {\n        return null;\n      } else {\n        if (overlap < minOverlap) {\n          minOverlap = overlap;\n          minAxis = axes[i];\n          minIndex = i;\n        }\n      }\n    }\n    if (minIndex < 0) {\n      return null;\n    }\n    return minAxis.normalize().scale(minOverlap);\n  }\n\n  /* istanbul ignore next */\n  public recalc(): void {\n    // circles don't cache\n  }\n\n  /**\n   * Project the circle along a specified axis\n   */\n  public project(axis: Vector): Projection {\n    const scalars = [];\n    const point = this.center;\n    const dotProduct = point.dot(axis);\n    scalars.push(dotProduct);\n    scalars.push(dotProduct + this.radius);\n    scalars.push(dotProduct - this.radius);\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, color: Color = Color.Green, pos: Vector = Vector.Zero) {\n    const newPos = pos.add(this.offset);\n    ctx.beginPath();\n    ctx.fillStyle = color.toString();\n    ctx.arc(newPos.x, newPos.y, this.radius, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Green) {\n    const body = this.collider.body;\n    const pos = body ? body.pos.add(this.offset) : this.offset;\n    const rotation = body ? body.rotation : 0;\n\n    ctx.beginPath();\n    ctx.strokeStyle = color.toString();\n    ctx.arc(pos.x, pos.y, this.radius, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(pos.x, pos.y);\n    ctx.lineTo(Math.cos(rotation) * this.radius + pos.x, Math.sin(rotation) * this.radius + pos.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n}\n","import { Body } from './Body';\nimport { BoundingBox } from './BoundingBox';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionJumpTable } from './CollisionJumpTable';\nimport { CollisionShape } from './CollisionShape';\nimport { Circle } from './Circle';\nimport { ConvexPolygon } from './ConvexPolygon';\n\nimport { Vector, Ray, Projection, Line } from '../Algebra';\nimport { Physics } from '../Physics';\nimport { Color } from '../Drawing/Color';\nimport { Collider } from './Collider';\nimport { ClosestLineJumpTable } from './ClosestLineJumpTable';\n\nexport interface EdgeOptions {\n  /**\n   * The beginning of the edge defined in local coordinates to the collider\n   */\n  begin: Vector;\n  /**\n   * The ending of the edge defined in local coordinates to the collider\n   */\n  end: Vector;\n  /**\n   * Optionally the collider associated with this edge\n   */\n  collider?: Collider;\n}\n\n/**\n * Edge is a single line collision shape to create collisions with a single line.\n *\n * Example:\n * [[include:EdgeShape.md]]\n */\nexport class Edge implements CollisionShape {\n  body: Body;\n  collider?: Collider;\n  offset: Vector;\n  begin: Vector;\n  end: Vector;\n\n  constructor(options: EdgeOptions) {\n    this.begin = options.begin || Vector.Zero;\n    this.end = options.end || Vector.Zero;\n    this.collider = options.collider || null;\n    this.offset = this.center;\n  }\n\n  /**\n   * Returns a clone of this Edge, not associated with any collider\n   */\n  public clone(): Edge {\n    return new Edge({\n      begin: this.begin.clone(),\n      end: this.end.clone(),\n      collider: null\n    });\n  }\n\n  public get worldPos(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.collider.body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Get the center of the collision area in world coordinates\n   */\n  public get center(): Vector {\n    const pos = this.begin.average(this.end).add(this._getBodyPos());\n    return pos;\n  }\n\n  private _getBodyPos(): Vector {\n    let bodyPos = Vector.Zero;\n    if (this.collider && this.collider.body) {\n      bodyPos = this.collider.body.pos;\n    }\n    return bodyPos;\n  }\n\n  private _getTransformedBegin(): Vector {\n    const body = this.collider ? this.collider.body : null;\n    const angle = body ? body.rotation : 0;\n    return this.begin.rotate(angle).add(this._getBodyPos());\n  }\n\n  private _getTransformedEnd(): Vector {\n    const body = this.collider ? this.collider.body : null;\n    const angle = body ? body.rotation : 0;\n    return this.end.rotate(angle).add(this._getBodyPos());\n  }\n\n  /**\n   * Returns the slope of the line in the form of a vector\n   */\n  public getSlope(): Vector {\n    const begin = this._getTransformedBegin();\n    const end = this._getTransformedEnd();\n    const distance = begin.distance(end);\n    return end.sub(begin).scale(1 / distance);\n  }\n\n  /**\n   * Returns the length of the line segment in pixels\n   */\n  public getLength(): number {\n    const begin = this._getTransformedBegin();\n    const end = this._getTransformedEnd();\n    const distance = begin.distance(end);\n    return distance;\n  }\n\n  /**\n   * Tests if a point is contained in this collision area\n   */\n  public contains(): boolean {\n    return false;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public rayCast(ray: Ray, max: number = Infinity): Vector {\n    const numerator = this._getTransformedBegin().sub(ray.pos);\n\n    // Test is line and ray are parallel and non intersecting\n    if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\n      return null;\n    }\n\n    // Lines are parallel\n    const divisor = ray.dir.cross(this.getSlope());\n    if (divisor === 0) {\n      return null;\n    }\n\n    const t = numerator.cross(this.getSlope()) / divisor;\n\n    if (t >= 0 && t <= max) {\n      const u = numerator.cross(ray.dir) / divisor / this.getLength();\n      if (u >= 0 && u <= 1) {\n        return ray.getPoint(t);\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns the closes line between this and another shape, from this -> shape\n   * @param shape\n   */\n  public getClosestLineBetween(shape: CollisionShape): Line {\n    if (shape instanceof Circle) {\n      return ClosestLineJumpTable.CircleEdgeClosestLine(shape, this);\n    } else if (shape instanceof ConvexPolygon) {\n      return ClosestLineJumpTable.PolygonEdgeClosestLine(shape, this).flip();\n    } else if (shape instanceof Edge) {\n      return ClosestLineJumpTable.EdgeEdgeClosestLine(this, shape);\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public collide(shape: CollisionShape): CollisionContact {\n    if (shape instanceof Circle) {\n      return CollisionJumpTable.CollideCircleEdge(shape, this);\n    } else if (shape instanceof ConvexPolygon) {\n      return CollisionJumpTable.CollidePolygonEdge(shape, this);\n    } else if (shape instanceof Edge) {\n      return CollisionJumpTable.CollideEdgeEdge();\n    } else {\n      throw new Error(`Edge could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Find the point on the shape furthest in the direction specified\n   */\n  public getFurthestPoint(direction: Vector): Vector {\n    const transformedBegin = this._getTransformedBegin();\n    const transformedEnd = this._getTransformedEnd();\n    if (direction.dot(transformedBegin) > 0) {\n      return transformedBegin;\n    } else {\n      return transformedEnd;\n    }\n  }\n\n  private _boundsFromBeginEnd(begin: Vector, end: Vector) {\n    return new BoundingBox(Math.min(begin.x, end.x), Math.min(begin.y, end.y), Math.max(begin.x, end.x), Math.max(begin.y, end.y));\n  }\n\n  /**\n   * Get the axis aligned bounding box for the edge shape in world space\n   */\n  public get bounds(): BoundingBox {\n    const transformedBegin = this._getTransformedBegin();\n    const transformedEnd = this._getTransformedEnd();\n    return this._boundsFromBeginEnd(transformedBegin, transformedEnd);\n  }\n\n  /**\n   * Get the axis aligned bounding box for the edge shape in local space\n   */\n  public get localBounds(): BoundingBox {\n    return this._boundsFromBeginEnd(this.begin, this.end);\n  }\n\n  /**\n   * Returns this edge represented as a line in world coordinates\n   */\n  public asLine(): Line {\n    return new Line(this._getTransformedBegin(), this._getTransformedEnd());\n  }\n\n  public asLocalLine(): Line {\n    return new Line(this.begin, this.end);\n  }\n\n  /**\n   * Get the axis associated with the edge\n   */\n  public get axes(): Vector[] {\n    const e = this._getTransformedEnd().sub(this._getTransformedBegin());\n    const edgeNormal = e.normal();\n\n    const axes = [];\n    axes.push(edgeNormal);\n    axes.push(edgeNormal.negate());\n    axes.push(edgeNormal.normal());\n    axes.push(edgeNormal.normal().negate());\n    return axes;\n  }\n\n  /**\n   * Get the moment of inertia for an edge\n   * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n  public get inertia(): number {\n    const mass = this.collider ? this.collider.mass : Physics.defaultMass;\n    const length = this.end.sub(this.begin).distance() / 2;\n    return mass * length * length;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public recalc(): void {\n    // edges don't have any cached data\n  }\n\n  /**\n   * Project the edge along a specified axis\n   */\n  public project(axis: Vector): Projection {\n    const scalars = [];\n\n    const points = [this._getTransformedBegin(), this._getTransformedEnd()];\n    const len = points.length;\n    for (let i = 0; i < len; i++) {\n      scalars.push(points[i].dot(axis));\n    }\n\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, color: Color = Color.Green, pos: Vector = Vector.Zero) {\n    const begin = this.begin.add(pos);\n    const end = this.end.add(pos);\n    ctx.strokeStyle = color.toString();\n    ctx.beginPath();\n    ctx.moveTo(begin.x, begin.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Red) {\n    const begin = this._getTransformedBegin();\n    const end = this._getTransformedEnd();\n    ctx.strokeStyle = color.toString();\n    ctx.beginPath();\n    ctx.moveTo(begin.x, begin.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n}\n","﻿import { Color } from '../Drawing/Color';\nimport { Physics } from '../Physics';\nimport { BoundingBox } from './BoundingBox';\nimport { Edge } from './Edge';\nimport { CollisionJumpTable } from './CollisionJumpTable';\nimport { Circle } from './Circle';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionShape } from './CollisionShape';\nimport { Vector, Line, Ray, Projection } from '../Algebra';\nimport { Collider } from './Collider';\nimport { ClosestLineJumpTable } from './ClosestLineJumpTable';\n\nexport interface ConvexPolygonOptions {\n  /**\n   * Pixel offset relative to a collider's position\n   */\n\n  offset?: Vector;\n  /**\n   * Points in the polygon in order around the perimeter in local coordinates\n   */\n  points: Vector[];\n  /**\n   * Whether points are specified in clockwise or counter clockwise order, default counter-clockwise\n   */\n  clockwiseWinding?: boolean;\n  /**\n   * Collider to associate optionally with this shape\n   */\n  collider?: Collider;\n}\n\n/**\n * Polygon collision shape for detecting collisions\n *\n * Example:\n * [[include:BoxAndPolygonShape.md]]\n */\nexport class ConvexPolygon implements CollisionShape {\n  public offset: Vector;\n  public points: Vector[];\n\n  /**\n   * Collider associated with this shape\n   */\n  public collider?: Collider;\n\n  private _transformedPoints: Vector[] = [];\n  private _axes: Vector[] = [];\n  private _sides: Line[] = [];\n\n  constructor(options: ConvexPolygonOptions) {\n    this.offset = options.offset || Vector.Zero;\n    const winding = !!options.clockwiseWinding;\n    this.points = (winding ? options.points.reverse() : options.points) || [];\n    this.collider = this.collider = options.collider || null;\n\n    // calculate initial transformation\n    this._calculateTransformation();\n  }\n\n  /**\n   * Returns a clone of this ConvexPolygon, not associated with any collider\n   */\n  public clone(): ConvexPolygon {\n    return new ConvexPolygon({\n      offset: this.offset.clone(),\n      points: this.points.map((p) => p.clone()),\n      collider: null\n    });\n  }\n\n  public get worldPos(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.collider.body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Get the center of the collision shape in world coordinates\n   */\n  public get center(): Vector {\n    const body = this.collider ? this.collider.body : null;\n    if (body) {\n      return body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Calculates the underlying transformation from the body relative space to world space\n   */\n  private _calculateTransformation() {\n    const body = this.collider ? this.collider.body : null;\n    const pos = body ? body.pos.add(this.offset) : this.offset;\n    const angle = body ? body.rotation : 0;\n    const scale = body ? body.scale : Vector.One;\n\n    const len = this.points.length;\n    this._transformedPoints.length = 0; // clear out old transform\n    for (let i = 0; i < len; i++) {\n      this._transformedPoints[i] = this.points[i]\n        .scale(scale)\n        .rotate(angle)\n        .add(pos);\n    }\n  }\n\n  /**\n   * Gets the points that make up the polygon in world space, from actor relative space (if specified)\n   */\n  public getTransformedPoints(): Vector[] {\n    // only recalculate geometry if, hasn't been calculated\n    if (\n      !this._transformedPoints.length ||\n      // or the position or rotation has changed in world space\n      (this.collider &&\n        this.collider.body &&\n        (!this.collider.body.oldPos.equals(this.collider.body.pos) ||\n          this.collider.body.oldRotation !== this.collider.body.rotation ||\n          this.collider.body.oldScale !== this.collider.body.scale))\n    ) {\n      this._calculateTransformation();\n    }\n    return this._transformedPoints;\n  }\n\n  /**\n   * Gets the sides of the polygon in world space\n   */\n  public getSides(): Line[] {\n    if (this._sides.length) {\n      return this._sides;\n    }\n    const lines = [];\n    const points = this.getTransformedPoints();\n    const len = points.length;\n    for (let i = 0; i < len; i++) {\n      lines.push(new Line(points[i], points[(i - 1 + len) % len]));\n    }\n    this._sides = lines;\n    return this._sides;\n  }\n\n  public recalc(): void {\n    this._sides.length = 0;\n    this._axes.length = 0;\n    this._transformedPoints.length = 0;\n    this.getTransformedPoints();\n    this.getSides();\n  }\n\n  /**\n   * Tests if a point is contained in this collision shape in world space\n   */\n  public contains(point: Vector): boolean {\n    // Always cast to the right, as long as we cast in a consistent fixed direction we\n    // will be fine\n    const testRay = new Ray(point, new Vector(1, 0));\n    const intersectCount = this.getSides().reduce(function(accum, side) {\n      if (testRay.intersect(side) >= 0) {\n        return accum + 1;\n      }\n      return accum;\n    }, 0);\n\n    if (intersectCount % 2 === 0) {\n      return false;\n    }\n    return true;\n  }\n\n  public getClosestLineBetween(shape: CollisionShape): Line {\n    if (shape instanceof Circle) {\n      return ClosestLineJumpTable.PolygonCircleClosestLine(this, shape);\n    } else if (shape instanceof ConvexPolygon) {\n      return ClosestLineJumpTable.PolygonPolygonClosestLine(this, shape);\n    } else if (shape instanceof Edge) {\n      return ClosestLineJumpTable.PolygonEdgeClosestLine(this, shape);\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Returns a collision contact if the 2 collision shapes collide, otherwise collide will\n   * return null.\n   * @param shape\n   */\n  public collide(shape: CollisionShape): CollisionContact {\n    if (shape instanceof Circle) {\n      return CollisionJumpTable.CollideCirclePolygon(shape, this);\n    } else if (shape instanceof ConvexPolygon) {\n      return CollisionJumpTable.CollidePolygonPolygon(this, shape);\n    } else if (shape instanceof Edge) {\n      return CollisionJumpTable.CollidePolygonEdge(this, shape);\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Find the point on the shape furthest in the direction specified\n   */\n  public getFurthestPoint(direction: Vector): Vector {\n    const pts = this.getTransformedPoints();\n    let furthestPoint = null;\n    let maxDistance = -Number.MAX_VALUE;\n    for (let i = 0; i < pts.length; i++) {\n      const distance = direction.dot(pts[i]);\n      if (distance > maxDistance) {\n        maxDistance = distance;\n        furthestPoint = pts[i];\n      }\n    }\n    return furthestPoint;\n  }\n\n  /**\n   * Finds the closes face to the point using perpendicular distance\n   * @param point point to test against polygon\n   */\n  public getClosestFace(point: Vector): { distance: Vector; face: Line } {\n    const sides = this.getSides();\n    let min = Number.POSITIVE_INFINITY;\n    let faceIndex = -1;\n    let distance = -1;\n    for (let i = 0; i < sides.length; i++) {\n      const dist = sides[i].distanceToPoint(point);\n      if (dist < min) {\n        min = dist;\n        faceIndex = i;\n        distance = dist;\n      }\n    }\n\n    if (faceIndex !== -1) {\n      return {\n        distance: sides[faceIndex].normal().scale(distance),\n        face: sides[faceIndex]\n      };\n    }\n\n    return null;\n  }\n\n  /**\n   * Get the axis aligned bounding box for the polygon shape in world coordinates\n   */\n  public get bounds(): BoundingBox {\n    const points = this.getTransformedPoints();\n\n    return BoundingBox.fromPoints(points);\n  }\n\n  /**\n   * Get the axis aligned bounding box for the polygon shape in local coordinates\n   */\n  public get localBounds(): BoundingBox {\n    return BoundingBox.fromPoints(this.points);\n  }\n\n  /**\n   * Get the moment of inertia for an arbitrary polygon\n   * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n  public get inertia(): number {\n    const mass = this.collider ? this.collider.mass : Physics.defaultMass;\n    let numerator = 0;\n    let denominator = 0;\n    for (let i = 0; i < this.points.length; i++) {\n      const iplusone = (i + 1) % this.points.length;\n      const crossTerm = this.points[iplusone].cross(this.points[i]);\n      numerator +=\n        crossTerm *\n        (this.points[i].dot(this.points[i]) + this.points[i].dot(this.points[iplusone]) + this.points[iplusone].dot(this.points[iplusone]));\n      denominator += crossTerm;\n    }\n    return (mass / 6) * (numerator / denominator);\n  }\n\n  /**\n   * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\n   */\n  public rayCast(ray: Ray, max: number = Infinity) {\n    // find the minimum contact time greater than 0\n    // contact times less than 0 are behind the ray and we don't want those\n    const sides = this.getSides();\n    const len = sides.length;\n    let minContactTime = Number.MAX_VALUE;\n    let contactIndex = -1;\n    for (let i = 0; i < len; i++) {\n      const contactTime = ray.intersect(sides[i]);\n      if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\n        minContactTime = contactTime;\n        contactIndex = i;\n      }\n    }\n\n    // contact was found\n    if (contactIndex >= 0) {\n      return ray.getPoint(minContactTime);\n    }\n\n    // no contact found\n    return null;\n  }\n\n  /**\n   * Get the axis associated with the convex polygon\n   */\n  public get axes(): Vector[] {\n    if (this._axes.length) {\n      return this._axes;\n    }\n\n    const axes = [];\n    const points = this.getTransformedPoints();\n    const len = points.length;\n    for (let i = 0; i < len; i++) {\n      axes.push(points[i].sub(points[(i + 1) % len]).normal());\n    }\n    this._axes = axes;\n    return this._axes;\n  }\n\n  /**\n   * Perform Separating Axis test against another polygon, returns null if no overlap in polys\n   * Reference http://www.dyn4j.org/2010/01/sat/\n   */\n  public testSeparatingAxisTheorem(other: ConvexPolygon): Vector {\n    const poly1 = this;\n    const poly2 = other;\n    const axes = poly1.axes.concat(poly2.axes);\n\n    let minOverlap = Number.MAX_VALUE;\n    let minAxis = null;\n    let minIndex = -1;\n    for (let i = 0; i < axes.length; i++) {\n      const proj1 = poly1.project(axes[i]);\n      const proj2 = poly2.project(axes[i]);\n      const overlap = proj1.getOverlap(proj2);\n      if (overlap <= 0) {\n        return null;\n      } else {\n        if (overlap < minOverlap) {\n          minOverlap = overlap;\n          minAxis = axes[i];\n          minIndex = i;\n        }\n      }\n    }\n\n    // Sanity check\n    if (minIndex === -1) {\n      return null;\n    }\n\n    return minAxis.normalize().scale(minOverlap);\n  }\n\n  /**\n   * Project the edges of the polygon along a specified axis\n   */\n  public project(axis: Vector): Projection {\n    const points = this.getTransformedPoints();\n    const len = points.length;\n    let min = Number.MAX_VALUE;\n    let max = -Number.MAX_VALUE;\n    for (let i = 0; i < len; i++) {\n      const scalar = points[i].dot(axis);\n      min = Math.min(min, scalar);\n      max = Math.max(max, scalar);\n    }\n\n    return new Projection(min, max);\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, color: Color = Color.Green, pos: Vector = Vector.Zero) {\n    ctx.beginPath();\n    ctx.fillStyle = color.toString();\n    const newPos = pos.add(this.offset);\n    // Iterate through the supplied points and construct a 'polygon'\n    const firstPoint = this.points[0].add(newPos);\n    ctx.moveTo(firstPoint.x, firstPoint.y);\n    this.points\n      .map((p) => p.add(newPos))\n      .forEach(function(point) {\n        ctx.lineTo(point.x, point.y);\n      });\n    ctx.lineTo(firstPoint.x, firstPoint.y);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Red) {\n    ctx.beginPath();\n    ctx.strokeStyle = color.toString();\n    // Iterate through the supplied points and construct a 'polygon'\n    const firstPoint = this.getTransformedPoints()[0];\n    ctx.moveTo(firstPoint.x, firstPoint.y);\n    this.getTransformedPoints().forEach(function(point) {\n      ctx.lineTo(point.x, point.y);\n    });\n    ctx.lineTo(firstPoint.x, firstPoint.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n}\n","import { ConvexPolygon } from './ConvexPolygon';\nimport { Circle } from './Circle';\nimport { Edge } from './Edge';\nimport { BoundingBox } from './BoundingBox';\nimport { Vector } from '../Algebra';\n\n/**\n * Excalibur shape helper for defining collision shapes quickly\n */\nexport class Shape {\n  /**\n   * Creates a box collision shape, under the hood defines a [[ConvexPolygon]] collision shape\n   * @param width Width of the box\n   * @param height Height of the box\n   * @param anchor Anchor of the box (default (.5, .5)) which positions the box relative to the center of the collider's position\n   * @param offset Optional offset relative to the collider in local coordinates\n   */\n  static Box(width: number, height: number, anchor: Vector = Vector.Half, offset: Vector = Vector.Zero): ConvexPolygon {\n    return new ConvexPolygon({\n      points: new BoundingBox(-width * anchor.x, -height * anchor.y, width - width * anchor.x, height - height * anchor.y).getPoints(),\n      offset: offset\n    });\n  }\n\n  /**\n   * Creates a new [[ConvexPolygon|arbitrary polygon]] collision shape\n   * @param points Points specified in counter clockwise\n   * @param clockwiseWinding Optionally changed the winding of points, by default false meaning counter-clockwise winding.\n   * @param offset Optional offset relative to the collider in local coordinates\n   */\n  static Polygon(points: Vector[], clockwiseWinding: boolean = false, offset: Vector = Vector.Zero): ConvexPolygon {\n    return new ConvexPolygon({\n      points: points,\n      offset: offset,\n      clockwiseWinding: clockwiseWinding\n    });\n  }\n\n  /**\n   * Creates a new [[circle|Circle]] collision shape\n   * @param radius Radius of the circle shape\n   * @param offset Optional offset relative to the collider in local coordinates\n   */\n  static Circle(radius: number, offset: Vector = Vector.Zero): Circle {\n    return new Circle({\n      radius: radius,\n      offset: offset\n    });\n  }\n\n  /**\n   * Creates a new [[Edge|edge]] collision shape\n   * @param begin Beginning of the edge in local coordinates to the collider\n   * @param end Ending of the edge in local coordinates to the collider\n   */\n  static Edge(begin: Vector, end: Vector): Edge {\n    return new Edge({\n      begin: begin,\n      end: end\n    });\n  }\n}\n","import { Vector } from '../Algebra';\nimport { Actor } from '../Actor';\nimport { Collider } from './Collider';\nimport { CollisionType } from './CollisionType';\nimport { Physics } from '../Physics';\nimport { PreCollisionEvent, PostCollisionEvent, CollisionStartEvent, CollisionEndEvent } from '../Events';\nimport { Clonable } from '../Interfaces/Clonable';\nimport { Shape } from './Shape';\n\nexport interface BodyOptions {\n  /**\n   * Optionally the actor associated with this body\n   */\n  actor?: Actor;\n  /**\n   * An optional collider to use in this body, if none is specified a default Box collider will be created.\n   */\n  collider?: Collider;\n}\n\n/**\n * Body describes all the physical properties pos, vel, acc, rotation, angular velocity\n */\nexport class Body implements Clonable<Body> {\n  private _collider: Collider;\n  public actor: Actor;\n  /**\n   * Constructs a new physics body associated with an actor\n   */\n  constructor({ actor, collider }: BodyOptions) {\n    if (!actor && !collider) {\n      throw new Error('An actor or collider are required to create a body');\n    }\n\n    this.actor = actor;\n    if (!collider && actor) {\n      this.collider = this.useBoxCollider(actor.width, actor.height, actor.anchor);\n    } else {\n      this.collider = collider;\n    }\n  }\n\n  public get id() {\n    return this.actor ? this.actor.id : -1;\n  }\n\n  /**\n   * Returns a clone of this body, not associated with any actor\n   */\n  public clone() {\n    return new Body({\n      actor: null,\n      collider: this.collider.clone()\n    });\n  }\n\n  public get active() {\n    return this.actor ? !this.actor.isKilled() : false;\n  }\n\n  public get center() {\n    return this.pos;\n  }\n\n  // TODO allow multiple colliders for a single body\n  public set collider(collider: Collider) {\n    if (collider) {\n      this._collider = collider;\n      this._collider.body = this;\n      this._wireColliderEventsToActor();\n    }\n  }\n\n  public get collider(): Collider {\n    return this._collider;\n  }\n\n  /**\n   * The (x, y) position of the actor this will be in the middle of the actor if the\n   * [[Actor.anchor]] is set to (0.5, 0.5) which is default.\n   * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0).\n   */\n  public pos: Vector = new Vector(0, 0);\n\n  /**\n   * The position of the actor last frame (x, y) in pixels\n   */\n  public oldPos: Vector = new Vector(0, 0);\n\n  /**\n   * The current velocity vector (vx, vy) of the actor in pixels/second\n   */\n  public vel: Vector = new Vector(0, 0);\n\n  /**\n   * The velocity of the actor last frame (vx, vy) in pixels/second\n   */\n  public oldVel: Vector = new Vector(0, 0);\n\n  /**\n   * The current acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may\n   * be useful to simulate a gravitational effect.\n   */\n  public acc: Vector = new Vector(0, 0);\n\n  /**\n   * Gets/sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\n   */\n  public oldAcc: Vector = Vector.Zero;\n\n  /**\n   * The current torque applied to the actor\n   */\n  public torque: number = 0;\n\n  /**\n   * The current \"motion\" of the actor, used to calculated sleep in the physics simulation\n   */\n  public motion: number = 10;\n\n  /**\n   * Gets/sets the rotation of the body from the last frame.\n   */\n  public oldRotation: number = 0; // radians\n\n  /**\n   * The rotation of the actor in radians\n   */\n  public rotation: number = 0; // radians\n\n  /**\n   * The scale vector of the actor\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public scale: Vector = Vector.One;\n\n  /**\n   * The scale of the actor last frame\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public oldScale: Vector = Vector.One;\n\n  /**\n   * The x scalar velocity of the actor in scale/second\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public sx: number = 0; //scale/sec\n  /**\n   * The y scalar velocity of the actor in scale/second\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public sy: number = 0; //scale/sec\n\n  /**\n   * The rotational velocity of the actor in radians/second\n   */\n  public rx: number = 0; //radians/sec\n\n  private _geometryDirty = false;\n\n  private _totalMtv: Vector = Vector.Zero;\n\n  /**\n   * Add minimum translation vectors accumulated during the current frame to resolve collisions.\n   */\n  public addMtv(mtv: Vector) {\n    this._totalMtv.addEqual(mtv);\n  }\n\n  /**\n   * Applies the accumulated translation vectors to the actors position\n   */\n  public applyMtv(): void {\n    this.pos.addEqual(this._totalMtv);\n    this._totalMtv.setTo(0, 0);\n  }\n\n  /**\n   * Flags the shape dirty and must be recalculated in world space\n   */\n  public markCollisionShapeDirty() {\n    this._geometryDirty = true;\n  }\n\n  public get isColliderShapeDirty(): boolean {\n    return this._geometryDirty;\n  }\n\n  /**\n   * Sets the old versions of pos, vel, acc, and scale.\n   */\n  public captureOldTransform() {\n    // Capture old values before integration step updates them\n    this.oldVel.setTo(this.vel.x, this.vel.y);\n    this.oldPos.setTo(this.pos.x, this.pos.y);\n    this.oldAcc.setTo(this.acc.x, this.acc.y);\n    this.oldScale.setTo(this.scale.x, this.scale.y);\n    this.oldRotation = this.rotation;\n  }\n\n  /**\n   * Perform euler integration at the specified time step\n   */\n  public integrate(delta: number) {\n    // Update placements based on linear algebra\n    const seconds = delta / 1000;\n\n    const totalAcc = this.acc.clone();\n    // Only active vanilla actors are affected by global acceleration\n    if (this.collider.type === CollisionType.Active) {\n      totalAcc.addEqual(Physics.acc);\n    }\n\n    this.vel.addEqual(totalAcc.scale(seconds));\n    this.pos.addEqual(this.vel.scale(seconds)).addEqual(totalAcc.scale(0.5 * seconds * seconds));\n\n    this.rx += this.torque * (1.0 / this.collider.inertia) * seconds;\n    this.rotation += this.rx * seconds;\n\n    this.scale.x += (this.sx * delta) / 1000;\n    this.scale.y += (this.sy * delta) / 1000;\n\n    if (!this.scale.equals(this.oldScale)) {\n      // change in scale effects the geometry\n      this._geometryDirty = true;\n    }\n\n    // Update colliders\n    this.collider.update();\n    this._geometryDirty = false;\n  }\n\n  /**\n   * Sets up a box geometry based on the current bounds of the associated actor of this physics body.\n   *\n   * If no width/height are specified the body will attempt to use the associated actor's width/height.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public useBoxCollider(width?: number, height?: number, anchor: Vector = Vector.Half, center: Vector = Vector.Zero): Collider {\n    if (width === null || width === undefined) {\n      width = this.actor ? this.actor.width : 0;\n    }\n    if (height === null || height === undefined) {\n      height = this.actor ? this.actor.height : 0;\n    }\n\n    this.collider.shape = Shape.Box(width, height, anchor, center);\n    return this.collider;\n  }\n\n  /**\n   * Sets up a [[ConvexPolygon|convex polygon]] collision geometry based on a list of of points relative\n   *  to the anchor of the associated actor\n   * of this physics body.\n   *\n   * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public usePolygonCollider(points: Vector[], center: Vector = Vector.Zero): Collider {\n    this.collider.shape = Shape.Polygon(points, false, center);\n    return this.collider;\n  }\n\n  /**\n   * Sets up a [[Circle|circle collision geometry]] with a specified radius in pixels.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public useCircleCollider(radius: number, center: Vector = Vector.Zero): Collider {\n    this.collider.shape = Shape.Circle(radius, center);\n    return this.collider;\n  }\n\n  /**\n   * Sets up an [[Edge|edge collision geometry]] with a start point and an end point relative to the anchor of the associated actor\n   * of this physics body.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public useEdgeCollider(begin: Vector, end: Vector): Collider {\n    this.collider.shape = Shape.Edge(begin, end);\n    return this.collider;\n  }\n\n  // TODO remove this, eventually events will stay local to the thing they are around\n  private _wireColliderEventsToActor() {\n    this.collider.clear();\n    this.collider.on('precollision', (evt: PreCollisionEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('precollision', new PreCollisionEvent(evt.target.body.actor, evt.other.body.actor, evt.side, evt.intersection));\n      }\n    });\n    this.collider.on('postcollision', (evt: PostCollisionEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('postcollision', new PostCollisionEvent(evt.target.body.actor, evt.other.body.actor, evt.side, evt.intersection));\n      }\n    });\n    this.collider.on('collisionstart', (evt: CollisionStartEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('collisionstart', new CollisionStartEvent(evt.target.body.actor, evt.other.body.actor, evt.pair));\n      }\n    });\n    this.collider.on('collisionend', (evt: CollisionEndEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('collisionend', new CollisionEndEvent(evt.target.body.actor, evt.other.body.actor));\n      }\n    });\n  }\n}\n","import { Trait } from '../Interfaces/Trait';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\n\nexport interface CapturePointerConfig {\n  /**\n   * Capture PointerMove events (may be expensive!)\n   */\n  captureMoveEvents: boolean;\n\n  /**\n   * Capture PointerDrag events (may be expensive!)\n   */\n  captureDragEvents: boolean;\n}\n\n/**\n * Revises pointer events path accordingly to the actor\n */\nexport class CapturePointer implements Trait {\n  public update(actor: Actor, engine: Engine) {\n    if (!actor.enableCapturePointer) {\n      return;\n    }\n    if (actor.isKilled()) {\n      return;\n    }\n\n    engine.input.pointers.checkAndUpdateActorUnderPointer(actor);\n  }\n}\n","import { Vector } from '../Algebra';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\nimport { Color } from '../Drawing/Color';\n\nexport class CullingBox {\n  private _topLeft: Vector = new Vector(0, 0);\n  private _topRight: Vector = new Vector(0, 0);\n  private _bottomLeft: Vector = new Vector(0, 0);\n  private _bottomRight: Vector = new Vector(0, 0);\n\n  private _xCoords: Array<number>;\n  private _yCoords: Array<number>;\n  private _xMin: number;\n  private _yMin: number;\n  private _xMax: number;\n  private _yMax: number;\n\n  private _xMinWorld: number;\n  private _yMinWorld: number;\n  private _xMaxWorld: number;\n  private _yMaxWorld: number;\n\n  public isSpriteOffScreen(actor: Actor, engine: Engine): boolean {\n    const drawingWidth = actor.currentDrawing.drawWidth;\n    const drawingHeight = actor.currentDrawing.drawHeight;\n    const rotation = actor.rotation;\n    const anchor = actor.center;\n    const worldPos = actor.getWorldPos();\n\n    this._topLeft.x = worldPos.x - drawingWidth / 2;\n    this._topLeft.y = worldPos.y - drawingHeight / 2;\n    this._topLeft = this._topLeft.rotate(rotation, anchor);\n\n    this._topRight.x = worldPos.x + drawingWidth / 2;\n    this._topRight.y = worldPos.y - drawingHeight / 2;\n    this._topRight = this._topRight.rotate(rotation, anchor);\n\n    this._bottomLeft.x = worldPos.x - drawingWidth / 2;\n    this._bottomLeft.y = worldPos.y + drawingHeight / 2;\n    this._bottomLeft = this._bottomLeft.rotate(rotation, anchor);\n\n    this._bottomRight.x = worldPos.x + drawingWidth / 2;\n    this._bottomRight.y = worldPos.y + drawingHeight / 2;\n    this._bottomRight = this._bottomRight.rotate(rotation, anchor);\n\n    ///\n\n    const topLeftScreen = engine.worldToScreenCoordinates(this._topLeft);\n    const topRightScreen = engine.worldToScreenCoordinates(this._topRight);\n    const bottomLeftScreen = engine.worldToScreenCoordinates(this._bottomLeft);\n    const bottomRightScreen = engine.worldToScreenCoordinates(this._bottomRight);\n    this._xCoords = [];\n    this._yCoords = [];\n\n    this._xCoords.push(topLeftScreen.x, topRightScreen.x, bottomLeftScreen.x, bottomRightScreen.x);\n    this._yCoords.push(topLeftScreen.y, topRightScreen.y, bottomLeftScreen.y, bottomRightScreen.y);\n\n    this._xMin = Math.min.apply(null, this._xCoords);\n    this._yMin = Math.min.apply(null, this._yCoords);\n    this._xMax = Math.max.apply(null, this._xCoords);\n    this._yMax = Math.max.apply(null, this._yCoords);\n\n    const minWorld = engine.screenToWorldCoordinates(new Vector(this._xMin, this._yMin));\n    const maxWorld = engine.screenToWorldCoordinates(new Vector(this._xMax, this._yMax));\n    this._xMinWorld = minWorld.x;\n    this._yMinWorld = minWorld.y;\n    this._xMaxWorld = maxWorld.x;\n    this._yMaxWorld = maxWorld.y;\n\n    const boundingPoints = [\n      new Vector(this._xMin, this._yMin), // top left\n      new Vector(this._xMax, this._yMin), // top right\n      new Vector(this._xMin, this._yMax), // bottom left\n      new Vector(this._xMax, this._yMax) // bottom right\n    ];\n\n    // sprite can be wider than canvas screen (and still visible within canvas)\n    // top or bottom of sprite must be within canvas\n    if (\n      boundingPoints[0].x < 0 &&\n      boundingPoints[1].x > engine.canvas.clientWidth &&\n      (boundingPoints[0].y > 0 || boundingPoints[2].y < engine.canvas.clientHeight)\n    ) {\n      return false;\n    }\n\n    // sprite can be taller than canvas screen (and still visible within canvas)\n    // left or right of sprite must be within canvas\n    if (\n      boundingPoints[0].y < 0 &&\n      boundingPoints[2].y > engine.canvas.clientHeight &&\n      (boundingPoints[1].x > 0 || boundingPoints[0].x < engine.canvas.clientWidth)\n    ) {\n      return false;\n    }\n\n    // otherwise if any corner is visible, we're not offscreen\n    for (let i = 0; i < boundingPoints.length; i++) {\n      if (\n        boundingPoints[i].x > 0 &&\n        boundingPoints[i].y > 0 &&\n        boundingPoints[i].x < engine.canvas.clientWidth &&\n        boundingPoints[i].y < engine.canvas.clientHeight\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    // bounding rectangle\n    ctx.beginPath();\n    ctx.strokeStyle = Color.White.toString();\n    ctx.rect(this._xMinWorld, this._yMinWorld, this._xMaxWorld - this._xMinWorld, this._yMaxWorld - this._yMinWorld);\n    ctx.stroke();\n\n    ctx.fillStyle = Color.Red.toString();\n    ctx.beginPath();\n    ctx.arc(this._topLeft.x, this._topLeft.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = Color.Green.toString();\n    ctx.beginPath();\n    ctx.arc(this._topRight.x, this._topRight.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = Color.Blue.toString();\n    ctx.beginPath();\n    ctx.arc(this._bottomLeft.x, this._bottomLeft.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = Color.Magenta.toString();\n    ctx.beginPath();\n    ctx.arc(this._bottomRight.x, this._bottomRight.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n  }\n}\n","import { CullingBox } from './../Util/CullingBox';\nimport { Trait } from '../Interfaces/Trait';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\nimport { ExitViewPortEvent, EnterViewPortEvent } from '../Events';\n\nexport class OffscreenCulling implements Trait {\n  public cullingBox: CullingBox = new CullingBox();\n\n  public update(actor: Actor, engine: Engine) {\n    const events = actor.eventDispatcher;\n\n    let isSpriteOffScreen = true;\n    if (actor.currentDrawing != null) {\n      isSpriteOffScreen = this.cullingBox.isSpriteOffScreen(actor, engine);\n    }\n\n    let actorBoundsOffscreen = false;\n    if (engine && engine.currentScene && engine.currentScene.camera && engine.currentScene.camera.viewport) {\n      actorBoundsOffscreen = !engine.currentScene.camera.viewport.intersect(actor.body.collider.bounds);\n    }\n\n    if (!actor.isOffScreen) {\n      if (actorBoundsOffscreen && isSpriteOffScreen) {\n        events.emit('exitviewport', new ExitViewPortEvent(actor));\n        actor.isOffScreen = true;\n      }\n    } else {\n      if (!actorBoundsOffscreen || !isSpriteOffScreen) {\n        events.emit('enterviewport', new EnterViewPortEvent(actor));\n        actor.isOffScreen = false;\n      }\n    }\n  }\n}\n","import { Color } from '../Drawing/Color';\nimport { Vector } from '../Algebra';\n\n/**\n * A canvas linecap style. \"butt\" is the default flush style, \"round\" is a semi-circle cap with a radius half the width of\n * the line, and \"square\" is a rectangle that is an equal width and half height cap.\n */\nexport type LineCapStyle = 'butt' | 'round' | 'square';\n\n/**\n * Draw a line on canvas context\n *\n * @param ctx The canvas context\n * @param color The color of the line\n * @param x1 The start x coordinate\n * @param y1 The start y coordinate\n * @param x2 The ending x coordinate\n * @param y2 The ending y coordinate\n * @param thickness The line thickness\n * @param cap The [[LineCapStyle]] (butt, round, or square)\n */\n/* istanbul ignore next */\nexport function line(\n  ctx: CanvasRenderingContext2D,\n  color: Color = Color.Red,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  thickness: number = 1,\n  cap: LineCapStyle = 'butt'\n) {\n  ctx.save();\n  ctx.beginPath();\n  ctx.lineWidth = thickness;\n  ctx.lineCap = cap;\n  ctx.strokeStyle = color.toString();\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n  ctx.closePath();\n  ctx.stroke();\n  ctx.restore();\n}\n\n/**\n * Draw the vector as a point onto the canvas.\n */\n/* istanbul ignore next */\nexport function point(ctx: CanvasRenderingContext2D, color: Color = Color.Red, point: Vector): void {\n  ctx.beginPath();\n  ctx.strokeStyle = color.toString();\n  ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\n  ctx.closePath();\n  ctx.stroke();\n}\n\n/**\n * Draw the vector as a line onto the canvas starting a origin point.\n */\n/* istanbul ignore next */\nexport function vector(ctx: CanvasRenderingContext2D, color: Color, origin: Vector, vector: Vector, scale: number = 1.0): void {\n  const c = color ? color.toString() : 'blue';\n  const v = vector.scale(scale);\n  ctx.beginPath();\n  ctx.strokeStyle = c;\n  ctx.moveTo(origin.x, origin.y);\n  ctx.lineTo(origin.x + v.x, origin.y + v.y);\n  ctx.closePath();\n  ctx.stroke();\n}\n\n/**\n * Represents border radius values\n */\nexport interface BorderRadius {\n  /**\n   * Top-left\n   */\n  tl: number;\n  /**\n   * Top-right\n   */\n  tr: number;\n  /**\n   * Bottom-right\n   */\n  br: number;\n  /**\n   * Bottom-left\n   */\n  bl: number;\n}\n\n/**\n * Draw a round rectangle on a canvas context\n *\n * @param ctx The canvas context\n * @param x The top-left x coordinate\n * @param y The top-left y coordinate\n * @param width The width of the rectangle\n * @param height The height of the rectangle\n * @param radius The border radius of the rectangle\n * @param fill The [[Color]] to fill rectangle with\n * @param stroke The [[Color]] to stroke rectangle with\n */\nexport function roundRect(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number | BorderRadius = 5,\n  stroke: Color = Color.White,\n  fill: Color = null\n) {\n  let br: BorderRadius;\n\n  if (typeof radius === 'number') {\n    br = { tl: radius, tr: radius, br: radius, bl: radius };\n  } else {\n    const defaultRadius: BorderRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\n\n    for (const prop in defaultRadius) {\n      if (defaultRadius.hasOwnProperty(prop)) {\n        const side = <keyof BorderRadius>prop;\n        br[side] = radius[side] || defaultRadius[side];\n      }\n    }\n  }\n\n  ctx.beginPath();\n  ctx.moveTo(x + br.tl, y);\n  ctx.lineTo(x + width - br.tr, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\n  ctx.lineTo(x + width, y + height - br.br);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\n  ctx.lineTo(x + br.bl, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\n  ctx.lineTo(x, y + br.tl);\n  ctx.quadraticCurveTo(x, y, x + br.tl, y);\n  ctx.closePath();\n\n  if (fill) {\n    ctx.fillStyle = fill.toString();\n    ctx.fill();\n  }\n\n  if (stroke) {\n    ctx.strokeStyle = stroke.toString();\n    ctx.stroke();\n  }\n}\n\nexport function circle(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  radius: number,\n  stroke: Color = Color.White,\n  fill: Color = null\n) {\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, Math.PI * 2);\n  ctx.closePath();\n\n  if (fill) {\n    ctx.fillStyle = fill.toString();\n    ctx.fill();\n  }\n\n  if (stroke) {\n    ctx.strokeStyle = stroke.toString();\n    ctx.stroke();\n  }\n}\n","/**\n * CollisionGroups indicate like members that do not collide with each other. Use [[CollisionGroupManager]] to create [[CollisionGroup]]s\n *\n * For example:\n *\n * Players have collision group \"player\"\n *\n * ![Player Collision Group](/assets/images/docs/CollisionGroupsPlayer.png)\n *\n * Enemies have collision group \"enemy\"\n *\n * ![Enemy Collision Group](/assets/images/docs/CollisionGroupsEnemy.png)\n *\n * Blocks have collision group \"ground\"\n *\n * ![Ground collision group](/assets/images/docs/CollisionGroupsGround.png)\n *\n * Players don't collide with each other, but enemies and blocks. Likewise, enemies don't collide with each other but collide\n * with players and blocks.\n *\n * This is done with bitmasking, see the following pseudo-code\n *\n * PlayerGroup = `0b001`\n * PlayerGroupMask = `0b110`\n *\n * EnemyGroup = `0b010`\n * EnemyGroupMask = `0b101`\n *\n * BlockGroup = `0b100`\n * BlockGroupMask = `0b011`\n *\n * Should Players collide? No because the bitwise mask evaluates to 0\n * `(player1.group & player2.mask) === 0`\n * `(0b001 & 0b110) === 0`\n *\n * Should Players and Enemies collide? Yes because the bitwise mask is non-zero\n * `(player1.group & enemy1.mask) === 1`\n * `(0b001 & 0b101) === 1`\n *\n * Should Players and Blocks collide? Yes because the bitwise mask is non-zero\n * `(player1.group & blocks1.mask) === 1`\n * `(0b001 & 0b011) === 1`\n */\nexport class CollisionGroup {\n  /**\n   * The `All` [[CollisionGroup]] is a special group that collides with all other groups including itself,\n   * it is the default collision group on colliders.\n   */\n  public static All = new CollisionGroup('Collide with all groups', -1, -1);\n\n  private _name: string;\n  private _category: number;\n  private _mask: number;\n\n  /**\n   * **STOP!!** It is preferred that [[CollisionGroupManager.create]] is used to create collision groups\n   *  unless you know how to construct the proper bitmasks. See https://github.com/excaliburjs/Excalibur/issues/1091 for more info.\n   * @param name Name of the collision group\n   * @param category 32 bit category for the group, should be a unique power of 2. For example `0b001` or `0b010`\n   * @param mask 32 bit mask of category, or `~category` generally. For a category of `0b001`, the mask would be `0b110`\n   */\n  constructor(name: string, category: number, mask: number) {\n    this._name = name;\n    this._category = category;\n    this._mask = mask;\n  }\n\n  /**\n   * Get the name of the collision group\n   */\n  public get name() {\n    return this._name;\n  }\n\n  /**\n   * Get the category of the collision group, a 32 bit number which should be a unique power of 2\n   */\n  public get category() {\n    return this._category;\n  }\n\n  /**\n   * Get the mask for this collision group\n   */\n  public get mask() {\n    return this._mask;\n  }\n\n  /**\n   * Evaluates whether 2 collision groups can collide\n   * @param other  CollisionGroup\n   */\n  public canCollide(other: CollisionGroup): boolean {\n    return (this.category & other.mask) !== 0 && (other.category & this.mask) !== 0;\n  }\n}\n","import { Physics } from './../Physics';\nimport { Color } from './../Drawing/Color';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionResolutionStrategy } from '../Physics';\nimport * as DrawUtil from '../Util/DrawUtil';\nimport { CollisionType } from './CollisionType';\nimport { Collider } from './Collider';\n\n/**\n * Models a potential collision between 2 bodies\n */\nexport class Pair {\n  public id: string = null;\n  public collision: CollisionContact = null;\n\n  constructor(public colliderA: Collider, public colliderB: Collider) {\n    this.id = Pair.calculatePairHash(colliderA, colliderB);\n  }\n\n  public static canCollide(colliderA: Collider, colliderB: Collider) {\n    // If both are in the same collision group short circuit\n    if (!colliderA.group.canCollide(colliderB.group)) {\n      return false;\n    }\n\n    // if both are fixed short circuit\n    if (colliderA.type === CollisionType.Fixed && colliderB.type === CollisionType.Fixed) {\n      return false;\n    }\n\n    // if the either is prevent collision short circuit\n    if (colliderB.type === CollisionType.PreventCollision || colliderA.type === CollisionType.PreventCollision) {\n      return false;\n    }\n\n    // if either is dead short circuit\n    if (!colliderA.active || !colliderB.active) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Returns whether or not it is possible for the pairs to collide\n   */\n  public get canCollide(): boolean {\n    const actorA = this.colliderA;\n    const actorB = this.colliderB;\n    return Pair.canCollide(actorA, actorB);\n  }\n\n  /**\n   * Runs the collision intersection logic on the members of this pair\n   */\n  public collide() {\n    this.collision = this.colliderA.collide(this.colliderB);\n  }\n\n  /**\n   * Resolves the collision body position and velocity if a collision occurred\n   */\n  public resolve(strategy: CollisionResolutionStrategy) {\n    if (this.collision) {\n      this.collision.resolve(strategy);\n    }\n  }\n\n  /**\n   * Calculates the unique pair hash id for this collision pair\n   */\n  public static calculatePairHash(colliderA: Collider, colliderB: Collider): string {\n    if (colliderA.id < colliderB.id) {\n      return `#${colliderA.id}+${colliderB.id}`;\n    } else {\n      return `#${colliderB.id}+${colliderA.id}`;\n    }\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    if (this.collision) {\n      if (Physics.showContacts) {\n        DrawUtil.point(ctx, Color.Red, this.collision.point);\n      }\n      if (Physics.showCollisionNormals) {\n        DrawUtil.vector(ctx, Color.Cyan, this.collision.point, this.collision.normal, 30);\n      }\n    }\n  }\n}\n","import { Color } from '../Drawing/Color';\nimport * as DrawUtil from '../Util/DrawUtil';\nimport { Eventable } from '../Interfaces/Index';\nimport { GameEvent } from '../Events';\nimport { Actor } from '../Actor';\nimport { Body } from './Body';\nimport { CollisionShape } from './CollisionShape';\nimport { Vector, Line } from '../Algebra';\nimport { Physics } from '../Physics';\nimport { BoundingBox } from './BoundingBox';\nimport { CollisionType } from './CollisionType';\nimport { CollisionGroup } from './CollisionGroup';\nimport { CollisionContact } from './CollisionContact';\nimport { EventDispatcher } from '../EventDispatcher';\nimport { Pair } from './Pair';\nimport { Clonable } from '../Interfaces/Clonable';\n\n/**\n * Type guard function to determine whether something is a Collider\n */\nexport function isCollider(x: Actor | Collider): x is Collider {\n  return x instanceof Collider;\n}\n\nexport interface ColliderOptions {\n  /**\n   * Optional [[CollisionShape|Shape]] to use with this collider, the shape defines the collidable\n   * region along with the [[BoundingBox|bounding box]]\n   */\n  shape?: CollisionShape;\n  /**\n   * Optional body to associate with this collider\n   */\n  body?: Body;\n  /**\n   * Optional pixel offset from the position of the body\n   */\n  offset?: Vector;\n  /**\n   * Optional collision group on this collider\n   */\n  group?: CollisionGroup;\n  /**\n   * Optional [[CollisionType|collision type]], if not specified the default is [[CollisionType.PreventCollision]]\n   */\n  type?: CollisionType;\n  /**\n   * Optional local bounds if other bounds are required instead of the bounding box from the shape. This overrides shape bounds.\n   */\n  localBounds?: BoundingBox;\n  /**\n   * Optional flag to indicate moment of inertia from the shape should be used, by default it is true.\n   */\n  useShapeInertia?: boolean;\n}\n\n/**\n * Collider describes material properties like shape,\n * bounds, friction of the physics object. Only **one** collider can be associated with a body at a time\n */\n\nexport class Collider implements Eventable, Clonable<Collider> {\n  private _shape: CollisionShape;\n  public useShapeInertia: boolean;\n  private _events: EventDispatcher<Collider> = new EventDispatcher<Collider>(this);\n\n  constructor({ body, type, group, shape, offset, useShapeInertia = true }: ColliderOptions) {\n    // If shape is not supplied see if the body has an existing collider with a shape\n    if (body && body.collider && !shape) {\n      this._shape = body.collider.shape;\n    } else {\n      this._shape = shape;\n      this.body = body;\n    }\n    this.useShapeInertia = useShapeInertia;\n    this._shape.collider = this;\n    this.type = type || this.type;\n    this.group = group || this.group;\n    this.offset = offset || Vector.Zero;\n  }\n\n  /**\n   * Returns a clone of the current collider, not associated with any body\n   */\n  public clone() {\n    return new Collider({\n      body: null,\n      type: this.type,\n      shape: this._shape.clone(),\n      group: this.group,\n      offset: this.offset\n    });\n  }\n\n  /**\n   * Get the unique id of the collider\n   */\n  public get id(): number {\n    return this.body ? this.body.id : -1;\n  }\n\n  /**\n   * Gets or sets the current collision type of this collider. By\n   * default it is ([[CollisionType.PreventCollision]]).\n   */\n  public type: CollisionType = CollisionType.PreventCollision;\n\n  /**\n   * Gets or sets the current [[CollisionGroup|collision group]] for the collider, colliders with like collision groups do not collide.\n   * By default, the collider will collide with [[CollisionGroup|all groups]].\n   */\n  public group: CollisionGroup = CollisionGroup.All;\n\n  /*\n   * Get the shape of the collider as a [[CollisionShape]]\n   */\n  public get shape(): CollisionShape {\n    return this._shape;\n  }\n\n  /**\n   * Set the shape of the collider as a [[CollisionShape]], if useShapeInertia is set the collider will use inertia from the shape.\n   */\n  public set shape(shape: CollisionShape) {\n    this._shape = shape;\n    this._shape.collider = this;\n    if (this.useShapeInertia) {\n      this.inertia = isNaN(this._shape.inertia) ? this.inertia : this._shape.inertia;\n    }\n  }\n\n  /**\n   * Return a reference to the body associated with this collider\n   */\n  public body: Body;\n\n  /**\n   * The center of the collider in world space\n   */\n  public get center(): Vector {\n    return this.bounds.center;\n  }\n\n  /**\n   * Is this collider active, if false it wont collide\n   */\n  public get active(): boolean {\n    return this.body.active;\n  }\n\n  /**\n   * Collide 2 colliders and product a collision contact if there is a collision, null if none\n   *\n   * Collision vector is in the direction of the other collider. Away from this collider, this -> other.\n   * @param other\n   */\n  public collide(other: Collider): CollisionContact | null {\n    return this.shape.collide(other.shape);\n  }\n\n  /**\n   * Find the closest line between 2 colliders\n   *\n   * Line is in the direction of the other collider. Away from this collider, this -> other.\n   * @param other Other collider\n   */\n  public getClosestLineBetween(other: Collider): Line {\n    return this.shape.getClosestLineBetween(other.shape);\n  }\n\n  /**\n   * Gets the current pixel offset of the collider\n   */\n  public get offset() {\n    return this.shape.offset.clone();\n  }\n\n  /**\n   * Sets the pixel offset of the collider\n   */\n  public set offset(offset: Vector) {\n    this.shape.offset = offset.clone();\n  }\n\n  /**\n   * The current mass of the actor, mass can be thought of as the resistance to acceleration.\n   */\n  public mass: number = 1.0;\n\n  /**\n   * The current moment of inertia, moment of inertia can be thought of as the resistance to rotation.\n   */\n  public inertia: number = 1000;\n\n  /**\n   * The coefficient of friction on this actor\n   */\n  public friction: number = 0.99;\n\n  /**\n   * The also known as coefficient of restitution of this actor, represents the amount of energy preserved after collision or the\n   * bounciness. If 1, it is 100% bouncy, 0 it completely absorbs.\n   */\n  public bounciness: number = 0.2;\n\n  /**\n   * Returns a boolean indicating whether this body collided with\n   * or was in stationary contact with\n   * the body of the other [[Collider]]\n   */\n  public touching(other: Collider): boolean {\n    const pair = new Pair(this, other);\n    pair.collide();\n\n    if (pair.collision) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Returns the collider's [[BoundingBox]] calculated for this instant in world space.\n   * If there is no shape, a point bounding box is returned\n   */\n  public get bounds(): BoundingBox {\n    if (this.shape) {\n      return this.shape.bounds;\n    }\n\n    if (this.body) {\n      return new BoundingBox().translate(this.body.pos);\n    }\n    return new BoundingBox();\n  }\n\n  /**\n   * Returns the collider's [[BoundingBox]] relative to the body's position.\n   * If there is no shape, a point bounding box is returned\n   */\n  public get localBounds(): BoundingBox {\n    if (this.shape) {\n      return this.shape.localBounds;\n    }\n    return new BoundingBox();\n  }\n\n  /**\n   * Updates the collision shapes geometry and internal caches if needed\n   */\n  public update() {\n    if (this.shape) {\n      this.shape.recalc();\n    }\n  }\n\n  emit(eventName: string, event: GameEvent<Collider>): void {\n    this._events.emit(eventName, event);\n  }\n  on(eventName: string, handler: (event: GameEvent<Collider>) => void): void {\n    this._events.on(eventName, handler);\n  }\n  off(eventName: string, handler?: (event: GameEvent<Collider>) => void): void {\n    this._events.off(eventName, handler);\n  }\n  once(eventName: string, handler: (event: GameEvent<Collider>) => void): void {\n    this._events.once(eventName, handler);\n  }\n\n  clear() {\n    this._events.clear();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    // Draw motion vectors\n    if (Physics.showMotionVectors) {\n      DrawUtil.vector(ctx, Color.Yellow, this.body.pos, this.body.acc.add(Physics.acc));\n      DrawUtil.vector(ctx, Color.Red, this.body.pos, this.body.vel);\n      DrawUtil.point(ctx, Color.Red, this.body.pos);\n    }\n\n    if (Physics.showBounds) {\n      this.bounds.debugDraw(ctx, Color.Yellow);\n    }\n\n    if (Physics.showArea) {\n      this.shape.debugDraw(ctx, Color.Green);\n    }\n  }\n}\n","import { CollisionGroup } from './CollisionGroup';\n\n/**\n * Static class for managing collision groups in excalibur, there is a maximum of 32 collision groups possible in excalibur\n */\nexport class CollisionGroupManager {\n  // using bitmasking the maximum number of groups is 32, because that is the highest 32bit integer that JS can present.\n  private static _STARTING_BIT = 0b1 | 0;\n  private static _MAX_GROUPS = 32;\n  private static _currentGroup = 1;\n  private static _currentBit = CollisionGroupManager._STARTING_BIT;\n  private static _groups: Map<string, CollisionGroup> = new Map<string, CollisionGroup>();\n\n  /**\n   * Create a new named collision group up to a max of 32.\n   * @param name Name for the collision group\n   * @param mask Optionally provide your own 32-bit mask, if none is provide the manager will generate one\n   */\n  public static create(name: string, mask?: number) {\n    if (this._currentGroup > this._MAX_GROUPS) {\n      throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);\n    }\n    if (this._groups.get(name)) {\n      throw new Error(`Collision group ${name} already exists`);\n    }\n    const group = new CollisionGroup(name, this._currentBit, mask !== undefined ? mask : ~this._currentBit);\n    this._currentBit = (this._currentBit << 1) | 0;\n    this._currentGroup++;\n    this._groups.set(name, group);\n    return group;\n  }\n\n  /**\n   * Get all collision groups currently tracked by excalibur\n   */\n  public static get groups(): CollisionGroup[] {\n    return Array.from(this._groups.values());\n  }\n\n  /**\n   * Get a collision group by it's name\n   * @param name\n   */\n  public static groupByName(name: string) {\n    return this._groups.get(name);\n  }\n\n  /**\n   * Resets the managers internal group management state\n   */\n  public static reset() {\n    this._groups = new Map<string, CollisionGroup>();\n    this._currentBit = this._STARTING_BIT;\n    this._currentGroup = 1;\n  }\n}\n","import { Physics } from './../Physics';\nimport { BoundingBox } from './BoundingBox';\nimport { Body } from './Body';\n\nimport { Ray } from '../Algebra';\nimport { Logger } from '../Util/Log';\n\n/**\n * Dynamic Tree Node used for tracking bounds within the tree\n */\nexport class TreeNode {\n  public left: TreeNode;\n  public right: TreeNode;\n  public bounds: BoundingBox;\n  public height: number;\n  public body: Body;\n  constructor(public parent?: TreeNode) {\n    this.parent = parent || null;\n    this.body = null;\n    this.bounds = new BoundingBox();\n    this.left = null;\n    this.right = null;\n    this.height = 0;\n  }\n\n  public isLeaf(): boolean {\n    return !this.left && !this.right;\n  }\n}\n\n/**\n * The DynamicTrees provides a spatial partitioning data structure for quickly querying for overlapping bounding boxes for\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\n *\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\n * Every non-leaf node is a bounding box that contains child bounding boxes.\n */\nexport class DynamicTree {\n  public root: TreeNode;\n  public nodes: { [key: number]: TreeNode };\n  constructor(public worldBounds: BoundingBox = new BoundingBox(-Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE)) {\n    this.root = null;\n    this.nodes = {};\n  }\n\n  /**\n   * Inserts a node into the dynamic tree\n   */\n  private _insert(leaf: TreeNode): void {\n    // If there are no nodes in the tree, make this the root leaf\n    if (this.root === null) {\n      this.root = leaf;\n      this.root.parent = null;\n      return;\n    }\n\n    // Search the tree for a node that is not a leaf and find the best place to insert\n    const leafAABB = leaf.bounds;\n    let currentRoot = this.root;\n    while (!currentRoot.isLeaf()) {\n      const left = currentRoot.left;\n      const right = currentRoot.right;\n\n      const area = currentRoot.bounds.getPerimeter();\n      const combinedAABB = currentRoot.bounds.combine(leafAABB);\n      const combinedArea = combinedAABB.getPerimeter();\n\n      // Calculate cost heuristic for creating a new parent and leaf\n      const cost = 2 * combinedArea;\n\n      // Minimum cost of pushing the leaf down the tree\n      const inheritanceCost = 2 * (combinedArea - area);\n\n      // Cost of descending\n      let leftCost = 0;\n      const leftCombined = leafAABB.combine(left.bounds);\n      let newArea;\n      let oldArea;\n      if (left.isLeaf()) {\n        leftCost = leftCombined.getPerimeter() + inheritanceCost;\n      } else {\n        oldArea = left.bounds.getPerimeter();\n        newArea = leftCombined.getPerimeter();\n        leftCost = newArea - oldArea + inheritanceCost;\n      }\n\n      let rightCost = 0;\n      const rightCombined = leafAABB.combine(right.bounds);\n      if (right.isLeaf()) {\n        rightCost = rightCombined.getPerimeter() + inheritanceCost;\n      } else {\n        oldArea = right.bounds.getPerimeter();\n        newArea = rightCombined.getPerimeter();\n        rightCost = newArea - oldArea + inheritanceCost;\n      }\n\n      // cost is acceptable\n      if (cost < leftCost && cost < rightCost) {\n        break;\n      }\n\n      // Descend to the depths\n      if (leftCost < rightCost) {\n        currentRoot = left;\n      } else {\n        currentRoot = right;\n      }\n    }\n\n    // Create the new parent node and insert into the tree\n    const oldParent = currentRoot.parent;\n    const newParent = new TreeNode(oldParent);\n    newParent.bounds = leafAABB.combine(currentRoot.bounds);\n    newParent.height = currentRoot.height + 1;\n\n    if (oldParent !== null) {\n      // The sibling node was not the root\n      if (oldParent.left === currentRoot) {\n        oldParent.left = newParent;\n      } else {\n        oldParent.right = newParent;\n      }\n\n      newParent.left = currentRoot;\n      newParent.right = leaf;\n\n      currentRoot.parent = newParent;\n      leaf.parent = newParent;\n    } else {\n      // The sibling node was the root\n      newParent.left = currentRoot;\n      newParent.right = leaf;\n\n      currentRoot.parent = newParent;\n      leaf.parent = newParent;\n      this.root = newParent;\n    }\n\n    // Walk up the tree fixing heights and AABBs\n    let currentNode = leaf.parent;\n    while (currentNode) {\n      currentNode = this._balance(currentNode);\n\n      if (!currentNode.left) {\n        throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\n      }\n      if (!currentNode.right) {\n        throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\n      }\n\n      currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n      currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n\n      currentNode = currentNode.parent;\n    }\n  }\n\n  /**\n   * Removes a node from the dynamic tree\n   */\n  private _remove(leaf: TreeNode) {\n    if (leaf === this.root) {\n      this.root = null;\n      return;\n    }\n\n    const parent = leaf.parent;\n    const grandParent = parent.parent;\n    let sibling: TreeNode;\n    if (parent.left === leaf) {\n      sibling = parent.right;\n    } else {\n      sibling = parent.left;\n    }\n\n    if (grandParent) {\n      if (grandParent.left === parent) {\n        grandParent.left = sibling;\n      } else {\n        grandParent.right = sibling;\n      }\n      sibling.parent = grandParent;\n\n      let currentNode = grandParent;\n      while (currentNode) {\n        currentNode = this._balance(currentNode);\n        currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n        currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n\n        currentNode = currentNode.parent;\n      }\n    } else {\n      this.root = sibling;\n      sibling.parent = null;\n    }\n  }\n\n  /**\n   * Tracks a body in the dynamic tree\n   */\n  public trackBody(body: Body) {\n    const node = new TreeNode();\n    node.body = body;\n    node.bounds = body.collider.bounds;\n    node.bounds.left -= 2;\n    node.bounds.top -= 2;\n    node.bounds.right += 2;\n    node.bounds.bottom += 2;\n    this.nodes[body.id] = node;\n    this._insert(node);\n  }\n\n  /**\n   * Updates the dynamic tree given the current bounds of each body being tracked\n   */\n  public updateBody(body: Body) {\n    const node = this.nodes[body.id];\n    if (!node) {\n      return false;\n    }\n    const b = body.collider.bounds;\n\n    // if the body is outside the world no longer update it\n    if (!this.worldBounds.contains(b)) {\n      Logger.getInstance().warn('Collider with id ' + body.id + ' is outside the world bounds and will no longer be tracked for physics');\n      this.untrackBody(body);\n      return false;\n    }\n\n    if (node.bounds.contains(b)) {\n      return false;\n    }\n\n    this._remove(node);\n    b.left -= Physics.boundsPadding;\n    b.top -= Physics.boundsPadding;\n    b.right += Physics.boundsPadding;\n    b.bottom += Physics.boundsPadding;\n\n    const multdx = body.vel.x * Physics.dynamicTreeVelocityMultiplier;\n    const multdy = body.vel.y * Physics.dynamicTreeVelocityMultiplier;\n\n    if (multdx < 0) {\n      b.left += multdx;\n    } else {\n      b.right += multdx;\n    }\n\n    if (multdy < 0) {\n      b.top += multdy;\n    } else {\n      b.bottom += multdy;\n    }\n\n    node.bounds = b;\n    this._insert(node);\n    return true;\n  }\n\n  /**\n   * Untracks a body from the dynamic tree\n   */\n  public untrackBody(body: Body) {\n    const node = this.nodes[body.collider.id];\n    if (!node) {\n      return;\n    }\n    this._remove(node);\n    this.nodes[body.collider.id] = null;\n    delete this.nodes[body.collider.id];\n  }\n\n  /**\n   * Balances the tree about a node\n   */\n  private _balance(node: TreeNode) {\n    if (node === null) {\n      throw new Error('Cannot balance at null node');\n    }\n\n    if (node.isLeaf() || node.height < 2) {\n      return node;\n    }\n\n    const left = node.left;\n    const right = node.right;\n\n    const a = node;\n    const b = left;\n    const c = right;\n    const d = left.left;\n    const e = left.right;\n    const f = right.left;\n    const g = right.right;\n\n    const balance = c.height - b.height;\n    // Rotate c node up\n    if (balance > 1) {\n      // Swap the right node with it's parent\n      c.left = a;\n      c.parent = a.parent;\n      a.parent = c;\n\n      // The original node's old parent should point to the right node\n      // this is mega confusing\n      if (c.parent) {\n        if (c.parent.left === a) {\n          c.parent.left = c;\n        } else {\n          c.parent.right = c;\n        }\n      } else {\n        this.root = c;\n      }\n\n      // Rotate\n      if (f.height > g.height) {\n        c.right = f;\n        a.right = g;\n        g.parent = a;\n\n        a.bounds = b.bounds.combine(g.bounds);\n        c.bounds = a.bounds.combine(f.bounds);\n\n        a.height = 1 + Math.max(b.height, g.height);\n        c.height = 1 + Math.max(a.height, f.height);\n      } else {\n        c.right = g;\n        a.right = f;\n        f.parent = a;\n\n        a.bounds = b.bounds.combine(f.bounds);\n        c.bounds = a.bounds.combine(g.bounds);\n\n        a.height = 1 + Math.max(b.height, f.height);\n        c.height = 1 + Math.max(a.height, g.height);\n      }\n\n      return c;\n    }\n    // Rotate left node up\n    if (balance < -1) {\n      // swap\n      b.left = a;\n      b.parent = a.parent;\n      a.parent = b;\n\n      // node's old parent should point to b\n      if (b.parent) {\n        if (b.parent.left === a) {\n          b.parent.left = b;\n        } else {\n          if (b.parent.right !== a) {\n            throw 'Error rotating Dynamic Tree';\n          }\n          b.parent.right = b;\n        }\n      } else {\n        this.root = b;\n      }\n\n      // rotate\n      if (d.height > e.height) {\n        b.right = d;\n        a.left = e;\n        e.parent = a;\n\n        a.bounds = c.bounds.combine(e.bounds);\n        b.bounds = a.bounds.combine(d.bounds);\n\n        a.height = 1 + Math.max(c.height, e.height);\n        b.height = 1 + Math.max(a.height, d.height);\n      } else {\n        b.right = e;\n        a.left = d;\n        d.parent = a;\n\n        a.bounds = c.bounds.combine(d.bounds);\n        b.bounds = a.bounds.combine(e.bounds);\n\n        a.height = 1 + Math.max(c.height, d.height);\n        b.height = 1 + Math.max(a.height, e.height);\n      }\n      return b;\n    }\n\n    return node;\n  }\n\n  /**\n   * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\n   */\n  public getHeight(): number {\n    if (this.root === null) {\n      return 0;\n    }\n    return this.root.height;\n  }\n\n  /**\n   * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body.\n   *\n   * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\n   * that you are complete with your query and you do not want to continue. Returning false will continue searching\n   * the tree until all possible colliders have been returned.\n   */\n  public query(body: Body, callback: (other: Body) => boolean): void {\n    const bounds = body.collider.bounds;\n    const helper = (currentNode: TreeNode): boolean => {\n      if (currentNode && currentNode.bounds.intersect(bounds)) {\n        if (currentNode.isLeaf() && currentNode.body !== body) {\n          if (callback.call(body, currentNode.body)) {\n            return true;\n          }\n        } else {\n          return helper(currentNode.left) || helper(currentNode.right);\n        }\n      }\n      return false;\n    };\n    helper(this.root);\n  }\n\n  /**\n   * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\n   * long ray to test the tree specified by `max`.\n   *\n   * In the query callback, it will be passed a potential body that intersects with the raycast. Returning true from this\n   * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\n   * the tree until all possible bodies that would intersect with the ray have been returned.\n   */\n  public rayCastQuery(ray: Ray, max: number = Infinity, callback: (other: Body) => boolean): void {\n    const helper = (currentNode: TreeNode): boolean => {\n      if (currentNode && currentNode.bounds.rayCast(ray, max)) {\n        if (currentNode.isLeaf()) {\n          if (callback.call(ray, currentNode.body)) {\n            // ray hit a leaf! return the body\n            return true;\n          }\n        } else {\n          // ray hit but not at a leaf, recurse deeper\n          return helper(currentNode.left) || helper(currentNode.right);\n        }\n      }\n      return false; // ray missed\n    };\n    helper(this.root);\n  }\n\n  public getNodes(): TreeNode[] {\n    const helper = (currentNode: TreeNode): TreeNode[] => {\n      if (currentNode) {\n        return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\n      } else {\n        return [];\n      }\n    };\n    return helper(this.root);\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    // draw all the nodes in the Dynamic Tree\n    const helper = (currentNode: TreeNode) => {\n      if (currentNode) {\n        if (currentNode.isLeaf()) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = 'green';\n        } else {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = 'white';\n        }\n        currentNode.bounds.debugDraw(ctx);\n\n        if (currentNode.left) {\n          helper(currentNode.left);\n        }\n        if (currentNode.right) {\n          helper(currentNode.right);\n        }\n      }\n    };\n\n    helper(this.root);\n  }\n}\n","import { Physics } from './../Physics';\nimport { CollisionBroadphase } from './CollisionResolver';\nimport { DynamicTree } from './DynamicTree';\nimport { Pair } from './Pair';\nimport { Body } from './Body';\n\nimport { Vector, Ray } from '../Algebra';\nimport { FrameStats } from '../Debug';\nimport { CollisionResolutionStrategy } from '../Physics';\nimport { Logger } from '../Util/Log';\nimport { CollisionStartEvent, CollisionEndEvent } from '../Events';\nimport { CollisionType } from './CollisionType';\nimport { Collider } from './Collider';\n\nexport class DynamicTreeCollisionBroadphase implements CollisionBroadphase {\n  private _dynamicCollisionTree = new DynamicTree();\n  private _collisionHash: { [key: string]: boolean } = {};\n  private _collisionPairCache: Pair[] = [];\n  private _lastFramePairs: Pair[] = [];\n  private _lastFramePairsHash: { [pairId: string]: Pair } = {};\n\n  /**\n   * Tracks a physics body for collisions\n   */\n  public track(target: Body): void {\n    if (!target) {\n      Logger.getInstance().warn('Cannot track null physics body');\n      return;\n    }\n    this._dynamicCollisionTree.trackBody(target);\n  }\n\n  /**\n   * Untracks a physics body\n   */\n  public untrack(target: Body): void {\n    if (!target) {\n      Logger.getInstance().warn('Cannot untrack a null physics body');\n      return;\n    }\n    this._dynamicCollisionTree.untrackBody(target);\n  }\n\n  private _shouldGenerateCollisionPair(colliderA: Collider, colliderB: Collider) {\n    // if the collision pair has been calculated already short circuit\n    const hash = Pair.calculatePairHash(colliderA, colliderB);\n    if (this._collisionHash[hash]) {\n      return false; // pair exists easy exit return false\n    }\n\n    return Pair.canCollide(colliderA, colliderB);\n  }\n\n  /**\n   * Detects potential collision pairs in a broadphase approach with the dynamic aabb tree strategy\n   */\n  public broadphase(targets: Body[], delta: number, stats?: FrameStats): Pair[] {\n    const seconds = delta / 1000;\n\n    // Retrieve the list of potential colliders, exclude killed, prevented, and self\n    const potentialColliders = targets\n      .map((t) => t.collider)\n      .filter((other) => {\n        return other.active && other.type !== CollisionType.PreventCollision;\n      });\n\n    // clear old list of collision pairs\n    this._collisionPairCache = [];\n    this._collisionHash = {};\n\n    // check for normal collision pairs\n    let collider: Collider;\n    for (let j = 0, l = potentialColliders.length; j < l; j++) {\n      collider = potentialColliders[j];\n\n      // Query the collision tree for potential colliders\n      this._dynamicCollisionTree.query(collider.body, (other: Body) => {\n        if (this._shouldGenerateCollisionPair(collider, other.collider)) {\n          const pair = new Pair(collider, other.collider);\n          this._collisionHash[pair.id] = true;\n          this._collisionPairCache.push(pair);\n        }\n        // Always return false, to query whole tree. Returning true in the query method stops searching\n        return false;\n      });\n    }\n    if (stats) {\n      stats.physics.pairs = this._collisionPairCache.length;\n    }\n\n    // Check dynamic tree for fast moving objects\n    // Fast moving objects are those moving at least there smallest bound per frame\n    if (Physics.checkForFastBodies) {\n      for (const collider of potentialColliders) {\n        // Skip non-active objects. Does not make sense on other collision types\n        if (collider.type !== CollisionType.Active) {\n          continue;\n        }\n\n        // Maximum travel distance next frame\n        const updateDistance =\n          collider.body.vel.size * seconds + // velocity term\n          collider.body.acc.size * 0.5 * seconds * seconds; // acc term\n\n        // Find the minimum dimension\n        const minDimension = Math.min(collider.bounds.height, collider.bounds.width);\n        if (Physics.disableMinimumSpeedForFastBody || updateDistance > minDimension / 2) {\n          if (stats) {\n            stats.physics.fastBodies++;\n          }\n\n          // start with the oldPos because the integration for actors has already happened\n          // objects resting on a surface may be slightly penetrating in the current position\n          const updateVec = collider.body.pos.sub(collider.body.oldPos);\n          const centerPoint = collider.shape.center;\n          const furthestPoint = collider.shape.getFurthestPoint(collider.body.vel);\n          const origin: Vector = furthestPoint.sub(updateVec);\n\n          const ray: Ray = new Ray(origin, collider.body.vel);\n\n          // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface\n          ray.pos = ray.pos.add(ray.dir.scale(-2 * Physics.surfaceEpsilon));\n          let minBody: Body;\n          let minTranslate: Vector = new Vector(Infinity, Infinity);\n          this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + Physics.surfaceEpsilon * 2, (other: Body) => {\n            if (collider.body !== other && other.collider.shape && Pair.canCollide(collider, other.collider)) {\n              const hitPoint = other.collider.shape.rayCast(ray, updateDistance + Physics.surfaceEpsilon * 10);\n              if (hitPoint) {\n                const translate = hitPoint.sub(origin);\n                if (translate.size < minTranslate.size) {\n                  minTranslate = translate;\n                  minBody = other;\n                }\n              }\n            }\n            return false;\n          });\n\n          if (minBody && Vector.isValid(minTranslate)) {\n            const pair = new Pair(collider, minBody.collider);\n            if (!this._collisionHash[pair.id]) {\n              this._collisionHash[pair.id] = true;\n              this._collisionPairCache.push(pair);\n            }\n            // move the fast moving object to the other body\n            // need to push into the surface by ex.Physics.surfaceEpsilon\n            const shift = centerPoint.sub(furthestPoint);\n            collider.body.pos = origin\n              .add(shift)\n              .add(minTranslate)\n              .add(ray.dir.scale(2 * Physics.surfaceEpsilon));\n            collider.shape.recalc();\n\n            if (stats) {\n              stats.physics.fastBodyCollisions++;\n            }\n          }\n        }\n      }\n    }\n    // return cache\n    return this._collisionPairCache;\n  }\n\n  /**\n   * Applies narrow phase on collision pairs to find actual area intersections\n   * Adds actual colliding pairs to stats' Frame data\n   */\n  public narrowphase(pairs: Pair[], stats?: FrameStats): Pair[] {\n    for (let i = 0; i < pairs.length; i++) {\n      pairs[i].collide();\n      if (stats && pairs[i].collision) {\n        stats.physics.collisions++;\n        stats.physics.collidersHash[pairs[i].id] = pairs[i];\n      }\n    }\n    return pairs.filter((p) => p.collision);\n  }\n\n  /**\n   * Perform collision resolution given a strategy (rigid body or box) and move objects out of intersect.\n   */\n  public resolve(pairs: Pair[], delta: number, strategy: CollisionResolutionStrategy): Pair[] {\n    for (const pair of pairs) {\n      pair.resolve(strategy);\n\n      if (pair.collision) {\n        pair.colliderA.body.applyMtv();\n        pair.colliderB.body.applyMtv();\n        // todo still don't like this, this is a small integration step to resolve narrowphase collisions\n        pair.colliderA.body.integrate(delta * Physics.collisionShift);\n        pair.colliderB.body.integrate(delta * Physics.collisionShift);\n      }\n    }\n\n    return pairs.filter((p) => p.canCollide);\n  }\n\n  public runCollisionStartEnd(pairs: Pair[]) {\n    const currentFrameHash: { [pairId: string]: Pair } = {};\n\n    for (const p of pairs) {\n      // load currentFrameHash\n      currentFrameHash[p.id] = p;\n\n      // find all new collisions\n      if (!this._lastFramePairsHash[p.id]) {\n        const actor1 = p.colliderA;\n        const actor2 = p.colliderB;\n        actor1.emit('collisionstart', new CollisionStartEvent(actor1, actor2, p));\n        actor2.emit('collisionstart', new CollisionStartEvent(actor2, actor1, p));\n      }\n    }\n\n    // find all old collisions\n    for (const p of this._lastFramePairs) {\n      if (!currentFrameHash[p.id]) {\n        const actor1 = p.colliderA;\n        const actor2 = p.colliderB;\n        actor1.emit('collisionend', new CollisionEndEvent(actor1, actor2));\n        actor2.emit('collisionend', new CollisionEndEvent(actor2, actor1));\n      }\n    }\n\n    // reset the last frame cache\n    this._lastFramePairs = pairs;\n    this._lastFramePairsHash = currentFrameHash;\n  }\n\n  /**\n   * Update the dynamic tree positions\n   */\n  public update(targets: Body[]): number {\n    let updated = 0;\n    const len = targets.length;\n\n    for (let i = 0; i < len; i++) {\n      if (this._dynamicCollisionTree.updateBody(targets[i])) {\n        updated++;\n      }\n    }\n    return updated;\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    if (Physics.broadphaseDebug) {\n      this._dynamicCollisionTree.debugDraw(ctx);\n    }\n\n    if (Physics.showContacts || Physics.showCollisionNormals) {\n      for (const pair of this._collisionPairCache) {\n        pair.debugDraw(ctx);\n      }\n    }\n  }\n}\n","export * from './Body';\nexport * from './Collider';\nexport * from './BoundingBox';\nexport * from './Circle';\nexport * from './CollisionContact';\nexport * from './CollisionJumpTable';\nexport * from './ClosestLineJumpTable';\nexport * from './CollisionGroup';\nexport * from './CollisionGroupManager';\nexport * from './DynamicTree';\nexport * from './DynamicTreeCollisionBroadphase';\nexport * from './Edge';\nexport * from './CollisionShape';\nexport * from './CollisionResolver';\nexport * from './Physics';\nexport * from './Pair';\nexport * from './ConvexPolygon';\nexport * from './Side';\nexport * from './Shape';\n","import { Trait } from '../Interfaces/Trait';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\nimport { Vector } from '../Algebra';\nimport { Side } from '../Collision/Side';\nimport { PreCollisionEvent, PostCollisionEvent } from '../Events';\nimport { CollisionType } from '../Collision/CollisionType';\nimport { BoundingBox } from '../Collision/Index';\n\nexport class TileMapCollisionDetection implements Trait {\n  public update(actor: Actor, engine: Engine) {\n    const eventDispatcher = actor.eventDispatcher;\n    if (actor.body.collider.type !== CollisionType.PreventCollision && engine.currentScene && engine.currentScene.tileMaps) {\n      for (let j = 0; j < engine.currentScene.tileMaps.length; j++) {\n        const map = engine.currentScene.tileMaps[j];\n        let intersectMap: Vector;\n        let side = Side.None;\n        let max = 2;\n        while ((intersectMap = map.collides(actor))) {\n          if (max-- < 0) {\n            break;\n          }\n          side = BoundingBox.getSideFromIntersection(intersectMap);\n          eventDispatcher.emit('precollision', new PreCollisionEvent(actor, null, side, intersectMap));\n          if (actor.body.collider.type === CollisionType.Active) {\n            actor.pos.y += intersectMap.y;\n            actor.pos.x += intersectMap.x;\n            eventDispatcher.emit('postcollision', new PostCollisionEvent(actor, null, side, intersectMap));\n          }\n        }\n      }\n    }\n  }\n}\n","export * from './CapturePointer';\nexport * from './OffscreenCulling';\nexport * from './TileMapCollisionDetection';\n","import { Vector, vec } from '../Algebra';\nimport { ExcaliburGraphicsContext, ImageSource } from './Context/ExcaliburGraphicsContext';\nimport { BoundingBox } from '../Collision/BoundingBox';\n\nexport interface GraphicOptions {\n  /**\n   * The width of the graphic\n   */\n  width?: number;\n  /**\n   * The height of the graphic\n   */\n  height?: number;\n  /**\n   * SHould the graphic be flipped horizontally\n   */\n  flipHorizontal?: boolean;\n  /**\n   * Should the graphic be flipped vertically\n   */\n  flipVertical?: boolean;\n  /**\n   * The rotation of the graphic\n   */\n  rotation?: number;\n  /**\n   * The scale of the graphic\n   */\n  scale?: Vector;\n  /**\n   * The opacity of the graphic\n   */\n  opacity?: number;\n  /**\n   * The origin of the drawing in pixels to use when applying transforms, by default it will be the center of the image\n   */\n  origin?: Vector;\n}\n\n/**\n * A Graphic is the base Excalibur primitive for something that can be drawn to the [[ExcaliburGraphicsContext]].\n * [[Sprite]], [[Animation]], [[GraphicsGroup]], [[Canvas]], [[Rect]], [[Circle]], and [[Polygon]] all derive from the\n * [[Graphic]] abstract class.\n *\n * Implementors of a Graphic must override the abstract [[Graphic._drawImage]] method to render an image to the graphics context. Graphic\n * handles all the position, rotation, and scale transformations in [[Graphic._preDraw]] and [[Graphic._postDraw]]\n */\nexport abstract class Graphic {\n  private static _ID: number = 0;\n  readonly id = Graphic._ID++;\n  public __glTexture: WebGLTexture;\n\n  /**\n   * Gets or sets wether to show debug information about the graphic\n   */\n  public showDebug: boolean = false;\n\n  /**\n   * Gets or sets the flipHorizontal, which will flip the graphic horizontally (across the y axis)\n   */\n  public flipHorizontal: boolean = false;\n\n  /**\n   * Gets or sets the flipVertical, which will flip the graphic vertically (across the x axis)\n   */\n  public flipVertical: boolean = false;\n\n  /**\n   * Gets or sets the rotation of the graphic\n   */\n  public rotation: number = 0;\n\n  /**\n   * Gets or sets the opacity of the graphic, 0 is transparent, 1 is solid (opaque).\n   */\n  public opacity: number = 1;\n\n  /**\n   * Gets or sets the scale of the graphic, this affects the width and\n   */\n  public scale = Vector.One;\n\n  /**\n   * Gets or sets the origin of the graphic, if not set the center of the graphic is the origin\n   */\n  public origin: Vector | null = null;\n\n  constructor(options?: GraphicOptions) {\n    if (options) {\n      this.origin = options.origin ?? this.origin;\n      this.flipHorizontal = options.flipHorizontal ?? this.flipHorizontal;\n      this.flipVertical = options.flipVertical ?? this.flipVertical;\n      this.rotation = options.rotation ?? this.rotation;\n      this.opacity = options.opacity ?? this.opacity;\n      this.scale = options.scale ?? this.scale;\n    }\n  }\n\n  public cloneGraphicOptions(): GraphicOptions {\n    return {\n      origin: this.origin ? this.origin.clone() : null,\n      flipHorizontal: this.flipHorizontal,\n      flipVertical: this.flipVertical,\n      rotation: this.rotation,\n      opacity: this.opacity,\n      scale: this.scale ? this.scale.clone() : null\n    };\n  }\n\n  private _width: number = 0;\n\n  /**\n   * Gets or sets the width of the graphic\n   */\n  public get width() {\n    return this._width * this.scale.x;\n  }\n\n  private _height: number = 0;\n\n  /**\n   * Gets or sets the height of the graphic\n   */\n  public get height() {\n    return this._height * this.scale.y;\n  }\n\n  public set width(value: number) {\n    this._width = value;\n  }\n\n  public set height(value: number) {\n    this._height = value;\n  }\n\n  /**\n   * Gets a copy of the bounds in pixels occupied by the graphic on the the screen. This includes scale.\n   */\n  public get localBounds(): BoundingBox {\n    return BoundingBox.fromDimension(this._width * this.scale.x, this._height * this.scale.y, Vector.Zero);\n  }\n\n  /**\n   * Draw the whole graphic to the context including transform\n   * @param ex The excalibur graphics context\n   * @param x\n   * @param y\n   */\n  public draw(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    this._preDraw(ex, x, y);\n    this._drawImage(ex, 0, 0);\n    this._postDraw(ex);\n  }\n\n  /**\n   * Meant to be overriden by the graphic implementation to draw the underlying image (HTMLCanvasElement or HTMLImageElement)\n   * to the graphics context without transform. Transformations like position, rotation, and scale are handled by [[Graphic._preDraw]] and [[Graphic._postDraw]]\n   * @param ex The excalibur graphics context\n   * @param x\n   * @param y\n   */\n  protected abstract _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number): void;\n\n  /**\n   * Apply affine transformations to the graphics context to manipulate the graphic before [[Graphic._drawImage]]\n   * @param ex\n   * @param x\n   * @param y\n   */\n  protected _preDraw(ex: ExcaliburGraphicsContext, x: number, y: number): void {\n    ex.save();\n    ex.translate(x, y);\n    this._rotate(ex);\n    ex.scale(this.scale.x, this.scale.y);\n    this._flip(ex);\n    // it is important to multiply alphas so graphics respect the current context\n    ex.opacity = ex.opacity * this.opacity;\n  }\n\n  protected _rotate(ex: ExcaliburGraphicsContext) {\n    const origin = this.origin ?? vec(this.width / 2, this.height / 2);\n    ex.translate(origin.x, origin.y);\n    ex.rotate(this.rotation);\n    ex.translate(-origin.x, -origin.y);\n  }\n\n  protected _flip(ex: ExcaliburGraphicsContext) {\n    if (this.flipHorizontal) {\n      ex.translate(this.width / this.scale.x, 0);\n      ex.scale(-1, 1);\n    }\n\n    if (this.flipVertical) {\n      ex.translate(0, this.height / this.scale.y);\n      ex.scale(1, -1);\n    }\n  }\n\n  /**\n   * Apply any addtional work after [[Graphic._drawImage]] and restore the context state.\n   * @param ex\n   */\n  protected _postDraw(ex: ExcaliburGraphicsContext): void {\n    if (this.showDebug) {\n      ex.drawDebugRect(0, 0, this.width, this.height);\n    }\n    ex.restore();\n  }\n\n  /**\n   * Return the source native source image for the graphic\n   */\n  abstract getSource(): ImageSource;\n\n  /**\n   * Returns a new instance of the graphic that has the same properties\n   */\n  abstract clone(): Graphic;\n}\n","import { Graphic, GraphicOptions } from './Graphic';\nimport { Vector } from '../Algebra';\nimport { clamp } from '../Util/Util';\nimport { ExcaliburGraphicsContext, ImageSource } from './Context/ExcaliburGraphicsContext';\nimport { Eventable } from '../Interfaces/Evented';\nimport { EventDispatcher } from '../EventDispatcher';\nimport { SpriteSheet } from './SpriteSheet';\n\nexport enum AnimationStrategy {\n  /**\n   * Animation ends without displaying anything\n   */\n  End = 'end',\n  /**\n   * Animation loops to the first frame after the last frame\n   */\n  Loop = 'loop',\n  /**\n   * Animation plays to the last frame, then backwards to the first frame, then repeats\n   */\n  PingPong = 'pingpong',\n\n  /**\n   * Animation ends stopping on the last frame\n   */\n  Freeze = 'freeze'\n}\n\nexport interface Frame {\n  graphic?: Graphic;\n  duration?: number; // number of ms the frame should be visible, overrides the animation duration\n  tags?: { [name: string]: Vector | undefined };\n}\n\nexport interface AnimationOptions {\n  frames: Frame[];\n  frameDuration?: number;\n  strategy?: AnimationStrategy;\n}\n\nexport class Animation extends Graphic implements Eventable<Frame | Animation> {\n  public frames: Frame[] = [];\n  public strategy: AnimationStrategy = AnimationStrategy.Loop;\n  public frameDuration: number = 100;\n\n  private _currentFrame = 0;\n  private _timeLeftInFrame = 0;\n  private _direction = 1;\n  private _done = false;\n  private _playing = true;\n\n  private _emitter: EventDispatcher<Frame | Animation> = new EventDispatcher<Frame | Animation>(this);\n\n  constructor(options: GraphicOptions & AnimationOptions) {\n    super(options);\n    this.frames = options.frames;\n    this.strategy = options.strategy ?? this.strategy;\n    this.frameDuration = options.frameDuration ?? this.frameDuration;\n\n    this.goToFrame(0);\n  }\n\n  public clone(): Animation {\n    return new Animation({\n      frames: this.frames.map((f) => ({ ...f })),\n      frameDuration: this.frameDuration,\n      strategy: this.strategy,\n      ...this.cloneGraphicOptions()\n    });\n  }\n\n  public static fromSpriteSheet(\n    spriteSheet: SpriteSheet,\n    frameIndices: number[],\n    duration: number,\n    strategy: AnimationStrategy = AnimationStrategy.Loop\n  ): Animation {\n    return new Animation({\n      frames: spriteSheet.sprites\n        .filter((_, index) => frameIndices.indexOf(index) > -1)\n        .map((f) => ({\n          graphic: f,\n          duration: duration\n        })),\n      strategy: strategy\n    });\n  }\n\n  public get tags() {\n    return this.currentFrame.tags;\n  }\n\n  public get currentFrame(): Frame | null {\n    if (this._currentFrame >= 0 && this._currentFrame < this.frames.length) {\n      return this.frames[this._currentFrame];\n    }\n    return null;\n  }\n\n  public getSource(): ImageSource {\n    return this.frames[this._currentFrame].graphic.getSource();\n  }\n\n  public play(): void {\n    this._playing = true;\n  }\n\n  public pause(): void {\n    this._playing = false;\n  }\n\n  public reset(): void {\n    this._done = false;\n    this._currentFrame = 0;\n  }\n\n  public get canFinish(): boolean {\n    switch (this.strategy) {\n      case AnimationStrategy.End:\n      case AnimationStrategy.Freeze: {\n        return true;\n      }\n      default: {\n        return false;\n      }\n    }\n  }\n\n  public get done(): boolean {\n    return this._done;\n  }\n\n  public goToFrame(frameNumber: number) {\n    this._currentFrame = frameNumber; // % this.frames.length;\n    this._timeLeftInFrame = this.frameDuration;\n    const maybeFrame = this.frames[this._currentFrame];\n    if (maybeFrame && !this._done) {\n      this._timeLeftInFrame = maybeFrame?.duration || this.frameDuration;\n      this.width = maybeFrame.graphic?.width;\n      this.height = maybeFrame.graphic?.height;\n      this.emit('frame', maybeFrame);\n    }\n  }\n\n  private _nextFrame(): number {\n    const currentFrame = this._currentFrame;\n    if (this._done) return currentFrame;\n    let next = -1;\n\n    switch (this.strategy) {\n      case AnimationStrategy.Loop: {\n        next = (currentFrame + 1) % this.frames.length;\n        if (next === 0) {\n          this.emit('loop', this);\n        }\n        break;\n      }\n      case AnimationStrategy.End: {\n        next = currentFrame + 1;\n        if (next >= this.frames.length) {\n          this._done = true;\n          this._currentFrame = this.frames.length;\n          this.emit('ended', this);\n        }\n        break;\n      }\n      case AnimationStrategy.Freeze: {\n        next = clamp(currentFrame + 1, 0, this.frames.length - 1);\n        if (next >= this.frames.length - 1) {\n          this._done = true;\n          this.emit('ended', this);\n        }\n        break;\n      }\n      case AnimationStrategy.PingPong: {\n        if (currentFrame + this._direction >= this.frames.length) {\n          this._direction = -1;\n          this.emit('loop', this);\n        }\n\n        if (currentFrame + this._direction < 0) {\n          this._direction = 1;\n          this.emit('loop', this);\n        }\n\n        next = currentFrame + (this._direction % this.frames.length);\n        break;\n      }\n    }\n    return next;\n  }\n\n  public tick(elapsedMilliseconds: number) {\n    if (!this._playing) return;\n    this._timeLeftInFrame -= elapsedMilliseconds;\n    if (this._timeLeftInFrame <= 0) {\n      this.goToFrame(this._nextFrame());\n    }\n    this._updateDimensions();\n  }\n\n  private _updateDimensions() {\n    if (this.currentFrame) {\n      this.width = this.currentFrame.graphic?.width;\n      this.height = this.currentFrame.graphic?.height;\n    }\n  }\n\n  protected _drawImage(ctx: ExcaliburGraphicsContext, x: number, y: number) {\n    if (this.currentFrame) {\n      this.currentFrame.graphic.draw(ctx, x, y);\n    }\n  }\n\n  emit(eventName: string, event: Frame | Animation): void {\n    this._emitter.emit(eventName, event as any); // TODO emitter :(\n  }\n\n  on(event: 'loop', handler: (anim: Animation) => void): void;\n  on(event: 'ended', handler: (anim: Animation) => void): void;\n  on(event: 'frame', handler: (frame: Frame, index: number) => void): void;\n  on(event: string, handler: (event: any, index?: number) => void): void {\n    this._emitter.on(event, handler);\n  }\n\n  off(event: 'loop', handler?: (anim: Animation) => void): void;\n  off(event: 'ended', handler?: (anim: Animation) => void): void;\n  off(event: 'frame', handler?: (frame: Frame, index: number) => void): void;\n  off(event: string, handler?: (event: any, index?: number) => void): void {\n    this._emitter.off(event, handler);\n  }\n\n  once(event: 'loop', handler: (anim: Animation) => void): void;\n  once(event: 'ended', handler: (anim: Animation) => void): void;\n  once(event: 'frame', handler: (frame: Frame, index: number) => void): void;\n  once(event: string, handler: (event: any, index?: number) => void): void {\n    this._emitter.once(event, handler);\n  }\n}\n","export function delay(milliseconds: number) {\n  return new Promise((resolve) => {\n    setTimeout(() => resolve(), milliseconds);\n  });\n}\n","import { Vector } from '../Algebra';\nimport { Graphic, GraphicOptions } from './Graphic';\nimport { Animation } from './Animation';\nimport { ExcaliburGraphicsContext, ImageSource } from './Context/ExcaliburGraphicsContext';\n\nexport interface GraphicsGroupingOptions {\n  members: GraphicsGrouping[];\n}\n\nexport interface GraphicsGrouping {\n  pos: Vector;\n  graphic: Graphic;\n}\n\nexport class GraphicsGroup extends Graphic {\n  public members: GraphicsGrouping[] = [];\n\n  public getSource(): ImageSource {\n    return null;\n  }\n\n  public get image(): HTMLImageElement | HTMLCanvasElement {\n    return null;\n  }\n  constructor(options: GraphicsGroupingOptions & GraphicOptions) {\n    super(options);\n    this.members = options.members;\n    // let groupBB: BoundingBox = this.members.reduce((bb, member) => {\n    //   return bb.combine(member.graphic.localBounds.translate(member.pos));\n    // }, new BoundingBox());\n    // this.width = groupBB.width;\n    // this.height = groupBB.height;\n    this.width = 0;\n    this.height = 0;\n  }\n\n  public clone(): GraphicsGroup {\n    return new GraphicsGroup({\n      members: [...this.members],\n      ...this.cloneGraphicOptions()\n    });\n  }\n\n  private _isAnimationOrGroup(graphic: Graphic): graphic is Animation | GraphicsGroup {\n    return graphic instanceof Animation || graphic instanceof GraphicsGroup;\n  }\n\n  public tick(elapsedMilliseconds: number) {\n    for (const member of this.members) {\n      const maybeAnimation = member.graphic;\n      if (this._isAnimationOrGroup(maybeAnimation)) {\n        maybeAnimation.tick(elapsedMilliseconds);\n      }\n    }\n  }\n\n  public reset() {\n    for (const member of this.members) {\n      const maybeAnimation = member.graphic;\n      if (this._isAnimationOrGroup(maybeAnimation)) {\n        maybeAnimation.reset();\n      }\n    }\n  }\n\n  protected _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    for (const member of this.members) {\n      ex.save();\n      ex.translate(x, y);\n      member.graphic.draw(ex, member.pos.x, member.pos.y);\n      if (this.showDebug) {\n        ex.drawDebugRect(0, 0, this.width, this.height);\n      }\n      ex.restore();\n    }\n  }\n}\n","import { Vector } from '../Algebra';\nimport { Graphic } from './Graphic';\nimport { Animation } from './Animation';\nimport { delay } from '../Util/Delay';\nimport { GraphicsGroup } from './GraphicsGroup';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { Component } from '../Component';\n\nexport interface GraphicsComponentOptions {\n  /**\n   * Name of current graphic to use\n   */\n  current?: string;\n\n  /**\n   * Optional visible flag, if the graphics component is not visible it will not be displayed\n   */\n  visible?: boolean;\n\n  /**\n   * Optional opacity\n   */\n  opacity?: number;\n\n  /**\n   * List of graphics\n   */\n  graphics?: { [graphicName: string]: Graphic };\n\n  /**\n   * Optional offset in absolute pixels to shift all graphics in this component from each graphic's anchor (default is top left corner)\n   */\n  offset?: Vector;\n\n  /**\n   * Optional origin\n   */\n  origin?: Vector;\n}\n\nexport interface GraphicsLayerOptions {\n  name: string;\n  order: number;\n  offset?: Vector;\n}\nexport class GraphicsLayer {\n  constructor(private _options: GraphicsLayerOptions, private _graphics: GraphicsComponent) {}\n  public get name(): string {\n    return this._options.name;\n  }\n\n  /**\n   * Immediately show nothing\n   */\n  public hide(): Promise<void> {\n    this._currentGfx = null;\n    return Promise.resolve();\n  }\n\n  public show(nameOrGraphic: string | Graphic, duration?: number): Promise<Graphic> {\n    let gfx: Graphic = null;\n    if (nameOrGraphic instanceof Graphic) {\n      gfx = nameOrGraphic;\n    } else {\n      gfx = this._graphics.getGraphic(nameOrGraphic);\n    }\n    this._currentGfx = gfx;\n    return new Promise((resolve) => {\n      if (!duration) {\n        resolve(gfx);\n      } else if (duration) {\n        delay(duration).then(() => {\n          resolve(gfx);\n        });\n      } else {\n        resolve(gfx);\n      }\n    });\n  }\n\n  public get order(): number {\n    return this._options.order;\n  }\n\n  public set order(order: number) {\n    this._options.order = order;\n  }\n\n  public get offset(): Vector {\n    return this._options.offset ?? Vector.Zero;\n  }\n\n  public set offset(value: Vector) {\n    this._options.offset = value;\n  }\n\n  private _currentGfx: Graphic;\n\n  public get graphic(): Graphic {\n    return this._currentGfx;\n  }\n}\n\n/**\n * Component to manage drawings, using with the position component\n */\nexport class GraphicsComponent implements Component<'graphics'> {\n  static type: 'graphics';\n  readonly type = 'graphics';\n\n  public __debug: { graphicBounds: Graphic; colliderBounds: Graphic } = {\n    graphicBounds: null,\n    colliderBounds: null\n  };\n\n  private _graphics: { [graphicName: string]: Graphic } = {};\n  private _layers: GraphicsLayer[] = [];\n  private _layerMap: { [layerName: string]: GraphicsLayer } = {};\n  public default: GraphicsLayer = new GraphicsLayer({ name: 'default', order: 0 }, this);\n\n  public get layers(): readonly GraphicsLayer[] {\n    return this._layers;\n  }\n\n  /**\n   * Creates a new graphics layer\n   */\n  public createLayer(options: GraphicsLayerOptions): GraphicsLayer {\n    const layer = new GraphicsLayer(options, this);\n    return this._maybeAddLayer(layer);\n  }\n\n  private _maybeAddLayer(layer: GraphicsLayer) {\n    if (this._layerMap[layer.name]) {\n      // todo log warning\n      return this._layerMap[layer.name];\n    }\n    this._layerMap[layer.name] = layer;\n    this._layers.push(layer);\n    this._layers.sort((a, b) => a.order - b.order);\n    return layer;\n  }\n\n  public getLayer(name: string): GraphicsLayer | undefined {\n    return this._layerMap[name];\n  }\n\n  public getGraphic(name: string): Graphic | undefined {\n    return this._graphics[name];\n  }\n\n  /**\n   * Sets or gets wether any drawing should be visible in this component\n   */\n  public visible: boolean = true;\n\n  /**\n   * Sets or gets wither all drawings should have an opacity applied\n   */\n  public opacity: number = 1;\n\n  /**\n   * Offset to apply to all drawings in this component if set, if null the drawing's offset is respected\n   */\n  public offset?: Vector | null = null;\n\n  /**\n   * Anchor to apply to all drawings in this component if set, if null the drawing's anchor is respected\n   */\n  public anchor?: Vector | null = null;\n\n  constructor(options?: GraphicsComponentOptions) {\n    // Defaults\n    options = {\n      visible: this.visible,\n      ...options\n    };\n\n    const { current, opacity, visible, graphics, offset } = options;\n\n    this._graphics = graphics || {};\n    this.offset = offset ?? this.offset;\n    this.opacity = opacity ?? this.opacity;\n    this.visible = !!visible;\n\n    if (current && this._graphics[current]) {\n      this.show(this._graphics[current]);\n    }\n    this._layers.push(this.default);\n  }\n\n  /**\n   * Returns the currently displayed graphic, null if hidden\n   */\n  public get current(): Graphic {\n    return this.default.graphic;\n  }\n\n  /**\n   * Returns all graphics associated with this component\n   */\n  public get graphics(): { [graphicName: string]: Graphic } {\n    return this._graphics;\n  }\n\n  /**\n   * Adds a named graphic to this component, if the name is \"default\" or not specified, it will be shown by default without needing to call\n   * `show(\"default\")`\n   * @param graphic\n   */\n  public add(graphic: Graphic): Graphic;\n  public add(name: string, graphic: Graphic): Graphic;\n  public add(nameOrGraphic: string | Graphic, graphic?: Graphic): Graphic {\n    let name = 'default';\n    let graphicToSet: Graphic = null;\n    if (typeof nameOrGraphic === 'string') {\n      name = nameOrGraphic;\n      graphicToSet = graphic;\n    } else {\n      graphicToSet = nameOrGraphic;\n    }\n\n    this._graphics[name] = graphicToSet;\n    if (name === 'default') {\n      this.show('default');\n    }\n    return graphicToSet;\n  }\n\n  /**\n   * Show a graphic by name, returns a promise that resolves when graphic has finished displaying\n   */\n  public show(nameOrGraphic: string | Graphic, duration?: number): Promise<Graphic> {\n    return this.default.show(nameOrGraphic, duration);\n  }\n\n  /**\n   * Immediately show nothing\n   */\n  public hide(): Promise<void> {\n    return this.default.hide();\n  }\n\n  private _isAnimationOrGroup(graphic: Graphic): graphic is Animation | GraphicsGroup {\n    return graphic instanceof Animation || graphic instanceof GraphicsGroup;\n  }\n\n  /**\n   * Update underlying graphics if necesary, called internally\n   * @param elapsed\n   * @internal\n   */\n  public update(elapsed: number) {\n    for (const layer of this._layers) {\n      if (this._isAnimationOrGroup(layer.graphic)) {\n        layer.graphic?.tick(elapsed);\n      }\n    }\n  }\n\n  /**\n   * Draws the graphics component to the screen, called internally\n   * @param ctx\n   * @param x\n   * @param y\n   * @internal\n   */\n  public draw(ctx: ExcaliburGraphicsContext, x: number, y: number) {\n    if (this.visible) {\n      // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\n      const anchor = this.anchor ?? Vector.Zero;\n\n      // this should be moved to the graphics system\n      this._layers.sort((a, b) => a.order - b.order);\n      for (const layer of this._layers) {\n        if (!layer.graphic) continue;\n        const offsetX = -layer.graphic.width * layer.graphic.scale.x * anchor.x + x;\n        const offsetY = -layer.graphic.height * layer.graphic.scale.y * anchor.y + y;\n        layer.graphic?.draw(ctx, offsetX + layer.offset.x, offsetY + layer.offset.y);\n      }\n    }\n  }\n\n  /**\n   * Returns a shallow copy of this component\n   */\n  clone(): GraphicsComponent {\n    return new GraphicsComponent({\n      opacity: this.opacity\n    });\n  }\n}\n","import { Class } from './Class';\nimport { Component } from './Component';\n\nexport type NullableComponent = Component | null | undefined;\nexport type ComponentMap = { [type: string]: NullableComponent };\nexport type ComponentMapProp<T extends Component['type'], U extends { type: Component['type'] }> = U extends { type: T } ? U : never;\n\nexport class Entity<T extends Component = Component> extends Class {\n  private static _ID = 0;\n\n  /**\n   * The unique identifier for the entity\n   */\n  public id: number = Entity._ID++;\n\n  constructor(components: T[] = []) {\n    super();\n    components.forEach((c) => this.addComponent(c));\n  }\n\n  public readonly components: { [t in T['type']]: ComponentMapProp<t, T> } & ComponentMap = {} as any;\n\n  public addComponent(component: Component): Entity<T> {\n    component.owner = this;\n    (this.components as ComponentMap)[component.type] = component;\n    return this;\n  }\n\n  public removeComponent(name: string): Entity<T> {\n    delete this.components[name];\n    return this;\n  }\n\n  public hasComponent(name: string): boolean {\n    return !!this.components[name];\n  }\n}\n","import { Component } from './Component';\nimport { Vector } from './Algebra';\nimport { Entity } from './Entity';\n\n/**\n * Enum representing the coordinate plane for the position 2D vector in the [[TransformComponent]]\n */\nexport enum CoordPlane {\n  /**\n   * The world coordinate plane (default) represents world space, any entities drawn with world space move when the camera moves.\n   */\n  World = 'world',\n  /**\n   * The screen coordinate plane represents screen space, entities drawn in screen space are pinned to screen coordinates ignoring the camera.\n   */\n  Screen = 'screen'\n}\n\nexport class TransformComponent implements Component<'transform'> {\n  static type = 'transform';\n  readonly type = 'transform';\n  public owner: Entity = null;\n\n  public coordPlane = CoordPlane.World;\n  public pos: Vector = Vector.Zero;\n  public z: number = 0;\n  public rotation: number = 0;\n  public scale: Vector = Vector.One;\n}\n","import { Texture } from './Resources/Texture';\nimport {\n  InitializeEvent,\n  KillEvent,\n  PreUpdateEvent,\n  PostUpdateEvent,\n  PreDrawEvent,\n  PostDrawEvent,\n  PreDebugDrawEvent,\n  PostDebugDrawEvent,\n  PostCollisionEvent,\n  PreCollisionEvent,\n  CollisionStartEvent,\n  CollisionEndEvent,\n  PostKillEvent,\n  PreKillEvent,\n  GameEvent,\n  ExitTriggerEvent,\n  EnterTriggerEvent,\n  EnterViewPortEvent,\n  ExitViewPortEvent\n} from './Events';\nimport { PointerEvent, WheelEvent, PointerDragEvent, PointerEventName } from './Input/PointerEvents';\nimport { Engine } from './Engine';\nimport { Color } from './Drawing/Color';\nimport { Sprite } from './Drawing/Sprite';\nimport { Trait } from './Interfaces/Trait';\nimport { Drawable } from './Interfaces/Drawable';\nimport { CanInitialize, CanUpdate, CanDraw, CanBeKilled } from './Interfaces/LifecycleEvents';\nimport { Scene } from './Scene';\nimport { Logger } from './Util/Log';\nimport { ActionContext } from './Actions/ActionContext';\nimport { ActionQueue } from './Actions/Action';\nimport { Vector } from './Algebra';\nimport { Body } from './Collision/Body';\nimport { Eventable } from './Interfaces/Evented';\nimport { Actionable } from './Actions/Actionable';\nimport { Configurable } from './Configurable';\nimport * as Traits from './Traits/Index';\nimport * as Effects from './Drawing/SpriteEffects';\nimport * as Util from './Util/Util';\nimport * as Events from './Events';\nimport { PointerEvents } from './Interfaces/PointerEventHandlers';\nimport { CollisionType } from './Collision/CollisionType';\nimport { obsolete } from './Util/Decorators';\nimport { Collider } from './Collision/Collider';\nimport { Shape } from './Collision/Shape';\nimport { GraphicsComponent } from './Graphics/GraphicsComponent';\nimport { Entity } from './Entity';\nimport { TransformComponent } from './Transform';\n\nexport function isActor(x: any): x is Actor {\n  return x instanceof Actor;\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface ActorArgs extends Partial<ActorImpl> {\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n  pos?: Vector;\n  vel?: Vector;\n  acc?: Vector;\n  rotation?: number;\n  rx?: number;\n  z?: number;\n  color?: Color;\n  visible?: boolean;\n  body?: Body;\n  collisionType?: CollisionType;\n}\n\nexport interface ActorDefaults {\n  anchor: Vector;\n}\n\n/**\n * @hidden\n */\n\nexport class ActorImpl extends Entity<TransformComponent | GraphicsComponent>\n  implements Actionable, Eventable, PointerEvents, CanInitialize, CanUpdate, CanDraw, CanBeKilled {\n  // #region Properties\n\n  /**\n   * Indicates the next id to be set\n   */\n  public static defaults: ActorDefaults = {\n    anchor: Vector.Half\n  };\n  /**\n   * Indicates the next id to be set\n   */\n  // public static maxId = 0;\n  /**\n   * The unique identifier for the actor\n   */\n  // public id: number = ActorImpl.maxId++;\n\n  public graphics: GraphicsComponent;\n\n  public transform: TransformComponent;\n\n  /**\n   * The physics body the is associated with this actor. The body is the container for all physical properties, like position, velocity,\n   * acceleration, mass, inertia, etc.\n   */\n  public get body(): Body {\n    return this._body;\n  }\n\n  public set body(body: Body) {\n    this._body = body;\n    this._body.actor = this;\n  }\n\n  private _body: Body;\n\n  /**\n   * Gets the position vector of the actor in pixels\n   */\n  public get pos(): Vector {\n    return this.body.pos;\n  }\n\n  /**\n   * Sets the position vector of the actor in pixels\n   */\n  public set pos(thePos: Vector) {\n    this.body.pos.setTo(thePos.x, thePos.y);\n  }\n\n  /**\n   * Gets the position vector of the actor from the last frame\n   */\n  public get oldPos(): Vector {\n    return this.body.oldPos;\n  }\n\n  /**\n   * Sets the position vector of the actor in the last frame\n   */\n  public set oldPos(thePos: Vector) {\n    this.body.oldPos.setTo(thePos.x, thePos.y);\n  }\n\n  /**\n   * Gets the velocity vector of the actor in pixels/sec\n   */\n  public get vel(): Vector {\n    return this.body.vel;\n  }\n\n  /**\n   * Sets the velocity vector of the actor in pixels/sec\n   */\n  public set vel(theVel: Vector) {\n    this.body.vel.setTo(theVel.x, theVel.y);\n  }\n\n  /**\n   * Gets the velocity vector of the actor from the last frame\n   */\n  public get oldVel(): Vector {\n    return this.body.oldVel;\n  }\n\n  /**\n   * Sets the velocity vector of the actor from the last frame\n   */\n  public set oldVel(theVel: Vector) {\n    this.body.oldVel.setTo(theVel.x, theVel.y);\n  }\n\n  /**\n   * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be\n   * useful to simulate a gravitational effect.\n   */\n  public get acc(): Vector {\n    return this.body.acc;\n  }\n\n  /**\n   * Sets the acceleration vector of teh actor in pixels/second/second\n   */\n  public set acc(theAcc: Vector) {\n    this.body.acc.setTo(theAcc.x, theAcc.y);\n  }\n\n  /**\n   * Sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\n   */\n  public set oldAcc(theAcc: Vector) {\n    this.body.oldAcc.setTo(theAcc.x, theAcc.y);\n  }\n\n  /**\n   * Gets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\n   */\n  public get oldAcc(): Vector {\n    return this.body.oldAcc;\n  }\n\n  /**\n   * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n   */\n  public get rotation(): number {\n    return this.body.rotation;\n  }\n\n  /**\n   * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n   */\n  public set rotation(theAngle: number) {\n    this.body.rotation = theAngle;\n  }\n\n  /**\n   * Gets the rotational velocity of the actor in radians/second\n   */\n  public get rx(): number {\n    return this.body.rx;\n  }\n\n  /**\n   * Sets the rotational velocity of the actor in radians/sec\n   */\n  public set rx(angularVelocity: number) {\n    this.body.rx = angularVelocity;\n  }\n\n  /**\n   * The anchor to apply all actor related transformations like rotation,\n   * translation, and scaling. By default the anchor is in the center of\n   * the actor. By default it is set to the center of the actor (.5, .5)\n   *\n   * An anchor of (.5, .5) will ensure that drawings are centered.\n   *\n   * Use `anchor.setTo` to set the anchor to a different point using\n   * values between 0 and 1. For example, anchoring to the top-left would be\n   * `Actor.anchor.setTo(0, 0)` and top-right would be `Actor.anchor.setTo(0, 1)`.\n   */\n  public anchor: Vector;\n\n  private _height: number = 0;\n  private _width: number = 0;\n\n  /**\n   * Gets the scale vector of the actor\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get scale(): Vector {\n    return this.body.scale;\n  }\n\n  /**\n   * Sets the scale vector of the actor for\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public set scale(scale: Vector) {\n    this.body.scale = scale;\n  }\n\n  /**\n   * Gets the old scale of the actor last frame\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get oldScale(): Vector {\n    return this.body.oldScale;\n  }\n\n  /**\n   * Sets the the old scale of the actor last frame\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public set oldScale(scale: Vector) {\n    this.body.oldScale = scale;\n  }\n\n  /**\n   * Gets the x scalar velocity of the actor in scale/second\n   * @obsolete ex.Actor.sx will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get sx(): number {\n    return this.body.sx;\n  }\n\n  /**\n   * Sets the x scalar velocity of the actor in scale/second\n   * @obsolete ex.Actor.sx will be removed in v0.25.0, set width and height directly in constructor\n   */\n  @obsolete({ message: 'ex.Actor.sx will be removed in v0.25.0', alternateMethod: 'Set width and height directly in constructor' })\n  public set sx(scalePerSecondX: number) {\n    this.body.sx = scalePerSecondX;\n  }\n\n  /**\n   * Gets the y scalar velocity of the actor in scale/second\n   * @obsolete ex.Actor.sy will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get sy(): number {\n    return this.body.sy;\n  }\n\n  /**\n   * Sets the y scale velocity of the actor in scale/second\n   * @obsolete ex.Actor.sy will be removed in v0.25.0, set width and height directly in constructor\n   */\n  @obsolete({ message: 'ex.Actor.sy will be removed in v0.25.0', alternateMethod: 'Set width and height directly in constructor' })\n  public set sy(scalePerSecondY: number) {\n    this.body.sy = scalePerSecondY;\n  }\n\n  /**\n   * Indicates whether the actor is physically in the viewport\n   */\n  public isOffScreen: boolean = false;\n  /**\n   * The visibility of an actor\n   */\n  public visible: boolean = true;\n  /**\n   * The opacity of an actor. Passing in a color in the [[constructor]] will use the\n   * color's opacity.\n   */\n  public opacity: number = 1;\n  public previousOpacity: number = 1;\n\n  /**\n   * Direct access to the actor's [[ActionQueue]]. Useful if you are building custom actions.\n   */\n  public actionQueue: ActionQueue;\n\n  /**\n   * [[ActionContext|Action context]] of the actor. Useful for scripting actor behavior.\n   */\n  public actions: ActionContext;\n\n  /**\n   * Convenience reference to the global logger\n   */\n  public logger: Logger = Logger.getInstance();\n\n  /**\n   * The scene that the actor is in\n   */\n  public scene: Scene = null;\n\n  /**\n   * The parent of this actor\n   */\n  public parent: Actor = null;\n\n  /**\n   * The children of this actor\n   */\n  public children: Actor[] = [];\n\n  private _isInitialized: boolean = false;\n  public frames: { [key: string]: Drawable } = {};\n  private _effectsDirty: boolean = false;\n\n  /**\n   * Access to the current drawing for the actor, this can be\n   * an [[Animation]], [[Sprite]], or [[Polygon]].\n   * Set drawings with [[setDrawing]].\n   */\n  public currentDrawing: Drawable = null;\n\n  /**\n   * Draggable helper\n   */\n\n  private _draggable: boolean = false;\n  private _dragging: boolean = false;\n\n  private _pointerDragStartHandler = () => {\n    this._dragging = true;\n  };\n\n  private _pointerDragEndHandler = () => {\n    this._dragging = false;\n  };\n\n  private _pointerDragMoveHandler = (pe: PointerEvent) => {\n    if (this._dragging) {\n      this.pos = pe.pointer.lastWorldPos;\n    }\n  };\n\n  private _pointerDragLeaveHandler = (pe: PointerEvent) => {\n    if (this._dragging) {\n      this.pos = pe.pointer.lastWorldPos;\n    }\n  };\n\n  public get draggable(): boolean {\n    return this._draggable;\n  }\n\n  public set draggable(isDraggable: boolean) {\n    if (isDraggable) {\n      if (isDraggable && !this._draggable) {\n        this.on('pointerdragstart', this._pointerDragStartHandler);\n        this.on('pointerdragend', this._pointerDragEndHandler);\n        this.on('pointerdragmove', this._pointerDragMoveHandler);\n        this.on('pointerdragleave', this._pointerDragLeaveHandler);\n      } else if (!isDraggable && this._draggable) {\n        this.off('pointerdragstart', this._pointerDragStartHandler);\n        this.off('pointerdragend', this._pointerDragEndHandler);\n        this.off('pointerdragmove', this._pointerDragMoveHandler);\n        this.off('pointerdragleave', this._pointerDragLeaveHandler);\n      }\n\n      this._draggable = isDraggable;\n    }\n  }\n\n  /**\n   * Modify the current actor update pipeline.\n   */\n  public traits: Trait[] = [];\n\n  /**\n   * Sets the color of the actor. A rectangle of this color will be\n   * drawn if no [[Drawable]] is specified as the actors drawing.\n   *\n   * The default is `null` which prevents a rectangle from being drawn.\n   */\n  public get color(): Color {\n    return this._color;\n  }\n  public set color(v: Color) {\n    this._color = v.clone();\n  }\n  private _color: Color;\n\n  /**\n   * Whether or not to enable the [[CapturePointer]] trait that propagates\n   * pointer events to this actor\n   */\n  public enableCapturePointer: boolean = false;\n\n  /**\n   * Configuration for [[CapturePointer]] trait\n   */\n  public capturePointer: Traits.CapturePointerConfig = {\n    captureMoveEvents: false,\n    captureDragEvents: false\n  };\n\n  private _zIndex: number = 0;\n  private _isKilled: boolean = false;\n  private _opacityFx = new Effects.Opacity(this.opacity);\n\n  // #endregion\n\n  /**\n   * @param x       The starting x coordinate of the actor\n   * @param y       The starting y coordinate of the actor\n   * @param width   The starting width of the actor\n   * @param height  The starting height of the actor\n   * @param color   The starting color of the actor. Leave null to draw a transparent actor. The opacity of the color will be used as the\n   * initial [[opacity]].\n   */\n  constructor(xOrConfig?: number | ActorArgs, y?: number, width?: number, height?: number, color?: Color) {\n    super();\n\n    // initialize default options\n    this._initDefaults();\n\n    let shouldInitializeBody = true;\n    let collisionType = CollisionType.Passive;\n    if (xOrConfig && typeof xOrConfig === 'object') {\n      const config = xOrConfig;\n      if (config.pos) {\n        xOrConfig = config.pos ? config.pos.x : 0;\n        y = config.pos ? config.pos.y : 0;\n      } else {\n        xOrConfig = config.x || 0;\n        y = config.y || 0;\n      }\n      width = config.width;\n      height = config.height;\n\n      if (config.body) {\n        shouldInitializeBody = false;\n        this.body = config.body;\n      }\n\n      if (config.anchor) {\n        this.anchor = config.anchor;\n      }\n\n      if (config.collisionType) {\n        collisionType = config.collisionType;\n      }\n    }\n\n    // Body and collider bounds are still determined by actor width/height\n    this._width = width || 0;\n    this._height = height || 0;\n\n    // Initialize default collider to be a box\n    if (shouldInitializeBody) {\n      this.body = new Body({\n        collider: new Collider({\n          type: CollisionType.Passive,\n          shape: Shape.Box(this._width, this._height, this.anchor)\n        })\n      });\n    }\n\n    if (this.body && this.body.collider) {\n      this.body.collider.type = collisionType;\n    }\n\n    // Position uses body to store values must be initialized after body\n    this.pos.x = <number>xOrConfig || 0;\n    this.pos.y = y || 0;\n\n    if (color) {\n      this.color = color;\n      // set default opacity of an actor to the color\n      this.opacity = color.a;\n    }\n\n    this.graphics = new GraphicsComponent();\n    this.addComponent(this.graphics);\n    this.transform = new TransformComponent();\n    this.addComponent(this.transform);\n\n    // Build default pipeline\n    // this.traits.push(new Traits.TileMapCollisionDetection());\n    this.traits.push(new Traits.OffscreenCulling());\n    this.traits.push(new Traits.CapturePointer());\n\n    // Build the action queue\n    this.actionQueue = new ActionQueue(this);\n    this.actions = new ActionContext(this);\n  }\n\n  public enableTileMapCollision(): void {\n    this.traits.push(new Traits.TileMapCollisionDetection());\n  }\n\n  /**\n   * `onInitialize` is called before the first update of the actor. This method is meant to be\n   * overridden. This is where initialization of child actors should take place.\n   *\n   * Synonymous with the event handler `.on('initialize', (evt) => {...})`\n   */\n  public onInitialize(_engine: Engine): void {\n    // Override me\n  }\n\n  /**\n   * Gets whether the actor is Initialized\n   */\n  public get isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  /**\n   * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\n   *\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * @internal\n   */\n  public _initialize(engine: Engine) {\n    if (!this.isInitialized) {\n      this.onInitialize(engine);\n      super.emit('initialize', new InitializeEvent(engine, this));\n      this._isInitialized = true;\n    }\n    for (const child of this.children) {\n      child._initialize(engine);\n    }\n  }\n\n  private _initDefaults() {\n    this.anchor = Actor.defaults.anchor.clone();\n  }\n\n  // #region Events\n\n  private _capturePointerEvents: PointerEventName[] = [\n    'pointerup',\n    'pointerdown',\n    'pointermove',\n    'pointerenter',\n    'pointerleave',\n    'pointerdragstart',\n    'pointerdragend',\n    'pointerdragmove',\n    'pointerdragenter',\n    'pointerdragleave'\n  ];\n\n  private _captureMoveEvents: PointerEventName[] = [\n    'pointermove',\n    'pointerenter',\n    'pointerleave',\n    'pointerdragmove',\n    'pointerdragenter',\n    'pointerdragleave'\n  ];\n\n  private _captureDragEvents: PointerEventName[] = [\n    'pointerdragstart',\n    'pointerdragend',\n    'pointerdragmove',\n    'pointerdragenter',\n    'pointerdragleave'\n  ];\n\n  private _checkForPointerOptIn(eventName: string) {\n    if (eventName) {\n      const normalized = <PointerEventName>eventName.toLowerCase();\n\n      if (this._capturePointerEvents.indexOf(normalized) !== -1) {\n        this.enableCapturePointer = true;\n\n        if (this._captureMoveEvents.indexOf(normalized) !== -1) {\n          this.capturePointer.captureMoveEvents = true;\n        }\n\n        if (this._captureDragEvents.indexOf(normalized) !== -1) {\n          this.capturePointer.captureDragEvents = true;\n        }\n      }\n    }\n  }\n\n  public on(eventName: Events.exittrigger, handler: (event: ExitTriggerEvent) => void): void;\n  public on(eventName: Events.entertrigger, handler: (event: EnterTriggerEvent) => void): void;\n  /**\n   * The **collisionstart** event is fired when a [[Body|physics body]], usually attached to an actor,\n   *  first starts colliding with another [[Body|body]], and will not fire again while in contact until\n   *  the the pair separates and collides again.\n   * Use cases for the **collisionstart** event may be detecting when an actor has touched a surface\n   * (like landing) or if a item has been touched and needs to be picked up.\n   */\n  public on(eventName: Events.collisionstart, handler: (event: CollisionStartEvent) => void): void;\n  /**\n   * The **collisionend** event is fired when two [[Body|physics bodies]] are no longer in contact.\n   * This event will not fire again until another collision and separation.\n   *\n   * Use cases for the **collisionend** event might be to detect when an actor has left a surface\n   * (like jumping) or has left an area.\n   */\n  public on(eventName: Events.collisionend, handler: (event: CollisionEndEvent) => void): void;\n  /**\n   * The **precollision** event is fired **every frame** where a collision pair is found and two\n   * bodies are intersecting.\n   *\n   * This event is useful for building in custom collision resolution logic in Passive-Passive or\n   * Active-Passive scenarios. For example in a breakout game you may want to tweak the angle of\n   * ricochet of the ball depending on which side of the paddle you hit.\n   */\n  public on(eventName: Events.precollision, handler: (event: PreCollisionEvent) => void): void;\n  /**\n   * The **postcollision** event is fired for **every frame** where collision resolution was performed.\n   * Collision resolution is when two bodies influence each other and cause a response like bouncing\n   * off one another. It is only possible to have *postcollision* event in Active-Active and Active-Fixed\n   * type collision pairs.\n   *\n   * Post collision would be useful if you need to know that collision resolution is happening or need to\n   * tweak the default resolution.\n   */\n  public on(eventName: Events.postcollision, handler: (event: PostCollisionEvent) => void): void;\n  public on(eventName: Events.kill, handler: (event: KillEvent) => void): void;\n  public on(eventName: Events.prekill, handler: (event: PreKillEvent) => void): void;\n  public on(eventName: Events.postkill, handler: (event: PostKillEvent) => void): void;\n  public on(eventName: Events.initialize, handler: (event: InitializeEvent) => void): void;\n  public on(eventName: Events.preupdate, handler: (event: PreUpdateEvent) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: PostUpdateEvent) => void): void;\n  public on(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public on(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public on(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public on(eventName: Events.pointerup, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerdown, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerenter, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerleave, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointermove, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointercancel, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerwheel, handler: (event: WheelEvent) => void): void;\n  public on(eventName: Events.pointerdragstart, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragend, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragenter, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragleave, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragmove, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.enterviewport, handler: (event: EnterViewPortEvent) => void): void;\n  public on(eventName: Events.exitviewport, handler: (event: ExitViewPortEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<Actor>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    this._checkForPointerOptIn(eventName);\n    super.on(eventName, handler);\n  }\n\n  public once(eventName: Events.exittrigger, handler: (event: ExitTriggerEvent) => void): void;\n  public once(eventName: Events.entertrigger, handler: (event: EnterTriggerEvent) => void): void;\n  /**\n   * The **collisionstart** event is fired when a [[Body|physics body]], usually attached to an actor,\n   *  first starts colliding with another [[Body|body]], and will not fire again while in contact until\n   *  the the pair separates and collides again.\n   * Use cases for the **collisionstart** event may be detecting when an actor has touch a surface\n   * (like landing) or if a item has been touched and needs to be picked up.\n   */\n  public once(eventName: Events.collisionstart, handler: (event: CollisionStartEvent) => void): void;\n  /**\n   * The **collisionend** event is fired when two [[Body|physics bodies]] are no longer in contact.\n   * This event will not fire again until another collision and separation.\n   *\n   * Use cases for the **collisionend** event might be to detect when an actor has left a surface\n   * (like jumping) or has left an area.\n   */\n  public once(eventName: Events.collisionend, handler: (event: CollisionEndEvent) => void): void;\n  /**\n   * The **precollision** event is fired **every frame** where a collision pair is found and two\n   * bodies are intersecting.\n   *\n   * This event is useful for building in custom collision resolution logic in Passive-Passive or\n   * Active-Passive scenarios. For example in a breakout game you may want to tweak the angle of\n   * ricochet of the ball depending on which side of the paddle you hit.\n   */\n  public once(eventName: Events.precollision, handler: (event: PreCollisionEvent) => void): void;\n  /**\n   * The **postcollision** event is fired for **every frame** where collision resolution was performed.\n   * Collision resolution is when two bodies influence each other and cause a response like bouncing\n   * off one another. It is only possible to have *postcollision* event in Active-Active and Active-Fixed\n   * type collision pairs.\n   *\n   * Post collision would be useful if you need to know that collision resolution is happening or need to\n   * tweak the default resolution.\n   */\n  public once(eventName: Events.postcollision, handler: (event: PostCollisionEvent) => void): void;\n  public once(eventName: Events.kill, handler: (event: KillEvent) => void): void;\n  public once(eventName: Events.postkill, handler: (event: PostKillEvent) => void): void;\n  public once(eventName: Events.prekill, handler: (event: PreKillEvent) => void): void;\n  public once(eventName: Events.initialize, handler: (event: InitializeEvent) => void): void;\n  public once(eventName: Events.preupdate, handler: (event: PreUpdateEvent) => void): void;\n  public once(eventName: Events.postupdate, handler: (event: PostUpdateEvent) => void): void;\n  public once(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public once(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public once(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public once(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public once(eventName: Events.pointerup, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerdown, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerenter, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerleave, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointermove, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointercancel, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerwheel, handler: (event: WheelEvent) => void): void;\n  public once(eventName: Events.pointerdragstart, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragend, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragenter, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragleave, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragmove, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.enterviewport, handler: (event: EnterViewPortEvent) => void): void;\n  public once(eventName: Events.exitviewport, handler: (event: ExitViewPortEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<Actor>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    this._checkForPointerOptIn(eventName);\n    super.once(eventName, handler);\n  }\n\n  public off(eventName: Events.exittrigger, handler?: (event: ExitTriggerEvent) => void): void;\n  public off(eventName: Events.entertrigger, handler?: (event: EnterTriggerEvent) => void): void;\n  /**\n   * The **collisionstart** event is fired when a [[Body|physics body]], usually attached to an actor,\n   *  first starts colliding with another [[Body|body]], and will not fire again while in contact until\n   *  the the pair separates and collides again.\n   * Use cases for the **collisionstart** event may be detecting when an actor has touch a surface\n   * (like landing) or if a item has been touched and needs to be picked up.\n   */\n  public off(eventName: Events.collisionstart, handler?: (event: CollisionStartEvent) => void): void;\n  /**\n   * The **collisionend** event is fired when two [[Body|physics bodies]] are no longer in contact.\n   * This event will not fire again until another collision and separation.\n   *\n   * Use cases for the **collisionend** event might be to detect when an actor has left a surface\n   * (like jumping) or has left an area.\n   */\n  public off(eventName: Events.collisionend, handler?: (event: CollisionEndEvent) => void): void;\n  /**\n   * The **precollision** event is fired **every frame** where a collision pair is found and two\n   * bodies are intersecting.\n   *\n   * This event is useful for building in custom collision resolution logic in Passive-Passive or\n   * Active-Passive scenarios. For example in a breakout game you may want to tweak the angle of\n   * ricochet of the ball depending on which side of the paddle you hit.\n   */\n  public off(eventName: Events.precollision, handler?: (event: PreCollisionEvent) => void): void;\n  /**\n   * The **postcollision** event is fired for **every frame** where collision resolution was performed.\n   * Collision resolution is when two bodies influence each other and cause a response like bouncing\n   * off one another. It is only possible to have *postcollision* event in Active-Active and Active-Fixed\n   * type collision pairs.\n   *\n   * Post collision would be useful if you need to know that collision resolution is happening or need to\n   * tweak the default resolution.\n   */\n  public off(eventName: Events.postcollision, handler: (event: PostCollisionEvent) => void): void;\n  public off(eventName: Events.pointerup, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerdown, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerenter, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerleave, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointermove, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointercancel, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerwheel, handler?: (event: WheelEvent) => void): void;\n  public off(eventName: Events.pointerdragstart, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragend, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragenter, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragleave, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragmove, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.prekill, handler?: (event: PreKillEvent) => void): void;\n  public off(eventName: Events.postkill, handler?: (event: PostKillEvent) => void): void;\n  public off(eventName: Events.initialize, handler?: (event: Events.InitializeEvent) => void): void;\n  public off(eventName: Events.postupdate, handler?: (event: Events.PostUpdateEvent) => void): void;\n  public off(eventName: Events.preupdate, handler?: (event: Events.PreUpdateEvent) => void): void;\n  public off(eventName: Events.postdraw, handler?: (event: Events.PostDrawEvent) => void): void;\n  public off(eventName: Events.predraw, handler?: (event: Events.PreDrawEvent) => void): void;\n  public off(eventName: Events.enterviewport, handler?: (event: EnterViewPortEvent) => void): void;\n  public off(eventName: Events.exitviewport, handler?: (event: ExitViewPortEvent) => void): void;\n  public off(eventName: string, handler?: (event: GameEvent<Actor>) => void): void;\n  public off(eventName: string, handler?: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  // #endregion\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _prekill handler for [[onPreKill]] lifecycle event\n   * @internal\n   */\n  public _prekill(_scene: Scene) {\n    super.emit('prekill', new PreKillEvent(this));\n    this.onPreKill(_scene);\n  }\n\n  /**\n   * Safe to override onPreKill lifecycle event handler. Synonymous with `.on('prekill', (evt) =>{...})`\n   *\n   * `onPreKill` is called directly before an actor is killed and removed from its current [[Scene]].\n   */\n  public onPreKill(_scene: Scene) {\n    // Override me\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _prekill handler for [[onPostKill]] lifecycle event\n   * @internal\n   */\n  public _postkill(_scene: Scene) {\n    super.emit('postkill', new PostKillEvent(this));\n    this.onPostKill(_scene);\n  }\n\n  /**\n   * Safe to override onPostKill lifecycle event handler. Synonymous with `.on('postkill', (evt) => {...})`\n   *\n   * `onPostKill` is called directly after an actor is killed and remove from its current [[Scene]].\n   */\n  public onPostKill(_scene: Scene) {\n    // Override me\n  }\n\n  /**\n   * If the current actor is a member of the scene, this will remove\n   * it from the scene graph. It will no longer be drawn or updated.\n   */\n  public kill() {\n    if (this.scene) {\n      this._prekill(this.scene);\n      this.emit('kill', new KillEvent(this));\n      this._isKilled = true;\n      this.scene.remove(this);\n      this._postkill(this.scene);\n    } else {\n      this.logger.warn('Cannot kill actor, it was never added to the Scene');\n    }\n  }\n\n  /**\n   * If the current actor is killed, it will now not be killed.\n   */\n  public unkill() {\n    this._isKilled = false;\n  }\n\n  /**\n   * Indicates wether the actor has been killed.\n   */\n  public isKilled(): boolean {\n    return this._isKilled;\n  }\n\n  /**\n   * Adds a child actor to this actor. All movement of the child actor will be\n   * relative to the parent actor. Meaning if the parent moves the child will\n   * move with it.\n   * @param actor The child actor to add\n   */\n  public add(actor: Actor) {\n    actor.body.collider.type = CollisionType.PreventCollision;\n    if (Util.addItemToArray(actor, this.children)) {\n      actor.parent = this;\n    }\n  }\n  /**\n   * Removes a child actor from this actor.\n   * @param actor The child actor to remove\n   */\n  public remove(actor: Actor) {\n    if (Util.removeItemFromArray(actor, this.children)) {\n      actor.parent = null;\n    }\n  }\n  /**\n   * Sets the current drawing of the actor to the drawing corresponding to\n   * the key.\n   * @param key The key of the drawing\n   */\n  public setDrawing(key: string): void;\n  /**\n   * Sets the current drawing of the actor to the drawing corresponding to\n   * an `enum` key (e.g. `Animations.Left`)\n   * @param key The `enum` key of the drawing\n   */\n  public setDrawing(key: number): void;\n  public setDrawing(key: any): void {\n    key = key.toString();\n    if (this.currentDrawing !== this.frames[<string>key]) {\n      if (this.frames[key] != null) {\n        this.frames[key].reset();\n        this.currentDrawing = this.frames[key];\n      } else {\n        Logger.getInstance().error(`the specified drawing key ${key} does not exist`);\n      }\n    }\n  }\n\n  /**\n   * Adds a whole texture as the \"default\" drawing. Set a drawing using [[setDrawing]].\n   */\n  public addDrawing(texture: Texture): void;\n  /**\n   * Adds a whole sprite as the \"default\" drawing. Set a drawing using [[setDrawing]].\n   */\n  public addDrawing(sprite: Sprite): void;\n  /**\n   * Adds a drawing to the list of available drawings for an actor. Set a drawing using [[setDrawing]].\n   * @param key     The key to associate with a drawing for this actor\n   * @param drawing This can be an [[Animation]], [[Sprite]], or [[Polygon]].\n   */\n  public addDrawing(key: any, drawing: Drawable): void;\n  public addDrawing(): void {\n    if (arguments.length === 2) {\n      this.frames[<string>arguments[0]] = arguments[1];\n      if (!this.currentDrawing) {\n        this.currentDrawing = arguments[1];\n      }\n      this._effectsDirty = true;\n    } else {\n      if (arguments[0] instanceof Sprite) {\n        this.addDrawing('default', arguments[0]);\n      }\n      if (arguments[0] instanceof Texture) {\n        this.addDrawing('default', arguments[0].asSprite());\n      }\n    }\n  }\n\n  public get z(): number {\n    return this.getZIndex();\n  }\n\n  public set z(newZ: number) {\n    this.setZIndex(newZ);\n  }\n\n  /**\n   * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\n   * Actors with a higher z-index are drawn on top of actors with a lower z-index\n   */\n  public getZIndex(): number {\n    return this._zIndex;\n  }\n\n  /**\n   * Sets the z-index of an actor and updates it in the drawing list for the scene.\n   * The z-index determines the relative order an actor is drawn in.\n   * Actors with a higher z-index are drawn on top of actors with a lower z-index\n   * @param newIndex new z-index to assign\n   */\n  public setZIndex(newIndex: number) {\n    this.scene.cleanupDrawTree(this);\n    this._zIndex = newIndex;\n    this.scene.updateDrawTree(this);\n  }\n\n  /**\n   * Get the center point of an actor\n   */\n  public get center(): Vector {\n    return new Vector(this.pos.x + this.width / 2 - this.anchor.x * this.width, this.pos.y + this.height / 2 - this.anchor.y * this.height);\n  }\n\n  public get width() {\n    return this._width * this.getGlobalScale().x;\n  }\n\n  public set width(width: number) {\n    this._width = width / this.scale.x;\n    this.body.collider.shape = Shape.Box(this._width, this._height, this.anchor);\n    this.body.markCollisionShapeDirty();\n  }\n\n  public get height() {\n    return this._height * this.getGlobalScale().y;\n  }\n\n  public set height(height: number) {\n    this._height = height / this.scale.y;\n    this.body.collider.shape = Shape.Box(this._width, this._height, this.anchor);\n    this.body.markCollisionShapeDirty();\n  }\n\n  /**\n   * Gets this actor's rotation taking into account any parent relationships\n   *\n   * @returns Rotation angle in radians\n   */\n  public getWorldRotation(): number {\n    if (!this.parent) {\n      return this.rotation;\n    }\n\n    return this.rotation + this.parent.getWorldRotation();\n  }\n\n  /**\n   * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\n   *\n   * @returns Position in world coordinates\n   */\n  public getWorldPos(): Vector {\n    if (!this.parent) {\n      return this.pos.clone();\n    }\n\n    // collect parents\n    const parents: Actor[] = [];\n    let root: Actor = this;\n\n    parents.push(this);\n\n    // find parents\n    while (root.parent) {\n      root = root.parent;\n      parents.push(root);\n    }\n\n    // calculate position\n    const x = parents.reduceRight((px, p) => {\n      if (p.parent) {\n        return px + p.pos.x * p.getGlobalScale().x;\n      }\n      return px + p.pos.x;\n    }, 0);\n\n    const y = parents.reduceRight((py, p) => {\n      if (p.parent) {\n        return py + p.pos.y * p.getGlobalScale().y;\n      }\n      return py + p.pos.y;\n    }, 0);\n\n    // rotate around root anchor\n    const ra = root.getWorldPos(); // 10, 10\n    const r = this.getWorldRotation();\n\n    return new Vector(x, y).rotate(r, ra);\n  }\n\n  /**\n   * Gets the global scale of the Actor\n   */\n  public getGlobalScale(): Vector {\n    if (!this.parent) {\n      return new Vector(this.scale.x, this.scale.y);\n    }\n\n    const parentScale = this.parent.getGlobalScale();\n    return new Vector(this.scale.x * parentScale.x, this.scale.y * parentScale.y);\n  }\n\n  // #region Collision\n\n  /**\n   * Tests whether the x/y specified are contained in the actor\n   * @param x  X coordinate to test (in world coordinates)\n   * @param y  Y coordinate to test (in world coordinates)\n   * @param recurse checks whether the x/y are contained in any child actors (if they exist).\n   */\n  public contains(x: number, y: number, recurse: boolean = false): boolean {\n    // These shenanigans are to handle child actor containment,\n    // the only time getWorldPos and pos are different is a child actor\n    const childShift = this.getWorldPos().sub(this.pos);\n    const containment = this.body.collider.bounds.translate(childShift).contains(new Vector(x, y));\n\n    if (recurse) {\n      return (\n        containment ||\n        this.children.some((child: Actor) => {\n          return child.contains(x, y, true);\n        })\n      );\n    }\n\n    return containment;\n  }\n\n  /**\n   * Returns true if the two actor.body.collider.shape's surfaces are less than or equal to the distance specified from each other\n   * @param actor     Actor to test\n   * @param distance  Distance in pixels to test\n   */\n  public within(actor: Actor, distance: number): boolean {\n    return this.body.collider.shape.getClosestLineBetween(actor.body.collider.shape).getLength() <= distance;\n  }\n\n  // #endregion\n\n  protected _reapplyEffects(drawing: Drawable) {\n    drawing.removeEffect(this._opacityFx);\n    drawing.addEffect(this._opacityFx);\n  }\n\n  // #region Update\n\n  /**\n   * Called by the Engine, updates the state of the actor\n   * @param engine The reference to the current game engine\n   * @param delta  The time elapsed since the last update in milliseconds\n   */\n  public update(engine: Engine, delta: number) {\n    this._initialize(engine);\n    this._preupdate(engine, delta);\n\n    // Update action queue\n    this.actionQueue.update(delta);\n\n    // Update color only opacity\n    if (this.color) {\n      this.color.a = this.opacity;\n    }\n\n    if (this.opacity === 0) {\n      this.visible = false;\n    }\n\n    // calculate changing opacity\n    if (this.previousOpacity !== this.opacity) {\n      this.previousOpacity = this.opacity;\n      this._opacityFx.opacity = this.opacity;\n      this._effectsDirty = true;\n    }\n\n    // capture old transform\n    this.body.captureOldTransform();\n\n    // Run Euler integration\n    this.body.integrate(delta);\n\n    // TODO temporary copy\n    this.transform.pos = this.pos;\n    this.transform.z = this.z;\n    this.transform.rotation = this.rotation;\n    this.transform.scale = this.scale;\n\n    // Update actor pipeline (movement, collision detection, event propagation, offscreen culling)\n    for (const trait of this.traits) {\n      trait.update(this, engine, delta);\n    }\n\n    // Update child actors\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].update(engine, delta);\n    }\n\n    this._postupdate(engine, delta);\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before an actor is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after an actor is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPreUpdate(engine, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(engine: Engine, delta: number): void {\n    this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\n    this.onPostUpdate(engine, delta);\n  }\n\n  // endregion\n\n  // #region Drawing\n\n  /**\n   * Called by the Engine, draws the actor to the screen\n   * @param ctx   The rendering context\n   * @param delta The time since the last draw in milliseconds\n   */\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    ctx.save();\n    ctx.translate(this.pos.x, this.pos.y);\n    ctx.rotate(this.rotation);\n    ctx.scale(this.scale.x, this.scale.y);\n\n    // translate canvas by anchor offset\n    ctx.save();\n    ctx.translate(-(this._width * this.anchor.x), -(this._height * this.anchor.y));\n\n    this._predraw(ctx, delta);\n\n    if (this.currentDrawing) {\n      const drawing = this.currentDrawing;\n      // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\n      const offsetX = (this._width - drawing.width * drawing.scale.x) * this.anchor.x;\n      const offsetY = (this._height - drawing.height * drawing.scale.y) * this.anchor.y;\n\n      if (this._effectsDirty) {\n        this._reapplyEffects(this.currentDrawing);\n        this._effectsDirty = false;\n      }\n\n      this.currentDrawing.draw(ctx, offsetX, offsetY);\n    } else {\n      if (this.color && this.body && this.body.collider && this.body.collider.shape) {\n        this.body.collider.shape.draw(ctx, this.color, new Vector(this.width * this.anchor.x, this.height * this.anchor.y));\n      }\n    }\n    ctx.restore();\n\n    // Draw child actors\n    for (let i = 0; i < this.children.length; i++) {\n      if (this.children[i].visible) {\n        this.children[i].draw(ctx, delta);\n      }\n    }\n\n    this._postdraw(ctx, delta);\n    ctx.restore();\n  }\n\n  /**\n   * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('predraw', (evt) =>{...})`\n   *\n   * `onPreDraw` is called directly before an actor is drawn, but after local transforms are made.\n   */\n  public onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('postdraw', (evt) =>{...})`\n   *\n   * `onPostDraw` is called directly after an actor is drawn, and before local transforms are removed.\n   */\n  public onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _predraw handler for [[onPreDraw]] lifecycle event\n   * @internal\n   */\n  public _predraw(ctx: CanvasRenderingContext2D, delta: number): void {\n    this.emit('predraw', new PreDrawEvent(ctx, delta, this));\n    this.onPreDraw(ctx, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _postdraw handler for [[onPostDraw]] lifecycle event\n   * @internal\n   */\n  public _postdraw(ctx: CanvasRenderingContext2D, delta: number): void {\n    this.emit('postdraw', new PreDrawEvent(ctx, delta, this));\n    this.onPostDraw(ctx, delta);\n  }\n\n  /**\n   * Called by the Engine, draws the actors debugging to the screen\n   * @param ctx The rendering context\n   */\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\n\n    this.body.collider.debugDraw(ctx);\n\n    // Draw actor bounding box\n    const bb = this.body.collider.localBounds.translate(this.getWorldPos());\n    bb.debugDraw(ctx);\n\n    // Draw actor Id\n    ctx.fillText('id: ' + this.id, bb.left + 3, bb.top + 10);\n\n    // Draw actor anchor Vector\n    ctx.fillStyle = Color.Yellow.toString();\n    ctx.beginPath();\n    ctx.arc(this.getWorldPos().x, this.getWorldPos().y, 3, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    // Culling Box debug draw\n    for (let j = 0; j < this.traits.length; j++) {\n      if (this.traits[j] instanceof Traits.OffscreenCulling) {\n        (<Traits.OffscreenCulling>this.traits[j]).cullingBox.debugDraw(ctx); // eslint-disable-line\n      }\n    }\n\n    // Unit Circle debug draw\n    ctx.strokeStyle = Color.Yellow.toString();\n    ctx.beginPath();\n    const radius = Math.min(this.width, this.height);\n    ctx.arc(this.getWorldPos().x, this.getWorldPos().y, radius, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n    const ticks: { [key: string]: number } = {\n      '0 Pi': 0,\n      'Pi/2': Math.PI / 2,\n      Pi: Math.PI,\n      '3/2 Pi': (3 * Math.PI) / 2\n    };\n\n    const oldFont = ctx.font;\n    for (const tick in ticks) {\n      ctx.fillStyle = Color.Yellow.toString();\n      ctx.font = '14px';\n      ctx.textAlign = 'center';\n      ctx.fillText(\n        tick,\n        this.getWorldPos().x + Math.cos(ticks[tick]) * (radius + 10),\n        this.getWorldPos().y + Math.sin(ticks[tick]) * (radius + 10)\n      );\n    }\n\n    ctx.font = oldFont;\n\n    // Draw child actors\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].debugDraw(ctx);\n    }\n\n    this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\n  }\n\n  /**\n   * Returns the full array of ancestors\n   */\n  public getAncestors(): Actor[] {\n    const path: Actor[] = [this];\n    let currentActor: Actor = this;\n    let parent: Actor;\n\n    while ((parent = currentActor.parent)) {\n      currentActor = parent;\n      path.push(currentActor);\n    }\n\n    return path.reverse();\n  }\n  // #endregion\n}\n\n/**\n * The most important primitive in Excalibur is an `Actor`. Anything that\n * can move on the screen, collide with another `Actor`, respond to events,\n * or interact with the current scene, must be an actor. An `Actor` **must**\n * be part of a [[Scene]] for it to be drawn to the screen.\n *\n * [[include:Actors.md]]\n *\n *\n * [[include:Constructors.md]]\n *\n */\nexport class Actor extends Configurable(ActorImpl) {\n  constructor();\n  constructor(config?: ActorArgs);\n  constructor(x?: number, y?: number, width?: number, height?: number, color?: Color);\n  constructor(xOrConfig?: number | ActorArgs, y?: number, width?: number, height?: number, color?: Color) {\n    super(xOrConfig, y, width, height, color);\n  }\n}\n","import { Vector } from './Algebra';\nimport { Engine } from './Engine';\nimport { Actor, ActorArgs } from './Actor';\nimport * as Traits from './Traits/Index';\nimport { CollisionType } from './Collision/CollisionType';\nimport { Shape } from './Collision/Shape';\nimport { obsolete } from './Util/Decorators';\nimport { CoordPlane } from './Transform';\n\n/**\n * Helper [[Actor]] primitive for drawing UI's, optimized for UI drawing. Does\n * not participate in collisions. Drawn on top of all other actors.\n */\nexport class ScreenElement extends Actor {\n  protected _engine: Engine;\n\n  constructor();\n  constructor(xOrConfig?: number, y?: number, width?: number, height?: number);\n  constructor(config?: ActorArgs);\n  /**\n   * @param x       The starting x coordinate of the actor\n   * @param y       The starting y coordinate of the actor\n   * @param width   The starting width of the actor\n   * @param height  The starting height of the actor\n   */\n  constructor(xOrConfig?: number | ActorArgs, y?: number, width?: number, height?: number) {\n    if (typeof xOrConfig !== 'object') {\n      super(<number>xOrConfig, y, width, height);\n    } else {\n      super(<ActorArgs>xOrConfig);\n    }\n    this.traits = [];\n    this.traits.push(new Traits.CapturePointer());\n    this.anchor.setTo(0, 0);\n    this.body.collider.type = CollisionType.PreventCollision;\n    this.body.collider.shape = Shape.Box(this.width, this.height, this.anchor);\n    this.enableCapturePointer = true;\n    this.transform.coordPlane = CoordPlane.Screen;\n  }\n\n  public _initialize(engine: Engine) {\n    this._engine = engine;\n    super._initialize(engine);\n  }\n\n  public contains(x: number, y: number, useWorld: boolean = true) {\n    if (useWorld) {\n      return super.contains(x, y);\n    }\n\n    const coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\n    return super.contains(coords.x, coords.y);\n  }\n}\n\n/**\n * Legacy UIActor constructor\n * @obsolete UIActor constructor will be removed in v0.25.0 use [[ScreenElement]] instead\n */\n@obsolete({ message: 'Will be removed in v0.25.0', alternateMethod: 'ScreenElement' })\nexport class UIActor extends ScreenElement {}\n","import { Scene } from './Scene';\n\nexport interface TimerOptions {\n  repeats?: boolean;\n  numberOfRepeats?: number;\n  fcn?: () => void;\n  interval: number;\n}\n\n/**\n * The Excalibur timer hooks into the internal timer and fires callbacks,\n * after a certain interval, optionally repeating.\n */\nexport class Timer {\n  public static id: number = 0;\n  public id: number = 0;\n  public interval: number = 10;\n  public repeats: boolean = false;\n  public maxNumberOfRepeats: number = -1;\n  private _elapsedTime: number = 0;\n  private _totalTimeAlive: number = 0;\n  private _paused: boolean = false;\n  private _numberOfTicks: number = 0;\n  private _callbacks: Array<() => void>;\n  public complete: boolean = false;\n  public scene: Scene = null;\n\n  /**\n   * @param options    Options - repeats, numberOfRepeats, fcn, interval\n   * @param repeats    Indicates whether this call back should be fired only once, or repeat after every interval as completed.\n   * @param numberOfRepeats Specifies a maximum number of times that this timer will execute.\n   * @param fcn        The callback to be fired after the interval is complete.\n   */\n  constructor(options: TimerOptions);\n  constructor(fcn: TimerOptions | (() => void), interval?: number, repeats?: boolean, numberOfRepeats?: number) {\n    if (typeof fcn !== 'function') {\n      const options = fcn;\n      fcn = options.fcn;\n      interval = options.interval;\n      repeats = options.repeats;\n      numberOfRepeats = options.numberOfRepeats;\n    }\n\n    if (!!numberOfRepeats && numberOfRepeats >= 0) {\n      this.maxNumberOfRepeats = numberOfRepeats;\n      if (!repeats) {\n        throw new Error('repeats must be set to true if numberOfRepeats is set');\n      }\n    }\n\n    this.id = Timer.id++;\n    this.interval = interval || this.interval;\n    this.repeats = repeats || this.repeats;\n\n    this._callbacks = [];\n\n    if (fcn) {\n      this.on(fcn);\n    }\n  }\n\n  /**\n   * Adds a new callback to be fired after the interval is complete\n   * @param fcn The callback to be added to the callback list, to be fired after the interval is complete.\n   */\n  public on(fcn: () => void) {\n    this._callbacks.push(fcn);\n  }\n\n  /**\n   * Removes a callback from the callback list to be fired after the interval is complete.\n   * @param fcn The callback to be removed from the callback list, to be fired after the interval is complete.\n   */\n  public off(fcn: () => void) {\n    const index = this._callbacks.indexOf(fcn);\n    this._callbacks.splice(index, 1);\n  }\n\n  /**\n   * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\n   * @param delta  Number of elapsed milliseconds since the last update.\n   */\n  public update(delta: number) {\n    if (!this._paused) {\n      this._totalTimeAlive += delta;\n      this._elapsedTime += delta;\n\n      if (this.maxNumberOfRepeats > -1 && this._numberOfTicks >= this.maxNumberOfRepeats) {\n        this.complete = true;\n      }\n\n      if (!this.complete && this._elapsedTime >= this.interval) {\n        this._callbacks.forEach((c) => {\n          c.call(this);\n        });\n\n        this._numberOfTicks++;\n        if (this.repeats) {\n          this._elapsedTime = 0;\n        } else {\n          this.complete = true;\n        }\n      }\n    }\n  }\n\n  /**\n   * Resets the timer so that it can be reused, and optionally reconfigure the timers interval.\n   * @param newInterval If specified, sets a new non-negative interval in milliseconds to refire the callback\n   * @param newNumberOfRepeats If specified, sets a new non-negative upper limit to the number of time this timer executes\n   */\n  public reset(newInterval?: number, newNumberOfRepeats?: number) {\n    if (!!newInterval && newInterval >= 0) {\n      this.interval = newInterval;\n    }\n\n    if (!!this.maxNumberOfRepeats && this.maxNumberOfRepeats >= 0) {\n      this.maxNumberOfRepeats = newNumberOfRepeats;\n      if (!this.repeats) {\n        throw new Error('repeats must be set to true if numberOfRepeats is set');\n      }\n    }\n\n    this.complete = false;\n    this._elapsedTime = 0;\n    this._numberOfTicks = 0;\n  }\n\n  public get timesRepeated(): number {\n    return this._numberOfTicks;\n  }\n\n  public getTimeRunning(): number {\n    return this._totalTimeAlive;\n  }\n\n  /**\n   * Pauses the timer so that no more time will be incremented towards the next call\n   */\n  public pause() {\n    this._paused = true;\n  }\n\n  /**\n   * Unpauses the timer. Time will now increment towards the next call\n   */\n  public unpause() {\n    this._paused = false;\n  }\n\n  /**\n   * Cancels the timer, preventing any further executions.\n   */\n  public cancel() {\n    if (this.scene) {\n      this.scene.cancelTimer(this);\n    }\n  }\n}\n","import { Graphic, GraphicOptions } from './Graphic';\nimport { RawImage } from './RawImage';\nimport { ExcaliburGraphicsContext, ImageSource } from './Context/ExcaliburGraphicsContext';\n\nexport type SourceView = { x: number; y: number; width: number; height: number };\nexport type DestinationSize = { width: number; height: number };\n\nexport interface SpriteOptions {\n  /**\n   * Image to create a sprite from\n   */\n  image: RawImage;\n  /**\n   * By default the source is the entire dimension of the [[RawImage]]\n   */\n  sourceView?: { x: number; y: number; width: number; height: number };\n  /**\n   * By default the size of the final sprite is the size of the [[RawImage]]\n   */\n  destSize?: { width: number; height: number };\n}\n\nexport class Sprite extends Graphic {\n  public rawImage: RawImage;\n  public sourceView: SourceView;\n  public destSize: DestinationSize;\n\n  public static from(image: RawImage): Sprite {\n    return new Sprite({\n      image: image\n    });\n  }\n\n  constructor(options: GraphicOptions & SpriteOptions) {\n    super(options);\n    this.rawImage = options.image;\n    this.sourceView = options.sourceView ?? { x: 0, y: 0, width: 0, height: 0 };\n    this.destSize = options.destSize ?? { width: 0, height: 0 };\n    this.rawImage.whenLoaded.then(() => {\n      this._updateSpriteDimensions();\n    });\n  }\n\n  private _updateSpriteDimensions() {\n    const { width: nativeWidth, height: nativeHeight } = this.rawImage;\n    this.sourceView.width = this.sourceView.width || nativeWidth;\n    this.sourceView.height = this.sourceView.height || nativeHeight;\n    this.destSize.width = this.destSize.width || nativeWidth;\n    this.destSize.height = this.destSize.height || nativeHeight;\n\n    this.width = Math.ceil(this.destSize.width);\n    this.height = Math.ceil(this.destSize.height);\n  }\n\n  public _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    if (this.rawImage.isLoaded()) {\n      this._updateSpriteDimensions();\n      ex.drawImage(\n        this,\n        this.sourceView.x,\n        this.sourceView.y,\n        this.sourceView.width,\n        this.sourceView.height,\n        x,\n        y,\n        this.destSize.width,\n        this.destSize.height\n      );\n    }\n  }\n\n  public getSource(): ImageSource {\n    return this.rawImage.image;\n  }\n\n  public clone(): Sprite {\n    return new Sprite({\n      image: this.rawImage,\n      sourceView: { ...this.sourceView },\n      destSize: { ...this.destSize },\n      ...this.cloneGraphicOptions()\n    });\n  }\n}\n","import { RawImage } from './RawImage';\nimport { Sprite } from './Sprite';\n\nexport interface SpriteSheetGridOptions {\n  image: RawImage;\n  grid: {\n    rows: number;\n    columns: number;\n    spriteWidth: number;\n    spriteHeight: number;\n    padding?: number;\n  };\n}\n\nexport interface SpriteSheetOptions {\n  image: RawImage;\n  sprites: Sprite[];\n}\n\nexport class SpriteSheet {\n  public image: RawImage;\n  public sprites: Sprite[] = [];\n  constructor(options: SpriteSheetOptions) {\n    const { image, sprites } = options;\n    this.sprites = sprites;\n    this.image = image;\n  }\n\n  public static fromGrid(options: SpriteSheetGridOptions): SpriteSheet {\n    const sprites: Sprite[] = [];\n    const {\n      image,\n      grid: { rows, columns: cols, spriteWidth, spriteHeight, padding }\n    } = options;\n    for (let x = 0; x < cols; x++) {\n      for (let y = 0; y < rows; y++) {\n        sprites[x + y * cols] = new Sprite({\n          image: image,\n          sourceView: {\n            x: x * spriteWidth + (padding ?? 0),\n            y: y * spriteHeight + (padding ?? 0),\n            width: spriteWidth,\n            height: spriteHeight\n          },\n          destSize: { height: spriteHeight, width: spriteWidth }\n        });\n      }\n    }\n    return new SpriteSheet({\n      image: image,\n      sprites: sprites\n    });\n  }\n}\n","import { Resource } from '../Resources/Resource';\nimport { Texture } from '../Resources/Texture';\n\nexport class RawImage extends Resource<HTMLImageElement> {\n  private static _ID = 0;\n  public readonly id = RawImage._ID++;\n\n  /**\n   * The original size of the image before any sizing\n   */\n  public get width() {\n    return this.image.naturalWidth;\n  }\n\n  /**\n   * The original height of the image for any sizing\n   */\n  public get height() {\n    return this.image.naturalHeight;\n  }\n\n  public image: HTMLImageElement = new Image();\n\n  public whenLoaded: Promise<HTMLImageElement>;\n  private _whenLoadedResolve: (value?: HTMLImageElement | PromiseLike<HTMLImageElement>) => void;\n\n  /**\n   * The path to the image, can also be a data url like 'data:image/'\n   * @param path\n   */\n  constructor(public readonly path: string, bustCache: boolean = false) {\n    super(path, 'blob', bustCache);\n    this.whenLoaded = new Promise<HTMLImageElement>((resolve) => {\n      this._whenLoadedResolve = resolve;\n    });\n  }\n\n  /**\n   * Image is already encoded\n   * @param path\n   */\n  private _isDataUrl(path: string) {\n    return path.indexOf('data:image/') > -1;\n  }\n\n  private _resolveWhenLoaded(resolve: (value: HTMLImageElement) => void) {\n    this.image.addEventListener('load', () => {\n      resolve(this.image);\n      this._whenLoadedResolve(this.image);\n    });\n  }\n\n  load(): Promise<HTMLImageElement> {\n    return new Promise((resolve, _reject) => {\n      if (this.isLoaded()) {\n        resolve(this.image);\n        return;\n      }\n\n      this._resolveWhenLoaded(resolve);\n      if (this._isDataUrl(this.path)) {\n        this.image.src = this.path;\n      } else {\n        super.load().then(() => {\n          this.image.src = super.getData();\n        });\n      }\n    });\n  }\n\n  /**\n   * Create a RawImage from legacy texture\n   * @param tex\n   */\n  public static fromLegacyTexture(tex: Texture): RawImage {\n    const image = new RawImage(tex.path);\n    if (tex.isLoaded()) {\n      image.image = tex.image;\n      image.data = tex.data;\n    } else {\n      tex.loaded.then(() => {\n        image.image = tex.image;\n        image.data = tex.data;\n      });\n    }\n    return image;\n  }\n\n  /**\n   * Unload images from memory\n   */\n  unload(): void {\n    this.data = null;\n    this.image = new Image();\n  }\n}\n","export function isPowerOfTwo(x: number) {\n  return (x & (x - 1)) == 0;\n}\n\nexport function nextHighestPowerOfTwo(x: number) {\n  --x;\n  for (var i = 1; i < 32; i <<= 1) {\n    x = x | (x >> i);\n  }\n  return x + 1;\n}\n\nexport function ensurePowerOfTwo(x: number) {\n  if (!isPowerOfTwo(x)) {\n    return nextHighestPowerOfTwo(x);\n  }\n  return x;\n}\n","import { Graphic, GraphicOptions } from './Graphic';\nimport { ExcaliburGraphicsContext, ImageSource } from './Context/ExcaliburGraphicsContext';\nimport { Color } from '../Drawing/Color';\nimport { ensurePowerOfTwo } from './Context/webgl-util';\nimport { Vector } from '../Algebra';\nimport { BoundingBox } from '../Collision/BoundingBox';\n\nexport interface RasterOptions {\n  smoothing?: boolean;\n  color?: Color;\n  strokeColor?: Color;\n  lineWidth?: number;\n  lineDash?: number[];\n  padding?: number;\n}\n\n/**\n * A Raster is a Graphic that needs to be first painted to a HTMLCanvasElement before it can be drawn to the\n * [[ExcaliburGraphicsContext]]. This is useful for generating custom images using the 2D canvas api.\n *\n * Implementors must implemenet the [[Raster.execute]] method to rasterize their drawing.\n */\nexport abstract class Raster extends Graphic {\n  public _bitmap: HTMLCanvasElement;\n  public __glTexture: WebGLTexture;\n  public _flagTextureDirty: boolean;\n  private _ctx: CanvasRenderingContext2D;\n  private _dirty: boolean = true;\n\n  constructor(options?: GraphicOptions & RasterOptions) {\n    super(options);\n    if (options) {\n      this.color = options.color ?? Color.Black;\n      this.strokeColor = options?.strokeColor;\n      this.smoothing = options.smoothing ?? this.smoothing;\n      this.lineWidth = options.lineWidth ?? this.lineWidth;\n      this.lineDash = options.lineDash ?? this.lineDash;\n      this.padding = options.padding ?? this.padding;\n    }\n\n    this._bitmap = document.createElement('canvas');\n    let bitmapWidth = options.width ?? this._bitmap.width;\n    let bitmapHeight = options.height ?? this._bitmap.height;\n    // Rasters use power of two images as an optimization for webgl\n    this._bitmap.width = ensurePowerOfTwo(bitmapWidth);\n    this._bitmap.height = ensurePowerOfTwo(bitmapHeight);\n    const maybeCtx = this._bitmap.getContext('2d');\n    if (!maybeCtx) {\n      throw new Error('Browser does not support 2d canvas drawing, cannot create Raster graphic');\n    } else {\n      this._ctx = maybeCtx;\n    }\n  }\n\n  public cloneRasterOptions(): RasterOptions {\n    return {\n      color: this.color ? this.color.clone() : null,\n      strokeColor: this.strokeColor ? this.strokeColor.clone() : null,\n      smoothing: this.smoothing,\n      lineWidth: this.lineWidth,\n      lineDash: this.lineDash,\n      padding: this.padding\n    };\n  }\n\n  /**\n   * Gets whether the graphic is dirty\n   */\n  public get dirty() {\n    return this._dirty;\n  }\n\n  /**\n   * Flags the graphic as dirty, meaning it must be re-rasterized before draw.\n   * This should be called any time the graphics state changes such that it affects the outputed drawing\n   */\n  public flagDirty() {\n    this._dirty = true;\n  }\n\n  /**\n   * Gets or sets the current width of the Raster graphic. Setting the width will cause the raster\n   * to be flagged dirty causing a re-raster on the next draw.\n   */\n  public get width() {\n    return this._bitmap.width;\n  }\n  public set width(value: number) {\n    this._bitmap.width = value;\n    this.flagDirty();\n  }\n\n  /**\n   * Gets or sets the current height of the Raster graphic. Setting the height will cause the raster\n   * to be flagged dirty causing a re-raster on the next draw.\n   */\n  public get height() {\n    return this._bitmap.height;\n  }\n  public set height(value: number) {\n    this._bitmap.height = value;\n    this.flagDirty();\n  }\n\n  public get localBounds() {\n    return BoundingBox.fromDimension(this.width * this.scale.x, this.height * this.scale.y, Vector.Zero);\n  }\n\n  private _smoothing: boolean = false;\n  /**\n   * Gets or sets the smoothing (anti-aliasing of the graphic). Setting the height will cause the raster\n   * to be flagged dirty causing a re-raster on the next draw.\n   */\n  public get smoothing() {\n    return this._smoothing;\n  }\n  public set smoothing(value: boolean) {\n    this._smoothing = value;\n    this.flagDirty();\n  }\n\n  private _createColorProxy(color: Color) {\n    return new Proxy(color, {\n      set: (obj, prop, value) => {\n        // The default behavior to store the value\n        (obj as any)[prop] = value;\n        this.flagDirty();\n        // Indicate success\n        return true;\n      }\n    });\n  }\n\n  private _color: Color;\n  /**\n   * Gets or sets the fillStyle of the Raster graphic. Setting the fillStyle will cause the raster to be\n   * flagged dirty causing a re-raster on the next draw.\n   */\n  public get color() {\n    return this._color;\n  }\n  public set color(value) {\n    this._color = value ? this._createColorProxy(value) : value;\n    this.flagDirty();\n  }\n\n  private _strokeColor: Color;\n  /**\n   * Gets or sets the strokeStyle of the Raster graphic. Setting the strokeStyle will cause the raster to be\n   * flagged dirty causing a re-raster on the next draw.\n   */\n  public get strokeColor() {\n    return this._strokeColor;\n  }\n  public set strokeColor(value) {\n    this._strokeColor = value ? this._createColorProxy(value) : value;\n    this.flagDirty();\n  }\n\n  private _lineWidth: number = 1;\n  /**\n   * Gets or sets the line width of the Raster graphic. Setting the lineWidth will cause the raster to be\n   * flagged dirty causing a re-raster on the next draw.\n   */\n  public get lineWidth() {\n    return this._lineWidth;\n  }\n  public set lineWidth(value) {\n    this._lineWidth = value;\n    this.flagDirty();\n  }\n\n  private _lineDash: number[] = [];\n  public get lineDash() {\n    return this._lineDash;\n  }\n\n  public set lineDash(value) {\n    this._lineDash = value;\n    this.flagDirty();\n  }\n\n  private _padding: number = 0;\n  public get padding() {\n    return this._padding;\n  }\n\n  public set padding(value: number) {\n    this._padding = value;\n    this.flagDirty();\n  }\n\n  /**\n   * Rasterize the graphic to a bitmap making it usuable as in excalibur. Rasterize is called automatically if\n   * the graphic is [[Graphic.dirty]] on the next [[Graphic.draw]] call\n   */\n  public rasterize(): void {\n    this._dirty = false;\n    this._ctx.clearRect(0, 0, this.width, this.height);\n    this._ctx.save();\n    this._applyRasterProperites(this._ctx);\n    this.execute(this._ctx);\n    this._ctx.restore();\n    // TODO this feels kinda bad, should at least be a method or Rasters should be able to manage this\n    this._flagTextureDirty = true;\n  }\n\n  protected _applyRasterProperites(ctx: CanvasRenderingContext2D) {\n    this._bitmap.width = this.width + this.padding * 2;\n    this._bitmap.height = this.height + this.padding * 2;\n    ctx.translate(this.padding, this.padding);\n    ctx.imageSmoothingEnabled = this.smoothing;\n    ctx.lineWidth = this.lineWidth;\n    ctx.setLineDash(this.lineDash ?? ctx.getLineDash());\n    ctx.strokeStyle = this.strokeColor?.toString();\n    ctx.fillStyle = this.color?.toString();\n  }\n\n  protected _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    if (this._dirty) {\n      this.rasterize();\n    }\n\n    ex.drawImage(this, x, y);\n  }\n\n  /**\n   * Executes drawing implemenation of the graphic, this is where the specific drawing code for the graphic\n   * should be implemented. Once `rasterize()` the graphic can be drawn to the [[ExcaliburGraphicsContext]] via `draw(...)`\n   * @param ctx Canvas to draw the graphic to\n   */\n  abstract execute(ctx: CanvasRenderingContext2D): void;\n\n  public getSource(): ImageSource {\n    return this._bitmap;\n  }\n}\n","import { Raster, RasterOptions } from './Raster';\n\nexport interface CircleOptions {\n  radius: number;\n}\n\n/**\n * A circle [[Graphic]] for drawing circles to the [[ExcaliburGraphicsContext]]\n */\nexport class Circle extends Raster {\n  private _radius: number = 0;\n  public get radius() {\n    return this._radius;\n  }\n  public set radius(value: number) {\n    this._radius = value;\n    this.width = this._radius * 2;\n    this.height = this._radius * 2;\n    this.flagDirty();\n  }\n  constructor(options: RasterOptions & CircleOptions) {\n    super(options);\n    this.radius = options.radius;\n    this.rasterize();\n  }\n\n  public clone(): Circle {\n    return new Circle({\n      radius: this.radius,\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions()\n    });\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    if (this.radius > 0) {\n      ctx.beginPath();\n      ctx.arc(this.radius, this.radius, this.radius, 0, Math.PI * 2);\n\n      if (this.color) {\n        ctx.fill();\n      }\n\n      if (this.strokeColor) {\n        ctx.stroke();\n      }\n    }\n  }\n}\n","import { Raster, RasterOptions } from './Raster';\n\nexport interface RectOptions {\n  width: number;\n  height: number;\n}\n\n/**\n * A Rectangle [[Graphic]] for drawing rectangles to the [[ExcaliburGraphicsContext]]\n */\nexport class Rect extends Raster {\n  constructor(options: RasterOptions & RectOptions) {\n    super(options);\n    this.width = options.width;\n    this.height = options.height;\n    this.rasterize();\n  }\n\n  public clone(): Rect {\n    return new Rect({\n      width: this.width,\n      height: this.height,\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions()\n    });\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    if (this.color) {\n      ctx.fillRect(0, 0, this.width, this.height);\n    }\n    if (this.strokeColor) {\n      ctx.strokeRect(0, 0, this.width, this.height);\n    }\n  }\n}\n","import { Vector, vec } from '../Algebra';\nimport { Raster, RasterOptions } from './Raster';\n\nexport interface PolygonOptions {\n  points: Vector[];\n}\n\n/**\n * A polygon [[Graphic]] for drawing arbitrary polygons to the [[ExcaliburGraphicsContext]]\n */\nexport class Polygon extends Raster {\n  private _points: Vector[];\n  public get points(): Vector[] {\n    return this._points;\n  }\n  public set points(points: Vector[]) {\n    this._points = points;\n    const min = this.minPoint;\n    this.width = this._points.reduce((max, p) => Math.max(p.x, max), 0) - min.x;\n    this.height = this._points.reduce((max, p) => Math.max(p.y, max), 0) - min.y;\n    this.flagDirty();\n  }\n\n  public get minPoint() {\n    const minX = this._points.reduce((min, p) => Math.min(p.x, min), Infinity);\n    const minY = this._points.reduce((min, p) => Math.min(p.y, min), Infinity);\n    return vec(minX, minY);\n  }\n\n  constructor(options: RasterOptions & PolygonOptions) {\n    super(options);\n    this.points = options.points;\n    this.rasterize();\n  }\n\n  public clone(): Polygon {\n    return new Polygon({\n      points: this.points.map((p) => p.clone()),\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions()\n    });\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    if (this.points && this.points.length) {\n      ctx.beginPath();\n      // Iterate through the supplied points and construct a 'polygon'\n      const min = this.minPoint.negate();\n      const firstPoint = this.points[0].add(min);\n      ctx.moveTo(firstPoint.x, firstPoint.y);\n      this.points.forEach((point) => {\n        ctx.lineTo(point.x + min.x, point.y + min.y);\n      });\n      ctx.lineTo(firstPoint.x, firstPoint.y);\n      ctx.closePath();\n      if (this.color) {\n        ctx.fill();\n      }\n      if (this.strokeColor) {\n        ctx.stroke();\n      }\n    }\n  }\n}\n","import { Color } from '../Drawing/Color';\nimport { Vector } from '../Algebra';\n\n/**\n * Enum representing the different font size units\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\n */\nexport enum FontUnit {\n  /**\n   * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\n   */\n  Em = 'em',\n  /**\n   * Rem is similar to the Em, it is a scalable unit. 1 rem is equal to the font size of the root element\n   */\n  Rem = 'rem',\n  /**\n   * Pixel is a unit of length in screen pixels\n   */\n  Px = 'px',\n  /**\n   * Point is a physical unit length (1/72 of an inch)\n   */\n  Pt = 'pt',\n  /**\n   * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\n   */\n  Percent = '%'\n}\n\n/**\n * Enum representing the different horizontal text alignments\n */\nexport enum TextAlign {\n  /**\n   * The text is left-aligned.\n   */\n  Left = 'left',\n  /**\n   * The text is right-aligned.\n   */\n  Right = 'right',\n  /**\n   * The text is centered.\n   */\n  Center = 'center',\n  /**\n   * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\n   * right-aligned for right-to-left locales).\n   */\n  Start = 'start',\n  /**\n   * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\n   * left-aligned for right-to-left locales).\n   */\n  End = 'end'\n}\n\n/**\n * Enum representing the different baseline text alignments\n */\nexport enum BaseAlign {\n  /**\n   * The text baseline is the top of the em square.\n   */\n  Top = 'top',\n  /**\n   * The text baseline is the hanging baseline.  Currently unsupported; this will act like\n   * alphabetic.\n   */\n  Hanging = 'hanging',\n  /**\n   * The text baseline is the middle of the em square.\n   */\n  Middle = 'middle',\n  /**\n   * The text baseline is the normal alphabetic baseline.\n   */\n  Alphabetic = 'alphabetic',\n  /**\n   * The text baseline is the ideographic baseline; this is the bottom of\n   * the body of the characters, if the main body of characters protrudes\n   * beneath the alphabetic baseline.  Currently unsupported; this will\n   * act like alphabetic.\n   */\n  Ideographic = 'ideographic',\n  /**\n   * The text baseline is the bottom of the bounding box.  This differs\n   * from the ideographic baseline in that the ideographic baseline\n   * doesn't consider descenders.\n   */\n  Bottom = 'bottom'\n}\n\n/**\n * Enum representing the different possible font styles\n */\nexport enum FontStyle {\n  Normal = 'normal',\n  Italic = 'italic',\n  Oblique = 'oblique'\n}\n\nexport enum Direction {\n  LeftToRight = 'ltr',\n  RightToLeft = 'rtl'\n}\n\nexport interface FontOptions {\n  size?: number;\n  unit?: FontUnit;\n  family?: string;\n  style?: FontStyle;\n  bold?: boolean;\n  textAlign?: TextAlign;\n  baseAlign?: BaseAlign;\n  direction?: Direction;\n  shadow?: {\n    blur?: number;\n    offset?: Vector;\n    color?: Color;\n  };\n}\n\nexport class Font {\n  public family: string = 'sans-serif';\n  public style: FontStyle = FontStyle.Normal;\n  public bold: boolean = false;\n  public unit: FontUnit = FontUnit.Px;\n  public textAlign: TextAlign = TextAlign.Left;\n  public baseAlign: BaseAlign = BaseAlign.Alphabetic;\n  public direction: Direction = Direction.LeftToRight;\n  public size: number = 10;\n  public shadow: { blur: number; offset: Vector; color: Color } = null;\n\n  constructor(options?: FontOptions) {\n    if (options) {\n      this.family = options.family ?? this.family;\n      this.style = options.style ?? this.style;\n      this.bold = options.bold ?? this.bold;\n      this.size = options.size ?? this.size;\n      this.unit = options.unit ?? this.unit;\n      this.textAlign = options.textAlign ?? this.textAlign;\n      this.baseAlign = options.baseAlign ?? this.baseAlign;\n      this.direction = options.direction ?? this.direction;\n      if (options.shadow) {\n        this.shadow.blur = options.shadow.blur ?? this.shadow.blur;\n        this.shadow.offset = options.shadow.offset ?? this.shadow.offset;\n        this.shadow.color = options.shadow.color ?? this.shadow.color;\n      }\n    }\n  }\n\n  public get fontString() {\n    return `${this.style} ${this.bold ? 'bold' : ''} ${this.size}${this.unit} ${this.family}`;\n  }\n\n  public apply(ctx: CanvasRenderingContext2D) {\n    ctx.textAlign = this.textAlign;\n    ctx.textBaseline = this.baseAlign;\n    ctx.font = this.fontString;\n    ctx.direction = this.direction;\n\n    if (this.shadow) {\n      ctx.shadowColor = this.shadow.color.toString();\n      ctx.shadowBlur = this.shadow.blur;\n      ctx.shadowOffsetX = this.shadow.offset.x;\n      ctx.shadowOffsetY = this.shadow.offset.y;\n    }\n  }\n  public clone(): Font {\n    return new Font({\n      size: this.size,\n      unit: this.unit,\n      family: this.family,\n      style: this.style,\n      bold: this.bold,\n      textAlign: this.textAlign,\n      baseAlign: this.baseAlign,\n      direction: this.direction,\n      shadow: this.shadow\n        ? {\n            blur: this.shadow.blur,\n            offset: this.shadow.offset,\n            color: this.shadow.color\n          }\n        : null\n    });\n  }\n}\n","import { Raster, RasterOptions } from './Raster';\nimport { Font } from './Font';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { line } from '../Util/DrawUtil';\nimport { Color } from '../Drawing/Color';\nimport { vec } from '../Algebra';\n\nexport interface TextOptions {\n  text: string;\n  font?: Font;\n}\n\nexport class Text extends Raster {\n  constructor(options: TextOptions & RasterOptions) {\n    super(options);\n    this.text = options.text;\n    this.font = options.font ?? new Font();\n    this.flagDirty();\n  }\n\n  public clone(): Text {\n    return new Text({\n      text: this.text.slice(),\n      font: this.font.clone(),\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions()\n    });\n  }\n\n  // private _metrics: TextMetrics;\n  private _text: string;\n  public get text() {\n    return this._text;\n  }\n\n  public set text(value: string) {\n    this._text = value;\n    this.flagDirty();\n  }\n\n  private _font: Font;\n  public get font() {\n    return this._font;\n  }\n\n  private _createFontProxy(font: Font) {\n    return new Proxy(font, {\n      set: (obj, prop, value) => {\n        // The default behavior to store the value\n        (obj as any)[prop] = value;\n        this.flagDirty();\n        // Indicate success\n        return true;\n      }\n    });\n  }\n\n  public set font(value: Font) {\n    this._font = value ? this._createFontProxy(value) : value;\n    this.flagDirty();\n  }\n\n  private get _halfWidth() {\n    return Math.floor(this.width / 2);\n  }\n\n  private get _halfHeight() {\n    return Math.floor(this.height / 2);\n  }\n\n  protected _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    if (this.dirty) {\n      this.rasterize();\n    }\n\n    ex.drawImage(this, x - this._halfWidth, y - this._halfHeight);\n  }\n  _rotate(ex: ExcaliburGraphicsContext) {\n    const origin = this.origin ?? vec(this.width / 4, -this.height / 16);\n    ex.translate(origin.x, origin.y);\n    ex.rotate(this.rotation);\n    ex.translate(-origin.x, -origin.y);\n  }\n\n  _flip(ex: ExcaliburGraphicsContext) {\n    if (this.flipHorizontal) {\n      ex.translate(this.width / 2 / this.scale.x, 0);\n      ex.scale(-1, 1);\n    }\n\n    if (this.flipVertical) {\n      ex.translate(0, -this.height / 8 / this.scale.y);\n      ex.scale(1, -1);\n    }\n  }\n\n  _postDraw(ex: ExcaliburGraphicsContext): void {\n    if (this.showDebug) {\n      ex.drawDebugRect(-this._halfWidth, -this._halfHeight, this.width, this.height);\n    }\n    ex.restore();\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    if (this.text) {\n      this.font?.apply(ctx);\n      const metrics = ctx.measureText(this.text);\n\n      // Changing the width and height clears the context properties\n      // We double the bitmap width to account for alignment\n      this._bitmap.width = (metrics.width + this.padding * 2) * 2;\n      this._bitmap.height = ((metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent + this.padding) * 2 || 16) * 2;\n\n      this._applyRasterProperites(ctx);\n      this.font?.apply(ctx);\n      if (this.color) {\n        ctx.fillText(this.text, this.padding + this._halfWidth, this.padding + this._halfHeight);\n      }\n\n      if (this.strokeColor) {\n        ctx.strokeText(this.text, this.padding + this._halfWidth, this.padding + this._halfHeight);\n      }\n\n      if (this.showDebug) {\n        line(ctx, Color.Red, 0, this._halfHeight, this.width, this._halfHeight, 2);\n        line(ctx, Color.Red, this._halfWidth, 0, this._halfWidth, this.height, 2);\n      }\n    }\n  }\n}\n","import { ExcaliburGraphicsContextState } from './ExcaliburGraphicsContext';\n\nexport class StateStack {\n  private _states: ExcaliburGraphicsContextState[] = [];\n  private _currentState: ExcaliburGraphicsContextState = this._getDefaultState();\n\n  private _getDefaultState() {\n    return {\n      opacity: 1,\n      z: 0\n    };\n  }\n\n  private _cloneState() {\n    return {\n      opacity: this._currentState.opacity,\n      z: this._currentState.z\n    };\n  }\n\n  public save(): void {\n    this._states.push(this._currentState);\n    this._currentState = this._cloneState();\n  }\n\n  public restore(): void {\n    this._currentState = this._states.pop();\n  }\n\n  public get current(): ExcaliburGraphicsContextState {\n    return this._currentState;\n  }\n}\n","import { ExcaliburGraphicsContext } from './ExcaliburGraphicsContext';\nimport { Vector } from '../../Algebra';\nimport { Graphic } from '../Graphic';\nimport { Color } from '../../Drawing/Color';\nimport { StateStack } from './state-stack';\n\nexport class ExcaliburGraphicsContext2DCanvas implements ExcaliburGraphicsContext {\n  public get width() {\n    return this._ctx.canvas.width;\n  }\n\n  public get height() {\n    return this._ctx.canvas.height;\n  }\n\n  public backgroundColor: Color = Color.ExcaliburBlue;\n\n  private _state = new StateStack();\n\n  public get opacity(): number {\n    return this._state.current.opacity;\n  }\n\n  public set opacity(value: number) {\n    this._state.current.opacity = value;\n  }\n\n  public get z(): number {\n    return this._state.current.z;\n  }\n\n  public set z(value: number) {\n    this._state.current.z = value;\n  }\n\n  public snapToPixel: boolean = false;\n\n  constructor(private _ctx: CanvasRenderingContext2D) {}\n\n  /**\n   * Draw a debug rectangle to the context\n   * @param x\n   * @param y\n   * @param width\n   * @param height\n   */\n  drawDebugRect(x: number, y: number, width: number, height: number): void {\n    this._ctx.save();\n    this._ctx.strokeStyle = 'red';\n    this._ctx.strokeRect(x, y, width, height);\n    this._ctx.restore();\n  }\n\n  drawDebugLine(start: Vector, end: Vector): void {\n    this._ctx.save();\n    this._ctx.beginPath();\n    this._ctx.strokeStyle = 'red';\n    this._ctx.moveTo(start.x, start.y);\n    this._ctx.lineTo(end.x, end.y);\n    this._ctx.lineWidth = 2;\n    this._ctx.stroke();\n    this._ctx.closePath();\n    this._ctx.restore();\n  }\n\n  /**\n   * Draw an image to the Excalibur Graphics context at an x and y coordinate using the images width and height\n   */\n  drawImage(graphic: Graphic, x: number, y: number): void;\n  /**\n   *\n   * Draw an image to the Excalibur Graphics context at an x and y coordinate with a specific width and height\n   */\n  drawImage(graphic: Graphic, x: number, y: number, width: number, height: number): void;\n  /**\n   *\n   * Draw an image to the Excalibur Graphics context specifying the source image coordinates (sx, sy, swidth, sheight)\n   * and to a specific destination on the context (dx, dy, dwidth, dheight)\n   */\n  drawImage(\n    graphic: Graphic,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ): void;\n\n  drawImage(\n    graphic: Graphic,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ): void {\n    this._ctx.globalAlpha = this.opacity;\n    const args = [graphic.getSource(), sx, sy, swidth, sheight, dx, dy, dwidth, dheight]\n      .filter((a) => a !== undefined)\n      .map((a) => (typeof a === 'number' && this.snapToPixel ? ~~a : a));\n    this._ctx.drawImage.apply(this._ctx, args);\n  }\n\n  /**\n   * Save the current state of the canvas to the stack (transforms and opacity)\n   */\n  save(): void {\n    this._ctx.save();\n  }\n\n  /**\n   * Restore the state of the canvas from the stack\n   */\n  restore(): void {\n    this._ctx.restore();\n  }\n\n  /**\n   * Translate the origin of the context by an x and y\n   * @param x\n   * @param y\n   */\n  translate(x: number, y: number): void {\n    this._ctx.translate(this.snapToPixel ? ~~x : x, this.snapToPixel ? ~~y : y);\n  }\n\n  /**\n   * Rotate the context about the current origin\n   */\n  rotate(angle: number): void {\n    this._ctx.rotate(angle);\n  }\n\n  /**\n   * Scale the context by an x and y factor\n   * @param x\n   * @param y\n   */\n  scale(x: number, y: number): void {\n    this._ctx.scale(x, y);\n  }\n\n  clear(): void {\n    // Clear frame\n    this._ctx.clearRect(0, 0, this.width, this.height);\n    this._ctx.fillStyle = this.backgroundColor.toString();\n    this._ctx.fillRect(0, 0, this.width, this.height);\n  }\n\n  /**\n   * Flushes the batched draw calls to the screen\n   */\n  flush(): void {\n    // pass\n  }\n}\n","export class Matrix {\n  // 4x4 matrix in column major order\n  // | data[0], data[4], data[8],  data[12] |\n  // | data[1], data[5], data[9],  data[13] |\n  // | data[2], data[6], data[10], data[14] |\n  // | data[3], data[7], data[11], data[15] |\n  public data: Float32Array = new Float32Array(16);\n\n  /**\n   * Creates an orthographic (flat non-perspective) projection\n   * https://en.wikipedia.org/wiki/Orthographic_projection\n   * @param left\n   * @param right\n   * @param bottom\n   * @param top\n   * @param near\n   * @param far\n   */\n  public static ortho(left: number, right: number, bottom: number, top: number, near: number, far: number): Matrix {\n    const mat = new Matrix();\n    mat.data[0] = 2 / (right - left);\n    mat.data[1] = 0;\n    mat.data[2] = 0;\n    mat.data[3] = 0;\n\n    mat.data[4] = 0;\n    mat.data[5] = 2 / (top - bottom);\n    mat.data[6] = 0;\n    mat.data[7] = 0;\n\n    mat.data[8] = 0;\n    mat.data[9] = 0;\n    mat.data[10] = -2 / (far - near);\n    mat.data[11] = 0;\n\n    mat.data[12] = -(right + left) / (right - left);\n    mat.data[13] = -(top + bottom) / (top - bottom);\n    mat.data[14] = -(far + near) / (far - near);\n    mat.data[15] = 1;\n    return mat;\n  }\n\n  public clone(): Matrix {\n    const mat = new Matrix();\n    mat.data[0] = this.data[0];\n    mat.data[1] = this.data[1];\n    mat.data[2] = this.data[2];\n    mat.data[3] = this.data[3];\n\n    mat.data[4] = this.data[4];\n    mat.data[5] = this.data[5];\n    mat.data[6] = this.data[6];\n    mat.data[7] = this.data[7];\n\n    mat.data[8] = this.data[8];\n    mat.data[9] = this.data[9];\n    mat.data[10] = this.data[10];\n    mat.data[11] = this.data[11];\n\n    mat.data[12] = this.data[12];\n    mat.data[13] = this.data[13];\n    mat.data[14] = this.data[14];\n    mat.data[15] = this.data[15];\n    return mat;\n  }\n\n  public static identity(): Matrix {\n    const mat = new Matrix();\n    mat.data[0] = 1;\n    mat.data[1] = 0;\n    mat.data[2] = 0;\n    mat.data[3] = 0;\n\n    mat.data[4] = 0;\n    mat.data[5] = 1;\n    mat.data[6] = 0;\n    mat.data[7] = 0;\n\n    mat.data[8] = 0;\n    mat.data[9] = 0;\n    mat.data[10] = 1;\n    mat.data[11] = 0;\n\n    mat.data[12] = 0;\n    mat.data[13] = 0;\n    mat.data[14] = 0;\n    mat.data[15] = 1;\n    return mat;\n  }\n\n  public static translation(x: number, y: number, z: number = 0): Matrix {\n    const mat = Matrix.identity();\n    mat.data[12] = x;\n    mat.data[13] = y;\n    mat.data[14] = z;\n    return mat;\n  }\n\n  public static scale(sx: number, sy: number): Matrix {\n    const mat = Matrix.identity();\n    mat.data[0] = sx;\n    mat.data[5] = sy;\n    mat.data[10] = 1;\n    mat.data[15] = 1;\n    return mat;\n  }\n\n  public static rotation(angleRadians: number): Matrix {\n    const mat = Matrix.identity();\n    mat.data[0] = Math.cos(angleRadians);\n    mat.data[4] = -Math.sin(angleRadians);\n    mat.data[1] = Math.sin(angleRadians);\n    mat.data[5] = Math.cos(angleRadians);\n    return mat;\n  }\n\n  multv(other: [number, number]): [number, number] {\n    let dest: [number, number];\n    let z = 0;\n    dest = [\n      other[0] * this.data[0] + other[1] * this.data[4] + z * this.data[6] + 1 * this.data[12],\n\n      other[0] * this.data[1] + other[1] * this.data[5] + z * this.data[9] + 1 * this.data[13]\n    ];\n    return dest;\n  }\n\n  multm(other: Matrix): Matrix {\n    const dest = new Matrix();\n    const a11 = this.data[0];\n    const a21 = this.data[1];\n    const a31 = this.data[2];\n    const a41 = this.data[3];\n\n    const a12 = this.data[4];\n    const a22 = this.data[5];\n    const a32 = this.data[6];\n    const a42 = this.data[7];\n\n    const a13 = this.data[8];\n    const a23 = this.data[9];\n    const a33 = this.data[10];\n    const a43 = this.data[11];\n\n    const a14 = this.data[12];\n    const a24 = this.data[13];\n    const a34 = this.data[14];\n    const a44 = this.data[15];\n\n    const b11 = other.data[0];\n    const b21 = other.data[1];\n    const b31 = other.data[2];\n    const b41 = other.data[3];\n\n    const b12 = other.data[4];\n    const b22 = other.data[5];\n    const b32 = other.data[6];\n    const b42 = other.data[7];\n\n    const b13 = other.data[8];\n    const b23 = other.data[9];\n    const b33 = other.data[10];\n    const b43 = other.data[11];\n\n    const b14 = other.data[12];\n    const b24 = other.data[13];\n    const b34 = other.data[14];\n    const b44 = other.data[15];\n\n    dest.data[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n    dest.data[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n    dest.data[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n    dest.data[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\n    dest.data[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n    dest.data[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n    dest.data[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n    dest.data[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\n    dest.data[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n    dest.data[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n    dest.data[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n    dest.data[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\n    dest.data[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n    dest.data[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n    dest.data[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n    dest.data[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n    return dest;\n  }\n\n  translate(x: number, y: number) {\n    const a11 = this.data[0];\n    const a21 = this.data[1];\n    const a31 = this.data[2];\n    const a41 = this.data[3];\n\n    const a12 = this.data[4];\n    const a22 = this.data[5];\n    const a32 = this.data[6];\n    const a42 = this.data[7];\n\n    const a13 = this.data[8];\n    const a23 = this.data[9];\n    const a33 = this.data[10];\n    const a43 = this.data[11];\n\n    const a14 = this.data[12];\n    const a24 = this.data[13];\n    const a34 = this.data[14];\n    const a44 = this.data[15];\n\n    // Doesn't change z\n    this.data[12] = a11 * x + a12 * y + a13 + a14;\n    this.data[13] = a21 * x + a22 * y + a23 + a24;\n    this.data[14] = a31 * x + a32 * y + a33 + a34;\n    this.data[15] = a41 * x + a42 * y + a43 + a44;\n\n    return this;\n  }\n\n  rotate(angle: number) {\n    const a11 = this.data[0];\n    const a21 = this.data[1];\n    const a31 = this.data[2];\n    const a41 = this.data[3];\n\n    const a12 = this.data[4];\n    const a22 = this.data[5];\n    const a32 = this.data[6];\n    const a42 = this.data[7];\n\n    const sine = Math.sin(angle);\n    const cosine = Math.cos(angle);\n\n    this.data[0] = cosine * a11 + sine * a12;\n    this.data[1] = cosine * a21 + sine * a22;\n    this.data[2] = cosine * a31 + sine * a32;\n    this.data[3] = cosine * a41 + sine * a42;\n\n    this.data[4] = cosine * a12 - sine * a11;\n    this.data[5] = cosine * a22 - sine * a21;\n    this.data[6] = cosine * a32 - sine * a31;\n    this.data[7] = cosine * a42 - sine * a41;\n\n    return this;\n  }\n\n  scale(x: number, y: number) {\n    const a11 = this.data[0];\n    const a21 = this.data[1];\n    const a31 = this.data[2];\n    const a41 = this.data[3];\n\n    const a12 = this.data[4];\n    const a22 = this.data[5];\n    const a32 = this.data[6];\n    const a42 = this.data[7];\n\n    this.data[0] = a11 * x;\n    this.data[1] = a21 * x;\n    this.data[2] = a31 * x;\n    this.data[3] = a41 * x;\n\n    this.data[4] = a12 * y;\n    this.data[5] = a22 * y;\n    this.data[6] = a32 * y;\n    this.data[7] = a42 * y;\n\n    return this;\n  }\n}\n","module.exports=\"#define GLSLIFY 1\\nattribute vec4 a_position;\\n\\n// Opacity \\nattribute float a_opacity;\\nvarying float v_opacity;\\n\\n// UV coordinate\\nattribute vec2 a_texcoord;\\nvarying vec2 v_texcoord;\\n\\n// Texture number\\nattribute lowp float a_textureIndex;\\nvarying lowp float v_textureIndex;\\n\\nuniform mat4 u_matrix;\\n\\nvoid main() {\\n   // Set the vertex position using the ortho transform matrix\\n   gl_Position = u_matrix * a_position;\\n\\n   // Pass through the Opacity to the fragment shader\\n   v_opacity = a_opacity;\\n   // Pass through the UV coord to the fragment shader\\n   v_texcoord = a_texcoord;\\n   // Pass through the texture number to the fragment shader\\n   v_textureIndex = a_textureIndex;\\n}\";","module.exports=\"precision mediump float;\\n#define GLSLIFY 1\\n\\n// UV coord\\nvarying vec2 v_texcoord;\\n\\n// Texture index\\nvarying lowp float v_textureIndex;\\n\\n// Opacity\\nvarying float v_opacity;\\n\\nuniform sampler2D textures[%%count%%];\\n\\nvoid main() {\\n   // In order to support the most efficient sprite batching, we have multiple\\n   // textures loaded into the gpu (usually 8) this picker logic skips over textures\\n   // that do not apply to a particular sprite.\\n\\n   // Error color\\n   vec4 color = vec4(1.0, 0.0, 0.0, 1.0);\\n\\n   // Always at least 1 texture at 0\\n   if (v_textureIndex <= .5) {\\n      gl_FragColor = texture2D(textures[0], v_texcoord);\\n      gl_FragColor.w = gl_FragColor.w * v_opacity;\\n      %%texture_picker%%\\n   } else {\\n      gl_FragColor = color;\\n   }\\n}\";","import vertexSource from './shaders/vertex.glsl';\nimport fragementSource from './shaders/fragment.glsl';\n\nexport class Shader {\n  private _program: WebGLProgram | null = null;\n  private _positionLocation: number = -1;\n  private _textureIndexLocation: number = -1;\n  private _texcoordLocation: number = -1;\n  private _opacityLocation: number = -1;\n  private _matrixUniform: WebGLUniformLocation | null = null;\n  private _texturesUniform: WebGLUniformLocation | null = null;\n  constructor(private maxTextures: number) {}\n\n  private _createProgram(gl: WebGLRenderingContext, vertexShader: WebGLShader, fragmentShader: WebGLShader): WebGLProgram {\n    const program = gl.createProgram();\n    if (program === null) {\n      throw Error('Could not create graphics shader program');\n    }\n\n    // attach the shaders.\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n\n    // link the program.\n    gl.linkProgram(program);\n\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!success) {\n      throw Error(`Could not link the program: [${gl.getProgramInfoLog(program)}]`);\n    }\n\n    return program;\n  }\n\n  private _compileShader(gl: WebGLRenderingContext, source: string, type: number): WebGLShader {\n    const shader = gl.createShader(type);\n    if (shader === null) {\n      throw Error(`Could not build shader: [${source}]`);\n    }\n\n    // TODO abstract this a bit better\n    if (type === gl.FRAGMENT_SHADER) {\n      source = this._transformFragmentSource(source);\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (!success) {\n      throw Error(`Could not compile shader [${gl.getShaderInfoLog(shader)}]`);\n    }\n    return shader;\n  }\n\n  private _transformFragmentSource(source: string): string {\n    let newSource = source.replace('%%count%%', this.maxTextures.toString());\n    let texturePickerBuilder = '';\n    for (let i = 0; i < this.maxTextures; i++) {\n      texturePickerBuilder += `   } else if (v_textureIndex <= ${i}.5) {\\n\n                gl_FragColor = texture2D(textures[${i}], v_texcoord);\\n\n                gl_FragColor.w = gl_FragColor.w * v_opacity;\\n`;\n    }\n    newSource = newSource.replace('%%texture_picker%%', texturePickerBuilder);\n    return newSource;\n  }\n\n  compile(gl: WebGLRenderingContext): WebGLProgram {\n    const vertexShader = this._compileShader(gl, vertexSource, gl.VERTEX_SHADER);\n    const fragmentShader = this._compileShader(gl, fragementSource, gl.FRAGMENT_SHADER);\n    const program = this._createProgram(gl, vertexShader, fragmentShader);\n\n    // look up where the vertex data needs to go.\n    this._positionLocation = gl.getAttribLocation(program, 'a_position');\n    this._textureIndexLocation = gl.getAttribLocation(program, 'a_textureIndex');\n    this._texcoordLocation = gl.getAttribLocation(program, 'a_texcoord');\n    this._opacityLocation = gl.getAttribLocation(program, 'a_opacity');\n\n    // lookup uniforms\n    this._matrixUniform = gl.getUniformLocation(program, 'u_matrix');\n    this._texturesUniform = gl.getUniformLocation(program, 'textures');\n\n    return (this._program = program);\n  }\n\n  public get program() {\n    return this._program;\n  }\n\n  public get positionLocation() {\n    return this._positionLocation;\n  }\n\n  public get textureIndexLocation() {\n    return this._textureIndexLocation;\n  }\n\n  public get texcoordLocation() {\n    return this._texcoordLocation;\n  }\n\n  public get opacityLocation() {\n    return this._opacityLocation;\n  }\n\n  public get matrixUniform() {\n    return this._matrixUniform;\n  }\n\n  public get texturesUniform() {\n    return this._texturesUniform;\n  }\n}\n","import { Matrix } from '../../Math/matrix';\n\nexport class MatrixStack {\n  private _transforms: Matrix[] = [];\n  private _currentTransform: Matrix = Matrix.identity();\n\n  public save(): void {\n    this._transforms.push(this._currentTransform);\n    this._currentTransform = this._currentTransform.clone();\n  }\n\n  public restore(): void {\n    this._currentTransform = this._transforms.pop();\n  }\n\n  public translate(x: number, y: number): Matrix {\n    return this._currentTransform.translate(x, y);\n    // return (this._currentTransform = this._currentTransform.multm(Matrix.translation(x, y)));\n  }\n\n  public rotate(angle: number): Matrix {\n    return this._currentTransform.rotate(angle);\n    // return (this._currentTransform = this._currentTransform.multm(Matrix.rotation(angle)));\n  }\n\n  public scale(x: number, y: number): Matrix {\n    return this._currentTransform.scale(x, y);\n    // return (this._currentTransform = this._currentTransform.multm(Matrix.scale(x, y)));\n  }\n\n  public set transform(matrix: Matrix) {\n    this._currentTransform = matrix;\n  }\n\n  public get transform(): Matrix {\n    return this._currentTransform;\n  }\n}\n","import { DrawImageCommand } from './command';\nimport { Graphic } from '../Graphic';\nimport { TextureManager } from './texture-manager';\nimport { Poolable } from './pool';\n\nexport interface BatchOptions {\n  maxDrawsPerBatch: number;\n  maxTexturesPerBatch: number;\n}\n\nexport class Batch implements Poolable {\n  _poolId: number;\n  _free: boolean;\n\n  public textures: WebGLTexture[] = [];\n  public commands: DrawImageCommand[] = [];\n  private _graphicMap: { [id: string]: Graphic } = {};\n\n  constructor(public textureManager: TextureManager, public maxDraws: number, public maxTextures: number) {}\n\n  isFull() {\n    if (this.commands.length >= this.maxDraws) {\n      return true;\n    }\n    if (this.textures.length >= this.maxTextures) {\n      return true;\n    }\n    return false;\n  }\n\n  canAdd() {\n    if (this.commands.length >= this.maxDraws) {\n      return false;\n    }\n\n    // If num textures < maxTextures\n    if (this.textures.length < this.maxTextures) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private _isCommandFull() {\n    return this.commands.length >= this.maxDraws;\n  }\n\n  private _isTextureFull() {\n    return this.textures.length >= this.maxTextures;\n  }\n\n  private _wouldAddTexture(command: DrawImageCommand) {\n    return !this._graphicMap[command.image.id];\n  }\n\n  maybeAdd(command: DrawImageCommand): boolean {\n    if (this._isCommandFull() || (this._isTextureFull() && this._wouldAddTexture(command))) {\n      return false;\n    }\n\n    this.add(command);\n    return true;\n  }\n\n  add(command: DrawImageCommand) {\n    if (!this._graphicMap[command.image.id]) {\n      this._graphicMap[command.image.id] = command.image;\n      if (this.textureManager.hasWebGLTexture(command.image)) {\n        this.textures.push(this.textureManager.getWebGLTexture(command.image));\n      }\n    }\n    this.commands.push(command);\n  }\n\n  bindTextures(gl: WebGLRenderingContext) {\n    // Bind textures in the correct order\n    for (let i = 0; i < this.maxTextures; i++) {\n      gl.activeTexture(gl.TEXTURE0 + i);\n      gl.bindTexture(gl.TEXTURE_2D, this.textures[i] || this.textures[0]);\n    }\n  }\n\n  _dispose() {\n    this.clear();\n  }\n\n  clear() {\n    this.commands.length = 0;\n    this.textures.length = 0;\n    this._graphicMap = {};\n  }\n}\n","import { Matrix } from '../../Math/matrix';\nimport { Graphic } from '../Graphic';\nimport { Poolable } from './pool';\n\nexport interface DrawCommand {\n  image: Graphic;\n  width: number;\n  height: number;\n  dest: [number, number]; // x, y\n}\n\nexport class DrawImageCommand implements DrawCommand, Poolable {\n  _poolId: number;\n  _free: boolean;\n\n  public image: Graphic;\n  public opacity: number = 1;\n  public z: number = 0;\n  public width: number = 0;\n  public height: number = 0;\n  public dest: [number, number] = [0, 0]; // x, y\n  public view: [number, number, number, number] = [0, 0, 0, 0]; // sx, sy, sw, sh\n  private _geom: [number, number][] = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n    [0, 0],\n    [0, 0],\n    [0, 0]\n  ];\n  constructor();\n  constructor(image: Graphic, x: number, y: number);\n  constructor(image: Graphic, x: number, y: number, width?: number, height?: number);\n  constructor(\n    image: Graphic,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  );\n  constructor(\n    image?: Graphic,\n    sx?: number,\n    sy?: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ) {\n    this.init(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n  }\n\n  public init(\n    image?: Graphic,\n    sx?: number,\n    sy?: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ) {\n    this.image = image;\n    this.width = image?.width || swidth || 0;\n    this.height = image?.height || sheight || 0;\n    this.view = [0, 0, swidth ?? image?.width, sheight ?? image?.height];\n    this.dest = [sx, sy];\n    // If destination is specified, update view and dest\n    if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\n      this.view = [sx, sy, swidth ?? image?.width, sheight ?? image?.height];\n      this.dest = [dx, dy];\n      this.width = dwidth;\n      this.height = dheight;\n    }\n\n    let index = 0;\n    this._geom[index++] = [this.dest[0], this.dest[1]];\n    this._geom[index++] = [this.dest[0], this.dest[1] + this.height];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1]];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1]];\n    this._geom[index++] = [this.dest[0], this.dest[1] + this.height];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1] + this.height];\n    return this;\n  }\n\n  public _dispose() {\n    this.image = null;\n    this.width = 0;\n    this.height = 0;\n    this.view = [0, 0, 0, 0];\n    this.dest = [0, 0];\n\n    let index = 0;\n    this._geom[index++] = [this.dest[0], this.dest[1]];\n    this._geom[index++] = [this.dest[0], this.dest[1] + this.height];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1]];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1]];\n    this._geom[index++] = [this.dest[0], this.dest[1] + this.height];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1] + this.height];\n  }\n\n  // todo weird\n  applyTransform(transform: Matrix, opacity: number, z: number): void {\n    if (transform) {\n      for (let i = 0; i < this._geom.length; i++) {\n        this._geom[i] = transform.multv(this._geom[i]);\n      }\n    }\n    this.opacity = opacity;\n    this.z = z;\n  }\n\n  public get geometry() {\n    return this._geom;\n  }\n}\n\nexport class DrawRectCommand {\n  public dest: [number, number] = [0, 0];\n  public width: number = 0;\n  public height: number = 0;\n  constructor(x: number, y: number, width: number, height: number) {\n    this.dest = [x, y];\n    this.width = width;\n    this.height = height;\n  }\n}\n","import { ExcaliburGraphicsContextWebGL } from './ExcaliburGraphicsContextWebGL';\nimport { Graphic } from '../Graphic';\nimport { Raster } from '../Raster';\nimport { ImageSource } from './ExcaliburGraphicsContext';\nimport { ensurePowerOfTwo, isPowerOfTwo } from './webgl-util';\n\n/**\n * Manages loading and unloading webgl textures from [[Graphic|graphics]]\n */\nexport class TextureManager {\n  private _exgl: ExcaliburGraphicsContextWebGL;\n  private _graphicTexture: { [graphicId: number]: WebGLTexture } = {};\n  private _potCanvas: HTMLCanvasElement;\n  private _potCtx: CanvasRenderingContext2D;\n  constructor(context: ExcaliburGraphicsContextWebGL) {\n    this._exgl = context;\n    this._potCanvas = document.createElement('canvas');\n    this._potCtx = this._potCanvas.getContext('2d');\n  }\n\n  hasWebGLTexture(graphic: Graphic) {\n    return !!this._graphicTexture[graphic.id];\n  }\n\n  getWebGLTexture(graphic: Graphic): WebGLTexture | null {\n    return this._graphicTexture[graphic.id];\n  }\n\n  updateFromGraphic(graphic: Graphic): void {\n    const gl = this._exgl.__gl as WebGLRenderingContext;\n\n    if (graphic.width <= 0 || graphic.height <= 0) {\n      // exit early on invalid graphic\n      return;\n    }\n\n    let glTex: WebGLTexture;\n    if (this.hasWebGLTexture(graphic)) {\n      // TODO this is gross\n      if (graphic instanceof Raster && graphic._flagTextureDirty) {\n        graphic._flagTextureDirty = false;\n        gl.bindTexture(gl.TEXTURE_2D, graphic.__glTexture);\n        const source = this._ensurePowerOfTwoImage(graphic.getSource());\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\n      }\n\n      // If the webgltexture exists exit early to avoid re-shipping bytes to the gpu\n      return;\n    } else {\n      glTex = graphic.__glTexture = gl.createTexture();\n    }\n\n    const source = this._ensurePowerOfTwoImage(graphic.getSource());\n\n    gl.bindTexture(gl.TEXTURE_2D, glTex);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    // NEAREST for pixels\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\n\n    this._graphicTexture[graphic.id] = glTex;\n  }\n\n  /**\n   * WebGL only supports POT images\n   * https://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support\n   * @param image\n   */\n  private _ensurePowerOfTwoImage(image: ImageSource): ImageSource {\n    if (!isPowerOfTwo(image.width) || !isPowerOfTwo(image.height)) {\n      // Scale up the texture to the next highest power of two dimensions.\n\n      this._potCanvas.width = ensurePowerOfTwo(image.width);\n      this._potCanvas.height = ensurePowerOfTwo(image.height);\n      this._potCtx.clearRect(0, 0, this._potCanvas.width, this._potCanvas.height);\n      this._potCtx.imageSmoothingEnabled = false;\n      this._potCtx.drawImage(image, 0, 0, image.width, image.height);\n      image = this._potCanvas;\n    }\n    return image;\n  }\n}\n","export interface Poolable {\n  _poolId: number;\n  _free: boolean;\n  _dispose(): void;\n}\n\nexport type FactoryFunc<T> = () => T;\n\nexport class Pool<T extends Poolable> {\n  private _pool: T[] = [];\n  private _freeIds: number[] = [];\n\n  constructor(public objectFactory: FactoryFunc<T>, preAllocate: number = 100) {\n    this.allocate(preAllocate);\n  }\n\n  public allocate(number: number) {\n    for (let i = this._pool.length; i < number; i++) {\n      this._pool.push(this.objectFactory());\n      this._pool[i]._poolId = i;\n      this._pool[i]._free = true;\n      this._freeIds.push(i);\n    }\n  }\n\n  public get(): T {\n    if (this._freeIds.length === 0) {\n      console.log('Pool empty: allocating more doubling');\n      this.allocate(this._pool.length);\n    }\n    const id = this._freeIds.pop();\n    const thing = this._pool[id];\n    if (thing._poolId !== id) {\n      throw new Error('pool corrupt');\n    }\n    thing._free = false;\n    return thing;\n  }\n  public free(thing: T) {\n    thing._dispose();\n    thing._free = true;\n    this._freeIds.push(thing._poolId);\n  }\n}\n","import { ExcaliburGraphicsContext, ExcaliburContextDiagnostics } from './ExcaliburGraphicsContext';\nimport { Matrix } from '../../Math/matrix';\nimport { Shader } from './shader';\nimport { MatrixStack } from './matrix-stack';\nimport { Batch } from './batch';\nimport { DrawImageCommand } from './command';\nimport { TextureManager } from './texture-manager';\nimport { Graphic } from '../Graphic';\nimport { Vector } from '../../Algebra';\nimport { Color } from '../../Drawing/Color';\nimport { ensurePowerOfTwo } from './webgl-util';\nimport { StateStack } from './state-stack';\nimport { Pool } from './pool';\nimport { Logger } from '../../Util/Log';\n\nexport class ExcaliburGraphicsContextWebGL implements ExcaliburGraphicsContext {\n  /**\n   * Meant for internal use only. Access the internal context at your own risk\n   * @internal\n   */\n  public __gl: WebGLRenderingContext;\n  private _textureManager = new TextureManager(this);\n  private _stack = new MatrixStack();\n  private _state = new StateStack();\n  private _ortho!: Matrix;\n\n  private _vertBuffer: WebGLBuffer | null = null;\n  /**\n   * The _verts are a packed [x, y, u, v, texId]\n   */\n  private _verts: Float32Array;\n\n  private _shader!: Shader;\n\n  private _maxDrawingsPerBatch: number = 2000;\n\n  // 8 is the minimum defined in the spec\n  private _shaderTextureMax: number = 8;\n  private _batches: Batch[] = [];\n\n  private _commandPool: Pool<DrawImageCommand>;\n  private _batchPool: Pool<Batch>;\n\n  // TODO\n  public snapToPixel: boolean = true;\n\n  public backgroundColor: Color = Color.ExcaliburBlue;\n\n  public get opacity(): number {\n    return this._state.current.opacity;\n  }\n\n  public set opacity(value: number) {\n    this._state.current.opacity = value;\n  }\n\n  public get z(): number {\n    return this._state.current.z;\n  }\n\n  public set z(value: number) {\n    this._state.current.z = value;\n  }\n\n  public get width() {\n    return this.__gl.canvas.width;\n  }\n\n  public get height() {\n    return this.__gl.canvas.height;\n  }\n\n  // TODO should this be a canvas element? or a better abstraction\n  constructor(_ctx: WebGLRenderingContext) {\n    this.__gl = _ctx;\n    const vertexSize = 6 * 7; // 6 verts per quad, 7 pieces of float data\n    this._verts = new Float32Array(vertexSize * this._maxDrawingsPerBatch);\n    this._init();\n  }\n\n  private _init() {\n    const gl = this.__gl;\n\n    this._shaderTextureMax = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n    console.log(`Max textures[${this._shaderTextureMax}]`);\n\n    this._commandPool = new Pool<DrawImageCommand>(() => new DrawImageCommand(), this._maxDrawingsPerBatch);\n    this._batchPool = new Pool<Batch>(() => new Batch(this._textureManager, this._maxDrawingsPerBatch, this._shaderTextureMax));\n\n    const shader = (this._shader = new Shader(this._shaderTextureMax));\n    const program = shader.compile(gl);\n\n    // TODO is viewport automagic?\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n    // TODO make a parameter\n    // TODO make a function\n    gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // gl.enable(gl.CULL_FACE);\n\n    // gl.disable(gl.DEPTH_TEST);\n\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    // Tell WebGL to use our shader program pair\n    gl.useProgram(program);\n\n    this._ortho = Matrix.ortho(0, gl.canvas.width, gl.canvas.height, 0, 400, -400);\n\n    // https://groups.google.com/forum/#!topic/webgl-dev-list/vMNXSNRAg8M\n    this._vertBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._vertBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this._verts, gl.DYNAMIC_DRAW);\n\n    const vertexSize = 3 * 4; // [x, y, z]\n    const uvSize = 2 * 4; // [u, v]\n    const textureIndexSize = 1 * 4; // [textureId]\n    const opacitySize = 1 * 4; // [opacity]\n    // 28 bytes per coordinate\n\n    const totalCoordSize = vertexSize + textureIndexSize + uvSize + opacitySize;\n\n    gl.vertexAttribPointer(shader.positionLocation, 3, gl.FLOAT, false, totalCoordSize, 0);\n    gl.enableVertexAttribArray(shader.positionLocation);\n\n    gl.vertexAttribPointer(shader.texcoordLocation, 2, gl.FLOAT, false, totalCoordSize, vertexSize);\n    gl.enableVertexAttribArray(shader.texcoordLocation);\n\n    gl.vertexAttribPointer(shader.textureIndexLocation, 1, gl.FLOAT, false, totalCoordSize, vertexSize + uvSize);\n    gl.enableVertexAttribArray(shader.textureIndexLocation);\n\n    gl.vertexAttribPointer(shader.opacityLocation, 1, gl.FLOAT, false, totalCoordSize, vertexSize + uvSize + textureIndexSize);\n    gl.enableVertexAttribArray(shader.opacityLocation);\n\n    // Orthographic projection for the viewport\n    gl.uniformMatrix4fv(shader.matrixUniform, false, this._ortho.data);\n\n    const texturesData = [];\n    for (let i = 0; i < this._shaderTextureMax; i++) {\n      texturesData[i] = i;\n    }\n    gl.uniform1iv(shader.texturesUniform, texturesData);\n\n    // Orthographic projection for the viewport\n    const mat = this._ortho;\n    gl.uniformMatrix4fv(this._shader.matrixUniform, false, mat.data);\n  }\n\n  drawImage(graphic: Graphic, x: number, y: number): void;\n  drawImage(graphic: Graphic, x: number, y: number, width: number, height: number): void;\n  drawImage(\n    graphic: Graphic,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ): void;\n  drawImage(\n    graphic: Graphic,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ): void {\n    if (!graphic) {\n      Logger.getInstance().warn('Cannot draw a null or undefined image');\n      // tslint:disable-next-line: no-console\n      if (console.trace) {\n        // tslint:disable-next-line: no-console\n        console.trace();\n      }\n      return;\n    }\n    this._textureManager.updateFromGraphic(graphic);\n    const command = this._commandPool.get().init(graphic, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n    command.applyTransform(this._stack.transform, this._state.current.opacity, this._state.current.z);\n\n    if (this._batches.length === 0) {\n      this._batches.push(this._batchPool.get());\n    }\n\n    let lastBatch = this._batches[this._batches.length - 1];\n    let added = lastBatch.maybeAdd(command);\n    if (!added) {\n      const newBatch = this._batchPool.get();\n      newBatch.add(command);\n      this._batches.push(newBatch);\n    }\n  }\n\n  _updateVertexBufferData(batch: Batch): void {\n    let vertIndex = 0;\n    // const vertexSize = 6 * 7; // 6 vertices * (x, y, z, u, v, textureId, opacity)\n    let x: number = 0;\n    let y: number = 0;\n    let sx: number = 0;\n    let sy: number = 0;\n    let sw: number = 0;\n    let sh: number = 0;\n    let potWidth: number = 0;\n    let potHeight: number = 0;\n    let textureId = 0;\n    for (let command of batch.commands) {\n      x = command.dest[0];\n      y = command.dest[1];\n      sx = command.view[0];\n      sy = command.view[1];\n      sw = command.view[2];\n      sh = command.view[3];\n\n      potWidth = ensurePowerOfTwo(command.image.getSource().width || command.width);\n      potHeight = ensurePowerOfTwo(command.image.getSource().height || command.height);\n\n      // TODO should this be handled by the batch\n      if (this._textureManager.hasWebGLTexture(command.image)) {\n        textureId = batch.textures.indexOf(this._textureManager.getWebGLTexture(command.image));\n      }\n      if (this.snapToPixel) {\n        // quick bitwise truncate\n        x = ~~x;\n        y = ~~y;\n      }\n      // potential optimization when divding by 2 (bitshift)\n      // TODO we need to validate drawImage before we get here with an error :O\n\n      // Modifying the images to poweroftwo images warp the UV coordinates\n      let uvx0 = sx / potWidth;\n      let uvy0 = sy / potHeight;\n      let uvx1 = (sx + sw) / potWidth;\n      let uvy1 = (sy + sh) / potHeight;\n\n      // Quad update\n      // (0, 0, z)\n      this._verts[vertIndex++] = command.geometry[0][0]; // x + 0 * width;\n      this._verts[vertIndex++] = command.geometry[0][1]; //y + 0 * height;\n      this._verts[vertIndex++] = command.z;\n\n      // UV coords\n      this._verts[vertIndex++] = uvx0; // 0;\n      this._verts[vertIndex++] = uvy0; // 0;\n      // texture id\n      this._verts[vertIndex++] = textureId;\n      // opacity\n      this._verts[vertIndex++] = command.opacity;\n\n      // (0, 1)\n      this._verts[vertIndex++] = command.geometry[1][0]; // x + 0 * width;\n      this._verts[vertIndex++] = command.geometry[1][1]; // y + 1 * height;\n      this._verts[vertIndex++] = command.z;\n\n      // UV coords\n      this._verts[vertIndex++] = uvx0; // 0;\n      this._verts[vertIndex++] = uvy1; // 1;\n      // texture id\n      this._verts[vertIndex++] = textureId;\n      // opacity\n      this._verts[vertIndex++] = command.opacity;\n\n      // (1, 0)\n      this._verts[vertIndex++] = command.geometry[2][0]; // x + 1 * width;\n      this._verts[vertIndex++] = command.geometry[2][1]; // y + 0 * height;\n      this._verts[vertIndex++] = command.z;\n\n      // UV coords\n      this._verts[vertIndex++] = uvx1; //1;\n      this._verts[vertIndex++] = uvy0; //0;\n      // texture id\n      this._verts[vertIndex++] = textureId;\n      // opacity\n      this._verts[vertIndex++] = command.opacity;\n\n      // (1, 0)\n      this._verts[vertIndex++] = command.geometry[3][0]; // x + 1 * width;\n      this._verts[vertIndex++] = command.geometry[3][1]; // y + 0 * height;\n      this._verts[vertIndex++] = command.z;\n\n      // UV coords\n      this._verts[vertIndex++] = uvx1; //1;\n      this._verts[vertIndex++] = uvy0; //0;\n      // texture id\n      this._verts[vertIndex++] = textureId;\n      // opacity\n      this._verts[vertIndex++] = command.opacity;\n\n      // (0, 1)\n      this._verts[vertIndex++] = command.geometry[4][0]; // x + 0 * width;\n      this._verts[vertIndex++] = command.geometry[4][1]; // y + 1 * height\n      this._verts[vertIndex++] = command.z;\n\n      // UV coords\n      this._verts[vertIndex++] = uvx0; // 0;\n      this._verts[vertIndex++] = uvy1; // 1;\n      // texture id\n      this._verts[vertIndex++] = textureId;\n      // opacity\n      this._verts[vertIndex++] = command.opacity;\n\n      // (1, 1)\n      this._verts[vertIndex++] = command.geometry[5][0]; // x + 1 * width;\n      this._verts[vertIndex++] = command.geometry[5][1]; // y + 1 * height;\n      this._verts[vertIndex++] = command.z;\n\n      // UV coords\n      this._verts[vertIndex++] = uvx1; // 1;\n      this._verts[vertIndex++] = uvy1; // 1;\n      // texture id\n      this._verts[vertIndex++] = textureId;\n      // opacity\n      this._verts[vertIndex++] = command.opacity;\n    }\n  }\n\n  private _diag: ExcaliburContextDiagnostics = {\n    images: 0,\n    batches: 0,\n    uniqueTextures: 0,\n    maxTexturePerDraw: this._shaderTextureMax\n  };\n\n  public get diag(): ExcaliburContextDiagnostics {\n    return this._diag;\n  }\n\n  public save(): void {\n    this._stack.save();\n    this._state.save();\n  }\n\n  public restore(): void {\n    this._stack.restore();\n    this._state.restore();\n  }\n\n  public translate(x: number, y: number): void {\n    this._stack.translate(x, y);\n  }\n\n  public rotate(angle: number): void {\n    this._stack.rotate(angle);\n  }\n\n  public scale(x: number, y: number): void {\n    this._stack.scale(x, y);\n  }\n\n  public transform(matrix: Matrix) {\n    this._stack.transform = matrix;\n  }\n\n  clear() {\n    const gl = this.__gl;\n    gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\n    // Clear the context with the newly set color. This is\n    // the function call that actually does the drawing.\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  flush() {\n    const gl = this.__gl;\n    this._diag.images = 0;\n    this._diag.uniqueTextures = 0;\n    this._diag.batches = 0;\n    this._diag.maxTexturePerDraw = this._shaderTextureMax;\n\n    this.clear();\n\n    for (let batch of this._batches) {\n      // 6 vertices per quad\n      const vertexCount = 6 * batch.commands.length;\n      // Build all geometry and ship to GPU\n      this._updateVertexBufferData(batch);\n\n      // interleave VBOs https://goharsha.com/lwjgl-tutorial-series/interleaving-buffer-objects/\n      gl.bindBuffer(gl.ARRAY_BUFFER, this._vertBuffer);\n      gl.bufferSubData(gl.ARRAY_BUFFER, 0, this._verts);\n\n      // Bind textures in the correct order\n      batch.bindTextures(gl);\n\n      // draw the quads\n      gl.drawArrays(gl.TRIANGLES, 0, vertexCount);\n\n      this._diag.images += batch.commands.length;\n      this._diag.uniqueTextures += batch.textures.length;\n\n      for (let c of batch.commands) {\n        this._commandPool.free(c);\n      }\n      this._batchPool.free(batch);\n    }\n\n    this._diag.batches = this._batches.length;\n    this._batches.length = 0;\n  }\n\n  /**\n   * Draw a debug rectangle to the context\n   * @param x\n   * @param y\n   * @param width\n   * @param height\n   */\n  drawDebugRect(_x: number, _y: number, _width: number, _height: number): void {\n    // TODO\n  }\n\n  drawDebugLine(_start: Vector, _end: Vector): void {\n    // TODO\n  }\n}\n","// Graphics\nexport * from './Graphic';\nexport * from './Sprite';\nexport * from './SpriteSheet';\nexport * from './GraphicsComponent';\nexport * from './GraphicsGroup';\nexport * from './RawImage';\nexport * from './Animation';\n\n// Raster graphics\nexport * from './Raster';\nexport * from './Circle';\nexport * from './Rect';\nexport * from './Polygon';\nexport * from './Text';\nexport * from './Font';\n\nexport * from './Context/ExcaliburGraphicsContext';\nexport * from './Context/ExcaliburGraphicsContext2DCanvas';\nexport * from './Context/ExcaliburGraphicsContextWebGL';\n","import { BoundingBox } from './Collision/BoundingBox';\nimport { Color } from './Drawing/Color';\nimport { Class } from './Class';\nimport { Engine } from './Engine';\nimport { Vector, vec } from './Algebra';\nimport { Actor } from './Actor';\nimport { Logger } from './Util/Log';\nimport { SpriteSheet } from './Drawing/SpriteSheet';\nimport * as Events from './Events';\nimport { Configurable } from './Configurable';\nimport { GraphicsComponent, ExcaliburGraphicsContext } from './Graphics';\nimport { Entity } from './Entity';\nimport { TransformComponent } from './Transform';\n\n/**\n * @hidden\n */\nexport class TileMapImpl extends Class {\n  private _collidingX: number = -1;\n  private _collidingY: number = -1;\n  private _onScreenXStart: number = 0;\n  private _onScreenXEnd: number = 9999;\n  private _onScreenYStart: number = 0;\n  private _onScreenYEnd: number = 9999;\n  private _spriteSheets: { [key: string]: SpriteSheet } = {};\n  public logger: Logger = Logger.getInstance();\n  public data: Cell[] = [];\n  public x: number;\n  public y: number;\n  public cellWidth: number;\n  public cellHeight: number;\n  public rows: number;\n  public cols: number;\n\n  public on(eventName: Events.preupdate, handler: (event: Events.PreUpdateEvent) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: Events.PostUpdateEvent) => void): void;\n  public on(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n  public on(eventName: string, handler: (event: Events.GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  /**\n   * @param x             The x coordinate to anchor the TileMap's upper left corner (should not be changed once set)\n   * @param y             The y coordinate to anchor the TileMap's upper left corner (should not be changed once set)\n   * @param cellWidth     The individual width of each cell (in pixels) (should not be changed once set)\n   * @param cellHeight    The individual height of each cell (in pixels) (should not be changed once set)\n   * @param rows          The number of rows in the TileMap (should not be changed once set)\n   * @param cols          The number of cols in the TileMap (should not be changed once set)\n   */\n  constructor(xOrConfig: number | TileMapArgs, y: number, cellWidth: number, cellHeight: number, rows: number, cols: number) {\n    super();\n    if (xOrConfig && typeof xOrConfig === 'object') {\n      const config = xOrConfig;\n      xOrConfig = config.x;\n      y = config.y;\n      cellWidth = config.cellWidth;\n      cellHeight = config.cellHeight;\n      rows = config.rows;\n      cols = config.cols;\n    }\n    this.x = <number>xOrConfig;\n    this.y = y;\n    this.cellWidth = cellWidth;\n    this.cellHeight = cellHeight;\n    this.rows = rows;\n    this.cols = cols;\n    this.data = new Array<Cell>(rows * cols);\n    for (let i = 0; i < cols; i++) {\n      for (let j = 0; j < rows; j++) {\n        (() => {\n          const cd = new Cell(i * cellWidth + <number>xOrConfig, j * cellHeight + y, cellWidth, cellHeight, i + j * cols, false, [], this);\n          this.data[i + j * cols] = cd;\n        })();\n      }\n    }\n  }\n\n  public registerSpriteSheet(key: string, spriteSheet: SpriteSheet) {\n    this._spriteSheets[key] = spriteSheet;\n  }\n  /**\n   * Returns the intersection vector that can be used to resolve collisions with actors. If there\n   * is no collision null is returned.\n   */\n  public collides(actor: Actor): Vector {\n    const width = actor.pos.x + actor.width;\n    const height = actor.pos.y + actor.height;\n    const actorBounds = actor.body.collider.bounds;\n    const overlaps: Vector[] = [];\n    if (actor.width <= 0 || actor.height <= 0) {\n      return null;\n    }\n    // trace points for overlap\n    for (let x = actorBounds.left; x <= width; x += Math.min(actor.width / 2, this.cellWidth / 2)) {\n      for (let y = actorBounds.top; y <= height; y += Math.min(actor.height / 2, this.cellHeight / 2)) {\n        const cell = this.getCellByPoint(x, y);\n        if (cell && cell.solid) {\n          const overlap = actorBounds.intersect(cell.bounds);\n          const dir = actor.center.sub(cell.center);\n          if (overlap && overlap.dot(dir) > 0) {\n            overlaps.push(overlap);\n          }\n        }\n      }\n    }\n    if (overlaps.length === 0) {\n      return null;\n    }\n    // Return the smallest change other than zero\n    const result = overlaps.reduce((accum, next) => {\n      let x = accum.x;\n      let y = accum.y;\n      if (Math.abs(accum.x) < Math.abs(next.x)) {\n        x = next.x;\n      }\n      if (Math.abs(accum.y) < Math.abs(next.y)) {\n        y = next.y;\n      }\n      return new Vector(x, y);\n    });\n    return result;\n  }\n\n  /**\n   * Returns the [[Cell]] by index (row major order)\n   */\n  public getCellByIndex(index: number): Cell {\n    return this.data[index];\n  }\n  /**\n   * Returns the [[Cell]] by its x and y coordinates\n   */\n  public getCell(x: number, y: number): Cell {\n    if (x < 0 || y < 0 || x >= this.cols || y >= this.rows) {\n      return null;\n    }\n    return this.data[x + y * this.cols];\n  }\n\n  public getCellsOnScreen(): Cell[] {\n    let x = this._onScreenXStart;\n    const xEnd = Math.min(this._onScreenXEnd, this.cols);\n    let y = this._onScreenYStart;\n    const yEnd = Math.min(this._onScreenYEnd, this.rows);\n\n    let cells: Cell[] = [];\n    for (x; x < xEnd; x++) {\n      for (y; y < yEnd; y++) {\n        let cell = this.getCell(x, y);\n        if (cell && cell.graphics.current) {\n          cells.push(cell);\n        }\n      }\n      y = this._onScreenYStart;\n    }\n    return cells;\n  }\n\n  /**\n   * Returns the [[Cell]] by testing a point in global coordinates,\n   * returns `null` if no cell was found.\n   */\n  public getCellByPoint(x: number, y: number): Cell {\n    x = Math.floor((x - this.x) / this.cellWidth);\n    y = Math.floor((y - this.y) / this.cellHeight);\n    const cell = this.getCell(x, y);\n    if (x >= 0 && y >= 0 && x < this.cols && y < this.rows && cell) {\n      return cell;\n    }\n    return null;\n  }\n\n  public update(engine: Engine, delta: number) {\n    this.emit('preupdate', new Events.PreUpdateEvent(engine, delta, this));\n\n    const worldCoordsUpperLeft = engine.screenToWorldCoordinates(new Vector(0, 0));\n    const worldCoordsLowerRight = engine.screenToWorldCoordinates(new Vector(engine.canvas.clientWidth, engine.canvas.clientHeight));\n\n    this._onScreenXStart = Math.max(Math.floor((worldCoordsUpperLeft.x - this.x) / this.cellWidth) - 2, 0);\n    this._onScreenYStart = Math.max(Math.floor((worldCoordsUpperLeft.y - this.y) / this.cellHeight) - 2, 0);\n    this._onScreenXEnd = Math.max(Math.floor((worldCoordsLowerRight.x - this.x) / this.cellWidth) + 2, 0);\n    this._onScreenYEnd = Math.max(Math.floor((worldCoordsLowerRight.y - this.y) / this.cellHeight) + 2, 0);\n\n    this.emit('postupdate', new Events.PostUpdateEvent(engine, delta, this));\n  }\n\n  public _newdraw(ctx: ExcaliburGraphicsContext, _delta: number) {\n    ctx.save();\n    ctx.translate(this.x, this.y);\n\n    let x = this._onScreenXStart;\n    const xEnd = Math.min(this._onScreenXEnd, this.cols);\n    let y = this._onScreenYStart;\n    const yEnd = Math.min(this._onScreenYEnd, this.rows);\n\n    for (x; x < xEnd; x++) {\n      for (y; y < yEnd; y++) {\n        this.getCell(x, y)?.graphics.draw(ctx, x * this.cellWidth, y * this.cellHeight);\n      }\n      y = this._onScreenYStart;\n    }\n    ctx.restore();\n  }\n\n  /**\n   * Draws the tile map to the screen. Called by the [[Scene]].\n   * @param ctx    The current rendering context\n   * @param delta  The number of milliseconds since the last draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    this.emit('predraw', new Events.PreDrawEvent(ctx, delta, this));\n\n    ctx.save();\n    ctx.translate(this.x, this.y);\n\n    let x = this._onScreenXStart;\n    const xEnd = Math.min(this._onScreenXEnd, this.cols);\n    let y = this._onScreenYStart;\n    const yEnd = Math.min(this._onScreenYEnd, this.rows);\n\n    let cs: TileSprite[], csi: number, cslen: number;\n\n    for (x; x < xEnd; x++) {\n      for (y; y < yEnd; y++) {\n        // get non-negative tile sprites\n        cs = this.getCell(x, y).sprites.filter((s) => {\n          return s.spriteId > -1;\n        });\n\n        for (csi = 0, cslen = cs.length; csi < cslen; csi++) {\n          const ss = this._spriteSheets[cs[csi].spriteSheetKey];\n\n          // draw sprite, warning if sprite doesn't exist\n          if (ss) {\n            const sprite = ss.getSprite(cs[csi].spriteId);\n            if (sprite) {\n              sprite.draw(ctx, x * this.cellWidth, y * this.cellHeight);\n            } else {\n              this.logger.warn('Sprite does not exist for id', cs[csi].spriteId, 'in sprite sheet', cs[csi].spriteSheetKey, sprite, ss);\n            }\n          } else {\n            this.logger.warn('Sprite sheet', cs[csi].spriteSheetKey, 'does not exist', ss);\n          }\n        }\n      }\n      y = this._onScreenYStart;\n    }\n    ctx.restore();\n\n    this.emit('postdraw', new Events.PostDrawEvent(ctx, delta, this));\n  }\n\n  /**\n   * Draws all the tile map's debug info. Called by the [[Scene]].\n   * @param ctx  The current rendering context\n   */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    const width = this.cols * this.cellWidth;\n    const height = this.rows * this.cellHeight;\n    ctx.save();\n    ctx.strokeStyle = Color.Red.toString();\n    for (let x = 0; x < this.cols + 1; x++) {\n      ctx.beginPath();\n      ctx.moveTo(this.x + x * this.cellWidth, this.y);\n      ctx.lineTo(this.x + x * this.cellWidth, this.y + height);\n      ctx.stroke();\n    }\n    for (let y = 0; y < this.rows + 1; y++) {\n      ctx.beginPath();\n      ctx.moveTo(this.x, this.y + y * this.cellHeight);\n      ctx.lineTo(this.x + width, this.y + y * this.cellHeight);\n      ctx.stroke();\n    }\n    const solid = Color.Red;\n    solid.a = 0.3;\n    this.data\n      .filter(function (cell) {\n        return cell.solid;\n      })\n      .forEach(function (cell) {\n        ctx.fillStyle = solid.toString();\n        ctx.fillRect(cell.x, cell.y, cell.width, cell.height);\n      });\n    if (this._collidingY > -1 && this._collidingX > -1) {\n      ctx.fillStyle = Color.Cyan.toString();\n      ctx.fillRect(\n        this.x + this._collidingX * this.cellWidth,\n        this.y + this._collidingY * this.cellHeight,\n        this.cellWidth,\n        this.cellHeight\n      );\n    }\n    ctx.restore();\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface TileMapArgs extends Partial<TileMapImpl> {\n  x: number;\n  y: number;\n  cellWidth: number;\n  cellHeight: number;\n  rows: number;\n  cols: number;\n}\n\n/**\n * The [[TileMap]] class provides a lightweight way to do large complex scenes with collision\n * without the overhead of actors.\n *\n * [[include:TileMaps.md]]\n */\nexport class TileMap extends Configurable(TileMapImpl) {\n  constructor(config: TileMapArgs);\n  constructor(x: number, y: number, cellWidth: number, cellHeight: number, rows: number, cols: number);\n  constructor(xOrConfig: number | TileMapArgs, y?: number, cellWidth?: number, cellHeight?: number, rows?: number, cols?: number) {\n    super(xOrConfig, y, cellWidth, cellHeight, rows, cols);\n  }\n}\n\n/**\n * Tile sprites are used to render a specific sprite from a [[TileMap]]'s spritesheet(s)\n */\nexport class TileSprite {\n  /**\n   * @param spriteSheetKey  The key of the spritesheet to use\n   * @param spriteId        The index of the sprite in the [[SpriteSheet]]\n   */\n  constructor(public spriteSheetKey: string, public spriteId: number) {}\n}\n\n/**\n * @hidden\n */\nexport class CellImpl extends Entity<TransformComponent | GraphicsComponent> {\n  private _bounds: BoundingBox;\n  public x: number;\n  public y: number;\n  public width: number;\n  public height: number;\n  public index: number;\n  public solid: boolean = false;\n  public sprites: TileSprite[] = [];\n  public graphics: GraphicsComponent = new GraphicsComponent();\n  public transform: TransformComponent;\n\n  /**\n   * @param x       Gets or sets x coordinate of the cell in world coordinates\n   * @param y       Gets or sets y coordinate of the cell in world coordinates\n   * @param width   Gets or sets the width of the cell\n   * @param height  Gets or sets the height of the cell\n   * @param index   The index of the cell in row major order\n   * @param solid   Gets or sets whether this cell is solid\n   * @param sprites The list of tile sprites to use to draw in this cell (in order)\n   */\n  constructor(\n    xOrConfig: number | CellArgs,\n    y: number,\n    width: number,\n    height: number,\n    index: number,\n    solid: boolean = false,\n    sprites: TileSprite[] = [],\n    _tilemap: TileMap\n  ) {\n    super();\n    if (xOrConfig && typeof xOrConfig === 'object') {\n      const config = xOrConfig;\n      xOrConfig = config.x;\n      y = config.y;\n      width = config.width;\n      height = config.height;\n      index = config.index;\n      solid = config.solid;\n      sprites = config.sprites;\n      _tilemap = config.tileMap;\n    }\n    this.x = <number>xOrConfig;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.index = index;\n    this.solid = solid;\n    this.sprites = sprites;\n    this.addComponent(this.graphics);\n    this.transform = new TransformComponent();\n    this.transform.pos = vec(this.x, this.y);\n    this.addComponent(this.transform);\n    this._bounds = new BoundingBox(this.x, this.y, this.x + this.width, this.y + this.height);\n  }\n\n  public get bounds() {\n    return this._bounds;\n  }\n\n  public get center(): Vector {\n    return new Vector(this.x + this.width / 2, this.y + this.height / 2);\n  }\n\n  /**\n   * Add another [[TileSprite]] to this cell\n   */\n  public pushSprite(tileSprite: TileSprite) {\n    this.sprites.push(tileSprite);\n  }\n  /**\n   * Remove an instance of [[TileSprite]] from this cell\n   */\n  public removeSprite(tileSprite: TileSprite) {\n    let index = -1;\n    if ((index = this.sprites.indexOf(tileSprite)) > -1) {\n      this.sprites.splice(index, 1);\n    }\n  }\n  /**\n   * Clear all sprites from this cell\n   */\n  public clearSprites() {\n    this.sprites.length = 0;\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface CellArgs extends Partial<CellImpl> {\n  tileMap: TileMap;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  index: number;\n  solid?: boolean;\n  sprites?: TileSprite[];\n}\n\n/**\n * TileMap Cell\n *\n * A light-weight object that occupies a space in a collision map. Generally\n * created by a [[TileMap]].\n *\n * Cells can draw multiple sprites. Note that the order of drawing is the order\n * of the sprites in the array so the last one will be drawn on top. You can\n * use transparency to create layers this way.\n */\nexport class Cell extends Configurable(CellImpl) {\n  constructor(config: CellArgs);\n  constructor(\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    index: number,\n    solid?: boolean,\n    sprites?: TileSprite[],\n    tileMap?: TileMap\n  );\n  constructor(\n    xOrConfig: number | CellArgs,\n    y?: number,\n    width?: number,\n    height?: number,\n    index?: number,\n    solid?: boolean,\n    sprites?: TileSprite[],\n    tileMap?: TileMap\n  ) {\n    super(xOrConfig, y, width, height, index, solid, sprites, tileMap);\n  }\n}\n","/**\n * Internal class used to build instances of AudioContext\n */\n/* istanbul ignore next */\nexport class AudioContextFactory {\n  private static _INSTANCE: AudioContext = null;\n\n  public static create(): AudioContext {\n    if (!this._INSTANCE) {\n      if ((<any>window).AudioContext || (<any>window).webkitAudioContext) {\n        this._INSTANCE = new (<any>window).AudioContext();\n      }\n    }\n\n    return this._INSTANCE;\n  }\n}\n","// Promises/A+ Spec http://promises-aplus.github.io/promises-spec/\n\n/**\n * Valid states for a promise to be in\n */\nexport enum PromiseState {\n  Resolved,\n  Rejected,\n  Pending\n}\n\nexport interface PromiseLike<T> {\n  then(successCallback?: (value?: T) => any, rejectCallback?: (value?: T) => any): PromiseLike<T>;\n  error(rejectCallback?: (value?: any) => any): PromiseLike<T>;\n\n  //Cannot define static methods on interfaces\n  //wrap<T>(value?: T): IPromise<T>;\n\n  resolve(value?: T): PromiseLike<T>;\n  reject(value?: any): PromiseLike<T>;\n\n  state(): PromiseState;\n}\n\n/**\n * Promises are used to do asynchronous work and they are useful for\n * creating a chain of actions. In Excalibur they are used for loading,\n * sounds, animation, actions, and more.\n *\n * [[include:Promises.md]]\n * @obsolete Use native promises in favor of Excalibur's promise implementation\n */\nexport class Promise<T> implements PromiseLike<T> {\n  private _state: PromiseState = PromiseState.Pending;\n  private _value: T;\n  private _successCallbacks: { (value?: T): any }[] = [];\n  private _rejectCallback: (value?: any) => any = () => {\n    return;\n  };\n  private _errorCallback: (value?: any) => any;\n\n  /**\n   * Create and resolve a Promise with an optional value\n   * @param value  An optional value to wrap in a resolved promise\n   */\n  public static resolve<T>(value?: T): Promise<T> {\n    const promise = new Promise<T>().resolve(value);\n\n    return promise;\n  }\n\n  /**\n   * Create and reject a Promise with an optional value\n   * @param value  An optional value to wrap in a rejected promise\n   */\n  public static reject<T>(value?: T): Promise<T> {\n    const promise = new Promise<T>().reject(value);\n\n    return promise;\n  }\n\n  /**\n   * Returns a new promise that resolves when all the promises passed to it resolve, or rejects\n   * when at least 1 promise rejects.\n   */\n  public static join<T>(promises: Promise<T>[]): Promise<T>;\n\n  /**\n   * Returns a new promise that resolves when all the promises passed to it resolve, or rejects\n   * when at least 1 promise rejects.\n   */\n  public static join<T>(...promises: Promise<T>[]): Promise<T>;\n\n  public static join<T>() {\n    let promises: Promise<T>[] = [];\n\n    if (arguments.length > 0 && !Array.isArray(arguments[0])) {\n      for (let _i = 0; _i < arguments.length; _i++) {\n        promises[_i - 0] = arguments[_i];\n      }\n    } else if (arguments.length === 1 && Array.isArray(arguments[0])) {\n      promises = arguments[0];\n    }\n\n    const joinedPromise = new Promise<T>();\n    if (!promises || !promises.length) {\n      return joinedPromise.resolve();\n    }\n\n    const total = promises.length;\n    let successes = 0;\n    let rejects = 0;\n    const errors: any = [];\n\n    promises.forEach((p) => {\n      p.then(\n        () => {\n          successes += 1;\n          if (successes === total) {\n            joinedPromise.resolve();\n          } else if (successes + rejects + errors.length === total) {\n            joinedPromise.reject(errors);\n          }\n        },\n        () => {\n          rejects += 1;\n          if (successes + rejects + errors.length === total) {\n            joinedPromise.reject(errors);\n          }\n        }\n      ).error((e) => {\n        errors.push(e);\n        if (errors.length + successes + rejects === total) {\n          joinedPromise.reject(errors);\n        }\n      });\n    });\n\n    return joinedPromise;\n  }\n\n  /**\n   * Chain success and reject callbacks after the promise is resolved\n   * @param successCallback  Call on resolution of promise\n   * @param rejectCallback   Call on rejection of promise\n   */\n  public then(successCallback?: (value?: T) => any, rejectCallback?: (value?: any) => any) {\n    if (successCallback) {\n      this._successCallbacks.push(successCallback);\n\n      // If the promise is already resovled call immediately\n      if (this.state() === PromiseState.Resolved) {\n        try {\n          successCallback.call(this, this._value);\n        } catch (e) {\n          this._handleError(e);\n        }\n      }\n    }\n    if (rejectCallback) {\n      this._rejectCallback = rejectCallback;\n\n      // If the promise is already rejected call immediately\n      if (this.state() === PromiseState.Rejected) {\n        try {\n          rejectCallback.call(this, this._value);\n        } catch (e) {\n          this._handleError(e);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Add an error callback to the promise\n   * @param errorCallback  Call if there was an error in a callback\n   */\n  public error(errorCallback?: (value?: any) => any) {\n    if (errorCallback) {\n      this._errorCallback = errorCallback;\n    }\n    return this;\n  }\n\n  /**\n   * Resolve the promise and pass an option value to the success callbacks\n   * @param value  Value to pass to the success callbacks\n   */\n  public resolve(value?: T): Promise<T> {\n    if (this._state === PromiseState.Pending) {\n      this._value = value;\n      try {\n        this._state = PromiseState.Resolved;\n        this._successCallbacks.forEach((cb) => {\n          cb.call(this, this._value);\n        });\n      } catch (e) {\n        this._handleError(e);\n      }\n    } else {\n      throw new Error('Cannot resolve a promise that is not in a pending state!');\n    }\n    return this;\n  }\n\n  /**\n   * Reject the promise and pass an option value to the reject callbacks\n   * @param value  Value to pass to the reject callbacks\n   */\n  public reject(value?: any) {\n    if (this._state === PromiseState.Pending) {\n      this._value = value;\n      try {\n        this._state = PromiseState.Rejected;\n        this._rejectCallback.call(this, this._value);\n      } catch (e) {\n        this._handleError(e);\n      }\n    } else {\n      throw new Error('Cannot reject a promise that is not in a pending state!');\n    }\n    return this;\n  }\n\n  /**\n   * Inspect the current state of a promise\n   */\n  public state(): PromiseState {\n    return this._state;\n  }\n\n  private _handleError(e: any) {\n    if (this._errorCallback) {\n      this._errorCallback.call(this, e);\n    } else {\n      // rethrow error\n      throw e;\n    }\n  }\n}\n","import { AudioContextFactory } from '../Resources/Sound/AudioContext';\nimport { Promise, PromiseState } from '../Promises';\nimport { Logger } from './Log';\n\nexport interface LegacyWebAudioSource {\n  playbackState: string;\n  PLAYING_STATE: 'playing';\n  FINISHED_STATE: 'finished';\n}\n\nfunction isLegacyWebAudioSource(source: any): source is LegacyWebAudioSource {\n  return !!source.playbackState;\n}\n\nexport class WebAudio {\n  private static _unlocked: boolean = false;\n\n  /**\n   * Play an empty sound to unlock Safari WebAudio context. Call this function\n   * right after a user interaction event.\n   * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n   */\n  static unlock(): Promise<boolean> {\n    const promise = new Promise<boolean>();\n    if (WebAudio._unlocked || !AudioContextFactory.create()) {\n      return promise.resolve(true);\n    }\n    const unlockTimeoutTimer = setTimeout(() => {\n      Logger.getInstance().warn('Excalibur was unable to unlock the audio context, audio probably will not play in this browser.');\n      promise.resolve();\n    }, 200);\n    const audioContext = AudioContextFactory.create();\n    audioContext.resume().then(\n      () => {\n        // create empty buffer and play it\n        const buffer = audioContext.createBuffer(1, 1, 22050);\n        const source = audioContext.createBufferSource();\n        let ended = false;\n\n        source.buffer = buffer;\n        source.connect(audioContext.destination);\n        source.onended = () => (ended = true);\n\n        if ((<any>source).noteOn) {\n          // deprecated\n          (<any>source).noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // by checking the play state after some time, we know if we're really unlocked\n        setTimeout(() => {\n          if (isLegacyWebAudioSource(source)) {\n            if (source.playbackState === source.PLAYING_STATE || source.playbackState === source.FINISHED_STATE) {\n              WebAudio._unlocked = true;\n            }\n          } else {\n            if (audioContext.currentTime > 0 || ended) {\n              WebAudio._unlocked = true;\n            }\n          }\n        }, 0);\n\n        clearTimeout(unlockTimeoutTimer);\n        if (promise.state() === PromiseState.Pending) {\n          promise.resolve();\n        }\n      },\n      () => {\n        if (promise.state() === PromiseState.Pending) {\n          promise.reject(false);\n        }\n      }\n    );\n\n    return promise;\n  }\n\n  static isUnlocked() {\n    return this._unlocked;\n  }\n}\n","import { GraphicOptions } from './Graphic';\nimport { Raster } from './Raster';\n\nexport interface CanvasOptions {\n  drawHandler: (ctx: CanvasRenderingContext2D, delta: number) => void;\n}\n\n/**\n * A canvas [[Graphic]] to provide an adapter between the 2D Canvas API and the [[ExcaliburGraphicsContext]].\n *\n * The [[Canvas]] works by re-rastering a draw handler to a HTMLCanvasElement for every draw which is then passed\n * to the [[ExcaliburGraphicsContext]] implementation as a rendered image.\n *\n * **Low performance API**\n */\nexport class Canvas extends Raster {\n  constructor(private _options: GraphicOptions & CanvasOptions) {\n    super(_options);\n  }\n\n  public clone(): Canvas {\n    return new Canvas({\n      ...this._options,\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions()\n    });\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    this._options.drawHandler(ctx, 0);\n    this.flagDirty();\n  }\n}\n","import { Color } from './Drawing/Color';\nimport { WebAudio } from './Util/WebAudio';\nimport { Logger } from './Util/Log';\nimport { Engine } from './Engine';\nimport { Loadable } from './Interfaces/Loadable';\nimport { CanLoad } from './Interfaces/Loader';\nimport { Class } from './Class';\nimport * as DrawUtil from './Util/DrawUtil';\n\nimport logoImg from './Loader.logo.png';\nimport loaderCss from './Loader.css';\nimport { Canvas } from './Graphics/Canvas';\n\n/**\n * Pre-loading assets\n *\n * The loader provides a mechanism to preload multiple resources at\n * one time. The loader must be passed to the engine in order to\n * trigger the loading progress bar.\n *\n * The [[Loader]] itself implements [[Loadable]] so you can load loaders.\n *\n * ## Example: Pre-loading resources for a game\n *\n * ```js\n * // create a loader\n * var loader = new ex.Loader();\n *\n * // create a resource dictionary (best practice is to keep a separate file)\n * var resources = {\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\n * };\n *\n * // loop through dictionary and add to loader\n * for (var loadable in resources) {\n *   if (resources.hasOwnProperty(loadable)) {\n *     loader.addResource(resources[loadable]);\n *   }\n * }\n *\n * // start game\n * game.start(loader).then(function () {\n *   console.log(\"Game started!\");\n * });\n * ```\n *\n * ## Customize the Loader\n *\n * The loader can be customized to show different, text, logo, background color, and button.\n *\n * ```typescript\n * const loader = new ex.Loader([playerTexture]);\n *\n * // The loaders button text can simply modified using this\n * loader.playButtonText = 'Start the best game ever';\n *\n * // The logo can be changed by inserting a base64 image string here\n *\n * loader.logo = 'data:image/png;base64,iVBORw...';\n * loader.logoWidth = 15;\n * loader.logoHeight = 14;\n *\n * // The background color can be changed like so by supplying a valid CSS color string\n *\n * loader.backgroundColor = 'red'\n * loader.backgroundColor = '#176BAA'\n *\n * // To build a completely new button\n * loader.startButtonFactory = () => {\n *     let myButton = document.createElement('button');\n *     myButton.textContent = 'The best button';\n *     return myButton;\n * };\n *\n * engine.start(loader).then(() => {});\n * ```\n */\nexport class Loader extends Class implements CanLoad {\n  public canvas: Canvas = new Canvas({\n    drawHandler: this.draw.bind(this)\n  });\n  private _resourceList: Loadable<any>[] = [];\n  private _index = 0;\n\n  private _playButtonShown: boolean = false;\n  private _resourceCount: number = 0;\n  private _numLoaded: number = 0;\n  private _progressCounts: { [key: string]: number } = {};\n  private _totalCounts: { [key: string]: number } = {};\n  private _engine: Engine;\n\n  // logo drawing stuff\n\n  // base64 string encoding of the excalibur logo (logo-white.png)\n  public logo = logoImg;\n  public logoWidth = 468;\n  public logoHeight = 118;\n  public backgroundColor = '#176BAA';\n\n  protected _imageElement: HTMLImageElement;\n  protected get _image() {\n    if (!this._imageElement) {\n      this._imageElement = new Image();\n      this._imageElement.src = this.logo;\n    }\n\n    return this._imageElement;\n  }\n\n  public suppressPlayButton: boolean = false;\n  protected _playButtonRootElement: HTMLElement;\n  protected _playButtonElement: HTMLButtonElement;\n  protected _styleBlock: HTMLStyleElement;\n  /** Loads the css from Loader.css */\n  protected _playButtonStyles: string = loaderCss.toString();\n  protected get _playButton() {\n    if (!this._playButtonRootElement) {\n      this._playButtonRootElement = document.createElement('div');\n      this._playButtonRootElement.style.position = 'absolute';\n      document.body.appendChild(this._playButtonRootElement);\n    }\n    if (!this._styleBlock) {\n      this._styleBlock = document.createElement('style');\n      this._styleBlock.textContent = this._playButtonStyles;\n      document.head.appendChild(this._styleBlock);\n    }\n    if (!this._playButtonElement) {\n      this._playButtonElement = this.startButtonFactory();\n      this._playButtonRootElement.appendChild(this._playButtonElement);\n    }\n    return this._playButtonElement;\n  }\n\n  /**\n   * Get/set play button text\n   */\n  public playButtonText: string = 'Play game';\n\n  /**\n   * Return a html button element for excalibur to use as a play button\n   */\n  public startButtonFactory = () => {\n    const buttonElement = document.createElement('button');\n    buttonElement.id = 'excalibur-play';\n    buttonElement.textContent = this.playButtonText;\n    buttonElement.style.display = 'none';\n    return buttonElement;\n  };\n\n  /**\n   * @param loadables  Optionally provide the list of resources you want to load at constructor time\n   */\n  constructor(loadables?: Loadable<any>[]) {\n    super();\n\n    if (loadables) {\n      this.addResources(loadables);\n    }\n  }\n\n  public wireEngine(engine: Engine) {\n    this._engine = engine;\n    this.canvas.width = this._engine.canvas.width;\n    this.canvas.height = this._engine.canvas.height;\n  }\n\n  /**\n   * Add a resource to the loader to load\n   * @param loadable  Resource to add\n   */\n  public addResource(loadable: Loadable) {\n    const key = this._index++;\n    this._resourceList.push(loadable);\n    this._progressCounts[key] = 0;\n    this._totalCounts[key] = 1;\n    this._resourceCount++;\n  }\n\n  /**\n   * Add a list of resources to the loader to load\n   * @param loadables  The list of resources to load\n   */\n  public addResources(loadables: Loadable[]) {\n    let i = 0;\n    const len = loadables.length;\n\n    for (i; i < len; i++) {\n      this.addResource(loadables[i]);\n    }\n  }\n\n  /**\n   * Returns true if the loader has completely loaded all resources\n   */\n  public isLoaded() {\n    return this._numLoaded === this._resourceCount;\n  }\n\n  /**\n   * Shows the play button and returns a promise that resolves when clicked\n   */\n  public showPlayButton(): Promise<any> {\n    if (this.suppressPlayButton) {\n      return Promise.resolve();\n    } else {\n      this._playButtonShown = true;\n      this._playButton.style.display = 'block';\n      const promise = new Promise((resolve) => {\n        this._playButton.addEventListener('click', () => resolve());\n        this._playButton.addEventListener('touchend', () => resolve());\n        this._playButton.addEventListener('pointerup', () => resolve());\n      });\n\n      return promise;\n    }\n  }\n\n  public hidePlayButton() {\n    this._playButtonShown = false;\n    this._playButton.style.display = 'none';\n  }\n\n  /**\n   * Begin loading all of the supplied resources, returning a promise\n   * that resolves when loading of all is complete\n   */\n  public load(): Promise<any> {\n    const complete = new Promise<any>((resolve) => {\n      const me = this;\n      if (this._resourceList.length === 0) {\n        me.showPlayButton().then(() => {\n          // Unlock audio context in chrome after user gesture\n          // https://github.com/excaliburjs/Excalibur/issues/262\n          // https://github.com/excaliburjs/Excalibur/issues/1031\n          WebAudio.unlock().then(() => {\n            me.hidePlayButton();\n            me.oncomplete.call(me);\n            resolve();\n          });\n        });\n        return;\n      }\n\n      const progressArray = new Array<any>(this._resourceList.length);\n      const progressChunks = this._resourceList.length;\n\n      this._resourceList.forEach((r, i) => {\n        if (this._engine) {\n          r.wireEngine(this._engine);\n        }\n        r.onprogress = function (e) {\n          const total = <number>e.total;\n          const loaded = <number>e.loaded;\n          progressArray[i] = { loaded: (loaded / total) * (100 / progressChunks), total: 100 };\n\n          const progressResult: any = progressArray.reduce(\n            function (accum, next) {\n              return { loaded: accum.loaded + next.loaded, total: 100 };\n            },\n            { loaded: 0, total: 100 }\n          );\n\n          me.onprogress.call(me, progressResult);\n        };\n        r.oncomplete = r.onerror = function () {\n          me._numLoaded++;\n          if (me._numLoaded === me._resourceCount) {\n            setTimeout(() => {\n              me.showPlayButton().then(() => {\n                // Unlock audio context in chrome after user gesture\n                // https://github.com/excaliburjs/Excalibur/issues/262\n                // https://github.com/excaliburjs/Excalibur/issues/1031\n                WebAudio.unlock().then(() => {\n                  me.hidePlayButton();\n                  me.oncomplete.call(me);\n                  resolve();\n                });\n              });\n            }, 200); // short delay in showing the button for aesthetics\n          }\n        };\n      });\n\n      function loadNext(list: Loadable[], index: number) {\n        if (!list[index]) {\n          return;\n        }\n        list[index].load().then(function () {\n          loadNext(list, index + 1);\n        });\n      }\n      loadNext(this._resourceList, 0);\n    });\n    return complete;\n  }\n\n  /**\n   * Loader draw function. Draws the default Excalibur loading screen.\n   * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\n   * to customize the drawing, or just override entire method.\n   */\n  public draw(ctx: CanvasRenderingContext2D) {\n    const canvasHeight = this._engine.canvasHeight / this._engine.pixelRatio;\n    const canvasWidth = this._engine.canvasWidth / this._engine.pixelRatio;\n\n    if (this._playButtonRootElement) {\n      const left = this._engine.canvas.offsetLeft;\n      const top = this._engine.canvas.offsetTop;\n      const buttonWidth = this._playButton.clientWidth;\n      const buttonHeight = this._playButton.clientHeight;\n      this._playButtonRootElement.style.left = `${left + canvasWidth / 2 - buttonWidth / 2}px`;\n      this._playButtonRootElement.style.top = `${top + canvasHeight / 2 - buttonHeight / 2 + 100}px`;\n    }\n\n    ctx.fillStyle = this.backgroundColor;\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n\n    const y = canvasHeight / 2;\n    const width = Math.min(this.logoWidth, canvasWidth * 0.75);\n    const x = canvasWidth / 2 - width / 2;\n\n    const imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\n    const oldAntialias = this._engine.getAntialiasing();\n    this._engine.setAntialiasing(true);\n    ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, x, y - imageHeight - 20, width, imageHeight);\n\n    // loading box\n    if (!this.suppressPlayButton && this._playButtonShown) {\n      this._engine.setAntialiasing(oldAntialias);\n      return;\n    }\n\n    ctx.lineWidth = 2;\n    DrawUtil.roundRect(ctx, x, y, width, 20, 10);\n    const progress = width * (this._numLoaded / this._resourceCount);\n    const margin = 5;\n    const progressWidth = progress - margin * 2;\n    const height = 20 - margin * 2;\n    DrawUtil.roundRect(ctx, x + margin, y + margin, progressWidth > 10 ? progressWidth : 10, height, 5, null, Color.White);\n    this._engine.setAntialiasing(oldAntialias);\n  }\n\n  /**\n   * Perform any calculations or logic in the `update` method. The default `Loader` does not\n   * do anything in this method so it is safe to override.\n   */\n  public update(_engine: Engine, _delta: number) {\n    // overridable update\n  }\n\n  public getData: () => any = () => {\n    return;\n  };\n\n  public setData: (data: any) => any = () => {\n    return;\n  };\n\n  public processData: (data: any) => any = () => {\n    return;\n  };\n\n  public onprogress: (e: any) => void = (e: any) => {\n    Logger.getInstance().debug('[ex.Loader] Loading ' + ((100 * e.loaded) / e.total).toFixed(0));\n\n    return;\n  };\n\n  public oncomplete: () => void = () => {\n    return;\n  };\n\n  public onerror: () => void = () => {\n    return;\n  };\n}\n","import { Logger } from './Log';\n/**\n * This is the list of features that will be used to log the supported\n * features to the console when Detector.logBrowserFeatures() is called.\n */\n\nconst REPORTED_FEATURES: { [key: string]: string } = {\n  webgl: 'WebGL',\n  webaudio: 'WebAudio',\n  gamepadapi: 'Gamepad API'\n};\n\n/**\n * Interface for detected browser features matrix\n */\nexport interface DetectedFeatures {\n  readonly canvas: boolean;\n  readonly arraybuffer: boolean;\n  readonly dataurl: boolean;\n  readonly objecturl: boolean;\n  readonly rgba: boolean;\n  readonly webaudio: boolean;\n  readonly webgl: boolean;\n  readonly gamepadapi: boolean;\n}\n\ninterface CriticalTests {\n  canvasSupport(): boolean;\n  arrayBufferSupport(): boolean;\n  dataUrlSupport(): boolean;\n  objectUrlSupport(): boolean;\n  rgbaSupport(): boolean;\n}\n\ninterface WarningTests {\n  webAudioSupport(): boolean;\n  webglSupport(): boolean;\n}\n\n/**\n * Excalibur internal feature detection helper class\n */\nexport class Detector {\n  private _features: DetectedFeatures = null;\n\n  public failedTests: string[] = [];\n\n  public constructor() {\n    this._features = this._loadBrowserFeatures();\n  }\n\n  /**\n   * Returns a map of currently supported browser features. This method\n   * treats the features as a singleton and will only calculate feature\n   * support if it has not previously been done.\n   */\n  public getBrowserFeatures(): DetectedFeatures {\n    if (this._features === null) {\n      this._features = this._loadBrowserFeatures();\n    }\n    return this._features;\n  }\n\n  /**\n   * Report on non-critical browser support for debugging purposes.\n   * Use native browser console colors for visibility.\n   */\n  public logBrowserFeatures(): void {\n    let msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\n    const args = ['font-weight: bold; color: navy', 'font-weight: normal; color: inherit'];\n\n    const supported: any = this.getBrowserFeatures();\n    for (const feature of Object.keys(REPORTED_FEATURES)) {\n      if (supported[feature]) {\n        msg += '(%c\\u2713%c)'; // (✓)\n        args.push('font-weight: bold; color: green');\n        args.push('font-weight: normal; color: inherit');\n      } else {\n        msg += '(%c\\u2717%c)'; // (✗)\n        args.push('font-weight: bold; color: red');\n        args.push('font-weight: normal; color: inherit');\n      }\n\n      msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\n    }\n\n    args.unshift(msg);\n    // eslint-disable-next-line no-console\n    console.log.apply(console, args);\n  }\n\n  /**\n   * Executes several IIFE's to get a constant reference to supported\n   * features within the current execution context.\n   */\n  private _loadBrowserFeatures(): DetectedFeatures {\n    return {\n      // IIFE to check canvas support\n      canvas: (() => {\n        return this._criticalTests.canvasSupport();\n      })(),\n\n      // IIFE to check arraybuffer support\n      arraybuffer: (() => {\n        return this._criticalTests.arrayBufferSupport();\n      })(),\n\n      // IIFE to check dataurl support\n      dataurl: (() => {\n        return this._criticalTests.dataUrlSupport();\n      })(),\n\n      // IIFE to check objecturl support\n      objecturl: (() => {\n        return this._criticalTests.objectUrlSupport();\n      })(),\n\n      // IIFE to check rgba support\n      rgba: (() => {\n        return this._criticalTests.rgbaSupport();\n      })(),\n\n      // IIFE to check webaudio support\n      webaudio: (() => {\n        return this._warningTest.webAudioSupport();\n      })(),\n\n      // IIFE to check webgl support\n      webgl: (() => {\n        return this._warningTest.webglSupport();\n      })(),\n\n      // IIFE to check gamepadapi support\n      gamepadapi: (() => {\n        return !!(<any>navigator).getGamepads;\n      })()\n    };\n  }\n\n  // critical browser features required for ex to run\n  private _criticalTests: CriticalTests = {\n    // Test canvas/2d context support\n    canvasSupport: function() {\n      const elem = document.createElement('canvas');\n      return !!(elem.getContext && elem.getContext('2d'));\n    },\n\n    // Test array buffer support ex uses for downloading binary data\n    arrayBufferSupport: function() {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET', '/');\n      try {\n        xhr.responseType = 'arraybuffer';\n      } catch (e) {\n        return false;\n      }\n      return xhr.responseType === 'arraybuffer';\n    },\n\n    // Test data urls ex uses for sprites\n    dataUrlSupport: function() {\n      const canvas = document.createElement('canvas');\n      return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\n    },\n\n    // Test object url support for loading\n    objectUrlSupport: function() {\n      return 'URL' in window && 'revokeObjectURL' in URL && 'createObjectURL' in URL;\n    },\n\n    // RGBA support for colors\n    rgbaSupport: function() {\n      const style = document.createElement('a').style;\n      style.cssText = 'background-color:rgba(150,255,150,.5)';\n      return ('' + style.backgroundColor).indexOf('rgba') > -1;\n    }\n  };\n\n  // warnings excalibur performance will be degraded\n  private _warningTest: WarningTests = {\n    webAudioSupport: function() {\n      return !!(\n        (<any>window).AudioContext ||\n        (<any>window).webkitAudioContext ||\n        (<any>window).mozAudioContext ||\n        (<any>window).msAudioContext ||\n        (<any>window).oAudioContext\n      );\n    },\n    webglSupport: function() {\n      const elem = document.createElement('canvas');\n      return !!(elem.getContext && elem.getContext('webgl'));\n    }\n  };\n\n  public test(): boolean {\n    // Critical test will for ex not to run\n    let failedCritical = false;\n    for (const test in this._criticalTests) {\n      if (!this._criticalTests[<keyof CriticalTests>test].call(this)) {\n        this.failedTests.push(test);\n        Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', test);\n        failedCritical = true;\n      }\n    }\n    if (failedCritical) {\n      return false;\n    }\n\n    // Warning tests do not for ex to return false to compatibility\n    for (const warning in this._warningTest) {\n      if (!this._warningTest[<keyof WarningTests>warning]()) {\n        Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', warning);\n      }\n    }\n\n    return true;\n  }\n}\n","/**\n * A sorted list implementation. NOTE: this implementation is not self-balancing\n */\nexport class SortedList<T> {\n  private _getComparable: Function;\n  private _root: BinaryTreeNode;\n\n  constructor(getComparable: () => any) {\n    this._getComparable = getComparable;\n  }\n\n  public find(element: any): boolean {\n    return this._find(this._root, element);\n  }\n\n  private _find(node: BinaryTreeNode, element: any): boolean {\n    if (node == null) {\n      return false;\n    } else if (this._getComparable.call(element) === node.getKey()) {\n      if (node.getData().indexOf(element) > -1) {\n        return true;\n      } else {\n        return false;\n      }\n    } else if (this._getComparable.call(element) < node.getKey()) {\n      return this._find(node.getLeft(), element);\n    } else {\n      return this._find(node.getRight(), element);\n    }\n  }\n\n  // returns the array of elements at a specific key value\n  public get(key: number): any[] {\n    return this._get(this._root, key);\n  }\n\n  private _get(node: BinaryTreeNode, key: number): any[] {\n    if (node == null) {\n      return [];\n    } else if (key === node.getKey()) {\n      return node.getData();\n    } else if (key < node.getKey()) {\n      return this._get(node.getLeft(), key);\n    } else {\n      return this._get(node.getRight(), key);\n    }\n  }\n\n  public add(element: any): boolean {\n    if (this._root == null) {\n      this._root = new BinaryTreeNode(this._getComparable.call(element), [element], null, null);\n      return true;\n    } else {\n      return this._insert(this._root, element);\n    }\n  }\n\n  private _insert(node: BinaryTreeNode, element: any): boolean {\n    if (node != null) {\n      if (this._getComparable.call(element) === node.getKey()) {\n        if (node.getData().indexOf(element) > -1) {\n          return false; // the element we're trying to insert already exists\n        } else {\n          node.getData().push(element);\n          return true;\n        }\n      } else if (this._getComparable.call(element) < node.getKey()) {\n        if (node.getLeft() == null) {\n          node.setLeft(new BinaryTreeNode(this._getComparable.call(element), [element], null, null));\n          return true;\n        } else {\n          return this._insert(node.getLeft(), element);\n        }\n      } else {\n        if (node.getRight() == null) {\n          node.setRight(new BinaryTreeNode(this._getComparable.call(element), [element], null, null));\n          return true;\n        } else {\n          return this._insert(node.getRight(), element);\n        }\n      }\n    }\n    return false;\n  }\n\n  public removeByComparable(element: any): void {\n    this._root = this._remove(this._root, element);\n  }\n\n  private _remove(node: BinaryTreeNode, element: any): BinaryTreeNode {\n    if (node == null) {\n      return null;\n    } else if (this._getComparable.call(element) === node.getKey()) {\n      const elementIndex = node.getData().indexOf(element);\n      // if the node contains the element, remove the element\n      if (elementIndex > -1) {\n        node.getData().splice(elementIndex, 1);\n        // if we have removed the last element at this node, remove the node\n        if (node.getData().length === 0) {\n          // if the node is a leaf\n          if (node.getLeft() == null && node.getRight() == null) {\n            return null;\n          } else if (node.getLeft() == null) {\n            return node.getRight();\n          } else if (node.getRight() == null) {\n            return node.getLeft();\n          }\n          // if node has 2 children\n          const temp = this._findMinNode(node.getRight());\n          node.setKey(temp.getKey());\n          node.setData(temp.getData());\n          node.setRight(this._cleanup(node.getRight(), temp)); //\"cleanup nodes\" (move them up recursively)\n          return node;\n        } else {\n          // this prevents the node from being removed since it still contains elements\n          return node;\n        }\n      }\n    } else if (this._getComparable.call(element) < node.getKey()) {\n      node.setLeft(this._remove(node.getLeft(), element));\n      return node;\n    } else {\n      node.setRight(this._remove(node.getRight(), element));\n      return node;\n    }\n    return null;\n  }\n\n  // called once we have successfully removed the element we wanted, recursively corrects the part of the tree below the removed node\n  private _cleanup(node: BinaryTreeNode, element: BinaryTreeNode): BinaryTreeNode {\n    const comparable = element.getKey();\n    if (node == null) {\n      return null;\n    } else if (comparable === node.getKey()) {\n      // if the node is a leaf\n      if (node.getLeft() == null && node.getRight() == null) {\n        return null;\n      } else if (node.getLeft() == null) {\n        return node.getRight();\n      } else if (node.getRight() == null) {\n        return node.getLeft();\n      }\n      // if node has 2 children\n      const temp = this._findMinNode(node.getRight());\n      node.setKey(temp.getKey());\n      node.setData(temp.getData());\n\n      node.setRight(this._cleanup(node.getRight(), temp));\n      return node;\n    } else if (this._getComparable.call(element) < node.getKey()) {\n      node.setLeft(this._cleanup(node.getLeft(), element));\n      return node;\n    } else {\n      node.setRight(this._cleanup(node.getRight(), element));\n      return node;\n    }\n  }\n\n  private _findMinNode(node: BinaryTreeNode): BinaryTreeNode {\n    let current = node;\n    while (current.getLeft() != null) {\n      current = current.getLeft();\n    }\n    return current;\n  }\n\n  public list(): Array<T> {\n    const results = new Array<any>();\n    this._list(this._root, results);\n    return results;\n  }\n\n  private _list(treeNode: BinaryTreeNode, results: Array<T>): void {\n    if (treeNode != null) {\n      this._list(treeNode.getLeft(), results);\n      treeNode.getData().forEach(function(element) {\n        results.push(element);\n      });\n      this._list(treeNode.getRight(), results);\n    }\n  }\n}\n\n/**\n * A tree node part of [[SortedList]]\n */\nexport class BinaryTreeNode {\n  private _key: number;\n  private _data: Array<any>;\n  private _left: BinaryTreeNode;\n  private _right: BinaryTreeNode;\n\n  constructor(key: number, data: Array<any>, left: BinaryTreeNode, right: BinaryTreeNode) {\n    this._key = key;\n    this._data = data;\n    this._left = left;\n    this._right = right;\n  }\n\n  public getKey(): number {\n    return this._key;\n  }\n\n  public setKey(key: number) {\n    this._key = key;\n  }\n\n  public getData(): Array<any> {\n    return this._data;\n  }\n\n  public setData(data: any) {\n    this._data = data;\n  }\n\n  public getLeft(): BinaryTreeNode {\n    return this._left;\n  }\n\n  public setLeft(left: BinaryTreeNode) {\n    this._left = left;\n  }\n\n  public getRight(): BinaryTreeNode {\n    return this._right;\n  }\n\n  public setRight(right: BinaryTreeNode) {\n    this._right = right;\n  }\n}\n\n/**\n * Mock element for testing\n *\n * @internal\n */\nexport class MockedElement {\n  private _key: number = 0;\n\n  constructor(key: number) {\n    this._key = key;\n  }\n\n  public getTheKey() {\n    return this._key;\n  }\n\n  public setKey(key: number) {\n    this._key = key;\n  }\n}\n","import { Engine } from './Engine';\nimport { EasingFunction, EasingFunctions } from './Util/EasingFunctions';\nimport { PromiseLike, Promise, PromiseState } from './Promises';\nimport { Vector } from './Algebra';\nimport { Actor } from './Actor';\nimport { removeItemFromArray } from './Util/Util';\nimport { CanUpdate, CanInitialize } from './Interfaces/LifecycleEvents';\nimport { PreUpdateEvent, PostUpdateEvent, GameEvent, InitializeEvent } from './Events';\nimport { Class } from './Class';\nimport { BoundingBox } from './Collision/BoundingBox';\nimport { ExcaliburGraphicsContext } from './Graphics';\n\n/**\n * Interface that describes a custom camera strategy for tracking targets\n */\nexport interface CameraStrategy<T> {\n  /**\n   * Target of the camera strategy that will be passed to the action\n   */\n  target: T;\n\n  /**\n   * Camera strategies perform an action to calculate a new focus returned out of the strategy\n   * @param target The target object to apply this camera strategy (if any)\n   * @param camera The current camera implementation in excalibur running the game\n   * @param engine The current engine running the game\n   * @param delta The elapsed time in milliseconds since the last frame\n   */\n  action: (target: T, camera: Camera, engine: Engine, delta: number) => Vector;\n}\n\n/**\n * Container to house convenience strategy methods\n * @internal\n */\nexport class StrategyContainer {\n  constructor(public camera: Camera) {}\n\n  /**\n   * Creates and adds the [[LockCameraToActorStrategy]] on the current camera.\n   * @param actor The actor to lock the camera to\n   */\n  public lockToActor(actor: Actor) {\n    this.camera.addStrategy(new LockCameraToActorStrategy(actor));\n  }\n\n  /**\n   * Creates and adds the [[LockCameraToActorAxisStrategy]] on the current camera\n   * @param actor The actor to lock the camera to\n   * @param axis The axis to follow the actor on\n   */\n  public lockToActorAxis(actor: Actor, axis: Axis) {\n    this.camera.addStrategy(new LockCameraToActorAxisStrategy(actor, axis));\n  }\n\n  /**\n   * Creates and adds the [[ElasticToActorStrategy]] on the current camera\n   * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n   * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n   * correct and bounce around the target\n   *\n   * @param target Target actor to elastically follow\n   * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n   * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n   */\n  public elasticToActor(actor: Actor, cameraElasticity: number, cameraFriction: number) {\n    this.camera.addStrategy(new ElasticToActorStrategy(actor, cameraElasticity, cameraFriction));\n  }\n\n  /**\n   * Creates and adds the [[RadiusAroundActorStrategy]] on the current camera\n   * @param target Target actor to follow when it is \"radius\" pixels away\n   * @param radius Number of pixels away before the camera will follow\n   */\n  public radiusAroundActor(actor: Actor, radius: number) {\n    this.camera.addStrategy(new RadiusAroundActorStrategy(actor, radius));\n  }\n}\n\n/**\n * Camera axis enum\n */\nexport enum Axis {\n  X,\n  Y\n}\n\n/**\n * Lock a camera to the exact x/y position of an actor.\n */\nexport class LockCameraToActorStrategy implements CameraStrategy<Actor> {\n  constructor(public target: Actor) {}\n  public action = (target: Actor, _cam: Camera, _eng: Engine, _delta: number) => {\n    const center = target.center;\n    return center;\n  };\n}\n\n/**\n * Lock a camera to a specific axis around an actor.\n */\nexport class LockCameraToActorAxisStrategy implements CameraStrategy<Actor> {\n  constructor(public target: Actor, public axis: Axis) {}\n  public action = (target: Actor, cam: Camera, _eng: Engine, _delta: number) => {\n    const center = target.center;\n    const currentFocus = cam.getFocus();\n    if (this.axis === Axis.X) {\n      return new Vector(center.x, currentFocus.y);\n    } else {\n      return new Vector(currentFocus.x, center.y);\n    }\n  };\n}\n\n/**\n * Using [Hook's law](https://en.wikipedia.org/wiki/Hooke's_law), elastically move the camera towards the target actor.\n */\nexport class ElasticToActorStrategy implements CameraStrategy<Actor> {\n  /**\n   * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n   * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n   * correct and bounce around the target\n   *\n   * @param target Target actor to elastically follow\n   * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n   * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n   */\n  constructor(public target: Actor, public cameraElasticity: number, public cameraFriction: number) {}\n  public action = (target: Actor, cam: Camera, _eng: Engine, _delta: number) => {\n    const position = target.center;\n    let focus = cam.getFocus();\n    let cameraVel = cam.vel.clone();\n\n    // Calculate the stretch vector, using the spring equation\n    // F = kX\n    // https://en.wikipedia.org/wiki/Hooke's_law\n    // Apply to the current camera velocity\n    const stretch = position.sub(focus).scale(this.cameraElasticity); // stretch is X\n    cameraVel = cameraVel.add(stretch);\n\n    // Calculate the friction (-1 to apply a force in the opposition of motion)\n    // Apply to the current camera velocity\n    const friction = cameraVel.scale(-1).scale(this.cameraFriction);\n    cameraVel = cameraVel.add(friction);\n\n    // Update position by velocity deltas\n    focus = focus.add(cameraVel);\n\n    return focus;\n  };\n}\n\nexport class RadiusAroundActorStrategy implements CameraStrategy<Actor> {\n  /**\n   *\n   * @param target Target actor to follow when it is \"radius\" pixels away\n   * @param radius Number of pixels away before the camera will follow\n   */\n  constructor(public target: Actor, public radius: number) {}\n  public action = (target: Actor, cam: Camera, _eng: Engine, _delta: number) => {\n    const position = target.center;\n    const focus = cam.getFocus();\n\n    const direction = position.sub(focus);\n    const distance = direction.size;\n    if (distance >= this.radius) {\n      const offset = distance - this.radius;\n      return focus.add(direction.normalize().scale(offset));\n    }\n    return focus;\n  };\n}\n\n/**\n * Cameras\n *\n * [[Camera]] is the base class for all Excalibur cameras. Cameras are used\n * to move around your game and set focus. They are used to determine\n * what is \"off screen\" and can be used to scale the game.\n *\n * [[include:Cameras.md]]\n */\nexport class Camera extends Class implements CanUpdate, CanInitialize {\n  protected _follow: Actor;\n\n  private _cameraStrategies: CameraStrategy<any>[] = [];\n\n  public strategy: StrategyContainer = new StrategyContainer(this);\n\n  /**\n   * Get or set current zoom of the camera, defaults to 1\n   */\n  public z: number = 1;\n  /**\n   * Get or set rate of change in zoom, defaults to 0\n   */\n  public dz: number = 0;\n  /**\n   * Get or set zoom acceleration\n   */\n  public az: number = 0;\n\n  /**\n   * Current rotation of the camera\n   */\n  public rotation: number = 0;\n\n  /**\n   * Current angular velocity\n   */\n  public rx: number = 0;\n\n  /**\n   * Get or set the camera's angular velocity\n   */\n  public get angularVelocity(): number {\n    return this.rx;\n  }\n\n  public set angularVelocity(value: number) {\n    this.rx = value;\n  }\n\n  /**\n   * Get or set the camera's position\n   */\n  public pos: Vector = Vector.Zero;\n\n  /**\n   * Get or set the camera's velocity\n   */\n  public vel: Vector = Vector.Zero;\n\n  /**\n   * GEt or set the camera's acceleration\n   */\n  public acc: Vector = Vector.Zero;\n\n  private _cameraMoving: boolean = false;\n  private _currentLerpTime: number = 0;\n  private _lerpDuration: number = 1000; // 1 second\n  private _lerpStart: Vector = null;\n  private _lerpEnd: Vector = null;\n  private _lerpPromise: PromiseLike<Vector>;\n\n  //camera effects\n  protected _isShaking: boolean = false;\n  private _shakeMagnitudeX: number = 0;\n  private _shakeMagnitudeY: number = 0;\n  private _shakeDuration: number = 0;\n  private _elapsedShakeTime: number = 0;\n  private _xShake: number = 0;\n  private _yShake: number = 0;\n\n  protected _isZooming: boolean = false;\n  private _zoomStart: number = 1;\n  private _zoomEnd: number = 1;\n  private _currentZoomTime: number = 0;\n  private _zoomDuration: number = 0;\n\n  private _zoomPromise: Promise<boolean>;\n  private _zoomEasing: EasingFunction = EasingFunctions.EaseInOutCubic;\n  private _easing: EasingFunction = EasingFunctions.EaseInOutCubic;\n\n  /**\n   * Get the camera's x position\n   */\n  public get x() {\n    return this.pos.x;\n  }\n\n  /**\n   * Set the camera's x position (cannot be set when following an [[Actor]] or when moving)\n   */\n  public set x(value: number) {\n    if (!this._follow && !this._cameraMoving) {\n      this.pos.x = value;\n    }\n  }\n\n  /**\n   * Get the camera's y position\n   */\n  public get y() {\n    return this.pos.y;\n  }\n\n  /**\n   * Set the camera's y position (cannot be set when following an [[Actor]] or when moving)\n   */\n  public set y(value: number) {\n    if (!this._follow && !this._cameraMoving) {\n      this.pos.y = value;\n    }\n  }\n\n  /**\n   * Get or set the camera's x velocity\n   */\n  public get dx() {\n    return this.vel.x;\n  }\n\n  public set dx(value: number) {\n    this.vel.x = value;\n  }\n\n  /**\n   * Get or set the camera's y velocity\n   */\n  public get dy() {\n    return this.vel.y;\n  }\n\n  public set dy(value: number) {\n    this.vel.y = value;\n  }\n\n  /**\n   * Get or set the camera's x acceleration\n   */\n  public get ax() {\n    return this.acc.x;\n  }\n\n  public set ax(value: number) {\n    this.acc.x = value;\n  }\n\n  /**\n   * Get or set the camera's y acceleration\n   */\n  public get ay() {\n    return this.acc.y;\n  }\n\n  public set ay(value: number) {\n    this.acc.y = value;\n  }\n\n  /**\n   * Returns the focal point of the camera, a new point giving the x and y position of the camera\n   */\n  public getFocus() {\n    return this.pos;\n  }\n\n  /**\n   * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\n   *\n   * @param pos The target position to move to\n   * @param duration The duration in milliseconds the move should last\n   * @param [easingFn] An optional easing function ([[ex.EasingFunctions.EaseInOutCubic]] by default)\n   * @returns A [[Promise]] that resolves when movement is finished, including if it's interrupted.\n   *          The [[Promise]] value is the [[Vector]] of the target position. It will be rejected if a move cannot be made.\n   */\n  public move(pos: Vector, duration: number, easingFn: EasingFunction = EasingFunctions.EaseInOutCubic): PromiseLike<Vector> {\n    if (typeof easingFn !== 'function') {\n      throw 'Please specify an EasingFunction';\n    }\n\n    // cannot move when following an actor\n    if (this._follow) {\n      return new Promise<Vector>().reject(pos);\n    }\n\n    // resolve existing promise, if any\n    if (this._lerpPromise && this._lerpPromise.state() === PromiseState.Pending) {\n      this._lerpPromise.resolve(pos);\n    }\n\n    this._lerpPromise = new Promise<Vector>();\n    this._lerpStart = this.getFocus().clone();\n    this._lerpDuration = duration;\n    this._lerpEnd = pos;\n    this._currentLerpTime = 0;\n    this._cameraMoving = true;\n    this._easing = easingFn;\n\n    return this._lerpPromise;\n  }\n\n  /**\n   * Sets the camera to shake at the specified magnitudes for the specified duration\n   * @param magnitudeX  The x magnitude of the shake\n   * @param magnitudeY  The y magnitude of the shake\n   * @param duration    The duration of the shake in milliseconds\n   */\n  public shake(magnitudeX: number, magnitudeY: number, duration: number) {\n    this._isShaking = true;\n    this._shakeMagnitudeX = magnitudeX;\n    this._shakeMagnitudeY = magnitudeY;\n    this._shakeDuration = duration;\n  }\n\n  /**\n   * Zooms the camera in or out by the specified scale over the specified duration.\n   * If no duration is specified, it take effect immediately.\n   * @param scale    The scale of the zoom\n   * @param duration The duration of the zoom in milliseconds\n   */\n  public zoom(scale: number, duration: number = 0, easingFn: EasingFunction = EasingFunctions.EaseInOutCubic): Promise<boolean> {\n    this._zoomPromise = new Promise<boolean>();\n\n    if (duration) {\n      this._isZooming = true;\n      this._zoomEasing = easingFn;\n      this._currentZoomTime = 0;\n      this._zoomDuration = duration;\n      this._zoomStart = this.z;\n      this._zoomEnd = scale;\n    } else {\n      this._isZooming = false;\n      this.z = scale;\n      this._zoomPromise.resolve(true);\n    }\n\n    return this._zoomPromise;\n  }\n\n  /**\n   * Gets the current zoom scale\n   */\n  public getZoom() {\n    return this.z;\n  }\n\n  /**\n   * Gets the bounding box of the viewport of this camera in world coordinates\n   */\n  public get viewport(): BoundingBox {\n    if (this._engine) {\n      const halfWidth = this._engine.halfDrawWidth;\n      const halfHeight = this._engine.halfDrawHeight;\n\n      return new BoundingBox(this.x - halfWidth, this.y - halfHeight, this.x + halfWidth, this.y + halfHeight);\n    }\n    return new BoundingBox(0, 0, 0, 0);\n  }\n\n  /**\n   * Adds a new camera strategy to this camera\n   * @param cameraStrategy Instance of an [[CameraStrategy]]\n   */\n  public addStrategy<T>(cameraStrategy: CameraStrategy<T>) {\n    this._cameraStrategies.push(cameraStrategy);\n  }\n\n  /**\n   * Removes a camera strategy by reference\n   * @param cameraStrategy Instance of an [[CameraStrategy]]\n   */\n  public removeStrategy<T>(cameraStrategy: CameraStrategy<T>) {\n    removeItemFromArray(cameraStrategy, this._cameraStrategies);\n  }\n\n  /**\n   * Clears all camera strategies from the camera\n   */\n  public clearAllStrategies() {\n    this._cameraStrategies.length = 0;\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPreUpdate(engine, delta);\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before a scene is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // Overridable\n  }\n\n  /**\n   *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(engine: Engine, delta: number): void {\n    this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\n    this.onPostUpdate(engine, delta);\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after a scene is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // Overridable\n  }\n\n  private _engine: Engine;\n  private _isInitialized = false;\n  public get isInitialized() {\n    return this._isInitialized;\n  }\n\n  public _initialize(_engine: Engine) {\n    if (!this.isInitialized) {\n      this.onInitialize(_engine);\n      super.emit('initialize', new InitializeEvent(_engine, this));\n      this._isInitialized = true;\n      this._engine = _engine;\n    }\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after a scene is updated.\n   */\n  public onInitialize(_engine: Engine) {\n    // Overridable\n  }\n\n  public on(eventName: 'initialize', handler: (event: InitializeEvent) => void): void;\n  public on(eventName: 'preupdate', handler: (event: PreUpdateEvent) => void): void;\n  public on(eventName: 'postupdate', handler: (event: PostUpdateEvent) => void): void;\n  public on(eventName: any, handler: any) {\n    super.on(eventName, handler);\n  }\n\n  public off(eventName: 'initialize', handler?: (event: InitializeEvent) => void): void;\n  public off(eventName: 'preupdate', handler?: (event: PreUpdateEvent) => void): void;\n  public off(eventName: 'postupdate', handler?: (event: PostUpdateEvent) => void): void;\n  public off(eventName: string, handler: (event: GameEvent<Camera>) => void): void;\n  public off(eventName: string, handler: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  public once(eventName: 'initialize', handler: (event: InitializeEvent) => void): void;\n  public once(eventName: 'preupdate', handler: (event: PreUpdateEvent) => void): void;\n  public once(eventName: 'postupdate', handler: (event: PostUpdateEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<Camera>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    super.once(eventName, handler);\n  }\n\n  public update(_engine: Engine, delta: number) {\n    this._initialize(_engine);\n    this._preupdate(_engine, delta);\n\n    // Update placements based on linear algebra\n    this.pos = this.pos.add(this.vel.scale(delta / 1000));\n    this.z += (this.dz * delta) / 1000;\n\n    this.vel = this.vel.add(this.acc.scale(delta / 1000));\n    this.dz += (this.az * delta) / 1000;\n\n    this.rotation += (this.angularVelocity * delta) / 1000;\n\n    if (this._isZooming) {\n      if (this._currentZoomTime < this._zoomDuration) {\n        const zoomEasing = this._zoomEasing;\n        const newZoom = zoomEasing(this._currentZoomTime, this._zoomStart, this._zoomEnd, this._zoomDuration);\n\n        this.z = newZoom;\n        this._currentZoomTime += delta;\n      } else {\n        this._isZooming = false;\n        this.z = this._zoomEnd;\n        this._currentZoomTime = 0;\n        this._zoomPromise.resolve(true);\n      }\n    }\n\n    if (this._cameraMoving) {\n      if (this._currentLerpTime < this._lerpDuration) {\n        const moveEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\n\n        const lerpPoint = moveEasing(this._currentLerpTime, this._lerpStart, this._lerpEnd, this._lerpDuration);\n\n        this.pos = lerpPoint;\n\n        this._currentLerpTime += delta;\n      } else {\n        this.pos = this._lerpEnd;\n        const end = this._lerpEnd.clone();\n\n        this._lerpStart = null;\n        this._lerpEnd = null;\n        this._currentLerpTime = 0;\n        this._cameraMoving = false;\n        // Order matters here, resolve should be last so any chain promises have a clean slate\n        this._lerpPromise.resolve(end);\n      }\n    }\n\n    if (this._isDoneShaking()) {\n      this._isShaking = false;\n      this._elapsedShakeTime = 0;\n      this._shakeMagnitudeX = 0;\n      this._shakeMagnitudeY = 0;\n      this._shakeDuration = 0;\n      this._xShake = 0;\n      this._yShake = 0;\n    } else {\n      this._elapsedShakeTime += delta;\n      this._xShake = ((Math.random() * this._shakeMagnitudeX) | 0) + 1;\n      this._yShake = ((Math.random() * this._shakeMagnitudeY) | 0) + 1;\n    }\n\n    for (const s of this._cameraStrategies) {\n      this.pos = s.action.call(s, s.target, this, _engine, delta);\n    }\n\n    this._postupdate(_engine, delta);\n  }\n\n  /**\n   * Applies the relevant transformations to the game canvas to \"move\" or apply effects to the Camera\n   * @param ctx    Canvas context to apply transformations\n   * @param delta  The number of milliseconds since the last update\n   */\n  public draw(ctx: ExcaliburGraphicsContext) {\n    const focus = this.getFocus();\n    const canvasWidth = ctx.width;\n    const canvasHeight = ctx.height;\n    const pixelRatio = this._engine ? this._engine.pixelRatio : window.devicePixelRatio;\n    const zoom = this.getZoom();\n\n    const newCanvasWidth = canvasWidth / zoom / pixelRatio;\n    const newCanvasHeight = canvasHeight / zoom / pixelRatio;\n\n    ctx.scale(zoom, zoom);\n    ctx.translate(-focus.x + newCanvasWidth / 2 + this._xShake, -focus.y + newCanvasHeight / 2 + this._yShake);\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    const focus = this.getFocus();\n    ctx.fillStyle = 'red';\n    ctx.strokeStyle = 'white';\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.arc(focus.x, focus.y, 15, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(focus.x, focus.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.setLineDash([5, 15]);\n    ctx.lineWidth = 5;\n    ctx.strokeStyle = 'white';\n    ctx.strokeRect(this.viewport.left, this.viewport.top, this.viewport.width, this.viewport.height);\n    ctx.closePath();\n  }\n\n  private _isDoneShaking(): boolean {\n    return !this._isShaking || this._elapsedShakeTime >= this._shakeDuration;\n  }\n}\n","import { Engine } from './Engine';\nimport { Color } from './Drawing/Color';\nimport { SpriteFont } from './Drawing/SpriteSheet';\nimport { Actor } from './Actor';\nimport { Configurable } from './Configurable';\nimport { Vector } from './Algebra';\nimport { CollisionType } from './Collision/CollisionType';\n/**\n * Enum representing the different font size units\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\n */\nexport enum FontUnit {\n  /**\n   * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\n   */\n  Em,\n  /**\n   * Rem is similar to the Em, it is a scalable unit. 1 rem is equal to the font size of the root element\n   */\n  Rem,\n  /**\n   * Pixel is a unit of length in screen pixels\n   */\n  Px,\n  /**\n   * Point is a physical unit length (1/72 of an inch)\n   */\n  Pt,\n  /**\n   * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\n   */\n  Percent\n}\n\n/**\n * Enum representing the different horizontal text alignments\n */\nexport enum TextAlign {\n  /**\n   * The text is left-aligned.\n   */\n  Left,\n  /**\n   * The text is right-aligned.\n   */\n  Right,\n  /**\n   * The text is centered.\n   */\n  Center,\n  /**\n   * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\n   * right-aligned for right-to-left locales).\n   */\n  Start,\n  /**\n   * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\n   * left-aligned for right-to-left locales).\n   */\n  End\n}\n\n/**\n * Enum representing the different baseline text alignments\n */\nexport enum BaseAlign {\n  /**\n   * The text baseline is the top of the em square.\n   */\n  Top,\n  /**\n   * The text baseline is the hanging baseline.  Currently unsupported; this will act like\n   * alphabetic.\n   */\n  Hanging,\n  /**\n   * The text baseline is the middle of the em square.\n   */\n  Middle,\n  /**\n   * The text baseline is the normal alphabetic baseline.\n   */\n  Alphabetic,\n  /**\n   * The text baseline is the ideographic baseline; this is the bottom of\n   * the body of the characters, if the main body of characters protrudes\n   * beneath the alphabetic baseline.  Currently unsupported; this will\n   * act like alphabetic.\n   */\n  Ideographic,\n  /**\n   * The text baseline is the bottom of the bounding box.  This differs\n   * from the ideographic baseline in that the ideographic baseline\n   * doesn't consider descenders.\n   */\n  Bottom\n}\n\n/**\n * Enum representing the different possible font styles\n */\nexport enum FontStyle {\n  Normal,\n  Italic,\n  Oblique\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface LabelArgs extends Partial<LabelImpl> {\n  x?: number;\n  y?: number;\n  text?: string;\n  bold?: boolean;\n  pos?: Vector;\n  spriteFont?: SpriteFont;\n  fontFamily?: string;\n  fontSize?: number;\n  fontStyle?: FontStyle;\n  fontUnit?: FontUnit;\n  textAlign?: TextAlign;\n  maxWidth?: number;\n}\n\n/**\n * @hidden\n */\nexport class LabelImpl extends Actor {\n  /**\n   * The text to draw.\n   */\n  public text: string;\n\n  /**\n   * Sets or gets the bold property of the label's text, by default it's false\n   */\n  public bold: boolean = false;\n\n  /**\n   * The [[SpriteFont]] to use, if any. Overrides [[fontFamily]] if present.\n   */\n  public spriteFont: SpriteFont;\n\n  /**\n   * The CSS font family string (e.g. `sans-serif`, `Droid Sans Pro`). Web fonts\n   * are supported, same as in CSS.\n   */\n  public fontFamily: string;\n\n  /**\n   * The font size in the selected units, default is 10 (default units is pixel)\n   */\n  public fontSize: number = 10;\n\n  /**\n   * The font style for this label, the default is [[FontStyle.Normal]]\n   */\n  public fontStyle: FontStyle = FontStyle.Normal;\n\n  /**\n   * The css units for a font size such as px, pt, em (SpriteFont only support px), by default is 'px';\n   */\n  public fontUnit: FontUnit = FontUnit.Px;\n\n  /**\n   * Gets or sets the horizontal text alignment property for the label.\n   */\n  public textAlign: TextAlign = TextAlign.Left;\n\n  /**\n   * Gets or sets the baseline alignment property for the label.\n   */\n  public baseAlign: BaseAlign = BaseAlign.Bottom;\n\n  /**\n   * Gets or sets the maximum width (in pixels) that the label should occupy\n   */\n  public maxWidth: number;\n\n  /**\n   * Gets or sets the letter spacing on a Label. Only supported with Sprite Fonts.\n   */\n  public letterSpacing: number = 0; //px\n\n  /**\n   * Whether or not the [[SpriteFont]] will be case-sensitive when matching characters.\n   */\n  public caseInsensitive: boolean = true;\n\n  private _textShadowOn: boolean;\n  private _shadowOffsetX: number;\n  private _shadowOffsetY: number;\n\n  /**\n   * @param text        The text of the label\n   * @param x           The x position of the label\n   * @param y           The y position of the label\n   * @param fontFamily  Use any valid CSS font string for the label's font. Web fonts are supported. Default is `10px sans-serif`.\n   * @param spriteFont  Use an Excalibur sprite font for the label's font, if a SpriteFont is provided it will take precedence\n   * over a css font.\n   */\n  constructor(textOrConfig?: string | Partial<LabelImpl>, x?: number, y?: number, fontFamily?: string, spriteFont?: SpriteFont) {\n    super(textOrConfig && typeof textOrConfig === 'object' ? textOrConfig : { pos: new Vector(x, y) });\n\n    let text = '';\n    if (textOrConfig && typeof textOrConfig === 'object') {\n      fontFamily = textOrConfig.fontFamily;\n      spriteFont = textOrConfig.spriteFont;\n      text = textOrConfig.text;\n    } else {\n      text = <string>textOrConfig;\n    }\n\n    this.text = text || '';\n    this.color = Color.Black;\n    this.spriteFont = spriteFont;\n    this.body.collider.type = CollisionType.PreventCollision;\n    this.fontFamily = fontFamily || 'sans-serif'; // coalesce to default canvas font\n\n    this._textShadowOn = false;\n    this._shadowOffsetX = 0;\n    this._shadowOffsetY = 0;\n    if (spriteFont) {\n      //this._textSprites = spriteFont.getTextSprites();\n    }\n  }\n\n  /**\n   * Returns the width of the text in the label (in pixels);\n   * @param ctx  Rendering context to measure the string with\n   */\n  public getTextWidth(ctx: CanvasRenderingContext2D): number {\n    const oldFont = ctx.font;\n    ctx.font = this._fontString;\n    const width = ctx.measureText(this.text).width;\n    ctx.font = oldFont;\n    return width;\n  }\n\n  // TypeScript doesn't support string enums :(\n  private _lookupFontUnit(fontUnit: FontUnit): string {\n    switch (fontUnit) {\n      case FontUnit.Em:\n        return 'em';\n      case FontUnit.Rem:\n        return 'rem';\n      case FontUnit.Pt:\n        return 'pt';\n      case FontUnit.Px:\n        return 'px';\n      case FontUnit.Percent:\n        return '%';\n      default:\n        return 'px';\n    }\n  }\n\n  private _lookupTextAlign(textAlign: TextAlign): CanvasTextAlign {\n    switch (textAlign) {\n      case TextAlign.Left:\n        return 'left';\n      case TextAlign.Right:\n        return 'right';\n      case TextAlign.Center:\n        return 'center';\n      case TextAlign.End:\n        return 'end';\n      case TextAlign.Start:\n        return 'start';\n      default:\n        return 'start';\n    }\n  }\n\n  private _lookupBaseAlign(baseAlign: BaseAlign): CanvasTextBaseline {\n    switch (baseAlign) {\n      case BaseAlign.Alphabetic:\n        return 'alphabetic';\n      case BaseAlign.Bottom:\n        return 'bottom';\n      case BaseAlign.Hanging:\n        return 'hanging';\n      case BaseAlign.Ideographic:\n        return 'ideographic';\n      case BaseAlign.Middle:\n        return 'middle';\n      case BaseAlign.Top:\n        return 'top';\n      default:\n        return 'alphabetic';\n    }\n  }\n\n  private _lookupFontStyle(fontStyle: FontStyle): string {\n    const boldstring = this.bold ? ' bold' : '';\n    switch (fontStyle) {\n      case FontStyle.Italic:\n        return 'italic' + boldstring;\n      case FontStyle.Normal:\n        return 'normal' + boldstring;\n      case FontStyle.Oblique:\n        return 'oblique' + boldstring;\n      default:\n        return 'normal' + boldstring;\n    }\n  }\n\n  /**\n   * Sets the text shadow for sprite fonts\n   * @param offsetX      The x offset in pixels to place the shadow\n   * @param offsetY      The y offset in pixels to place the shadow\n   * @param shadowColor  The color of the text shadow\n   */\n  public setTextShadow(offsetX: number, offsetY: number, shadowColor: Color) {\n    this.spriteFont.setTextShadow(offsetX, offsetY, shadowColor);\n  }\n\n  /**\n   * Toggles text shadows on or off, only applies when using sprite fonts\n   */\n  public useTextShadow(on: boolean) {\n    this.spriteFont.useTextShadow(on);\n  }\n\n  /**\n   * Clears the current text shadow\n   */\n  public clearTextShadow() {\n    this._textShadowOn = false;\n    this._shadowOffsetX = 0;\n    this._shadowOffsetY = 0;\n  }\n\n  public update(engine: Engine, delta: number) {\n    super.update(engine, delta);\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    ctx.save();\n    ctx.translate(this.pos.x, this.pos.y);\n    ctx.scale(this.scale.x, this.scale.y);\n    ctx.rotate(this.rotation);\n\n    if (this._textShadowOn) {\n      ctx.save();\n      ctx.translate(this._shadowOffsetX, this._shadowOffsetY);\n      this._fontDraw(ctx);\n      ctx.restore();\n    }\n    this._fontDraw(ctx);\n\n    super.draw(ctx, delta);\n    ctx.restore();\n  }\n\n  private _fontDraw(ctx: CanvasRenderingContext2D) {\n    if (this.spriteFont) {\n      this.spriteFont.draw(ctx, this.text, 0, 0, {\n        color: this.color.clone(),\n        baseAlign: this.baseAlign,\n        textAlign: this.textAlign,\n        fontSize: this.fontSize,\n        letterSpacing: this.letterSpacing,\n        opacity: this.opacity\n      });\n    } else {\n      const oldAlign = ctx.textAlign;\n      const oldTextBaseline = ctx.textBaseline;\n\n      ctx.textAlign = this._lookupTextAlign(this.textAlign);\n      ctx.textBaseline = this._lookupBaseAlign(this.baseAlign);\n      if (this.color) {\n        this.color.a = this.opacity;\n      }\n      ctx.fillStyle = this.color.toString();\n      ctx.font = this._fontString;\n      if (this.maxWidth) {\n        ctx.fillText(this.text, 0, 0, this.maxWidth);\n      } else {\n        ctx.fillText(this.text, 0, 0);\n      }\n\n      ctx.textAlign = oldAlign;\n      ctx.textBaseline = oldTextBaseline;\n    }\n  }\n\n  protected get _fontString() {\n    return `${this._lookupFontStyle(this.fontStyle)} ${this.fontSize}${this._lookupFontUnit(this.fontUnit)} ${this.fontFamily}`;\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    super.debugDraw(ctx);\n  }\n}\n\n/**\n * Labels are the way to draw small amounts of text to the screen. They are\n * actors and inherit all of the benefits and capabilities.\n *\n * [[include:Labels.md]]\n */\nexport class Label extends Configurable(LabelImpl) {\n  constructor();\n  constructor(config?: LabelArgs);\n  constructor(text?: string, x?: number, y?: number, fontFamily?: string, spriteFont?: SpriteFont);\n  constructor(textOrConfig?: string | LabelArgs, x?: number, y?: number, fontFamily?: string, spriteFont?: SpriteFont) {\n    super(textOrConfig, x, y, fontFamily, spriteFont);\n  }\n}\n","import { Color } from './Drawing/Color';\nimport { Engine } from './Engine';\nimport { ActionQueue } from './Actions/Action';\nimport { EventDispatcher } from './EventDispatcher';\nimport { Actor, isActor } from './Actor';\nimport { Vector } from './Algebra';\nimport { ExitTriggerEvent, EnterTriggerEvent, CollisionEndEvent, CollisionStartEvent } from './Events';\nimport * as Util from './Util/Util';\nimport { CollisionType } from './Collision/CollisionType';\n\n/**\n * ITriggerOptions\n */\nexport interface TriggerOptions {\n  // position of the trigger\n  pos: Vector;\n  // width of the trigger\n  width: number;\n  // height of the trigger\n  height: number;\n  // whether the trigger is visible or not\n  visible: boolean;\n  // action to take when triggered\n  action: () => void;\n  // if specified the trigger will only fire on a specific actor and overrides any filter\n  target: Actor;\n  // Returns true if the triggers should fire on the collided actor\n  filter: (actor: Actor) => boolean;\n  // -1 if it should repeat forever\n  repeat: number;\n}\n\nconst triggerDefaults: Partial<TriggerOptions> = {\n  pos: Vector.Zero,\n  width: 10,\n  height: 10,\n  visible: false,\n  action: () => {\n    return;\n  },\n  filter: () => true,\n  repeat: -1\n};\n\n/**\n * Triggers are a method of firing arbitrary code on collision. These are useful\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\n * are invisible, and can only be seen when [[Trigger.visible]] is set to `true`.\n *\n * [[include:Triggers.md]]\n */\nexport class Trigger extends Actor {\n  private _target: Actor;\n  /**\n   * Action to fire when triggered by collision\n   */\n  public action: () => void = () => {\n    return;\n  };\n  /**\n   * Filter to add additional granularity to action dispatch, if a filter is specified the action will only fire when\n   * filter return true for the collided actor.\n   */\n  public filter: (actor: Actor) => boolean = () => true;\n  /**\n   * Number of times to repeat before killing the trigger,\n   */\n  public repeat: number = -1;\n\n  /**\n   *\n   * @param opts Trigger options\n   */\n  constructor(opts: Partial<TriggerOptions>) {\n    super(opts.pos.x, opts.pos.y, opts.width, opts.height);\n    opts = Util.extend({}, triggerDefaults, opts);\n\n    this.filter = opts.filter || this.filter;\n    this.repeat = opts.repeat || this.repeat;\n    this.action = opts.action || this.action;\n    if (opts.target) {\n      this.target = opts.target;\n    }\n\n    this.visible = opts.visible;\n    this.body.collider.type = CollisionType.Passive;\n    this.eventDispatcher = new EventDispatcher(this);\n    this.actionQueue = new ActionQueue(this);\n\n    this.on('collisionstart', (evt: CollisionStartEvent<Actor>) => {\n      if (isActor(evt.other) && this.filter(evt.other)) {\n        this.emit('enter', new EnterTriggerEvent(this, evt.other));\n        this._dispatchAction();\n        // remove trigger if its done, -1 repeat forever\n        if (this.repeat === 0) {\n          this.kill();\n        }\n      }\n    });\n\n    this.on('collisionend', (evt: CollisionEndEvent<Actor>) => {\n      if (isActor(evt.other) && this.filter(evt.other)) {\n        this.emit('exit', new ExitTriggerEvent(this, evt.other));\n      }\n    });\n  }\n\n  public set target(target: Actor) {\n    this._target = target;\n    this.filter = (actor: Actor) => actor === target;\n  }\n\n  public get target() {\n    return this._target;\n  }\n\n  public _initialize(engine: Engine) {\n    super._initialize(engine);\n  }\n\n  private _dispatchAction() {\n    this.action.call(this);\n    this.repeat--;\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    super.debugDraw(ctx);\n    // Meant to draw debug information about actors\n    ctx.save();\n    ctx.translate(this.pos.x, this.pos.y);\n\n    const bb = this.body.collider.bounds;\n    const wp = this.getWorldPos();\n    bb.left = bb.left - wp.x;\n    bb.right = bb.right - wp.x;\n    bb.top = bb.top - wp.y;\n    bb.bottom = bb.bottom - wp.y;\n\n    // Currently collision primitives cannot rotate\n    // ctx.rotate(this.rotation);\n    ctx.fillStyle = Color.Violet.toString();\n    ctx.strokeStyle = Color.Violet.toString();\n    ctx.fillText('Trigger', 10, 10);\n    bb.debugDraw(ctx);\n\n    ctx.restore();\n  }\n}\n","import { Actor } from '../Actor';\nimport { ScreenElement } from '../ScreenElement';\nimport { Label } from '../Label';\nimport { Trigger } from '../Trigger';\n\nexport function isVanillaActor(actor: Actor) {\n  return !(actor instanceof ScreenElement) && !(actor instanceof Trigger) && !(actor instanceof Label);\n}\n\nexport function isScreenElement(actor: Actor) {\n  return actor instanceof ScreenElement;\n}\n","import { isActor } from '../Actor';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { Scene } from '../Scene';\nimport { Entity } from '../Entity';\nimport { GraphicsComponent } from './GraphicsComponent';\nimport { TransformComponent, CoordPlane } from '../Transform';\nimport { Rect } from './Rect';\nimport { Color } from '../Drawing/Color';\n\nexport class GraphicsSystem {\n  public readonly types = [GraphicsComponent.type, TransformComponent.type];\n  constructor(public ctx: ExcaliburGraphicsContext, public scene: Scene) {}\n\n  public update(entities: Entity<GraphicsComponent | TransformComponent>[], delta: number): void {\n    this._clearScreen();\n    // sort actors in z order\n    entities.sort((a, b) => a.components.transform.z - b.components.transform.z);\n    let transform: TransformComponent;\n    let graphics: GraphicsComponent;\n    for (let entity of entities) {\n      transform = entity.components.transform;\n      graphics = entity.components.graphics;\n\n      if (this._isOffscreen(entity)) continue;\n      this._pushCameraTransform(transform);\n\n      this.ctx.save();\n      graphics.update(delta);\n      this._applyEntityTransform(transform);\n      const [x, y] = this._applyActorAnchor(entity);\n      this.ctx.z = transform.z;\n      this.ctx.opacity = graphics.opacity * ((entity as any).opacity ?? 1);\n      graphics.draw(this.ctx, x, y);\n      if ((this.scene as any)._engine.isDebug) {\n        this.ctx.z = 99;\n        if (isActor(entity)) {\n          if (!graphics.__debug.colliderBounds) {\n            graphics.__debug.colliderBounds = new Rect({\n              color: Color.Transparent,\n              lineWidth: 4,\n              strokeColor: Color.Red,\n              width: entity.width,\n              height: entity.height\n            });\n          } else {\n            graphics.__debug.colliderBounds.width = entity.body.collider.bounds.width;\n            graphics.__debug.colliderBounds.height = entity.body.collider.bounds.height;\n          }\n          graphics.__debug.colliderBounds.draw(this.ctx, 0, 0);\n\n          if (!graphics.__debug.graphicBounds) {\n            graphics.__debug.graphicBounds = new Rect({\n              color: Color.Transparent,\n              lineWidth: 4,\n              strokeColor: Color.Blue,\n              width: graphics.current?.width ?? 0,\n              height: graphics.current?.height ?? 0\n            });\n          } else {\n            graphics.__debug.graphicBounds.width = graphics.current?.width ?? 0;\n            graphics.__debug.graphicBounds.height = graphics.current?.height ?? 0;\n          }\n          graphics.__debug.graphicBounds.draw(this.ctx, x, y);\n        }\n      }\n\n      this.ctx.restore();\n\n      this._popCameraTransform(transform);\n    }\n    this.ctx.flush();\n  }\n\n  private _clearScreen(): void {\n    this.ctx.clear();\n  }\n\n  private _isOffscreen(entity: Entity) {\n    if (isActor(entity)) {\n      return entity.isOffScreen;\n    }\n    return false;\n  }\n\n  private _applyEntityTransform(transform: TransformComponent): void {\n    this.ctx.translate(transform.pos.x, transform.pos.y);\n    this.ctx.rotate(transform.rotation);\n    this.ctx.scale(transform.scale.x, transform.scale.y);\n  }\n\n  private _applyActorAnchor(entity: Entity): [number, number] {\n    if (isActor(entity)) {\n      this.ctx.translate(-(entity.width * entity.anchor.x), -(entity.height * entity.anchor.y));\n\n      const gfx = entity.graphics.current;\n      if (gfx) {\n        // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\n        const offsetX = (entity.width - gfx.width * gfx.scale.x) * entity.anchor.x;\n        const offsetY = (entity.height - gfx.height * gfx.scale.y) * entity.anchor.y;\n        return [offsetX, offsetY];\n      }\n    }\n    return [0, 0];\n  }\n\n  private _pushCameraTransform(transform: TransformComponent) {\n    // Establish camera offset per entity\n    if (transform.coordPlane === CoordPlane.World) {\n      this.ctx.save();\n      if (this?.scene?.camera) {\n        this.scene.camera.draw(this.ctx);\n      }\n    }\n  }\n\n  private _popCameraTransform(transform: TransformComponent) {\n    if (transform.coordPlane === CoordPlane.World) {\n      // Apply camera world offset\n      this.ctx.restore();\n    }\n  }\n}\n","import { Engine } from './Engine';\nimport { Actor } from './Actor';\nimport { Sprite } from './Drawing/Sprite';\nimport { Color } from './Drawing/Color';\nimport { Vector, vec } from './Algebra';\nimport * as Util from './Util/Util';\nimport * as DrawUtil from './Util/DrawUtil';\nimport * as Traits from './Traits/Index';\nimport { Configurable } from './Configurable';\nimport { Random } from './Math/Random';\nimport { CollisionType } from './Collision/CollisionType';\nimport * as Graphics from './Graphics';\nimport { GraphicsComponent } from './Graphics';\nimport { Entity } from './Entity';\nimport { TransformComponent } from './Transform';\n\n/**\n * An enum that represents the types of emitter nozzles\n */\nexport enum EmitterType {\n  /**\n   * Constant for the circular emitter type\n   */\n  Circle,\n  /**\n   * Constant for the rectangular emitter type\n   */\n  Rectangle\n}\n\n/**\n * @hidden\n */\nexport class ParticleImpl extends Entity<TransformComponent | GraphicsComponent> {\n  public position: Vector = new Vector(0, 0);\n  public velocity: Vector = new Vector(0, 0);\n  public acceleration: Vector = new Vector(0, 0);\n  public particleRotationalVelocity: number = 0;\n  public currentRotation: number = 0;\n\n  public focus: Vector = null;\n  public focusAccel: number = 0;\n  public opacity: number = 1;\n  public beginColor: Color = Color.White;\n  public endColor: Color = Color.White;\n\n  // Life is counted in ms\n  public life: number = 300;\n  public fadeFlag: boolean = false;\n\n  // Color transitions\n  private _rRate: number = 1;\n  private _gRate: number = 1;\n  private _bRate: number = 1;\n  private _aRate: number = 0;\n  private _currentColor: Color = Color.White;\n\n  public emitter: ParticleEmitter = null;\n  public particleSize: number = 5;\n  public particleSprite: Sprite = null;\n  public transform: TransformComponent;\n  public graphics: GraphicsComponent = new GraphicsComponent();\n\n  public startSize: number;\n  public endSize: number;\n  public sizeRate: number = 0;\n  public elapsedMultiplier: number = 0;\n\n  constructor(\n    emitterOrConfig: ParticleEmitter | ParticleArgs,\n    life?: number,\n    opacity?: number,\n    beginColor?: Color,\n    endColor?: Color,\n    position?: Vector,\n    velocity?: Vector,\n    acceleration?: Vector,\n    startSize?: number,\n    endSize?: number\n  ) {\n    super();\n    let emitter = emitterOrConfig;\n    if (emitter && !(emitterOrConfig instanceof ParticleEmitter)) {\n      const config = emitterOrConfig;\n      emitter = config.emitter;\n      life = config.life;\n      opacity = config.opacity;\n      endColor = config.endColor;\n      beginColor = config.beginColor;\n      position = config.position;\n      velocity = config.velocity;\n      acceleration = config.acceleration;\n      startSize = config.startSize;\n      endSize = config.endSize;\n    }\n    this.emitter = <ParticleEmitter>emitter;\n    this.life = life || this.life;\n    this.opacity = opacity || this.opacity;\n    this.endColor = endColor || this.endColor.clone();\n    this.beginColor = beginColor || this.beginColor.clone();\n    this._currentColor = this.beginColor.clone();\n    this.position = position || this.position;\n    this.velocity = velocity || this.velocity;\n    this.acceleration = acceleration || this.acceleration;\n    this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\n    this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\n    this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\n    this._aRate = this.opacity / this.life;\n\n    this.startSize = startSize || 0;\n    this.endSize = endSize || 0;\n\n    if (this.endSize > 0 && this.startSize > 0) {\n      this.sizeRate = (this.endSize - this.startSize) / this.life;\n      this.particleSize = this.startSize;\n    }\n\n    this.transform = new TransformComponent();\n    this.addComponent(this.transform);\n    this.addComponent(this.graphics);\n\n    this.transform.pos = this.position;\n    this.transform.rotation = this.currentRotation;\n    this.transform.scale = vec(this.particleSize, this.particleSize);\n    this.graphics.opacity = this.opacity;\n  }\n\n  public kill() {\n    this.emitter.removeParticle(this);\n  }\n\n  public update(delta: number) {\n    this.life = this.life - delta;\n    this.elapsedMultiplier = this.elapsedMultiplier + delta;\n\n    if (this.life < 0) {\n      this.kill();\n    }\n\n    if (this.fadeFlag) {\n      this.opacity = Util.clamp(this._aRate * this.life, 0.0001, 1);\n    }\n\n    if (this.startSize > 0 && this.endSize > 0) {\n      this.particleSize = Util.clamp(\n        this.sizeRate * delta + this.particleSize,\n        Math.min(this.startSize, this.endSize),\n        Math.max(this.startSize, this.endSize)\n      );\n    }\n\n    this._currentColor.r = Util.clamp(this._currentColor.r + this._rRate * delta, 0, 255);\n    this._currentColor.g = Util.clamp(this._currentColor.g + this._gRate * delta, 0, 255);\n    this._currentColor.b = Util.clamp(this._currentColor.b + this._bRate * delta, 0, 255);\n    this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\n\n    if (this.focus) {\n      const accel = this.focus\n        .sub(this.position)\n        .normalize()\n        .scale(this.focusAccel)\n        .scale(delta / 1000);\n      this.velocity = this.velocity.add(accel);\n    } else {\n      this.velocity = this.velocity.add(this.acceleration.scale(delta / 1000));\n    }\n    this.position = this.position.add(this.velocity.scale(delta / 1000));\n\n    if (this.particleRotationalVelocity) {\n      this.currentRotation = (this.currentRotation + (this.particleRotationalVelocity * delta) / 1000) % (2 * Math.PI);\n    }\n\n    this.transform.pos = this.position;\n    this.transform.rotation = this.currentRotation;\n    this.transform.scale = vec(this.particleSize, this.particleSize);\n    this.graphics.opacity = this.opacity;\n  }\n\n  public draw(ctx: CanvasRenderingContext2D) {\n    if (this.particleSprite) {\n      this.particleSprite.rotation = this.currentRotation;\n      this.particleSprite.scale.setTo(this.particleSize, this.particleSize);\n      this.particleSprite.draw(ctx, this.position.x, this.position.y);\n      return;\n    }\n\n    this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\n    ctx.fillStyle = this._currentColor.toString();\n    ctx.beginPath();\n    ctx.arc(this.position.x, this.position.y, this.particleSize, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.closePath();\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface ParticleArgs extends Partial<ParticleImpl> {\n  emitter: ParticleEmitter;\n  position?: Vector;\n  velocity?: Vector;\n  acceleration?: Vector;\n  particleRotationalVelocity?: number;\n  currentRotation?: number;\n  particleSize?: number;\n  particleSprite?: Sprite;\n}\n\n/**\n * Particle is used in a [[ParticleEmitter]]\n */\nexport class Particle extends Configurable(ParticleImpl) {\n  constructor(config: ParticleArgs);\n  constructor(\n    emitter: ParticleEmitter,\n    life?: number,\n    opacity?: number,\n    beginColor?: Color,\n    endColor?: Color,\n    position?: Vector,\n    velocity?: Vector,\n    acceleration?: Vector,\n    startSize?: number,\n    endSize?: number\n  );\n  constructor(\n    emitterOrConfig: ParticleEmitter | ParticleArgs,\n    life?: number,\n    opacity?: number,\n    beginColor?: Color,\n    endColor?: Color,\n    position?: Vector,\n    velocity?: Vector,\n    acceleration?: Vector,\n    startSize?: number,\n    endSize?: number\n  ) {\n    super(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize);\n  }\n}\n\n/**\n * @hidden\n */\nexport class ParticleEmitterImpl extends Actor {\n  private _particlesToEmit: number;\n\n  public numParticles: number = 0;\n\n  /**\n   * Random number generator\n   */\n  public random: Random;\n\n  /**\n   * Gets or sets the isEmitting flag\n   */\n  public isEmitting: boolean = true;\n  /**\n   * Gets or sets the backing particle collection\n   */\n  public particles: Util.Collection<Particle> = null;\n\n  /**\n   * Gets or sets the backing deadParticle collection\n   */\n  public deadParticles: Util.Collection<Particle> = null;\n\n  /**\n   * Gets or sets the minimum particle velocity\n   */\n  public minVel: number = 0;\n  /**\n   * Gets or sets the maximum particle velocity\n   */\n  public maxVel: number = 0;\n\n  /**\n   * Gets or sets the acceleration vector for all particles\n   */\n  public acceleration: Vector = new Vector(0, 0);\n\n  /**\n   * Gets or sets the minimum angle in radians\n   */\n  public minAngle: number = 0;\n  /**\n   * Gets or sets the maximum angle in radians\n   */\n  public maxAngle: number = 0;\n\n  /**\n   * Gets or sets the emission rate for particles (particles/sec)\n   */\n  public emitRate: number = 1; //particles/sec\n  /**\n   * Gets or sets the life of each particle in milliseconds\n   */\n  public particleLife: number = 2000;\n  /**\n   * Gets or sets the opacity of each particle from 0 to 1.0\n   */\n  public opacity: number = 1;\n  /**\n   * Gets or sets the fade flag which causes particles to gradually fade out over the course of their life.\n   */\n  public fadeFlag: boolean = false;\n\n  /**\n   * Gets or sets the optional focus where all particles should accelerate towards\n   */\n  public focus: Vector = null;\n  /**\n   * Gets or sets the acceleration for focusing particles if a focus has been specified\n   */\n  public focusAccel: number = 1;\n  /*\n   * Gets or sets the optional starting size for the particles\n   */\n  public startSize: number = null;\n  /*\n   * Gets or sets the optional ending size for the particles\n   */\n  public endSize: number = null;\n\n  /**\n   * Gets or sets the minimum size of all particles\n   */\n  public minSize: number = 5;\n  /**\n   * Gets or sets the maximum size of all particles\n   */\n  public maxSize: number = 5;\n\n  /**\n   * Gets or sets the beginning color of all particles\n   */\n  public beginColor: Color = Color.White;\n  /**\n   * Gets or sets the ending color of all particles\n   */\n  public endColor: Color = Color.White;\n\n  /**\n   * Gets or sets the sprite that a particle should use\n   * @warning Performance intensive\n   */\n  public particleSprite: Sprite = null;\n  public sprite: Graphics.Sprite = null;\n\n  /**\n   * Gets or sets the emitter type for the particle emitter\n   */\n  public emitterType: EmitterType = EmitterType.Rectangle;\n\n  /**\n   * Gets or sets the emitter radius, only takes effect when the [[emitterType]] is [[EmitterType.Circle]]\n   */\n  public radius: number = 0;\n\n  /**\n   * Gets or sets the particle rotational speed velocity\n   */\n  public particleRotationalVelocity: number = 0;\n\n  /**\n   * Indicates whether particles should start with a random rotation\n   */\n  public randomRotation: boolean = false;\n\n  /**\n   * @param x       The x position of the emitter\n   * @param y       The y position of the emitter\n   * @param width   The width of the emitter\n   * @param height  The height of the emitter\n   */\n  constructor(xOrConfig?: number | ParticleEmitterArgs, y?: number, width?: number, height?: number) {\n    super(typeof xOrConfig === 'number' ? { pos: new Vector(xOrConfig, y), width: width, height: height } : xOrConfig);\n    this._particlesToEmit = 0;\n    this.body.collider.type = CollisionType.PreventCollision;\n    this.particles = new Util.Collection<Particle>();\n    this.deadParticles = new Util.Collection<Particle>();\n    this.random = new Random();\n\n    // Remove offscreen culling from particle emitters\n    for (let i = 0; i < this.traits.length; i++) {\n      if (this.traits[i] instanceof Traits.OffscreenCulling) {\n        this.traits.splice(i, 1);\n      }\n    }\n  }\n\n  public removeParticle(particle: Particle) {\n    this.deadParticles.push(particle);\n  }\n\n  /**\n   * Causes the emitter to emit particles\n   * @param particleCount  Number of particles to emit right now\n   */\n  public emitParticles(particleCount: number) {\n    for (let i = 0; i < particleCount; i++) {\n      this.particles.push(this._createParticle());\n    }\n  }\n\n  public clearParticles() {\n    this.particles.clear();\n  }\n\n  // Creates a new particle given the constraints of the emitter\n  private _createParticle(): Particle {\n    // todo implement emitter constraints;\n    let ranX = 0;\n    let ranY = 0;\n\n    const angle = Util.randomInRange(this.minAngle, this.maxAngle, this.random);\n    const vel = Util.randomInRange(this.minVel, this.maxVel, this.random);\n    const size = this.startSize || Util.randomInRange(this.minSize, this.maxSize, this.random);\n    const dx = vel * Math.cos(angle);\n    const dy = vel * Math.sin(angle);\n\n    if (this.emitterType === EmitterType.Rectangle) {\n      ranX = Util.randomInRange(this.pos.x, this.pos.x + this.width, this.random);\n      ranY = Util.randomInRange(this.pos.y, this.pos.y + this.height, this.random);\n    } else if (this.emitterType === EmitterType.Circle) {\n      const radius = Util.randomInRange(0, this.radius, this.random);\n      ranX = radius * Math.cos(angle) + this.pos.x;\n      ranY = radius * Math.sin(angle) + this.pos.y;\n    }\n\n    const p = new Particle(\n      this,\n      this.particleLife,\n      this.opacity,\n      this.beginColor,\n      this.endColor,\n      new Vector(ranX, ranY),\n      new Vector(dx, dy),\n      this.acceleration,\n      this.startSize,\n      this.endSize\n    );\n    p.fadeFlag = this.fadeFlag;\n    p.particleSize = size;\n    if (this.particleSprite) {\n      p.particleSprite = this.particleSprite;\n    }\n    p.particleRotationalVelocity = this.particleRotationalVelocity;\n    if (this.randomRotation) {\n      p.currentRotation = Util.randomInRange(0, Math.PI * 2, this.random);\n    }\n    if (this.focus) {\n      p.focus = this.focus.add(new Vector(this.pos.x, this.pos.y));\n      p.focusAccel = this.focusAccel;\n    }\n    p.graphics.show(this.sprite);\n    p.graphics.anchor = Vector.Half;\n    return p;\n  }\n\n  public update(engine: Engine, delta: number) {\n    super.update(engine, delta);\n\n    if (this.isEmitting) {\n      this._particlesToEmit += this.emitRate * (delta / 1000);\n      //var numParticles = Math.ceil(this.emitRate * delta / 1000);\n      if (this._particlesToEmit > 1.0) {\n        this.emitParticles(Math.floor(this._particlesToEmit));\n        this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\n      }\n    }\n\n    this.particles.forEach((p) => p.update(delta));\n    this.deadParticles.forEach((p) => this.particles.removeElement(p));\n    this.deadParticles.clear();\n  }\n\n  public draw(ctx: CanvasRenderingContext2D) {\n    // todo is there a more efficient to draw\n    // possibly use a webgl offscreen canvas and shaders to do particles?\n    this.particles.forEach((p) => p.draw(ctx));\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    super.debugDraw(ctx);\n    ctx.fillStyle = Color.Black.toString();\n    ctx.fillText('Particles: ' + this.particles.count(), this.pos.x, this.pos.y + 20);\n\n    if (this.focus) {\n      ctx.fillRect(this.focus.x + this.pos.x, this.focus.y + this.pos.y, 3, 3);\n      DrawUtil.line(ctx, Color.Yellow, this.focus.x + this.pos.x, this.focus.y + this.pos.y, this.center.x, this.center.y);\n      ctx.fillText('Focus', this.focus.x + this.pos.x, this.focus.y + this.pos.y);\n    }\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface ParticleEmitterArgs extends Partial<ParticleEmitterImpl> {\n  width?: number;\n  height?: number;\n  isEmitting?: boolean;\n  minVel?: number;\n  maxVel?: number;\n  acceleration?: Vector;\n  minAngle?: number;\n  maxAngle?: number;\n  emitRate?: number;\n  particleLife?: number;\n  opacity?: number;\n  fadeFlag?: boolean;\n  focus?: Vector;\n  focusAccel?: number;\n  startSize?: number;\n  endSize?: number;\n  minSize?: number;\n  maxSize?: number;\n  beginColor?: Color;\n  endColor?: Color;\n  particleSprite?: Sprite;\n  emitterType?: EmitterType;\n  radius?: number;\n  particleRotationalVelocity?: number;\n  randomRotation?: boolean;\n  random?: Random;\n}\n\n/**\n * Using a particle emitter is a great way to create interesting effects\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\n * extend [[Actor]] allowing you to use all of the features that come with.\n *\n * [[include:Particles.md]]\n */\nexport class ParticleEmitter extends Configurable(ParticleEmitterImpl) {\n  constructor(config?: ParticleEmitterArgs);\n  constructor(x?: number | ParticleEmitterArgs, y?: number, width?: number, height?: number);\n  constructor(xOrConfig?: number | ParticleEmitterArgs, y?: number, width?: number, height?: number) {\n    super(xOrConfig, y, width, height);\n  }\n}\n","import { ScreenElement } from './ScreenElement';\nimport { Physics } from './Physics';\nimport {\n  InitializeEvent,\n  ActivateEvent,\n  DeactivateEvent,\n  PreUpdateEvent,\n  PostUpdateEvent,\n  PreDrawEvent,\n  PostDrawEvent,\n  PreDebugDrawEvent,\n  PostDebugDrawEvent,\n  GameEvent\n} from './Events';\nimport { Logger } from './Util/Log';\nimport { Timer } from './Timer';\nimport { DynamicTreeCollisionBroadphase } from './Collision/DynamicTreeCollisionBroadphase';\nimport { CollisionBroadphase } from './Collision/CollisionResolver';\nimport { SortedList } from './Util/SortedList';\nimport { Engine } from './Engine';\nimport { TileMap } from './TileMap';\nimport { Camera } from './Camera';\nimport { Actor } from './Actor';\nimport { Class } from './Class';\nimport { CanInitialize, CanActivate, CanDeactivate, CanUpdate, CanDraw } from './Interfaces/LifecycleEvents';\nimport * as Util from './Util/Util';\nimport * as Events from './Events';\nimport * as ActorUtils from './Util/Actors';\nimport { Trigger } from './Trigger';\nimport { Body } from './Collision/Body';\nimport { ExcaliburGraphicsContext, GraphicsComponent } from './Graphics';\nimport { GraphicsSystem } from './Graphics/GraphicsSystem';\nimport { Entity } from './Entity';\nimport { TransformComponent } from './Transform';\nimport { ParticleEmitter } from './Particles';\n/**\n * [[Actor|Actors]] are composed together into groupings called Scenes in\n * Excalibur. The metaphor models the same idea behind real world\n * actors in a scene. Only actors in scenes will be updated and drawn.\n *\n * Typical usages of a scene include: levels, menus, loading screens, etc.\n *\n * [[include:Scenes.md]]\n */\nexport class Scene extends Class implements CanInitialize, CanActivate, CanDeactivate, CanUpdate, CanDraw {\n  /**\n   * Gets or sets the current camera for the scene\n   */\n  public camera: Camera;\n\n  /**\n   * The actors in the current scene\n   */\n  public actors: Actor[] = [];\n\n  /**\n   * The entities in the current scene\n   */\n  public entities: Entity[] = [];\n\n  /**\n   * Physics bodies in the current scene\n   */\n  private _bodies: Body[] = [];\n\n  /**\n   * The triggers in the current scene\n   */\n  public triggers: Trigger[] = [];\n\n  /**\n   * The [[TileMap]]s in the scene, if any\n   */\n  public tileMaps: TileMap[] = [];\n\n  /**\n   * Access to the Excalibur engine\n   */\n  private _engine: Engine;\n\n  private _graphicsSystem: GraphicsSystem;\n  private _graphicsContext: ExcaliburGraphicsContext;\n\n  /**\n   * The [[ScreenElement]]s in a scene, if any; these are drawn last\n   */\n  public screenElements: Actor[] = [];\n\n  private _isInitialized: boolean = false;\n\n  private _sortedDrawingTree: SortedList<Actor> = new SortedList<Actor>(Actor.prototype.getZIndex);\n\n  private _broadphase: CollisionBroadphase = new DynamicTreeCollisionBroadphase();\n\n  private _killQueue: Actor[] = [];\n  private _triggerKillQueue: Trigger[] = [];\n  private _timers: Timer[] = [];\n  private _cancelQueue: Timer[] = [];\n  private _logger: Logger = Logger.getInstance();\n\n  constructor(_engine: Engine) {\n    super();\n    this.camera = new Camera();\n    this._engine = _engine;\n    if (_engine) {\n      this.camera.x = _engine.halfDrawWidth;\n      this.camera.y = _engine.halfDrawHeight;\n    }\n  }\n\n  public on(eventName: Events.initialize, handler: (event: InitializeEvent) => void): void;\n  public on(eventName: Events.activate, handler: (event: ActivateEvent) => void): void;\n  public on(eventName: Events.deactivate, handler: (event: DeactivateEvent) => void): void;\n  public on(eventName: Events.preupdate, handler: (event: PreUpdateEvent) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: PostUpdateEvent) => void): void;\n  public on(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public on(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public on(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  public once(eventName: Events.initialize, handler: (event: InitializeEvent) => void): void;\n  public once(eventName: Events.activate, handler: (event: ActivateEvent) => void): void;\n  public once(eventName: Events.deactivate, handler: (event: DeactivateEvent) => void): void;\n  public once(eventName: Events.preupdate, handler: (event: PreUpdateEvent) => void): void;\n  public once(eventName: Events.postupdate, handler: (event: PostUpdateEvent) => void): void;\n  public once(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public once(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public once(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public once(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    super.once(eventName, handler);\n  }\n\n  public off(eventName: Events.initialize, handler?: (event: InitializeEvent) => void): void;\n  public off(eventName: Events.activate, handler?: (event: ActivateEvent) => void): void;\n  public off(eventName: Events.deactivate, handler?: (event: DeactivateEvent) => void): void;\n  public off(eventName: Events.preupdate, handler?: (event: PreUpdateEvent) => void): void;\n  public off(eventName: Events.postupdate, handler?: (event: PostUpdateEvent) => void): void;\n  public off(eventName: Events.predraw, handler?: (event: PreDrawEvent) => void): void;\n  public off(eventName: Events.postdraw, handler?: (event: PostDrawEvent) => void): void;\n  public off(eventName: Events.predebugdraw, handler?: (event: PreDebugDrawEvent) => void): void;\n  public off(eventName: Events.postdebugdraw, handler?: (event: PostDebugDrawEvent) => void): void;\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void): void;\n  public off(eventName: string, handler?: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  /**\n   * This is called before the first update of the [[Scene]]. Initializes scene members like the camera. This method is meant to be\n   * overridden. This is where initialization of child actors should take place.\n   */\n  public onInitialize(_engine: Engine): void {\n    // will be overridden\n  }\n\n  /**\n   * This is called when the scene is made active and started. It is meant to be overridden,\n   * this is where you should setup any DOM UI or event handlers needed for the scene.\n   */\n  public onActivate(_oldScene: Scene, _newScene: Scene): void {\n    // will be overridden\n  }\n\n  /**\n   * This is called when the scene is made transitioned away from and stopped. It is meant to be overridden,\n   * this is where you should cleanup any DOM UI or event handlers needed for the scene.\n   */\n  public onDeactivate(_oldScene: Scene, _newScene: Scene): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before a scene is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after a scene is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreDraw` is called directly before a scene is drawn.\n   */\n  public onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostDraw` is called directly after a scene is drawn.\n   */\n  public onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Initializes actors in the scene\n   */\n  private _initializeChildren(): void {\n    for (const child of this.actors) {\n      child._initialize(this._engine);\n    }\n  }\n\n  /**\n   * Gets whether or not the [[Scene]] has been initialized\n   */\n  public get isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Initializes the scene before the first update, meant to be called by engine not by users of\n   * Excalibur\n   * @internal\n   */\n  public _initialize(engine: Engine) {\n    if (!this.isInitialized) {\n      this._engine = engine;\n      this._graphicsContext = engine.graphicsContext;\n      this._graphicsSystem = new GraphicsSystem(this._graphicsContext, this);\n      if (this.camera) {\n        this.camera.x = engine.halfDrawWidth;\n        this.camera.y = engine.halfDrawHeight;\n      }\n\n      // This order is important! we want to be sure any custom init that add actors\n      // fire before the actor init\n      this.onInitialize.call(this, engine);\n      this._initializeChildren();\n\n      this._logger.debug('Scene.onInitialize', this, engine);\n      this.eventDispatcher.emit('initialize', new InitializeEvent(engine, this));\n      this._isInitialized = true;\n    }\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Activates the scene with the base behavior, then calls the overridable `onActivate` implementation.\n   * @internal\n   */\n  public _activate(oldScene: Scene, newScene: Scene): void {\n    this._logger.debug('Scene.onActivate', this);\n    this.onActivate(oldScene, newScene);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Deactivates the scene with the base behavior, then calls the overridable `onDeactivate` implementation.\n   * @internal\n   */\n  public _deactivate(oldScene: Scene, newScene: Scene): void {\n    this._logger.debug('Scene.onDeactivate', this);\n    this.onDeactivate(oldScene, newScene);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(_engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(_engine, delta, this));\n    this.onPreUpdate(_engine, delta);\n  }\n\n  /**\n   *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(_engine: Engine, delta: number): void {\n    this.emit('postupdate', new PostUpdateEvent(_engine, delta, this));\n    this.onPostUpdate(_engine, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _predraw handler for [[onPreDraw]] lifecycle event\n   *\n   * @internal\n   */\n  public _predraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    this.emit('predraw', new PreDrawEvent(_ctx, _delta, this));\n    this.onPreDraw(_ctx, _delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _postdraw handler for [[onPostDraw]] lifecycle event\n   *\n   * @internal\n   */\n  public _postdraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    this.emit('postdraw', new PostDrawEvent(_ctx, _delta, this));\n    this.onPostDraw(_ctx, _delta);\n  }\n\n  /**\n   * Updates all the actors and timers in the scene. Called by the [[Engine]].\n   * @param engine  Reference to the current Engine\n   * @param delta   The number of milliseconds since the last update\n   */\n  public update(engine: Engine, delta: number) {\n    this._preupdate(engine, delta);\n    if (this.camera) {\n      this.camera.update(engine, delta);\n    }\n\n    let i: number, len: number;\n    // Remove timers in the cancel queue before updating them\n    for (i = 0, len = this._cancelQueue.length; i < len; i++) {\n      this.removeTimer(this._cancelQueue[i]);\n    }\n    this._cancelQueue.length = 0;\n\n    // Cycle through timers updating timers\n    for (const timer of this._timers) {\n      timer.update(delta);\n    }\n\n    // Cycle through actors updating UI actors\n    for (i = 0, len = this.screenElements.length; i < len; i++) {\n      this.screenElements[i].update(engine, delta);\n    }\n\n    // Cycle through actors updating tile maps\n    for (i = 0, len = this.tileMaps.length; i < len; i++) {\n      this.tileMaps[i].update(engine, delta);\n    }\n\n    // Cycle through actors updating actors\n    for (i = 0, len = this.actors.length; i < len; i++) {\n      this.actors[i].update(engine, delta);\n      this._bodies[i] = this.actors[i].body;\n    }\n\n    // Cycle through triggers updating\n    for (i = 0, len = this.triggers.length; i < len; i++) {\n      this.triggers[i].update(engine, delta);\n    }\n\n    this._collectActorStats(engine);\n\n    engine.input.pointers.dispatchPointerEvents();\n\n    // Run the broadphase and narrowphase\n    if (this._broadphase && Physics.enabled) {\n      const beforeBroadphase = Date.now();\n      this._broadphase.update(this._bodies, delta);\n      let pairs = this._broadphase.broadphase(this._bodies, delta, engine.stats.currFrame);\n      const afterBroadphase = Date.now();\n\n      const beforeNarrowphase = Date.now();\n      let iter: number = Physics.collisionPasses;\n      const collisionDelta = delta / iter;\n      while (iter > 0) {\n        // Run the narrowphase\n        pairs = this._broadphase.narrowphase(pairs, engine.stats.currFrame);\n        // Run collision resolution strategy\n        pairs = this._broadphase.resolve(pairs, collisionDelta, Physics.collisionResolutionStrategy);\n\n        this._broadphase.runCollisionStartEnd(pairs);\n\n        iter--;\n      }\n\n      const afterNarrowphase = Date.now();\n      engine.stats.currFrame.physics.broadphase = afterBroadphase - beforeBroadphase;\n      engine.stats.currFrame.physics.narrowphase = afterNarrowphase - beforeNarrowphase;\n    }\n\n    engine.stats.currFrame.actors.killed = this._killQueue.length + this._triggerKillQueue.length;\n\n    this._processKillQueue(this._killQueue, this.actors);\n    this._processKillQueue(this._triggerKillQueue, this.triggers);\n\n    this._postupdate(engine, delta);\n  }\n\n  private _processKillQueue(killQueue: Actor[], collection: Actor[]) {\n    // Remove actors from scene graph after being killed\n    let actorIndex: number;\n    for (const killed of killQueue) {\n      //don't remove actors that were readded during the same frame they were killed\n      if (killed.isKilled()) {\n        actorIndex = collection.indexOf(killed);\n        if (actorIndex > -1) {\n          this._sortedDrawingTree.removeByComparable(killed);\n          collection.splice(actorIndex, 1);\n        }\n      }\n    }\n    killQueue.length = 0;\n  }\n\n  private _getTileMapCells() {\n    let cells: Entity<TransformComponent | GraphicsComponent>[] = [];\n    let i: number, len: number;\n    for (i = 0, len = this.tileMaps.length; i < len; i++) {\n      cells = cells.concat(this.tileMaps[i].getCellsOnScreen());\n    }\n    return cells;\n  }\n\n  private _getParticles() {\n    let emitters: ParticleEmitter[] = this.actors.filter((a) => a instanceof ParticleEmitter) as ParticleEmitter[];\n    let particles: Entity<TransformComponent | GraphicsComponent>[] = [];\n    for (let e of emitters) {\n      particles = particles.concat(e.particles.toArray());\n    }\n    return particles;\n  }\n\n  /**\n   * Draws all the actors in the Scene. Called by the [[Engine]].\n   * @param ctx    The current rendering context\n   * @param delta  The number of milliseconds since the last draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    this._predraw(ctx, delta);\n    ctx.save();\n\n    if (Engine._useLegacyDrawing) {\n      this.__legacyDraw(ctx, delta);\n    } else {\n      // TODO with ECS this will be more formalized using the entity manager\n\n      let entities = (this.entities as Entity<TransformComponent | GraphicsComponent>[])\n        .concat(this._getParticles())\n        .concat(this._getTileMapCells());\n      this._graphicsSystem.update(entities, delta);\n    }\n\n    ctx.restore();\n    this._postdraw(ctx, delta);\n  }\n\n  public __legacyDraw(ctx: CanvasRenderingContext2D, delta: number) {\n    this._graphicsContext.clear();\n\n    this._predraw(ctx, delta);\n    ctx.save();\n\n    if (this.camera) {\n      this.camera.draw(this._graphicsContext);\n    }\n\n    let i: number, len: number;\n\n    for (i = 0, len = this.tileMaps.length; i < len; i++) {\n      this.tileMaps[i].draw(ctx, delta);\n    }\n\n    const sortedChildren = this._sortedDrawingTree.list();\n    for (i = 0, len = sortedChildren.length; i < len; i++) {\n      // only draw actors that are visible and on screen\n      if (sortedChildren[i].visible && !sortedChildren[i].isOffScreen) {\n        sortedChildren[i].draw(ctx, delta);\n      }\n    }\n\n    if (this._engine && this._engine.isDebug) {\n      ctx.strokeStyle = 'yellow';\n      this.debugDraw(ctx);\n    }\n\n    ctx.restore();\n\n    for (i = 0, len = this.screenElements.length; i < len; i++) {\n      // only draw ui actors that are visible and on screen\n      if (this.screenElements[i].visible) {\n        this.screenElements[i].draw(ctx, delta);\n      }\n    }\n\n    if (this._engine && this._engine.isDebug) {\n      for (i = 0, len = this.screenElements.length; i < len; i++) {\n        this.screenElements[i].debugDraw(ctx);\n      }\n    }\n    this._postdraw(ctx, delta);\n  }\n\n  /**\n   * Draws all the actors' debug information in the Scene. Called by the [[Engine]].\n   * @param ctx  The current rendering context\n   */\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\n\n    let i: number, len: number;\n\n    for (i = 0, len = this.tileMaps.length; i < len; i++) {\n      this.tileMaps[i].debugDraw(ctx);\n    }\n\n    for (i = 0, len = this.actors.length; i < len; i++) {\n      this.actors[i].debugDraw(ctx);\n    }\n\n    for (i = 0, len = this.triggers.length; i < len; i++) {\n      this.triggers[i].debugDraw(ctx);\n    }\n\n    this._broadphase.debugDraw(ctx, 20);\n\n    this.camera.debugDraw(ctx);\n    this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\n  }\n\n  /**\n   * Checks whether an actor is contained in this scene or not\n   */\n  public contains(actor: Actor): boolean {\n    return this.actors.indexOf(actor) > -1;\n  }\n\n  /**\n   * Adds a [[Timer]] to the current [[Scene]].\n   * @param timer  The timer to add to the current [[Scene]].\n   */\n  public add(timer: Timer): void;\n\n  /**\n   * Adds a [[TileMap]] to the [[Scene]], once this is done the [[TileMap]] will be drawn and updated.\n   */\n  public add(tileMap: TileMap): void;\n\n  /**\n   * Adds a [[Trigger]] to the [[Scene]], once this is done the [[Trigger]] will listen for interactions with other actors.\n   * @param trigger\n   */\n  public add(trigger: Trigger): void;\n\n  /**\n   * Adds an actor to the scene, once this is done the [[Actor]] will be drawn and updated.\n   * @param actor  The actor to add to the current scene\n   */\n  public add(actor: Actor): void;\n\n  /**\n   * Adds a [[ScreenElement]] to the scene.\n   * @param screenElement  The ScreenElement to add to the current scene\n   */\n  public add(screenElement: ScreenElement): void;\n  /**\n   * Adds an [[Entity]] to the scene.\n   * @param entity\n   */\n  public add(entity: Entity): void;\n  public add(entity: any): void {\n    if (entity instanceof Actor) {\n      (<Actor>entity).unkill();\n    }\n    if (entity instanceof ScreenElement) {\n      if (!Util.contains(this.screenElements, entity)) {\n        this.addScreenElement(entity);\n        this.addEntity(entity);\n      }\n      return;\n    }\n\n    if (entity instanceof Actor) {\n      if (!Util.contains(this.actors, entity)) {\n        this._addChild(entity);\n        this.addEntity(entity);\n      }\n      return;\n    }\n\n    if (entity instanceof Timer) {\n      if (!Util.contains(this._timers, entity)) {\n        this.addTimer(entity);\n      }\n      return;\n    }\n    if (entity instanceof TileMap) {\n      if (!Util.contains(this.tileMaps, entity)) {\n        this.addTileMap(entity);\n      }\n    }\n  }\n\n  /**\n   * Removes a [[Timer]] from the current scene, it will no longer be updated.\n   * @param timer  The timer to remove to the current scene.\n   */\n  public remove(timer: Timer): void;\n\n  /**\n   * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\n   * @param tileMap {TileMap}\n   */\n  public remove(tileMap: TileMap): void;\n\n  /**\n   * Removes an actor from the scene, it will no longer be drawn or updated.\n   * @param actor  The actor to remove from the current scene.\n   */\n  public remove(actor: Actor): void;\n\n  /**\n   * Removes a [[ScreenElement]] to the scene, it will no longer be drawn or updated\n   * @param screenElement  The ScreenElement to remove from the current scene\n   */\n  public remove(screenElement: ScreenElement): void;\n  /**\n   * Removes an [[Entity]] from the the scene\n   * @param entity\n   */\n  public remove(entity: Entity): void;\n  public remove(entity: any): void {\n    if (entity instanceof ScreenElement) {\n      this.removeScreenElement(entity);\n      this.removeEntity(entity);\n      return;\n    }\n\n    if (entity instanceof Actor) {\n      this._removeChild(entity);\n      this.removeEntity(entity);\n    }\n\n    if (entity instanceof Entity) {\n      this.removeEntity(entity);\n    }\n\n    if (entity instanceof Timer) {\n      this.removeTimer(entity);\n    }\n\n    if (entity instanceof TileMap) {\n      this.removeTileMap(entity);\n    }\n  }\n\n  public addEntity(entity: Entity) {\n    this.entities.push(entity);\n  }\n\n  public removeEntity(entity: Entity) {\n    const index = this.entities.indexOf(entity);\n    if (index > -1) {\n      this.entities.splice(index, 1);\n    }\n  }\n\n  /**\n   * Adds (any) actor to act as a piece of UI, meaning it is always positioned\n   * in screen coordinates. UI actors do not participate in collisions.\n   * @todo Should this be `ScreenElement` only?\n   */\n  public addScreenElement(actor: Actor) {\n    this.screenElements.push(actor);\n    actor.scene = this;\n  }\n\n  /**\n   * Removes an actor as a piece of UI\n   */\n  public removeScreenElement(actor: Actor) {\n    const index = this.screenElements.indexOf(actor);\n    if (index > -1) {\n      this.screenElements.splice(index, 1);\n    }\n  }\n\n  /**\n   * Adds an actor to the scene, once this is done the actor will be drawn and updated.\n   */\n  protected _addChild(actor: Actor) {\n    this._broadphase.track(actor.body);\n    actor.scene = this;\n    if (actor instanceof Trigger) {\n      this.triggers.push(actor);\n    } else {\n      this.actors.push(actor);\n    }\n\n    this._sortedDrawingTree.add(actor);\n  }\n\n  /**\n   * Adds a [[TileMap]] to the scene, once this is done the TileMap will be drawn and updated.\n   */\n  public addTileMap(tileMap: TileMap) {\n    this.tileMaps.push(tileMap);\n  }\n\n  /**\n   * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\n   */\n  public removeTileMap(tileMap: TileMap) {\n    const index = this.tileMaps.indexOf(tileMap);\n    if (index > -1) {\n      this.tileMaps.splice(index, 1);\n    }\n  }\n\n  /**\n   * Removes an actor from the scene, it will no longer be drawn or updated.\n   */\n  protected _removeChild(actor: Actor) {\n    if (!Util.contains(this.actors, actor)) {\n      return;\n    }\n    this._broadphase.untrack(actor.body);\n    if (actor instanceof Trigger) {\n      this._triggerKillQueue.push(actor);\n    } else {\n      if (!actor.isKilled()) {\n        actor.kill();\n      }\n      this._killQueue.push(actor);\n    }\n\n    actor.parent = null;\n  }\n\n  /**\n   * Adds a [[Timer]] to the scene\n   * @param timer  The timer to add\n   */\n  public addTimer(timer: Timer): Timer {\n    this._timers.push(timer);\n    timer.scene = this;\n    return timer;\n  }\n\n  /**\n   * Removes a [[Timer]] from the scene.\n   * @warning Can be dangerous, use [[cancelTimer]] instead\n   * @param timer  The timer to remove\n   */\n  public removeTimer(timer: Timer): Timer {\n    const i = this._timers.indexOf(timer);\n    if (i !== -1) {\n      this._timers.splice(i, 1);\n    }\n    return timer;\n  }\n\n  /**\n   * Cancels a [[Timer]], removing it from the scene nicely\n   * @param timer  The timer to cancel\n   */\n  public cancelTimer(timer: Timer): Timer {\n    this._cancelQueue.push(timer);\n    return timer;\n  }\n\n  /**\n   * Tests whether a [[Timer]] is active in the scene\n   */\n  public isTimerActive(timer: Timer): boolean {\n    return this._timers.indexOf(timer) > -1 && !timer.complete;\n  }\n\n  /**\n   * Removes the given actor from the sorted drawing tree\n   */\n  public cleanupDrawTree(actor: Actor) {\n    this._sortedDrawingTree.removeByComparable(actor);\n  }\n\n  /**\n   * Updates the given actor's position in the sorted drawing tree\n   */\n  public updateDrawTree(actor: Actor) {\n    this._sortedDrawingTree.add(actor);\n  }\n\n  /**\n   * Checks if an actor is in this scene's sorted draw tree\n   */\n  public isActorInDrawTree(actor: Actor): boolean {\n    return this._sortedDrawingTree.find(actor);\n  }\n\n  public isCurrentScene(): boolean {\n    if (this._engine) {\n      return this._engine.currentScene === this;\n    }\n    return false;\n  }\n\n  private _collectActorStats(engine: Engine) {\n    for (const _ui of this.screenElements) {\n      engine.stats.currFrame.actors.ui++;\n    }\n\n    for (const actor of this.actors) {\n      engine.stats.currFrame.actors.alive++;\n      for (const child of actor.children) {\n        if (ActorUtils.isScreenElement(child)) {\n          engine.stats.currFrame.actors.ui++;\n        } else {\n          engine.stats.currFrame.actors.alive++;\n        }\n      }\n    }\n  }\n}\n","import { DebugFlags } from './DebugFlags';\nimport { Pair } from './Collision/Pair';\n\n/**\n * Debug stats containing current and previous frame statistics\n */\nexport interface DebugStats {\n  currFrame: FrameStats;\n  prevFrame: FrameStats;\n}\n\n/**\n * Hash containing the [[Pair.id]]s of pairs that collided in a frame\n */\nexport interface CollidersHash {\n  [pairId: string]: Pair;\n}\n\n/**\n * Represents a frame's individual statistics\n */\nexport interface FrameStatistics {\n  /**\n   * The number of the frame\n   */\n  id: number;\n\n  /**\n   * Gets the frame's delta (time since last frame scaled by [[Engine.timescale]]) (in ms)\n   */\n  delta: number;\n\n  /**\n   * Gets the frame's frames-per-second (FPS)\n   */\n  fps: number;\n\n  /**\n   * Duration statistics (in ms)\n   */\n  duration: FrameDurationStats;\n\n  /**\n   * Actor statistics\n   */\n  actors: FrameActorStats;\n\n  /**\n   * Physics statistics\n   */\n  physics: PhysicsStatistics;\n}\n\n/**\n * Represents actor stats for a frame\n */\nexport interface FrameActorStats {\n  /**\n   * Gets the frame's number of actors (alive)\n   */\n  alive: number;\n\n  /**\n   * Gets the frame's number of actors (killed)\n   */\n  killed: number;\n\n  /**\n   * Gets the frame's number of remaining actors (alive - killed)\n   */\n  remaining: number;\n\n  /**\n   * Gets the frame's number of UI actors\n   */\n  ui: number;\n\n  /**\n   * Gets the frame's number of total actors (remaining + UI)\n   */\n  total: number;\n}\n\n/**\n * Represents duration stats for a frame\n */\nexport interface FrameDurationStats {\n  /**\n   * Gets the frame's total time to run the update function (in ms)\n   */\n  update: number;\n\n  /**\n   * Gets the frame's total time to run the draw function (in ms)\n   */\n  draw: number;\n\n  /**\n   * Gets the frame's total render duration (update + draw duration) (in ms)\n   */\n  total: number;\n}\n\n/**\n * Represents physics stats for the current frame\n */\nexport interface PhysicsStatistics {\n  /**\n   * Gets the number of broadphase collision pairs which\n   */\n  pairs: number;\n\n  /**\n   * Gets the number of actual collisions\n   */\n  collisions: number;\n\n  /**\n   * A Hash storing the [[Pair.id]]s of [[Pair]]s that collided in the frame\n   */\n  collidersHash: CollidersHash;\n\n  /**\n   * Gets the number of fast moving bodies using raycast continuous collisions in the scene\n   */\n  fastBodies: number;\n\n  /**\n   * Gets the number of bodies that had a fast body collision resolution\n   */\n  fastBodyCollisions: number;\n\n  /**\n   * Gets the time it took to calculate the broadphase pairs\n   */\n  broadphase: number;\n\n  /**\n   * Gets the time it took to calculate the narrowphase\n   */\n  narrowphase: number;\n}\n\n/**\n * Debug statistics and flags for Excalibur. If polling these values, it would be\n * best to do so on the `postupdate` event for [[Engine]], after all values have been\n * updated during a frame.\n */\nexport class Debug implements DebugFlags {\n  /**\n   * Performance statistics\n   */\n  public stats: DebugStats = {\n    /**\n     * Current frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\n     * Best accessed on [[postframe]] event. See [[FrameStats]]\n     */\n    currFrame: new FrameStats(),\n\n    /**\n     * Previous frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\n     * Best accessed on [[preframe]] event. Best inspected on engine event `preframe`. See [[FrameStats]]\n     */\n    prevFrame: new FrameStats()\n  };\n}\n\n/**\n * Implementation of a frame's stats. Meant to have values copied via [[FrameStats.reset]], avoid\n * creating instances of this every frame.\n */\nexport class FrameStats implements FrameStatistics {\n  private _id: number = 0;\n  private _delta: number = 0;\n  private _fps: number = 0;\n  private _actorStats: FrameActorStats = {\n    alive: 0,\n    killed: 0,\n    ui: 0,\n    get remaining(this: FrameActorStats) {\n      return this.alive - this.killed;\n    },\n    get total(this: FrameActorStats) {\n      return this.remaining + this.ui;\n    }\n  };\n  private _durationStats: FrameDurationStats = {\n    update: 0,\n    draw: 0,\n    get total(this: FrameDurationStats) {\n      return this.update + this.draw;\n    }\n  };\n\n  private _physicsStats: PhysicsStats = new PhysicsStats();\n\n  /**\n   * Zero out values or clone other IFrameStat stats. Allows instance reuse.\n   *\n   * @param [otherStats] Optional stats to clone\n   */\n  public reset(otherStats?: FrameStatistics) {\n    if (otherStats) {\n      this.id = otherStats.id;\n      this.delta = otherStats.delta;\n      this.fps = otherStats.fps;\n      this.actors.alive = otherStats.actors.alive;\n      this.actors.killed = otherStats.actors.killed;\n      this.actors.ui = otherStats.actors.ui;\n      this.duration.update = otherStats.duration.update;\n      this.duration.draw = otherStats.duration.draw;\n      this._physicsStats.reset(otherStats.physics);\n    } else {\n      this.id = this.delta = this.fps = 0;\n      this.actors.alive = this.actors.killed = this.actors.ui = 0;\n      this.duration.update = this.duration.draw = 0;\n      this._physicsStats.reset();\n    }\n  }\n\n  /**\n   * Provides a clone of this instance.\n   */\n  public clone(): FrameStats {\n    const fs = new FrameStats();\n\n    fs.reset(this);\n\n    return fs;\n  }\n\n  /**\n   * Gets the frame's id\n   */\n  public get id() {\n    return this._id;\n  }\n\n  /**\n   * Sets the frame's id\n   */\n  public set id(value: number) {\n    this._id = value;\n  }\n\n  /**\n   * Gets the frame's delta (time since last frame)\n   */\n  public get delta() {\n    return this._delta;\n  }\n\n  /**\n   * Sets the frame's delta (time since last frame). Internal use only.\n   * @internal\n   */\n  public set delta(value: number) {\n    this._delta = value;\n  }\n\n  /**\n   * Gets the frame's frames-per-second (FPS)\n   */\n  public get fps() {\n    return this._fps;\n  }\n\n  /**\n   * Sets the frame's frames-per-second (FPS). Internal use only.\n   * @internal\n   */\n  public set fps(value: number) {\n    this._fps = value;\n  }\n\n  /**\n   * Gets the frame's actor statistics\n   */\n  public get actors() {\n    return this._actorStats;\n  }\n\n  /**\n   * Gets the frame's duration statistics\n   */\n  public get duration() {\n    return this._durationStats;\n  }\n\n  /**\n   * Gets the frame's physics statistics\n   */\n  public get physics() {\n    return this._physicsStats;\n  }\n}\n\nexport class PhysicsStats implements PhysicsStatistics {\n  private _pairs: number = 0;\n  private _collisions: number = 0;\n  private _collidersHash: CollidersHash = {};\n  private _fastBodies: number = 0;\n  private _fastBodyCollisions: number = 0;\n  private _broadphase: number = 0;\n  private _narrowphase: number = 0;\n\n  /**\n   * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\n   *\n   * @param [otherStats] Optional stats to clone\n   */\n  public reset(otherStats?: PhysicsStatistics) {\n    if (otherStats) {\n      this.pairs = otherStats.pairs;\n      this.collisions = otherStats.collisions;\n      this.collidersHash = otherStats.collidersHash;\n      this.fastBodies = otherStats.fastBodies;\n      this.fastBodyCollisions = otherStats.fastBodyCollisions;\n      this.broadphase = otherStats.broadphase;\n      this.narrowphase = otherStats.narrowphase;\n    } else {\n      this.pairs = this.collisions = this.fastBodies = 0;\n      this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\n      this.collidersHash = {};\n    }\n  }\n\n  /**\n   * Provides a clone of this instance.\n   */\n  public clone(): PhysicsStatistics {\n    const ps = new PhysicsStats();\n\n    ps.reset(this);\n\n    return ps;\n  }\n\n  public get pairs(): number {\n    return this._pairs;\n  }\n\n  public set pairs(value: number) {\n    this._pairs = value;\n  }\n\n  public get collisions(): number {\n    return this._collisions;\n  }\n\n  public set collisions(value: number) {\n    this._collisions = value;\n  }\n\n  public get collidersHash(): CollidersHash {\n    return this._collidersHash;\n  }\n\n  public set collidersHash(colliders: CollidersHash) {\n    this._collidersHash = colliders;\n  }\n\n  public get fastBodies(): number {\n    return this._fastBodies;\n  }\n\n  public set fastBodies(value: number) {\n    this._fastBodies = value;\n  }\n\n  public get fastBodyCollisions(): number {\n    return this._fastBodyCollisions;\n  }\n\n  public set fastBodyCollisions(value: number) {\n    this._fastBodyCollisions = value;\n  }\n\n  public get broadphase(): number {\n    return this._broadphase;\n  }\n\n  public set broadphase(value: number) {\n    this._broadphase = value;\n  }\n\n  public get narrowphase(): number {\n    return this._narrowphase;\n  }\n\n  public set narrowphase(value: number) {\n    this._narrowphase = value;\n  }\n}\n","import { Class } from './../Class';\nimport { GameEvent, GamepadConnectEvent, GamepadDisconnectEvent, GamepadButtonEvent, GamepadAxisEvent } from '../Events';\nimport * as Events from '../Events';\n\n/**\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\n * to provide controller support for your games.\n *\n * [[include:Gamepads.md]]\n */\nexport class Gamepads extends Class {\n  /**\n   * Whether or not to poll for Gamepad input (default: `false`)\n   */\n  public enabled = false;\n\n  /**\n   * Whether or not Gamepad API is supported\n   */\n  public supported = !!(<any>navigator).getGamepads;\n\n  /**\n   * The minimum value an axis has to move before considering it a change\n   */\n  public static MinAxisMoveThreshold = 0.05;\n\n  private _gamePadTimeStamps = [0, 0, 0, 0];\n  private _oldPads: Gamepad[] = [];\n  private _pads: Gamepad[] = [];\n  private _initSuccess: boolean = false;\n  private _navigator: NavigatorGamepads = <any>navigator;\n  private _minimumConfiguration: GamepadConfiguration = null;\n\n  constructor() {\n    super();\n  }\n\n  public init() {\n    if (!this.supported) {\n      return;\n    }\n    if (this._initSuccess) {\n      return;\n    }\n\n    // In Chrome, this will return 4 undefined items until a button is pressed\n    // In FF, this will not return any items until a button is pressed\n    this._oldPads = this._clonePads(this._navigator.getGamepads());\n    if (this._oldPads.length && this._oldPads[0]) {\n      this._initSuccess = true;\n    }\n  }\n\n  /**\n   * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\n   * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\n   * all other controllers with more axis or buttons are valid as well. If no minimum\n   * configuration is set all pads are valid.\n   */\n  public setMinimumGamepadConfiguration(config: GamepadConfiguration): void {\n    this._enableAndUpdate(); // if config is used, implicitly enable\n    this._minimumConfiguration = config;\n  }\n\n  /**\n   * When implicitly enabled, set the enabled flag and run an update so information is updated\n   */\n  private _enableAndUpdate() {\n    if (!this.enabled) {\n      this.enabled = true;\n      this.update();\n    }\n  }\n\n  /**\n   * Checks a navigator gamepad against the minimum configuration if present.\n   */\n  private _isGamepadValid(pad: NavigatorGamepad): boolean {\n    if (!this._minimumConfiguration) {\n      return true;\n    }\n    if (!pad) {\n      return false;\n    }\n    const axesLength = pad.axes.filter((value) => {\n      return typeof value !== undefined;\n    }).length;\n\n    const buttonLength = pad.buttons.filter((value) => {\n      return typeof value !== undefined;\n    }).length;\n    return axesLength >= this._minimumConfiguration.axis && buttonLength >= this._minimumConfiguration.buttons && pad.connected;\n  }\n\n  public on(eventName: Events.connect, handler: (event: GamepadConnectEvent) => void): void;\n  public on(eventName: Events.disconnect, handler: (event: GamepadDisconnectEvent) => void): void;\n  public on(eventName: Events.button, handler: (event: GamepadButtonEvent) => void): void;\n  public on(eventName: Events.axis, handler: (event: GamepadAxisEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    this._enableAndUpdate(); // implicitly enable\n    super.on(eventName, handler);\n  }\n\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void) {\n    this._enableAndUpdate(); // implicitly enable\n    super.off(eventName, handler);\n  }\n\n  /**\n   * Updates Gamepad state and publishes Gamepad events\n   */\n  public update() {\n    if (!this.enabled || !this.supported) {\n      return;\n    }\n    this.init();\n\n    const gamepads = this._navigator.getGamepads();\n\n    for (let i = 0; i < gamepads.length; i++) {\n      if (!gamepads[i]) {\n        const gamepad = this.at(i);\n        // If was connected, but now isn't emit the disconnect event\n        if (gamepad.connected) {\n          this.eventDispatcher.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\n        }\n        // Reset connection status\n        gamepad.connected = false;\n        continue;\n      } else {\n        if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\n          this.eventDispatcher.emit('connect', new GamepadConnectEvent(i, this.at(i)));\n        }\n        // Set connection status\n        this.at(i).connected = true;\n      }\n\n      // Only supported in Chrome\n      if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\n        continue;\n      }\n\n      this._gamePadTimeStamps[i] = gamepads[i].timestamp;\n\n      // Add reference to navigator gamepad\n      this.at(i).navigatorGamepad = gamepads[i];\n\n      // Buttons\n      let b: string, bi: number, a: string, ai: number, value: number;\n\n      for (b in Buttons) {\n        bi = <any>Buttons[b];\n        if (typeof bi === 'number') {\n          if (gamepads[i].buttons[bi]) {\n            value = gamepads[i].buttons[bi].value;\n            if (value !== this._oldPads[i].getButton(bi)) {\n              if (gamepads[i].buttons[bi].pressed) {\n                this.at(i).updateButton(bi, value);\n                this.at(i).eventDispatcher.emit('button', new GamepadButtonEvent(bi, value, this.at(i)));\n              } else {\n                this.at(i).updateButton(bi, 0);\n              }\n            }\n          }\n        }\n      }\n\n      // Axes\n      for (a in Axes) {\n        ai = <any>Axes[a];\n        if (typeof ai === 'number') {\n          value = gamepads[i].axes[ai];\n          if (value !== this._oldPads[i].getAxes(ai)) {\n            this.at(i).updateAxes(ai, value);\n            this.at(i).eventDispatcher.emit('axis', new GamepadAxisEvent(ai, value, this.at(i)));\n          }\n        }\n      }\n\n      this._oldPads[i] = this._clonePad(gamepads[i]);\n    }\n  }\n\n  /**\n   * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\n   */\n  public at(index: number): Gamepad {\n    this._enableAndUpdate(); // implicitly enable gamepads when at() is called\n    if (index >= this._pads.length) {\n      // Ensure there is a pad to retrieve\n      for (let i = this._pads.length - 1, max = index; i < max; i++) {\n        this._pads.push(new Gamepad());\n        this._oldPads.push(new Gamepad());\n      }\n    }\n\n    return this._pads[index];\n  }\n\n  /**\n   * Returns a list of all valid gamepads that meet the minimum configuration requirement.\n   */\n  public getValidGamepads(): Gamepad[] {\n    this._enableAndUpdate();\n    const result: Gamepad[] = [];\n    for (let i = 0; i < this._pads.length; i++) {\n      if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\n        result.push(this.at(i));\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Gets the number of connected gamepads\n   */\n  public count() {\n    return this._pads.filter((p) => p.connected).length;\n  }\n\n  private _clonePads(pads: NavigatorGamepad[]): Gamepad[] {\n    const arr = [];\n    for (let i = 0, len = pads.length; i < len; i++) {\n      arr.push(this._clonePad(pads[i]));\n    }\n    return arr;\n  }\n\n  /**\n   * Fastest way to clone a known object is to do it yourself\n   */\n  private _clonePad(pad: NavigatorGamepad): Gamepad {\n    let i, len;\n    const clonedPad = new Gamepad();\n\n    if (!pad) {\n      return clonedPad;\n    }\n\n    for (i = 0, len = pad.buttons.length; i < len; i++) {\n      if (pad.buttons[i]) {\n        clonedPad.updateButton(i, pad.buttons[i].value);\n      }\n    }\n    for (i = 0, len = pad.axes.length; i < len; i++) {\n      clonedPad.updateAxes(i, pad.axes[i]);\n    }\n\n    return clonedPad;\n  }\n}\n\n/**\n * Gamepad holds state information for a connected controller. See [[Gamepads]]\n * for more information on handling controller input.\n */\nexport class Gamepad extends Class {\n  public connected = false;\n  public navigatorGamepad: NavigatorGamepad;\n  private _buttons: number[] = new Array(16);\n  private _axes: number[] = new Array(4);\n\n  constructor() {\n    super();\n\n    for (let i = 0; i < this._buttons.length; i++) {\n      this._buttons[i] = 0;\n    }\n    for (let i = 0; i < this._axes.length; i++) {\n      this._axes[i] = 0;\n    }\n  }\n\n  /**\n   * Whether or not the given button is pressed\n   * @param button     The button to query\n   * @param threshold  The threshold over which the button is considered to be pressed\n   */\n  public isButtonPressed(button: Buttons, threshold: number = 1) {\n    return this._buttons[button] >= threshold;\n  }\n\n  /**\n   * Gets the given button value between 0 and 1\n   */\n  public getButton(button: Buttons) {\n    return this._buttons[button];\n  }\n\n  /**\n   * Gets the given axis value between -1 and 1. Values below\n   * [[MinAxisMoveThreshold]] are considered 0.\n   */\n  public getAxes(axes: Axes) {\n    const value = this._axes[axes];\n\n    if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\n      return 0;\n    } else {\n      return value;\n    }\n  }\n\n  public updateButton(buttonIndex: number, value: number) {\n    this._buttons[buttonIndex] = value;\n  }\n\n  public updateAxes(axesIndex: number, value: number) {\n    this._axes[axesIndex] = value;\n  }\n}\n\n/**\n * Gamepad Buttons enumeration\n */\nexport enum Buttons {\n  /**\n   * Face 1 button (e.g. A)\n   */\n  Face1 = 0,\n  /**\n   * Face 2 button (e.g. B)\n   */\n  Face2 = 1,\n  /**\n   * Face 3 button (e.g. X)\n   */\n  Face3 = 2,\n  /**\n   * Face 4 button (e.g. Y)\n   */\n  Face4 = 3,\n  /**\n   * Left bumper button\n   */\n  LeftBumper = 4,\n  /**\n   * Right bumper button\n   */\n  RightBumper = 5,\n  /**\n   * Left trigger button\n   */\n  LeftTrigger = 6,\n  /**\n   * Right trigger button\n   */\n  RightTrigger = 7,\n  /**\n   * Select button\n   */\n  Select = 8,\n  /**\n   * Start button\n   */\n  Start = 9,\n  /**\n   * Left analog stick press (e.g. L3)\n   */\n  LeftStick = 10,\n  /**\n   * Right analog stick press (e.g. R3)\n   */\n  RightStick = 11,\n  /**\n   * D-pad up\n   */\n  DpadUp = 12,\n  /**\n   * D-pad down\n   */\n  DpadDown = 13,\n  /**\n   * D-pad left\n   */\n  DpadLeft = 14,\n  /**\n   * D-pad right\n   */\n  DpadRight = 15\n}\n\n/**\n * Gamepad Axes enumeration\n */\nexport enum Axes {\n  /**\n   * Left analogue stick X direction\n   */\n  LeftStickX = 0,\n  /**\n   * Left analogue stick Y direction\n   */\n  LeftStickY = 1,\n  /**\n   * Right analogue stick X direction\n   */\n  RightStickX = 2,\n  /**\n   * Right analogue stick Y direction\n   */\n  RightStickY = 3\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepads {\n  getGamepads(): NavigatorGamepad[];\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepad {\n  axes: number[];\n  buttons: NavigatorGamepadButton[];\n  connected: boolean;\n  id: string;\n  index: number;\n  mapping: string;\n  timestamp: number;\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepadButton {\n  pressed: boolean;\n  value: number;\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepadEvent {\n  gamepad: NavigatorGamepad;\n}\n\n/**\n * @internal\n */\nexport interface GamepadConfiguration {\n  axis: number;\n  buttons: number;\n}\n","import { Actor } from '../Actor';\nimport { Vector } from '../Algebra';\nimport { Class } from '../Class';\nimport * as Actors from '../Util/Actors';\nimport { removeItemFromArray } from '../Util/Util';\nimport { PointerMoveEvent, PointerDownEvent, PointerUpEvent, WheelEvent } from './PointerEvents';\n\nexport interface ActorsUnderPointer {\n  [ActorId: number]: Actor;\n  length: number;\n}\n\n/**\n * The type of pointer for a [[PointerEvent]].\n */\nexport enum PointerType {\n  Touch = 'Touch',\n  Mouse = 'Mouse',\n  Pen = 'Pen',\n  Unknown = 'Unknown'\n}\n\n/**\n * Determines the scope of handling mouse/touch events. See [[Pointers]] for more information.\n */\nexport enum PointerScope {\n  /**\n   * Handle events on the `canvas` element only. Events originating outside the\n   * `canvas` will not be handled.\n   */\n  Canvas = 'Canvas',\n\n  /**\n   * Handles events on the entire document. All events will be handled by Excalibur.\n   */\n  Document = 'Document'\n}\n\n/**\n * Captures and dispatches PointerEvents\n */\nexport class Pointer extends Class {\n  private static _MAX_ID = 0;\n  public readonly id = Pointer._MAX_ID++;\n  private _isDown: boolean = false;\n  private _wasDown: boolean = false;\n\n  private _actorsUnderPointer: ActorsUnderPointer = { length: 0 };\n\n  private _actors: Actor[] = [];\n  private _actorsLastFrame: Actor[] = [];\n  private _actorsNoLongerUnderPointer: Actor[] = [];\n\n  /**\n   * Whether the Pointer is currently dragging.\n   */\n  public get isDragging(): boolean {\n    return this._isDown;\n  }\n\n  /**\n   * Whether the Pointer just started dragging.\n   */\n  public get isDragStart(): boolean {\n    return !this._wasDown && this._isDown;\n  }\n\n  /**\n   * Whether the Pointer just ended dragging.\n   */\n  public get isDragEnd(): boolean {\n    return this._wasDown && !this._isDown;\n  }\n\n  /**\n   * Returns true if pointer has any actors under\n   */\n  public get hasActorsUnderPointer(): boolean {\n    return !!this._actorsUnderPointer.length;\n  }\n\n  /**\n   * The last position on the document this pointer was at. Can be `null` if pointer was never active.\n   */\n  public lastPagePos: Vector = null;\n\n  /**\n   * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\n   */\n  public lastScreenPos: Vector = null;\n\n  /**\n   * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\n   */\n  public lastWorldPos: Vector = null;\n\n  /**\n   * Returns the currently dragging target or null if it isn't exist\n   */\n  public dragTarget: Actor = null;\n\n  constructor() {\n    super();\n\n    this.on('move', this._onPointerMove);\n    this.on('down', this._onPointerDown);\n    this.on('up', this._onPointerUp);\n  }\n\n  on(event: 'move', handler: (event: PointerMoveEvent) => void): void;\n  on(event: 'down', handler: (event: PointerDownEvent) => void): void;\n  on(event: 'up', handler: (event: PointerUpEvent) => void): void;\n  on(event: 'wheel', handler: (event: WheelEvent) => void): void;\n  on(event: string, handler: (event: any) => void): void {\n    super.on(event, handler);\n  }\n\n  once(event: 'move', handler: (event: PointerMoveEvent) => void): void;\n  once(event: 'down', handler: (event: PointerDownEvent) => void): void;\n  once(event: 'up', handler: (event: PointerUpEvent) => void): void;\n  once(event: 'wheel', handler: (event: WheelEvent) => void): void;\n  once(event: string, handler: (event: any) => void): void {\n    super.once(event, handler);\n  }\n\n  off(event: 'move', handler?: (event: PointerMoveEvent) => void): void;\n  off(event: 'down', handler?: (event: PointerDownEvent) => void): void;\n  off(event: 'up', handler?: (event: PointerUpEvent) => void): void;\n  off(event: 'wheel', handler?: (event: WheelEvent) => void): void;\n  off(event: string, handler?: (event: any) => void): void {\n    super.off(event, handler);\n  }\n\n  /**\n   * Update the state of current pointer, meant to be called a the end of frame\n   */\n  public update(): void {\n    if (this._wasDown && !this._isDown) {\n      this._wasDown = false;\n    } else if (!this._wasDown && this._isDown) {\n      this._wasDown = true;\n    }\n    this._actorsLastFrame = [...this._actors];\n    this._actorsNoLongerUnderPointer = [];\n  }\n\n  /**\n   * Adds an Actor to actorsUnderPointer object.\n   * @param actor An Actor to be added;\n   */\n  public addActorUnderPointer(actor: Actor): void {\n    if (!this.isActorUnderPointer(actor)) {\n      this._actorsUnderPointer[actor.id] = actor;\n      this._actorsUnderPointer.length += 1;\n      this._actors.push(actor);\n    }\n\n    // Actors under the pointer are sorted by z, ties are broken by id\n    this._actors.sort((a, b) => {\n      if (a.z === b.z) {\n        return a.id - b.id;\n      }\n      return a.z - b.z;\n    });\n  }\n\n  /**\n   * Removes an Actor from actorsUnderPointer object.\n   * @param actor An Actor to be removed;\n   */\n  public removeActorUnderPointer(actor: Actor): void {\n    if (this.isActorUnderPointer(actor)) {\n      delete this._actorsUnderPointer[actor.id];\n      this._actorsUnderPointer.length -= 1;\n      removeItemFromArray(actor, this._actors);\n      this._actorsNoLongerUnderPointer.push(actor);\n    }\n  }\n\n  /**\n   * Returns all actors under this pointer this frame\n   */\n  public getActorsUnderPointer(): Actor[] {\n    return this._actors;\n  }\n\n  /**\n   * Returns all actors that are no longer under the pointer this frame\n   */\n  public getActorsUnderPointerLastFrame(): Actor[] {\n    return this._actorsLastFrame;\n  }\n\n  /**\n   * Returns all actors relevant for events to pointer this frame\n   */\n  public getActorsForEvents(): Actor[] {\n    return this._actors.concat(this._actorsLastFrame).filter((actor, i, self) => {\n      return self.indexOf(actor) === i;\n    });\n  }\n\n  /**\n   * Checks if Pointer has a specific Actor under.\n   * @param actor An Actor for check;\n   */\n  public checkActorUnderPointer(actor: Actor): boolean {\n    if (this.lastWorldPos) {\n      return actor.contains(this.lastWorldPos.x, this.lastWorldPos.y, !Actors.isScreenElement(actor));\n    }\n    return false;\n  }\n\n  /**\n   * Checks if an actor was under the pointer last frame\n   * @param actor\n   */\n  public wasActorUnderPointer(actor: Actor): boolean {\n    return this._actorsLastFrame.indexOf(actor) > -1; // || !!this._actorsUnderPointerLastFrame.hasOwnProperty(actor.id.toString());\n  }\n\n  /**\n   * Checks if Pointer has a specific Actor in ActorsUnderPointer list.\n   * @param actor An Actor for check;\n   */\n  public isActorUnderPointer(actor: Actor): boolean {\n    return (!actor.isKilled() || !!actor.scene) && this._actorsUnderPointer.hasOwnProperty(actor.id.toString());\n  }\n\n  private _onPointerMove(ev: PointerMoveEvent): void {\n    this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n    this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n    this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n  }\n\n  private _onPointerDown(ev: PointerDownEvent): void {\n    this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n    this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n    this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n    this._isDown = true;\n  }\n\n  private _onPointerUp(_ev: PointerUpEvent): void {\n    this._isDown = false;\n    this.dragTarget = null;\n  }\n}\n","import { Actor } from '../Actor';\nimport { Vector, GlobalCoordinates } from '../Algebra';\nimport { Pointer, PointerType } from './Pointer';\nimport { GameEvent } from '../Events';\n\n/**\n * Native browser button enumeration\n */\nexport enum NativePointerButton {\n  NoButton = -1,\n  Left = 0,\n  Middle = 1,\n  Right = 2,\n  Unknown = 3\n}\n\n/**\n * The mouse button being pressed.\n */\nexport enum PointerButton {\n  Left = 'Left',\n  Middle = 'Middle',\n  Right = 'Right',\n  Unknown = 'Unknown',\n  NoButton = 'NoButton'\n}\n\nexport enum WheelDeltaMode {\n  Pixel = 'Pixel',\n  Line = 'Line',\n  Page = 'Page'\n}\n\n/**\n * Type that indicates Excalibur's valid synthetic pointer events\n */\nexport type PointerEventName =\n  | 'pointerdragstart'\n  | 'pointerdragend'\n  | 'pointerdragmove'\n  | 'pointerdragenter'\n  | 'pointerdragleave'\n  | 'pointermove'\n  | 'pointerenter'\n  | 'pointerleave'\n  | 'pointerup'\n  | 'pointerdown';\n\n/**\n * Pointer events\n *\n * Represents a mouse, touch, or stylus event. See [[Pointers]] for more information on\n * handling pointer input.\n *\n * For mouse-based events, you can inspect [[PointerEvent.button]] to see what button was pressed.\n */\nexport class PointerEvent extends GameEvent<Actor> {\n  protected _name: string;\n\n  public get name() {\n    return this._name;\n  }\n\n  /** The world coordinates of the event. */\n  public get worldPos(): Vector {\n    return this.coordinates.worldPos.clone();\n  }\n\n  /** The page coordinates of the event. */\n  public get pagePos(): Vector {\n    return this.coordinates.pagePos.clone();\n  }\n\n  /** The screen coordinates of the event. */\n  public get screenPos(): Vector {\n    return this.coordinates.screenPos.clone();\n  }\n\n  /**\n   * @param coordinates         The [[GlobalCoordinates]] of the event\n   * @param pointer             The [[Pointer]] of the event\n   * @param index               The index of the pointer (zero-based)\n   * @param pointerType         The type of pointer\n   * @param button              The button pressed (if [[PointerType.Mouse]])\n   * @param ev                  The raw DOM event being handled\n   * @param pos                 (Will be added to signature in 0.14.0 release) The position of the event (in world coordinates)\n   */\n  constructor(\n    protected coordinates: GlobalCoordinates,\n    public pointer: Pointer,\n    public index: number,\n    public pointerType: PointerType,\n    public button: PointerButton,\n    public ev: any\n  ) {\n    super();\n  }\n\n  public get pos(): Vector {\n    return this.coordinates.worldPos.clone();\n  }\n\n  public propagate(actor: Actor): void {\n    this.doAction(actor);\n\n    if (this.bubbles && actor.parent) {\n      this.propagate(actor.parent);\n    }\n  }\n\n  /**\n   * Action, that calls when event happens\n   */\n  public doAction(actor: Actor): void {\n    if (actor) {\n      this._onActionStart(actor);\n      actor.emit(this._name, this);\n      this._onActionEnd(actor);\n    }\n  }\n\n  protected _onActionStart(_actor?: Actor) {\n    // to be rewritten\n  }\n\n  protected _onActionEnd(_actor?: Actor) {\n    // to be rewritten\n  }\n}\n\nexport class PointerEventFactory<T extends PointerEvent> {\n  constructor(\n    protected _pointerEventType: new (\n      coordinates: GlobalCoordinates,\n      pointer: Pointer,\n      index: number,\n      pointerType: PointerType,\n      button: PointerButton,\n      ev: any\n    ) => T\n  ) {}\n\n  /**\n   * Create specific PointerEvent\n   */\n  public create(\n    coordinates: GlobalCoordinates,\n    pointer: Pointer,\n    index: number,\n    pointerType: PointerType,\n    button: PointerButton,\n    ev: any\n  ): T {\n    return new this._pointerEventType(coordinates, pointer, index, pointerType, button, ev);\n  }\n}\n\nexport class PointerDragEvent extends PointerEvent {}\n\nexport class PointerUpEvent extends PointerEvent {\n  protected _name = 'pointerup';\n\n  protected _onActionEnd(actor: Actor) {\n    const pointer = this.pointer;\n\n    if (pointer.isDragEnd && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragend', this);\n    }\n  }\n}\n\nexport class PointerDownEvent extends PointerEvent {\n  protected _name = 'pointerdown';\n\n  protected _onActionEnd(actor: Actor) {\n    if (this.pointer.isDragStart && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragstart', this);\n    }\n  }\n}\n\nexport class PointerMoveEvent extends PointerEvent {\n  protected _name = 'pointermove';\n\n  public propagate(actor: Actor): void {\n    // If the actor was under the pointer last frame, but not this one it left\n    // if (this.pointer.wasActorUnderPointer(actor) && !this.pointer.isActorUnderPointer(actor)) {\n    //   this._onActorLeave(actor);\n    //   return;\n    // }\n\n    if (this.pointer.isActorUnderPointer(actor)) {\n      this.doAction(actor);\n\n      if (this.bubbles && actor.parent) {\n        this.propagate(actor.parent);\n      }\n    }\n  }\n\n  protected _onActionStart(actor: Actor) {\n    if (!actor.capturePointer.captureMoveEvents) {\n      return;\n    }\n\n    // In the case this is new\n    // if (this.pointer.checkActorUnderPointer(actor) && !this.pointer.wasActorUnderPointer(actor)) {\n    //   this._onActorEnter(actor);\n    // }\n\n    if (this.pointer.isDragging && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragmove', this);\n    }\n  }\n\n  // private _onActorEnter(actor: Actor) {\n  //   const pe = createPointerEventByName('enter', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\n  //   pe.propagate(actor);\n  //   this.pointer.addActorUnderPointer(actor);\n\n  //   if (this.pointer.isDragging) {\n  //     this.pointer.dragTarget = actor;\n  //   }\n  // }\n\n  // private _onActorLeave(actor: Actor) {\n  //   const pe = createPointerEventByName('leave', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\n  //   pe.propagate(actor);\n  //   this.pointer.removeActorUnderPointer(actor);\n  // }\n}\n\nexport class PointerEnterEvent extends PointerEvent {\n  protected _name = 'pointerenter';\n\n  protected _onActionStart(actor: Actor) {\n    if (!actor.capturePointer.captureMoveEvents) {\n      return;\n    }\n  }\n\n  protected _onActionEnd(actor: Actor) {\n    const pointer = this.pointer;\n\n    if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragenter', this);\n    }\n  }\n}\n\nexport class PointerLeaveEvent extends PointerEvent {\n  protected _name = 'pointerleave';\n\n  protected _onActionStart(actor: Actor) {\n    if (!actor.capturePointer.captureMoveEvents) {\n      return;\n    }\n  }\n\n  protected _onActionEnd(actor: Actor) {\n    const pointer = this.pointer;\n\n    if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragleave', this);\n    }\n  }\n}\n\nexport class PointerCancelEvent extends PointerEvent {\n  protected _name = 'pointercancel';\n}\n/**\n * Wheel Events\n *\n * Represents a mouse wheel event. See [[Pointers]] for more information on\n * handling point input.\n */\nexport class WheelEvent extends GameEvent<Actor> {\n  /**\n   * @param x            The `x` coordinate of the event (in world coordinates)\n   * @param y            The `y` coordinate of the event (in world coordinates)\n   * @param pageX        The `x` coordinate of the event (in document coordinates)\n   * @param pageY        The `y` coordinate of the event (in document coordinates)\n   * @param screenX      The `x` coordinate of the event (in screen coordinates)\n   * @param screenY      The `y` coordinate of the event (in screen coordinates)\n   * @param index        The index of the pointer (zero-based)\n   * @param deltaX       The type of pointer\n   * @param deltaY       The type of pointer\n   * @param deltaZ       The type of pointer\n   * @param deltaMode    The type of movement [[WheelDeltaMode]]\n   * @param ev           The raw DOM event being handled\n   */\n  constructor(\n    public x: number,\n    public y: number,\n    public pageX: number,\n    public pageY: number,\n    public screenX: number,\n    public screenY: number,\n    public index: number,\n    public deltaX: number,\n    public deltaY: number,\n    public deltaZ: number,\n    public deltaMode: WheelDeltaMode,\n    public ev: any\n  ) {\n    super();\n  }\n}\n\nexport function createPointerEventByName(\n  eventName: string,\n  coordinates: GlobalCoordinates,\n  pointer: Pointer,\n  index: number,\n  pointerType: PointerType,\n  button: PointerButton,\n  ev: any\n) {\n  let factory: PointerEventFactory<PointerEvent>;\n\n  switch (eventName) {\n    case 'up':\n      factory = new PointerEventFactory(<any>PointerUpEvent);\n      break;\n    case 'down':\n      factory = new PointerEventFactory(<any>PointerDownEvent);\n      break;\n    case 'move':\n      factory = new PointerEventFactory(<any>PointerMoveEvent);\n      break;\n    case 'cancel':\n      factory = new PointerEventFactory(<any>PointerCancelEvent);\n      break;\n    case 'enter':\n      factory = new PointerEventFactory(<any>PointerEnterEvent);\n      break;\n    case 'leave':\n      factory = new PointerEventFactory(<any>PointerLeaveEvent);\n      break;\n  }\n\n  return factory.create(coordinates, pointer, index, pointerType, button, ev);\n}\n","import { Class } from '../Class';\nimport { Engine, ScrollPreventionMode } from '../Engine';\nimport { Pointer, PointerType } from './Pointer';\nimport {\n  PointerEvent,\n  WheelEvent,\n  NativePointerButton,\n  PointerButton,\n  WheelDeltaMode,\n  createPointerEventByName,\n  PointerLeaveEvent,\n  PointerEnterEvent\n} from './PointerEvents';\nimport { GameEvent } from '../Events';\n\nimport * as Events from '../Events';\nimport * as Util from '../Util/Util';\nimport { GlobalCoordinates, Vector } from '../Algebra';\nimport { CapturePointer } from '../Traits/CapturePointer';\nimport { Actor } from '../Actor';\n\ninterface TouchEvent extends Event {\n  altKey: boolean;\n  changedTouches: Touch[];\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n  targetTouches: Touch[];\n  touches: Touch[];\n  type: string;\n  target: Element;\n}\n\ninterface Touch {\n  identifier: number;\n  screenX: number;\n  screenY: number;\n  clientX: number;\n  clientY: number;\n  pageX: number;\n  pageY: number;\n  radiusX: number;\n  radiusY: number;\n  rotationAngle: number;\n  force: number;\n  target: Element;\n}\n\n/**\n * A constant used to normalize wheel events across different browsers\n *\n * This normalization factor is pulled from https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Listening_to_this_event_across_browser\n */\nconst ScrollWheelNormalizationFactor = -1 / 40;\n\n/**\n * Handles pointer events (mouse, touch, stylus, etc.) and normalizes to\n * [W3C Pointer Events](http://www.w3.org/TR/pointerevents/).\n *\n * [[include:Pointers.md]]\n */\nexport class Pointers extends Class {\n  private _engine: Engine;\n\n  private _pointerDown: PointerEvent[] = [];\n  private _pointerUp: PointerEvent[] = [];\n  private _pointerMove: PointerEvent[] = [];\n  private _pointerCancel: PointerEvent[] = [];\n  private _wheel: WheelEvent[] = [];\n  private _pointers: Pointer[] = [];\n  private _activePointers: number[] = [];\n\n  constructor(engine: Engine) {\n    super();\n\n    this._engine = engine;\n    this._pointers.push(new Pointer());\n    this._activePointers = [-1];\n    this.primary = this._pointers[0];\n  }\n\n  public on(eventName: Events.up, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.down, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.move, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.enter, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.leave, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.cancel, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.wheel, handler: (event: WheelEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  /**\n   * Primary pointer (mouse, 1 finger, stylus, etc.)\n   */\n  public primary: Pointer;\n\n  /**\n   * Initializes pointer event listeners\n   */\n  public init(target?: GlobalEventHandlers): void {\n    target = target || this._engine.canvas;\n\n    // Touch Events\n    target.addEventListener('touchstart', this._handleTouchEvent('down', this._pointerDown));\n    target.addEventListener('touchend', this._handleTouchEvent('up', this._pointerUp));\n    target.addEventListener('touchmove', this._handleTouchEvent('move', this._pointerMove));\n    target.addEventListener('touchcancel', this._handleTouchEvent('cancel', this._pointerCancel));\n\n    // W3C Pointer Events\n    // Current: IE11, IE10\n    if ((<any>window).PointerEvent) {\n      // IE11\n      this._engine.canvas.style.touchAction = 'none';\n      target.addEventListener('pointerdown', this._handlePointerEvent('down', this._pointerDown));\n      target.addEventListener('pointerup', this._handlePointerEvent('up', this._pointerUp));\n      target.addEventListener('pointermove', this._handlePointerEvent('move', this._pointerMove));\n      target.addEventListener('pointercancel', this._handlePointerEvent('cancel', this._pointerCancel));\n    } else if ((<any>window).MSPointerEvent) {\n      // IE10\n      this._engine.canvas.style.msTouchAction = 'none';\n      target.addEventListener('MSPointerDown', this._handlePointerEvent('down', this._pointerDown));\n      target.addEventListener('MSPointerUp', this._handlePointerEvent('up', this._pointerUp));\n      target.addEventListener('MSPointerMove', this._handlePointerEvent('move', this._pointerMove));\n      target.addEventListener('MSPointerCancel', this._handlePointerEvent('cancel', this._pointerCancel));\n    } else {\n      // Mouse Events\n      target.addEventListener('mousedown', this._handleMouseEvent('down', this._pointerDown));\n      target.addEventListener('mouseup', this._handleMouseEvent('up', this._pointerUp));\n      target.addEventListener('mousemove', this._handleMouseEvent('move', this._pointerMove));\n    }\n\n    // MDN MouseWheelEvent\n    const wheelOptions = {\n      passive: !(\n        this._engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n        this._engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas\n      )\n    };\n    if ('onwheel' in document.createElement('div')) {\n      // Modern Browsers\n      target.addEventListener('wheel', this._handleWheelEvent('wheel', this._wheel), wheelOptions);\n    } else if (document.onmousewheel !== undefined) {\n      // Webkit and IE\n      target.addEventListener('mousewheel', this._handleWheelEvent('wheel', this._wheel), wheelOptions);\n    } else {\n      // Remaining browser and older Firefox\n      target.addEventListener('MozMousePixelScroll', this._handleWheelEvent('wheel', this._wheel), wheelOptions);\n    }\n  }\n\n  /**\n   * Synthesize a pointer event that looks like a real browser event to excalibur\n   * @param eventName\n   * @param pos\n   */\n  public triggerEvent(\n    eventName: 'up' | 'down' | 'move' | 'cancel' | 'wheel',\n    pos: Vector | GlobalCoordinates,\n    button: NativePointerButton = NativePointerButton.Left,\n    pointerType: 'mouse' | 'touch' | 'pen' = 'mouse',\n    pointerId: number = 0\n  ): void {\n    let x = 0;\n    let y = 0;\n    let coords: GlobalCoordinates;\n    if (pos instanceof GlobalCoordinates) {\n      x = pos.pagePos.x;\n      y = pos.pagePos.y;\n      coords = pos;\n    } else {\n      x = pos.x;\n      y = pos.y;\n      coords = new GlobalCoordinates(pos.clone(), pos.clone(), pos.clone());\n    }\n\n    const eventish = {\n      pageX: x,\n      pageY: y,\n      pointerId: pointerId,\n      pointerType: pointerType,\n      button: button,\n      preventDefault: () => {\n        /* do nothing */\n      }\n    };\n\n    switch (eventName) {\n      case 'move':\n        this._handlePointerEvent(eventName, this._pointerMove, coords)(eventish as MSPointerEvent);\n        break;\n      case 'down':\n        this._handlePointerEvent(eventName, this._pointerDown, coords)(eventish as MSPointerEvent);\n        break;\n      case 'up':\n        this._handlePointerEvent(eventName, this._pointerUp, coords)(eventish as MSPointerEvent);\n        break;\n      case 'cancel':\n        this._handlePointerEvent(eventName, this._pointerCancel, coords)(eventish as MSPointerEvent);\n        break;\n    }\n    for (const actor of this._engine.currentScene.actors) {\n      const capturePointer = actor.traits.filter((t) => t instanceof CapturePointer)[0];\n      if (capturePointer) {\n        capturePointer.update(actor, this._engine, 1);\n      }\n    }\n    this.dispatchPointerEvents();\n    this.update();\n  }\n\n  /**\n   * Update all pointer events and pointers, meant to be called at the end of frame\n   */\n  public update(): void {\n    this._pointerUp.length = 0;\n    this._pointerDown.length = 0;\n    this._pointerMove.length = 0;\n    this._pointerCancel.length = 0;\n    this._wheel.length = 0;\n\n    for (let i = 0; i < this._pointers.length; i++) {\n      this._pointers[i].update();\n    }\n  }\n\n  /**\n   * Safely gets a Pointer at a specific index and initializes one if it doesn't yet exist\n   * @param index  The pointer index to retrieve\n   */\n  public at(index: number): Pointer {\n    if (index >= this._pointers.length) {\n      // Ensure there is a pointer to retrieve\n      for (let i = this._pointers.length - 1, max = index; i < max; i++) {\n        this._pointers.push(new Pointer());\n        this._activePointers.push(-1);\n      }\n    }\n\n    return this._pointers[index];\n  }\n\n  /**\n   * Get number of pointers being watched\n   */\n  public count(): number {\n    return this._pointers.length;\n  }\n\n  public checkAndUpdateActorUnderPointer(actor: Actor) {\n    for (const pointer of this._pointers) {\n      if (pointer.checkActorUnderPointer(actor)) {\n        pointer.addActorUnderPointer(actor);\n      } else {\n        pointer.removeActorUnderPointer(actor);\n      }\n    }\n  }\n\n  private _dispatchWithBubble(events: PointerEvent[]) {\n    for (const evt of events) {\n      for (const actor of evt.pointer.getActorsForEvents()) {\n        evt.propagate(actor);\n        if (!evt.bubbles) {\n          // if the event stops bubbling part way stop processing\n          break;\n        }\n      }\n    }\n  }\n\n  private _dispatchPointerLeaveEvents() {\n    const lastMoveEventPerPointerPerActor: { [pointerId: string]: PointerEvent } = {};\n    const pointerLeave: PointerLeaveEvent[] = [];\n\n    for (const evt of this._pointerMove) {\n      for (const actor of evt.pointer.getActorsForEvents()) {\n        // If the actor was under the pointer last frame, but not this this frame, pointer left\n        if (\n          !lastMoveEventPerPointerPerActor[evt.pointer.id + '+' + actor.id] &&\n          evt.pointer.wasActorUnderPointer(actor) &&\n          !evt.pointer.isActorUnderPointer(actor)\n        ) {\n          lastMoveEventPerPointerPerActor[evt.pointer.id + '+' + actor.id] = evt;\n          const pe = createPointerEventByName(\n            'leave',\n            new GlobalCoordinates(evt.worldPos, evt.pagePos, evt.screenPos),\n            evt.pointer,\n            evt.index,\n            evt.pointerType,\n            evt.button,\n            evt.ev\n          );\n\n          pe.propagate(actor);\n          pointerLeave.push(<PointerLeaveEvent>pe);\n        }\n      }\n    }\n    return pointerLeave;\n  }\n\n  private _dispatchPointerEnterEvents() {\n    const lastMoveEventPerPointer: { [pointerId: number]: PointerEvent } = {};\n    const pointerEnter: PointerEnterEvent[] = [];\n\n    for (const evt of this._pointerMove) {\n      for (const actor of evt.pointer.getActorsForEvents()) {\n        // If the actor was not under the pointer last frame, but it is this frame, pointer entered\n        if (\n          !lastMoveEventPerPointer[evt.pointer.id] &&\n          !evt.pointer.wasActorUnderPointer(actor) &&\n          evt.pointer.isActorUnderPointer(actor)\n        ) {\n          lastMoveEventPerPointer[evt.pointer.id] = evt;\n          const pe = createPointerEventByName(\n            'enter',\n            new GlobalCoordinates(evt.worldPos, evt.pagePos, evt.screenPos),\n            evt.pointer,\n            evt.index,\n            evt.pointerType,\n            evt.button,\n            evt.ev\n          );\n          pe.propagate(actor);\n          pointerEnter.push(<PointerEnterEvent>pe);\n          // if pointer is dragging set the drag target\n          if (evt.pointer.isDragging) {\n            evt.pointer.dragTarget = actor;\n          }\n        }\n      }\n    }\n    return pointerEnter;\n  }\n\n  public dispatchPointerEvents() {\n    this._dispatchWithBubble(this._pointerDown);\n    this._dispatchWithBubble(this._pointerUp);\n    this._dispatchWithBubble(this._pointerMove);\n    this._dispatchPointerLeaveEvents();\n    this._dispatchPointerEnterEvents();\n    this._dispatchWithBubble(this._pointerCancel);\n\n    // TODO some duplication here\n    for (const evt of this._wheel) {\n      for (const actor of this._pointers[evt.index].getActorsUnderPointer()) {\n        this._propagateWheelPointerEvent(actor, evt);\n        if (!evt.bubbles) {\n          // if the event stops bubbling part way stop processing\n          break;\n        }\n      }\n    }\n  }\n\n  private _propagateWheelPointerEvent(actor: Actor, wheelEvent: WheelEvent) {\n    actor.emit('pointerwheel', wheelEvent);\n\n    // Recurse and propagate\n    if (wheelEvent.bubbles && actor.parent) {\n      this._propagateWheelPointerEvent(actor.parent, wheelEvent);\n    }\n  }\n\n  private _handleMouseEvent(eventName: string, eventArr: PointerEvent[]) {\n    return (e: MouseEvent) => {\n      e.preventDefault();\n\n      const pointer = this.at(0);\n      const coordinates = GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, this._engine);\n      const pe = createPointerEventByName(\n        eventName,\n        coordinates,\n        pointer,\n        0,\n        PointerType.Mouse,\n        this._nativeButtonToPointerButton(e.button),\n        e\n      );\n\n      eventArr.push(pe);\n      pointer.eventDispatcher.emit(eventName, pe);\n    };\n  }\n\n  private _handleTouchEvent(eventName: string, eventArr: PointerEvent[]) {\n    return (e: TouchEvent) => {\n      e.preventDefault();\n      for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n        const index = this._pointers.length > 1 ? this._getPointerIndex(e.changedTouches[i].identifier) : 0;\n        if (index === -1) {\n          continue;\n        }\n\n        const pointer = this.at(index);\n        const coordinates = GlobalCoordinates.fromPagePosition(e.changedTouches[i].pageX, e.changedTouches[i].pageY, this._engine);\n        const pe = createPointerEventByName(eventName, coordinates, pointer, index, PointerType.Touch, PointerButton.Unknown, e);\n\n        eventArr.push(pe);\n        pointer.eventDispatcher.emit(eventName, pe);\n        // only with multi-pointer\n        if (this._pointers.length > 1) {\n          if (eventName === 'up') {\n            // remove pointer ID from pool when pointer is lifted\n            this._activePointers[index] = -1;\n          } else if (eventName === 'down') {\n            // set pointer ID to given index\n            this._activePointers[index] = e.changedTouches[i].identifier;\n          }\n        }\n      }\n    };\n  }\n\n  private _handlePointerEvent(eventName: string, eventArr: PointerEvent[], coords?: GlobalCoordinates) {\n    return (e: MSPointerEvent) => {\n      e.preventDefault();\n\n      // get the index for this pointer ID if multi-pointer is asked for\n      const index = this._pointers.length > 1 ? this._getPointerIndex(e.pointerId) : 0;\n      if (index === -1) {\n        return;\n      }\n\n      const pointer = this.at(index);\n      const coordinates = coords || GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, this._engine);\n      const pe = createPointerEventByName(\n        eventName,\n        coordinates,\n        pointer,\n        index,\n        this._stringToPointerType(e.pointerType),\n        this._nativeButtonToPointerButton(e.button),\n        e\n      );\n\n      eventArr.push(pe);\n      pointer.eventDispatcher.emit(eventName, pe);\n\n      // only with multi-pointer\n      if (this._pointers.length > 1) {\n        if (eventName === 'up') {\n          // remove pointer ID from pool when pointer is lifted\n          this._activePointers[index] = -1;\n        } else if (eventName === 'down') {\n          // set pointer ID to given index\n          this._activePointers[index] = e.pointerId;\n        }\n      }\n    };\n  }\n\n  private _handleWheelEvent(eventName: string, eventArr: WheelEvent[]) {\n    return (e: MouseWheelEvent) => {\n      // Should we prevent page scroll because of this event\n      if (\n        this._engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n        (this._engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas && e.target === this._engine.canvas)\n      ) {\n        e.preventDefault();\n      }\n\n      const x: number = e.pageX - Util.getPosition(this._engine.canvas).x;\n      const y: number = e.pageY - Util.getPosition(this._engine.canvas).y;\n      const transformedPoint = this._engine.screenToWorldCoordinates(new Vector(x, y));\n\n      // deltaX, deltaY, and deltaZ are the standard modern properties\n      // wheelDeltaX, wheelDeltaY, are legacy properties in webkit browsers and older IE\n      // e.detail is only used in opera\n\n      const deltaX = e.deltaX || e.wheelDeltaX * ScrollWheelNormalizationFactor || 0;\n      const deltaY =\n        e.deltaY || e.wheelDeltaY * ScrollWheelNormalizationFactor || e.wheelDelta * ScrollWheelNormalizationFactor || e.detail || 0;\n      const deltaZ = e.deltaZ || 0;\n      let deltaMode = WheelDeltaMode.Pixel;\n\n      if (e.deltaMode) {\n        if (e.deltaMode === 1) {\n          deltaMode = WheelDeltaMode.Line;\n        } else if (e.deltaMode === 2) {\n          deltaMode = WheelDeltaMode.Page;\n        }\n      }\n\n      const we = new WheelEvent(transformedPoint.x, transformedPoint.y, e.pageX, e.pageY, x, y, 0, deltaX, deltaY, deltaZ, deltaMode, e);\n\n      eventArr.push(we);\n      this.at(0).eventDispatcher.emit(eventName, we);\n    };\n  }\n\n  /**\n   * Gets the index of the pointer specified for the given pointer ID or finds the next empty pointer slot available.\n   * This is required because IE10/11 uses incrementing pointer IDs so we need to store a mapping of ID => idx\n   */\n  private _getPointerIndex(pointerId: number) {\n    let idx;\n    if ((idx = this._activePointers.indexOf(pointerId)) > -1) {\n      return idx;\n    }\n\n    for (let i = 0; i < this._activePointers.length; i++) {\n      if (this._activePointers[i] === -1) {\n        return i;\n      }\n    }\n\n    // ignore pointer because game isn't watching\n    return -1;\n  }\n\n  private _nativeButtonToPointerButton(s: NativePointerButton): PointerButton {\n    switch (s) {\n      case NativePointerButton.NoButton:\n        return PointerButton.NoButton;\n      case NativePointerButton.Left:\n        return PointerButton.Left;\n      case NativePointerButton.Middle:\n        return PointerButton.Middle;\n      case NativePointerButton.Right:\n        return PointerButton.Right;\n      case NativePointerButton.Unknown:\n        return PointerButton.Unknown;\n      default:\n        return Util.fail(s);\n    }\n  }\n\n  private _stringToPointerType(s: string) {\n    switch (s) {\n      case 'touch':\n        return PointerType.Touch;\n      case 'mouse':\n        return PointerType.Mouse;\n      case 'pen':\n        return PointerType.Pen;\n      default:\n        return PointerType.Unknown;\n    }\n  }\n}\n","import { Class } from './../Class';\nimport { GameEvent } from '../Events';\nimport * as Events from '../Events';\n\n/**\n * Enum representing input key codes\n */\nexport enum Keys {\n  Num1 = 97,\n  Num2 = 98,\n  Num3 = 99,\n  Num4 = 100,\n  Num5 = 101,\n  Num6 = 102,\n  Num7 = 103,\n  Num8 = 104,\n  Num9 = 105,\n  Num0 = 96,\n\n  Numlock = 144,\n\n  Semicolon = 186, // 59 in some browsers\n\n  A = 65,\n  B = 66,\n  C = 67,\n  D = 68,\n  E = 69,\n  F = 70,\n  G = 71,\n  H = 72,\n  I = 73,\n  J = 74,\n  K = 75,\n  L = 76,\n  M = 77,\n  N = 78,\n  O = 79,\n  P = 80,\n  Q = 81,\n  R = 82,\n  S = 83,\n  T = 84,\n  U = 85,\n  V = 86,\n  W = 87,\n  X = 88,\n  Y = 89,\n  Z = 90,\n\n  Shift = 16,\n  Alt = 18,\n  Up = 38,\n  Down = 40,\n  Left = 37,\n  Right = 39,\n  Space = 32,\n  Esc = 27\n}\n\n/**\n * Event thrown on a game object for a key event\n */\nexport class KeyEvent extends GameEvent<any> {\n  /**\n   * @param key  The key responsible for throwing the event\n   */\n  constructor(public key: Keys) {\n    super();\n  }\n}\n\n/**\n * Provides keyboard support for Excalibur.\n *\n * [[include:Keyboard.md]]\n */\nexport class Keyboard extends Class {\n  private _keys: number[] = [];\n  private _keysUp: number[] = [];\n  private _keysDown: number[] = [];\n\n  constructor() {\n    super();\n  }\n\n  public on(eventName: Events.press, handler: (event: KeyEvent) => void): void;\n  public on(eventName: Events.release, handler: (event: KeyEvent) => void): void;\n  public on(eventName: Events.hold, handler: (event: KeyEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  /**\n   * Initialize Keyboard event listeners\n   */\n  init(global?: GlobalEventHandlers): void {\n    // See https://github.com/excaliburjs/Excalibur/issues/1294\n    // window.top is for the iframe case\n    global = global || window.top || window;\n    global.addEventListener('blur', () => {\n      this._keys.length = 0; // empties array efficiently\n    });\n\n    // key up is on window because canvas cannot have focus\n    global.addEventListener('keyup', (ev: KeyboardEvent) => {\n      const code = this._normalizeKeyCode(ev.keyCode);\n      const key = this._keys.indexOf(code);\n      this._keys.splice(key, 1);\n      this._keysUp.push(code);\n      const keyEvent = new KeyEvent(code);\n\n      // alias the old api, we may want to deprecate this in the future\n      this.eventDispatcher.emit('up', keyEvent);\n      this.eventDispatcher.emit('release', keyEvent);\n    });\n\n    // key down is on window because canvas cannot have focus\n    global.addEventListener('keydown', (ev: KeyboardEvent) => {\n      const code = this._normalizeKeyCode(ev.keyCode);\n      if (this._keys.indexOf(code) === -1) {\n        this._keys.push(code);\n        this._keysDown.push(code);\n        const keyEvent = new KeyEvent(code);\n        this.eventDispatcher.emit('down', keyEvent);\n        this.eventDispatcher.emit('press', keyEvent);\n      }\n    });\n  }\n\n  public update() {\n    // Reset keysDown and keysUp after update is complete\n    this._keysDown.length = 0;\n    this._keysUp.length = 0;\n\n    // Emit synthetic \"hold\" event\n    for (let i = 0; i < this._keys.length; i++) {\n      this.eventDispatcher.emit('hold', new KeyEvent(this._keys[i]));\n    }\n  }\n\n  /**\n   * Gets list of keys being pressed down\n   */\n  public getKeys(): Keys[] {\n    return this._keys;\n  }\n\n  /**\n   * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\n   * @param key Test whether a key was just pressed\n   */\n  public wasPressed(key: Keys): boolean {\n    return this._keysDown.indexOf(key) > -1;\n  }\n\n  /**\n   * Tests if a certain key is held down. This is persisted between frames.\n   * @param key  Test whether a key is held down\n   */\n  public isHeld(key: Keys): boolean {\n    return this._keys.indexOf(key) > -1;\n  }\n\n  /**\n   * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\n   * @param key  Test whether a key was just released\n   */\n  public wasReleased(key: Keys): boolean {\n    return this._keysUp.indexOf(key) > -1;\n  }\n\n  /**\n   * Normalizes some browser event key codes to map to standard Excalibur key codes\n   * @param code Event keyCode\n   * @see http://unixpapa.com/js/key.html\n   */\n  private _normalizeKeyCode(code: number) {\n    switch (code) {\n      case 59: // : ; in Firefox, Opera\n        return Keys.Semicolon;\n      default:\n        return code;\n    }\n  }\n}\n","/**\n * Provides support for mice, keyboards, and controllers.\n *\n * [[include:Input.md]]\n */\n\n/**\n * @typedoc\n */\nexport * from './Gamepad';\nexport * from './Pointer';\nexport * from './Pointers';\nexport * from './PointerEvents';\nexport * from './Keyboard';\nexport * from './EngineInput';\n","export interface NativeEventable {\n  addEventListener(name: string, handler: (...any: any[]) => any): any;\n  removeEventListener(name: string, handler: (...any: any[]) => any): any;\n}\n\nexport class BrowserComponent<T extends NativeEventable> {\n  private _paused = false;\n  private _nativeHandlers: { [key: string]: (handler: any) => void } = {};\n\n  on(eventName: string, handler: (evt: any) => void): void {\n    if (this._nativeHandlers[eventName]) {\n      this.off(eventName, this._nativeHandlers[eventName]);\n    }\n    this._nativeHandlers[eventName] = this._decorate(handler);\n    this.nativeComponent.addEventListener(eventName, this._nativeHandlers[eventName]);\n  }\n  off(eventName: string, handler?: (event: any) => void): void {\n    if (!handler) {\n      handler = this._nativeHandlers[eventName];\n    }\n    this.nativeComponent.removeEventListener(eventName, handler);\n    this._nativeHandlers[eventName] = null;\n  }\n\n  private _decorate(handler: (evt: any) => void): (evt: any) => void {\n    return (evt: any) => {\n      if (!this._paused) {\n        handler(evt);\n      }\n    };\n  }\n\n  public pause() {\n    this._paused = true;\n  }\n\n  public resume() {\n    this._paused = false;\n  }\n\n  public clear() {\n    for (const event in this._nativeHandlers) {\n      this.off(event);\n    }\n  }\n\n  constructor(public nativeComponent: T) {}\n}\n\nexport class BrowserEvents {\n  private _windowComponent: BrowserComponent<Window>;\n  private _documentComponent: BrowserComponent<Document>;\n  constructor(private _windowGlobal: Window, private _documentGlobal: Document) {\n    this._windowComponent = new BrowserComponent(this._windowGlobal);\n    this._documentComponent = new BrowserComponent(this._documentGlobal);\n  }\n\n  public get window(): BrowserComponent<Window> {\n    return this._windowComponent;\n  }\n\n  public get document(): BrowserComponent<Document> {\n    return this._documentComponent;\n  }\n\n  public pause() {\n    this.window.pause();\n    this.document.pause();\n  }\n\n  public resume() {\n    this.window.resume();\n    this.document.resume();\n  }\n\n  public clear() {\n    this.window.clear();\n    this.document.clear();\n  }\n}\n","import { EX_VERSION } from './';\nimport { polyfill } from './Polyfill';\npolyfill();\nimport { CanUpdate, CanDraw, CanInitialize } from './Interfaces/LifecycleEvents';\nimport { Loadable } from './Interfaces/Loadable';\nimport { Vector } from './Algebra';\nimport { ScreenElement } from './ScreenElement';\nimport { Actor } from './Actor';\nimport { Timer } from './Timer';\nimport { TileMap } from './TileMap';\nimport { Animation } from './Drawing/Animation';\nimport { Loader } from './Loader';\nimport { Detector } from './Util/Detector';\nimport {\n  VisibleEvent,\n  HiddenEvent,\n  GameStartEvent,\n  GameStopEvent,\n  PreUpdateEvent,\n  PostUpdateEvent,\n  PreFrameEvent,\n  PostFrameEvent,\n  GameEvent,\n  DeactivateEvent,\n  ActivateEvent,\n  PreDrawEvent,\n  PostDrawEvent,\n  InitializeEvent\n} from './Events';\nimport { Logger, LogLevel } from './Util/Log';\nimport { Color } from './Drawing/Color';\nimport { Scene } from './Scene';\nimport { PostProcessor } from './PostProcessing/PostProcessor';\nimport { Debug, DebugStats } from './Debug';\nimport { Class } from './Class';\nimport * as Input from './Input/Index';\nimport * as Events from './Events';\nimport { BoundingBox } from './Collision/BoundingBox';\nimport { BrowserEvents } from './Util/Browser';\nimport { ExcaliburGraphicsContext } from './Graphics/Context/ExcaliburGraphicsContext';\nimport { ExcaliburGraphicsContextWebGL } from './Graphics/Context/ExcaliburGraphicsContextWebGL';\nimport { ExcaliburGraphicsContext2DCanvas } from './Graphics/Context/ExcaliburGraphicsContext2DCanvas';\nimport { Entity } from './Entity';\n\n/**\n * Enum representing the different display modes available to Excalibur\n */\nexport enum DisplayMode {\n  /**\n   * Show the game as full screen\n   */\n  FullScreen,\n  /**\n   * Scale the game to the parent DOM container\n   */\n  Container,\n  /**\n   * Show the game as a fixed size\n   */\n  Fixed,\n\n  /**\n   * Allow the game to be positioned with the [[EngineOptions.position]] option\n   */\n  Position\n}\n\n/**\n * Enum representing the different mousewheel event bubble prevention\n */\nexport enum ScrollPreventionMode {\n  /**\n   * Do not prevent any page scrolling\n   */\n  None,\n  /**\n   * Prevent page scroll if mouse is over the game canvas\n   */\n  Canvas,\n  /**\n   * Prevent all page scrolling via mouse wheel\n   */\n  All\n}\n\n/**\n * Interface describing the absolute CSS position of the game window. For use when [[DisplayMode.Position]]\n * is specified and when the user wants to define exact pixel spacing of the window.\n * When a number is given, the value is interpreted as pixels\n */\nexport interface AbsolutePosition {\n  top?: number | string;\n  left?: number | string;\n  right?: number | string;\n  bottom?: number | string;\n}\n\n/**\n * Defines the available options to configure the Excalibur engine at constructor time.\n */\nexport interface EngineOptions {\n  /**\n   * Optionally configure the native canvas width of the game\n   */\n  width?: number;\n\n  /**\n   * Optionally configure the native canvas height of the game\n   */\n  height?: number;\n\n  /**\n   * Optionally configure the native canvas transparent backdrop\n   */\n  enableCanvasTransparency?: boolean;\n\n  /**\n   * Optionally specify the target canvas DOM element to render the game in\n   */\n  canvasElementId?: string;\n\n  /**\n   * Optionally specify the target canvas DOM element directly\n   */\n  canvasElement?: HTMLCanvasElement;\n\n  /**\n   * The [[DisplayMode]] of the game. Depending on this value, [[width]] and [[height]] may be ignored.\n   */\n  displayMode?: DisplayMode;\n\n  /**\n   * Configures the pointer scope. Pointers scoped to the 'Canvas' can only fire events within the canvas viewport; whereas, 'Document'\n   * (default) scoped will fire anywhere on the page.\n   */\n  pointerScope?: Input.PointerScope;\n\n  /**\n   * Suppress boot up console message, which contains the \"powered by Excalibur message\"\n   */\n  suppressConsoleBootMessage?: boolean;\n\n  /**\n   * Suppress minimum browser feature detection, it is not recommended users of excalibur switch this off. This feature ensures that\n   * the currently running browser meets the minimum requirements for running excalibur. This can be useful if running on non-standard\n   * browsers or if there is a bug in excalibur preventing execution.\n   */\n  suppressMinimumBrowserFeatureDetection?: boolean;\n\n  /**\n   * Suppress HiDPI auto detection and scaling, it is not recommended users of excalibur switch off this feature. This feature detects\n   * and scales the drawing canvas appropriately to accommodate HiDPI screens.\n   */\n  suppressHiDPIScaling?: boolean;\n\n  /**\n   * Suppress play button, it is not recommended users of excalibur switch this feature. Some browsers require a user gesture (like a click)\n   * for certain browser features to work like web audio.\n   */\n  suppressPlayButton?: boolean;\n\n  /**\n   * Specify how the game window is to be positioned when the [[DisplayMode.Position]] is chosen. This option MUST be specified\n   * if the DisplayMode is set as [[DisplayMode.Position]]. The position can be either a string or an [[AbsolutePosition]].\n   * String must be in the format of css style background-position. The vertical position must precede the horizontal position in strings.\n   *\n   * Valid String examples: \"top left\", \"top\", \"bottom\", \"middle\", \"middle center\", \"bottom right\"\n   * Valid [[AbsolutePosition]] examples: `{top: 5, right: 10%}`, `{bottom: 49em, left: 10px}`, `{left: 10, bottom: 40}`\n   */\n  position?: string | AbsolutePosition;\n\n  /**\n   * Scroll prevention method.\n   */\n  scrollPreventionMode?: ScrollPreventionMode;\n\n  /**\n   * Optionally set the background color\n   */\n  backgroundColor?: Color;\n}\n\n/**\n * The Excalibur Engine\n *\n * The [[Engine]] is the main driver for a game. It is responsible for\n * starting/stopping the game, maintaining state, transmitting events,\n * loading resources, and managing the scene.\n *\n * [[include:Engine.md]]\n */\nexport class Engine extends Class implements CanInitialize, CanUpdate, CanDraw {\n  /**\n   *\n   */\n  public browser: BrowserEvents;\n\n  /**\n   * Direct access to the engine's canvas element\n   */\n  public canvas: HTMLCanvasElement;\n\n  /**\n   * Direct access to the engine's 2D rendering context\n   */\n  public ctx: CanvasRenderingContext2D;\n\n  public static _useWebGL: boolean = false;\n  public static _useLegacyDrawing: boolean = false;\n\n  /**\n   * Direct access to the excalibur graphics context\n   */\n  public graphicsContext: ExcaliburGraphicsContext;\n\n  /**\n   * Direct access to the canvas element ID, if an ID exists\n   */\n  public canvasElementId: string;\n\n  /**\n   * The width of the game canvas in pixels (physical width component of the\n   * resolution of the canvas element)\n   */\n  public get canvasWidth(): number {\n    return this.canvas.width;\n  }\n\n  /**\n   * Returns half width of the game canvas in pixels (half physical width component)\n   */\n  public get halfCanvasWidth(): number {\n    return this.canvas.width / 2;\n  }\n\n  /**\n   * The height of the game canvas in pixels, (physical height component of\n   * the resolution of the canvas element)\n   */\n  public get canvasHeight(): number {\n    return this.canvas.height;\n  }\n\n  /**\n   * Returns half height of the game canvas in pixels (half physical height component)\n   */\n  public get halfCanvasHeight(): number {\n    return this.canvas.height / 2;\n  }\n\n  /**\n   * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawWidth(): number {\n    if (this.currentScene && this.currentScene.camera) {\n      return this.canvasWidth / this.currentScene.camera.getZoom() / this.pixelRatio;\n    }\n    return this.canvasWidth / this.pixelRatio;\n  }\n\n  /**\n   * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawWidth(): number {\n    return this.drawWidth / 2;\n  }\n\n  /**\n   * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawHeight(): number {\n    if (this.currentScene && this.currentScene.camera) {\n      return this.canvasHeight / this.currentScene.camera.getZoom() / this.pixelRatio;\n    }\n    return this.canvasHeight / this.pixelRatio;\n  }\n\n  /**\n   * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawHeight(): number {\n    return this.drawHeight / 2;\n  }\n\n  /**\n   * Returns whether excalibur detects the current screen to be HiDPI\n   */\n  public get isHiDpi(): boolean {\n    return this.pixelRatio !== 1;\n  }\n\n  /**\n   * Access engine input like pointer, keyboard, or gamepad\n   */\n  public input: Input.EngineInput;\n\n  private _hasStarted: boolean = false;\n\n  /**\n   * Access Excalibur debugging functionality.\n   */\n  public debug = new Debug();\n\n  /**\n   * Access [[stats]] that holds frame statistics.\n   */\n  public get stats(): DebugStats {\n    return this.debug.stats;\n  }\n\n  /**\n   * Gets or sets the list of post processors to apply at the end of drawing a frame (such as [[ColorBlindCorrector]])\n   */\n  public postProcessors: PostProcessor[] = [];\n\n  /**\n   * The current [[Scene]] being drawn and updated on screen\n   */\n  public currentScene: Scene;\n\n  /**\n   * The default [[Scene]] of the game, use [[Engine.goToScene]] to transition to different scenes.\n   */\n  public rootScene: Scene;\n\n  /**\n   * Contains all the scenes currently registered with Excalibur\n   */\n  public scenes: { [key: string]: Scene } = {};\n\n  private _animations: AnimationNode[] = [];\n\n  /**\n   * Indicates whether the engine is set to fullscreen or not\n   */\n  public isFullscreen: boolean = false;\n\n  /**\n   * Indicates the current [[DisplayMode]] of the engine.\n   */\n  public displayMode: DisplayMode = DisplayMode.FullScreen;\n\n  private _suppressHiDPIScaling: boolean = false;\n\n  private _suppressPlayButton: boolean = false;\n\n  // TODO Move this to canvas utilities\n  /**\n   * Returns the calculated pixel ration for use in rendering\n   */\n  public get pixelRatio(): number {\n    if (this._suppressHiDPIScaling) {\n      return 1;\n    }\n\n    if (window.devicePixelRatio < 1) {\n      return 1;\n    }\n\n    const devicePixelRatio = window.devicePixelRatio || 1;\n\n    const pixelRatio = devicePixelRatio;\n    return pixelRatio;\n  }\n\n  /**\n   * Indicates the current position of the engine. Valid only when DisplayMode is DisplayMode.Position\n   */\n  public position: string | AbsolutePosition;\n  /**\n   * Indicates whether audio should be paused when the game is no longer visible.\n   */\n  public pauseAudioWhenHidden: boolean = true;\n\n  /**\n   * Indicates whether the engine should draw with debug information\n   */\n  public isDebug: boolean = false;\n  public debugColor: Color = new Color(255, 255, 255);\n  /**\n   * Sets the background color for the engine.\n   */\n  public backgroundColor: Color;\n\n  /**\n   * Sets the Transparency for the engine.\n   */\n  public enableCanvasTransparency: boolean = true;\n\n  /**\n   * The action to take when a fatal exception is thrown\n   */\n  public onFatalException = (e: any) => {\n    Logger.getInstance().fatal(e);\n  };\n\n  /**\n   * The mouse wheel scroll prevention mode\n   */\n  public pageScrollPreventionMode: ScrollPreventionMode;\n\n  private _logger: Logger;\n  private _isSmoothingEnabled: boolean = true;\n\n  // this is a reference to the current requestAnimationFrame return value\n  private _requestId: number;\n\n  // this determines whether excalibur is compatible with your browser\n  private _compatible: boolean;\n\n  private _timescale: number = 1.0;\n\n  // loading\n  private _loader: Loader;\n  private _isLoading: boolean = false;\n\n  private _isInitialized: boolean = false;\n\n  public on(eventName: Events.initialize, handler: (event: Events.InitializeEvent) => void): void;\n  public on(eventName: Events.visible, handler: (event: VisibleEvent) => void): void;\n  public on(eventName: Events.hidden, handler: (event: HiddenEvent) => void): void;\n  public on(eventName: Events.start, handler: (event: GameStartEvent) => void): void;\n  public on(eventName: Events.stop, handler: (event: GameStopEvent) => void): void;\n  public on(eventName: Events.preupdate, handler: (event: PreUpdateEvent) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: PostUpdateEvent) => void): void;\n  public on(eventName: Events.preframe, handler: (event: PreFrameEvent) => void): void;\n  public on(eventName: Events.postframe, handler: (event: PostFrameEvent) => void): void;\n  public on(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  public once(eventName: Events.initialize, handler: (event: Events.InitializeEvent) => void): void;\n  public once(eventName: Events.visible, handler: (event: VisibleEvent) => void): void;\n  public once(eventName: Events.hidden, handler: (event: HiddenEvent) => void): void;\n  public once(eventName: Events.start, handler: (event: GameStartEvent) => void): void;\n  public once(eventName: Events.stop, handler: (event: GameStopEvent) => void): void;\n  public once(eventName: Events.preupdate, handler: (event: PreUpdateEvent) => void): void;\n  public once(eventName: Events.postupdate, handler: (event: PostUpdateEvent) => void): void;\n  public once(eventName: Events.preframe, handler: (event: PreFrameEvent) => void): void;\n  public once(eventName: Events.postframe, handler: (event: PostFrameEvent) => void): void;\n  public once(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public once(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    super.once(eventName, handler);\n  }\n\n  public off(eventName: Events.initialize, handler?: (event: Events.InitializeEvent) => void): void;\n  public off(eventName: Events.visible, handler?: (event: VisibleEvent) => void): void;\n  public off(eventName: Events.hidden, handler?: (event: HiddenEvent) => void): void;\n  public off(eventName: Events.start, handler?: (event: GameStartEvent) => void): void;\n  public off(eventName: Events.stop, handler?: (event: GameStopEvent) => void): void;\n  public off(eventName: Events.preupdate, handler?: (event: PreUpdateEvent) => void): void;\n  public off(eventName: Events.postupdate, handler?: (event: PostUpdateEvent) => void): void;\n  public off(eventName: Events.preframe, handler?: (event: PreFrameEvent) => void): void;\n  public off(eventName: Events.postframe, handler?: (event: PostFrameEvent) => void): void;\n  public off(eventName: Events.predraw, handler?: (event: PreDrawEvent) => void): void;\n  public off(eventName: Events.postdraw, handler?: (event: PostDrawEvent) => void): void;\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void): void;\n  public off(eventName: string, handler?: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  /**\n   * Default [[EngineOptions]]\n   */\n  private static _DefaultEngineOptions: EngineOptions = {\n    width: 0,\n    height: 0,\n    enableCanvasTransparency: true,\n    canvasElementId: '',\n    canvasElement: undefined,\n    pointerScope: Input.PointerScope.Document,\n    suppressConsoleBootMessage: null,\n    suppressMinimumBrowserFeatureDetection: null,\n    suppressHiDPIScaling: null,\n    suppressPlayButton: null,\n    scrollPreventionMode: ScrollPreventionMode.Canvas,\n    backgroundColor: Color.fromHex('#2185d0') // Excalibur blue\n  };\n\n  /**\n   * Creates a new game using the given [[EngineOptions]]. By default, if no options are provided,\n   * the game will be rendered full screen (taking up all available browser window space).\n   * You can customize the game rendering through [[EngineOptions]].\n   *\n   * Example:\n   *\n   * ```js\n   * var game = new ex.Engine({\n   *   width: 0, // the width of the canvas\n   *   height: 0, // the height of the canvas\n   *   enableCanvasTransparency: true, // the transparencySection of the canvas\n   *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\n   *   displayMode: ex.DisplayMode.FullScreen, // the display mode\n   *   pointerScope: ex.Input.PointerScope.Document, // the scope of capturing pointer (mouse/touch) events\n   *   backgroundColor: ex.Color.fromHex('#2185d0') // background color of the engine\n   * });\n   *\n   * // call game.start, which is a Promise\n   * game.start().then(function () {\n   *   // ready, set, go!\n   * });\n   * ```\n   */\n  constructor(options?: EngineOptions) {\n    super();\n\n    options = { ...Engine._DefaultEngineOptions, ...options };\n\n    // Initialize browser events facade\n    this.browser = new BrowserEvents(window, document);\n\n    // Check compatibility\n    const detector = new Detector();\n    if (!options.suppressMinimumBrowserFeatureDetection && !(this._compatible = detector.test())) {\n      const message = document.createElement('div');\n      message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\n      document.body.appendChild(message);\n\n      detector.failedTests.forEach(function (test) {\n        const testMessage = document.createElement('div');\n        testMessage.innerText = 'Browser feature missing ' + test;\n        document.body.appendChild(testMessage);\n      });\n\n      if (options.canvasElementId) {\n        const canvas = document.getElementById(options.canvasElementId);\n        if (canvas) {\n          canvas.parentElement.removeChild(canvas);\n        }\n      }\n\n      return;\n    } else {\n      this._compatible = true;\n    }\n\n    // Use native console API for color fun\n    // eslint-disable-next-line no-console\n    if (console.log && !options.suppressConsoleBootMessage) {\n      // eslint-disable-next-line no-console\n      console.log(\n        `%cPowered by Excalibur.js (v${EX_VERSION})`,\n        'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;'\n      );\n      // eslint-disable-next-line no-console\n      console.log('\\n\\\n      /| ________________\\n\\\nO|===|* >________________>\\n\\\n      \\\\|');\n      // eslint-disable-next-line no-console\n      console.log('Visit', 'http://excaliburjs.com', 'for more information');\n    }\n\n    // Suppress play button\n    if (options.suppressPlayButton) {\n      this._suppressPlayButton = true;\n    }\n\n    this._logger = Logger.getInstance();\n\n    // If debug is enabled, let's log browser features to the console.\n    if (this._logger.defaultLevel === LogLevel.Debug) {\n      detector.logBrowserFeatures();\n    }\n\n    this._logger.debug('Building engine...');\n\n    this.canvasElementId = options.canvasElementId;\n\n    if (options.canvasElementId) {\n      this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\n      this.canvas = <HTMLCanvasElement>document.getElementById(options.canvasElementId);\n    } else if (options.canvasElement) {\n      this._logger.debug('Using Canvas element specified:', options.canvasElement);\n      this.canvas = options.canvasElement;\n    } else {\n      this._logger.debug('Using generated canvas element');\n      this.canvas = <HTMLCanvasElement>document.createElement('canvas');\n    }\n    if (options.width && options.height) {\n      if (options.displayMode === undefined) {\n        this.displayMode = DisplayMode.Fixed;\n      }\n      this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\n\n      this.canvas.width = options.width;\n      this.canvas.height = options.height;\n    } else if (!options.displayMode) {\n      this._logger.debug('Engine viewport is fullscreen');\n      this.displayMode = DisplayMode.FullScreen;\n    }\n\n    if (options.backgroundColor) {\n      this.backgroundColor = options.backgroundColor.clone();\n    }\n\n    this.enableCanvasTransparency = options.enableCanvasTransparency;\n\n    this._loader = new Loader();\n\n    this._initialize(options);\n\n    this.rootScene = this.currentScene = new Scene(this);\n\n    this.addScene('root', this.rootScene);\n    this.goToScene('root');\n  }\n\n  /**\n   * Returns a BoundingBox of the top left corner of the screen\n   * and the bottom right corner of the screen.\n   */\n  public getWorldBounds() {\n    const left = this.screenToWorldCoordinates(Vector.Zero).x;\n    const top = this.screenToWorldCoordinates(Vector.Zero).y;\n    const right = left + this.drawWidth;\n    const bottom = top + this.drawHeight;\n\n    return new BoundingBox(left, top, right, bottom);\n  }\n\n  /**\n   * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\n   */\n  public get timescale() {\n    return this._timescale;\n  }\n\n  /**\n   * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\n   * when using time-based movement.\n   */\n  public set timescale(value: number) {\n    if (value <= 0) {\n      Logger.getInstance().error('Cannot set engine.timescale to a value of 0 or less than 0.');\n      return;\n    }\n\n    this._timescale = value;\n  }\n\n  /**\n   * Plays a sprite animation on the screen at the specified `x` and `y`\n   * (in game coordinates, not screen pixels). These animations play\n   * independent of actors, and will be cleaned up internally as soon\n   * as they are complete. Note animations that loop will never be\n   * cleaned up.\n   *\n   * @param animation  Animation to play\n   * @param x          x game coordinate to play the animation\n   * @param y          y game coordinate to play the animation\n   */\n  public playAnimation(animation: Animation, x: number, y: number) {\n    this._animations.push(new AnimationNode(animation, x, y));\n  }\n\n  /**\n   * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap\n   * will be drawn and updated.\n   */\n  public addTileMap(tileMap: TileMap) {\n    this.currentScene.addTileMap(tileMap);\n  }\n\n  /**\n   * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\n   */\n  public removeTileMap(tileMap: TileMap) {\n    this.currentScene.removeTileMap(tileMap);\n  }\n\n  /**\n   * Adds a [[Timer]] to the [[currentScene]].\n   * @param timer  The timer to add to the [[currentScene]].\n   */\n  public addTimer(timer: Timer): Timer {\n    return this.currentScene.addTimer(timer);\n  }\n\n  /**\n   * Removes a [[Timer]] from the [[currentScene]].\n   * @param timer  The timer to remove to the [[currentScene]].\n   */\n  public removeTimer(timer: Timer): Timer {\n    return this.currentScene.removeTimer(timer);\n  }\n\n  /**\n   * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\n   * would levels or menus.\n   *\n   * @param key  The name of the scene, must be unique\n   * @param scene The scene to add to the engine\n   */\n  public addScene(key: string, scene: Scene) {\n    if (this.scenes[key]) {\n      this._logger.warn('Scene', key, 'already exists overwriting');\n    }\n    this.scenes[key] = scene;\n  }\n\n  /**\n   * Removes a [[Scene]] instance from the engine\n   * @param scene  The scene to remove\n   */\n  public removeScene(scene: Scene): void;\n  /**\n   * Removes a scene from the engine by key\n   * @param key  The scene key to remove\n   */\n  public removeScene(key: string): void;\n  /**\n   * @internal\n   */\n  public removeScene(entity: any): void {\n    if (entity instanceof Scene) {\n      // remove scene\n      for (const key in this.scenes) {\n        if (this.scenes.hasOwnProperty(key)) {\n          if (this.scenes[key] === entity) {\n            delete this.scenes[key];\n          }\n        }\n      }\n    }\n\n    if (typeof entity === 'string') {\n      // remove scene\n      delete this.scenes[entity];\n    }\n  }\n\n  /**\n   * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\n   * would levels or menus.\n   * @param sceneKey  The key of the scene, must be unique\n   * @param scene     The scene to add to the engine\n   */\n  public add(sceneKey: string, scene: Scene): void;\n  /**\n   * Adds a [[Timer]] to the [[currentScene]].\n   * @param timer  The timer to add to the [[currentScene]].\n   */\n  public add(timer: Timer): void;\n  /**\n   * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap\n   * will be drawn and updated.\n   */\n  public add(tileMap: TileMap): void;\n  /**\n   * Adds an actor to the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.add(actor)`.\n   *\n   * Actors can only be drawn if they are a member of a scene, and only\n   * the [[currentScene]] may be drawn or updated.\n   *\n   * @param actor  The actor to add to the [[currentScene]]\n   */\n  public add(actor: Actor): void;\n\n  /**\n   * Adds a [[ScreenElement]] to the [[currentScene]] of the game,\n   * ScreenElements do not participate in collisions, instead the\n   * remain in the same place on the screen.\n   * @param screenElement  The ScreenElement to add to the [[currentScene]]\n   */\n  public add(screenElement: ScreenElement): void;\n  /**\n   * Adds an [[Entity]] to the [[currentScene]] of the game\n   */\n  public add(entity: Entity): void;\n  public add(entity: any): void {\n    if (entity instanceof ScreenElement) {\n      this.currentScene.addScreenElement(entity);\n      this.currentScene.addEntity(entity);\n      return;\n    }\n    if (entity instanceof Actor) {\n      this._addChild(entity);\n      this.currentScene.addEntity(entity);\n    }\n    if (entity instanceof Timer) {\n      this.addTimer(entity);\n    }\n\n    if (entity instanceof TileMap) {\n      this.addTileMap(entity);\n    }\n\n    if (arguments.length === 2) {\n      this.addScene(<string>arguments[0], <Scene>arguments[1]);\n    }\n  }\n\n  /**\n   * Removes a scene instance from the engine\n   * @param scene  The scene to remove\n   */\n  public remove(scene: Scene): void;\n  /**\n   * Removes a scene from the engine by key\n   * @param sceneKey  The scene to remove\n   */\n  public remove(sceneKey: string): void;\n  /**\n   * Removes a [[Timer]] from the [[currentScene]].\n   * @param timer  The timer to remove to the [[currentScene]].\n   */\n  public remove(timer: Timer): void;\n  /**\n   * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\n   */\n  public remove(tileMap: TileMap): void;\n  /**\n   * Removes an actor from the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.removeChild(actor)`.\n   * Actors that are removed from a scene will no longer be drawn or updated.\n   *\n   * @param actor  The actor to remove from the [[currentScene]].\n   */\n  public remove(actor: Actor): void;\n  /**\n   * Removes a [[ScreenElement]] to the scene, it will no longer be drawn or updated\n   * @param screenElement  The ScreenElement to remove from the [[currentScene]]\n   */\n  public remove(screenElement: ScreenElement): void;\n  /**\n   * Removes an [[Entity]] from the [[currentScene]] of the game.\n   */\n  public remove(entity: Entity): void;\n  public remove(entity: any): void {\n    if (entity instanceof ScreenElement) {\n      this.currentScene.removeScreenElement(entity);\n      this.currentScene.removeEntity(entity);\n      return;\n    }\n    if (entity instanceof Actor) {\n      this._removeChild(entity);\n      this.currentScene.removeEntity(entity);\n    }\n    if (entity instanceof Timer) {\n      this.removeTimer(entity);\n    }\n\n    if (entity instanceof TileMap) {\n      this.removeTileMap(entity);\n    }\n\n    if (entity instanceof Scene) {\n      this.removeScene(entity);\n    }\n\n    if (typeof entity === 'string') {\n      this.removeScene(entity);\n    }\n  }\n\n  /**\n   * Adds an actor to the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.add(actor)`.\n   *\n   * Actors can only be drawn if they are a member of a scene, and only\n   * the [[currentScene]] may be drawn or updated.\n   *\n   * @param actor  The actor to add to the [[currentScene]]\n   */\n  protected _addChild(actor: Actor) {\n    this.currentScene.add(actor);\n  }\n\n  /**\n   * Removes an actor from the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.remove(actor)`.\n   * Actors that are removed from a scene will no longer be drawn or updated.\n   *\n   * @param actor  The actor to remove from the [[currentScene]].\n   */\n  protected _removeChild(actor: Actor) {\n    this.currentScene.remove(actor);\n  }\n\n  /**\n   * Changes the currently updating and drawing scene to a different,\n   * named scene. Calls the [[Scene]] lifecycle events.\n   * @param key  The key of the scene to transition to.\n   */\n  public goToScene(key: string) {\n    if (this.scenes[key]) {\n      const oldScene = this.currentScene;\n      const newScene = this.scenes[key];\n\n      this._logger.debug('Going to scene:', key);\n\n      // only deactivate when initialized\n      if (this.currentScene.isInitialized) {\n        this.currentScene._deactivate.call(this.currentScene, [oldScene, newScene]);\n        this.currentScene.eventDispatcher.emit('deactivate', new DeactivateEvent(newScene, this.currentScene));\n      }\n\n      // set current scene to new one\n      this.currentScene = newScene;\n\n      // initialize the current scene if has not been already\n      this.currentScene._initialize(this);\n\n      this.currentScene._activate.call(this.currentScene, [oldScene, newScene]);\n      this.currentScene.eventDispatcher.emit('activate', new ActivateEvent(oldScene, this.currentScene));\n    } else {\n      this._logger.error('Scene', key, 'does not exist!');\n    }\n  }\n\n  /**\n   * Transforms the current x, y from screen coordinates to world coordinates\n   * @param point  Screen coordinate to convert\n   */\n  public screenToWorldCoordinates(point: Vector): Vector {\n    let newX = point.x;\n    let newY = point.y;\n\n    // transform back to world space\n    newX = (newX / this.canvas.clientWidth) * this.drawWidth;\n    newY = (newY / this.canvas.clientHeight) * this.drawHeight;\n\n    // transform based on zoom\n    newX = newX - this.halfDrawWidth;\n    newY = newY - this.halfDrawHeight;\n\n    // shift by focus\n    if (this.currentScene && this.currentScene.camera) {\n      const focus = this.currentScene.camera.getFocus();\n      newX += focus.x;\n      newY += focus.y;\n    }\n\n    return new Vector(Math.floor(newX), Math.floor(newY));\n  }\n\n  /**\n   * Transforms a world coordinate, to a screen coordinate\n   * @param point  World coordinate to convert\n   */\n  public worldToScreenCoordinates(point: Vector): Vector {\n    let screenX = point.x;\n    let screenY = point.y;\n\n    // shift by focus\n    if (this.currentScene && this.currentScene.camera) {\n      const focus = this.currentScene.camera.getFocus();\n      screenX -= focus.x;\n      screenY -= focus.y;\n    }\n\n    // transform back on zoom\n    screenX = screenX + this.halfDrawWidth;\n    screenY = screenY + this.halfDrawHeight;\n\n    // transform back to screen space\n    screenX = (screenX * this.canvas.clientWidth) / this.drawWidth;\n    screenY = (screenY * this.canvas.clientHeight) / this.drawHeight;\n\n    return new Vector(Math.floor(screenX), Math.floor(screenY));\n  }\n\n  /**\n   * Sets the internal canvas height based on the selected display mode.\n   */\n  private _setHeightByDisplayMode(parent: HTMLElement | Window) {\n    if (this.displayMode === DisplayMode.Container) {\n      this.canvas.width = (<HTMLElement>parent).clientWidth;\n      this.canvas.height = (<HTMLElement>parent).clientHeight;\n    }\n\n    if (this.displayMode === DisplayMode.FullScreen) {\n      document.body.style.margin = '0px';\n      document.body.style.overflow = 'hidden';\n      this.canvas.width = (<Window>parent).innerWidth;\n      this.canvas.height = (<Window>parent).innerHeight;\n    }\n  }\n\n  /**\n   * Initializes the internal canvas, rendering context, display mode, and native event listeners\n   */\n  private _initialize(options?: EngineOptions) {\n    if (options.displayMode) {\n      this.displayMode = options.displayMode;\n    }\n\n    if (this.displayMode === DisplayMode.FullScreen || this.displayMode === DisplayMode.Container) {\n      const parent = <any>(this.displayMode === DisplayMode.Container ? <any>(this.canvas.parentElement || document.body) : <any>window);\n\n      this._setHeightByDisplayMode(parent);\n\n      this.browser.window.on('resize', () => {\n        this._logger.debug('View port resized');\n        this._setHeightByDisplayMode(parent);\n        this._logger.info('parent.clientHeight ' + parent.clientHeight);\n        this.setAntialiasing(this._isSmoothingEnabled);\n      });\n    } else if (this.displayMode === DisplayMode.Position) {\n      this._initializeDisplayModePosition(options);\n    }\n\n    this.pageScrollPreventionMode = options.scrollPreventionMode;\n\n    // initialize inputs\n    this.input = {\n      keyboard: new Input.Keyboard(),\n      pointers: new Input.Pointers(this),\n      gamepads: new Input.Gamepads()\n    };\n    this.input.keyboard.init();\n    this.input.pointers.init(options && options.pointerScope === Input.PointerScope.Document ? document : this.canvas);\n    this.input.gamepads.init();\n\n    // Issue #385 make use of the visibility api\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\n\n    let hidden: keyof HTMLDocument, visibilityChange: string;\n    if (typeof document.hidden !== 'undefined') {\n      // Opera 12.10 and Firefox 18 and later support\n      hidden = 'hidden';\n      visibilityChange = 'visibilitychange';\n    } else if ('msHidden' in document) {\n      hidden = <keyof HTMLDocument>'msHidden';\n      visibilityChange = 'msvisibilitychange';\n    } else if ('webkitHidden' in document) {\n      hidden = <keyof HTMLDocument>'webkitHidden';\n      visibilityChange = 'webkitvisibilitychange';\n    }\n\n    this.browser.document.on(visibilityChange, () => {\n      if (document[hidden]) {\n        this.eventDispatcher.emit('hidden', new HiddenEvent(this));\n        this._logger.debug('Window hidden');\n      } else {\n        this.eventDispatcher.emit('visible', new VisibleEvent(this));\n        this._logger.debug('Window visible');\n      }\n    });\n\n    this._suppressHiDPIScaling = !!options.suppressHiDPIScaling;\n    if (!options.suppressHiDPIScaling) {\n      this._initializeHiDpi();\n    }\n\n    if (!Engine._useWebGL) {\n      this.ctx = this.canvas.getContext('2d', { alpha: this.enableCanvasTransparency });\n      this.graphicsContext = new ExcaliburGraphicsContext2DCanvas(this.ctx);\n    } else {\n      // TODO remove hacked canvas to keep things working\n      const canvas = document.createElement('canvas');\n      this.ctx = canvas.getContext('2d', { alpha: this.enableCanvasTransparency });\n      // TODO end hack\n\n      const gl = this.canvas.getContext('webgl', {\n        antialias: false,\n        premultipliedAlpha: false,\n        alpha: this.enableCanvasTransparency,\n        depth: false,\n        powerPreference: 'high-performance'\n      });\n      this.graphicsContext = new ExcaliburGraphicsContextWebGL(gl);\n    }\n\n    if (this.isHiDpi) {\n      this.graphicsContext.scale(this.pixelRatio, this.pixelRatio);\n    }\n\n    if (!this.canvasElementId && !options.canvasElement) {\n      document.body.appendChild(this.canvas);\n    }\n  }\n\n  public onInitialize(_engine: Engine) {\n    // Override me\n  }\n\n  private _initializeDisplayModePosition(options: EngineOptions) {\n    if (!options.position) {\n      throw new Error('DisplayMode of Position was selected but no position option was given');\n    } else {\n      this.canvas.style.display = 'block';\n      this.canvas.style.position = 'absolute';\n\n      if (typeof options.position === 'string') {\n        const specifiedPosition = options.position.split(' ');\n\n        switch (specifiedPosition[0]) {\n          case 'top':\n            this.canvas.style.top = '0px';\n            break;\n          case 'bottom':\n            this.canvas.style.bottom = '0px';\n            break;\n          case 'middle':\n            this.canvas.style.top = '50%';\n            const offsetY = -this.halfDrawHeight;\n            this.canvas.style.marginTop = offsetY.toString();\n            break;\n          default:\n            throw new Error('Invalid Position Given');\n        }\n\n        if (specifiedPosition[1]) {\n          switch (specifiedPosition[1]) {\n            case 'left':\n              this.canvas.style.left = '0px';\n              break;\n            case 'right':\n              this.canvas.style.right = '0px';\n              break;\n            case 'center':\n              this.canvas.style.left = '50%';\n              const offsetX = -this.halfDrawWidth;\n              this.canvas.style.marginLeft = offsetX.toString();\n              break;\n            default:\n              throw new Error('Invalid Position Given');\n          }\n        }\n      } else {\n        if (options.position.top) {\n          typeof options.position.top === 'number'\n            ? (this.canvas.style.top = options.position.top.toString() + 'px')\n            : (this.canvas.style.top = options.position.top);\n        }\n        if (options.position.right) {\n          typeof options.position.right === 'number'\n            ? (this.canvas.style.right = options.position.right.toString() + 'px')\n            : (this.canvas.style.right = options.position.right);\n        }\n        if (options.position.bottom) {\n          typeof options.position.bottom === 'number'\n            ? (this.canvas.style.bottom = options.position.bottom.toString() + 'px')\n            : (this.canvas.style.bottom = options.position.bottom);\n        }\n        if (options.position.left) {\n          typeof options.position.left === 'number'\n            ? (this.canvas.style.left = options.position.left.toString() + 'px')\n            : (this.canvas.style.left = options.position.left);\n        }\n      }\n    }\n  }\n\n  private _initializeHiDpi() {\n    // Scale the canvas if needed\n    if (this.isHiDpi) {\n      const oldWidth = this.canvas.width;\n      const oldHeight = this.canvas.height;\n\n      this.canvas.width = oldWidth * this.pixelRatio;\n      this.canvas.height = oldHeight * this.pixelRatio;\n\n      this.canvas.style.width = oldWidth + 'px';\n      this.canvas.style.height = oldHeight + 'px';\n\n      this._logger.warn(`Hi DPI screen detected, resetting canvas resolution from \n                           ${oldWidth}x${oldHeight} to ${this.canvas.width}x${this.canvas.height} \n                           css size will remain ${oldWidth}x${oldHeight}`);\n\n      // this.graphicsContext.scale(this.pixelRatio, this.pixelRatio);\n      this._logger.warn(`Canvas drawing context was scaled by ${this.pixelRatio}`);\n    }\n  }\n\n  /**\n   * If supported by the browser, this will set the antialiasing flag on the\n   * canvas. Set this to `false` if you want a 'jagged' pixel art look to your\n   * image resources.\n   * @param isSmooth  Set smoothing to true or false\n   */\n  public setAntialiasing(isSmooth: boolean) {\n    this._isSmoothingEnabled = isSmooth;\n\n    const ctx: any = this.ctx;\n    ctx.imageSmoothingEnabled = isSmooth;\n    for (const smoothing of ['webkitImageSmoothingEnabled', 'mozImageSmoothingEnabled', 'msImageSmoothingEnabled']) {\n      if (smoothing in ctx) {\n        ctx[smoothing] = isSmooth;\n      }\n    }\n  }\n\n  /**\n   * Return the current smoothing status of the canvas\n   */\n  public getAntialiasing(): boolean {\n    /*eslint-disable */\n    return (\n      (<any>this.ctx).imageSmoothingEnabled ||\n      (<any>this.ctx).webkitImageSmoothingEnabled ||\n      (<any>this.ctx).mozImageSmoothingEnabled ||\n      (<any>this.ctx).msImageSmoothingEnabled\n    );\n    /*eslint-enable */\n  }\n\n  /**\n   * Gets whether the actor is Initialized\n   */\n  public get isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  private _overrideInitialize(engine: Engine) {\n    if (!this.isInitialized) {\n      this.onInitialize(engine);\n      super.emit('initialize', new InitializeEvent(engine, this));\n      this._isInitialized = true;\n    }\n  }\n\n  /**\n   * Updates the entire state of the game\n   * @param delta  Number of milliseconds elapsed since the last update.\n   */\n  private _update(delta: number) {\n    if (this._isLoading) {\n      // suspend updates until loading is finished\n      this._loader.update(this, delta);\n      // Update input listeners\n      this.input.keyboard.update();\n      this.input.pointers.update();\n      this.input.gamepads.update();\n      return;\n    }\n    this._overrideInitialize(this);\n    // Publish preupdate events\n    this._preupdate(delta);\n\n    // process engine level events\n    this.currentScene.update(this, delta);\n\n    // update animations\n    this._animations = this._animations.filter(function (a) {\n      return !a.animation.isDone();\n    });\n\n    // Update input listeners\n    this.input.keyboard.update();\n    this.input.pointers.update();\n    this.input.gamepads.update();\n\n    // Publish update event\n    this._postupdate(delta);\n  }\n\n  /**\n   * @internal\n   */\n  public _preupdate(delta: number) {\n    this.emit('preupdate', new PreUpdateEvent(this, delta, this));\n    this.onPreUpdate(this, delta);\n  }\n\n  public onPreUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * @internal\n   */\n  public _postupdate(delta: number) {\n    this.emit('postupdate', new PostUpdateEvent(this, delta, this));\n    this.onPostUpdate(this, delta);\n  }\n\n  public onPostUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * Draws the entire game\n   * @param delta  Number of milliseconds elapsed since the last draw.\n   */\n  private _draw(delta: number) {\n    const ctx = this.ctx;\n    this._predraw(ctx, delta);\n\n    if (this._isLoading) {\n      this._loader.canvas.draw(this.graphicsContext, 0, 0);\n      this.graphicsContext.flush();\n      // Drawing nothing else while loading\n      return;\n    }\n\n    this.graphicsContext.backgroundColor = this.backgroundColor;\n    // ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight);\n    // ctx.fillStyle = this.backgroundColor.toString();\n    // ctx.fillRect(0, 0, this.canvasWidth, this.canvasHeight);\n\n    this.currentScene.draw(this.ctx, delta);\n\n    // todo needs to be a better way of doing this\n    let a = 0;\n    const len = this._animations.length;\n    for (a; a < len; a++) {\n      this._animations[a].animation.draw(ctx, this._animations[a].x, this._animations[a].y);\n    }\n\n    // Draw debug information\n    if (this.isDebug) {\n      this.ctx.font = 'Consolas';\n      this.ctx.fillStyle = this.debugColor.toString();\n      const keys = this.input.keyboard.getKeys();\n      for (let j = 0; j < keys.length; j++) {\n        this.ctx.fillText(keys[j].toString() + ' : ' + (Input.Keys[keys[j]] ? Input.Keys[keys[j]] : 'Not Mapped'), 100, 10 * j + 10);\n      }\n\n      this.ctx.fillText('FPS:' + this.stats.currFrame.fps.toFixed(2).toString(), 10, 10);\n    }\n\n    // Post processing\n    for (let i = 0; i < this.postProcessors.length; i++) {\n      this.postProcessors[i].process(this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight), this.ctx);\n    }\n    this._postdraw(ctx, delta);\n  }\n\n  /**\n   * @internal\n   */\n  public _predraw(_ctx: CanvasRenderingContext2D, delta: number) {\n    this.emit('predraw', new PreDrawEvent(_ctx, delta, this));\n    this.onPreDraw(_ctx, delta);\n  }\n\n  public onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * @internal\n   */\n  public _postdraw(_ctx: CanvasRenderingContext2D, delta: number) {\n    this.emit('postdraw', new PostDrawEvent(_ctx, delta, this));\n    this.onPostDraw(_ctx, delta);\n  }\n\n  public onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * Starts the internal game loop for Excalibur after loading\n   * any provided assets.\n   * @param loader  Optional [[Loader]] to use to load resources. The default loader is [[Loader]], override to provide your own\n   * custom loader.\n   */\n  public start(loader?: Loader): Promise<any> {\n    if (!this._compatible) {\n      return Promise.reject('Excalibur is incompatible with your browser');\n    }\n\n    let loadingComplete: Promise<any>;\n    if (loader) {\n      this._loader = loader;\n      this._loader.suppressPlayButton = this._suppressPlayButton || this._loader.suppressPlayButton;\n      this._loader.wireEngine(this);\n      loadingComplete = this.load(this._loader);\n    } else {\n      loadingComplete = Promise.resolve();\n    }\n\n    loadingComplete.then(() => {\n      this.emit('start', new GameStartEvent(this));\n    });\n\n    if (!this._hasStarted) {\n      this._hasStarted = true;\n      this._logger.debug('Starting game...');\n      this.browser.resume();\n      Engine.createMainLoop(this, window.requestAnimationFrame, Date.now)();\n\n      this._logger.debug('Game started');\n    } else {\n      // Game already started;\n    }\n    return loadingComplete;\n  }\n\n  public static createMainLoop(game: Engine, raf: (func: Function) => number, nowFn: () => number) {\n    let lastTime = nowFn();\n\n    return function mainloop() {\n      if (!game._hasStarted) {\n        return;\n      }\n      try {\n        game._requestId = raf(mainloop);\n        game.emit('preframe', new PreFrameEvent(game, game.stats.prevFrame));\n\n        // Get the time to calculate time-elapsed\n        const now = nowFn();\n        let elapsed = Math.floor(now - lastTime) || 1;\n        // Resolves issue #138 if the game has been paused, or blurred for\n        // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\n        // and provides more expected behavior when the engine comes back\n        // into focus\n        if (elapsed > 200) {\n          elapsed = 1;\n        }\n        const delta = elapsed * game.timescale;\n\n        // reset frame stats (reuse existing instances)\n        const frameId = game.stats.prevFrame.id + 1;\n        game.stats.prevFrame.reset(game.stats.currFrame);\n        game.stats.currFrame.reset();\n        game.stats.currFrame.id = frameId;\n        game.stats.currFrame.delta = delta;\n        game.stats.currFrame.fps = 1.0 / (delta / 1000);\n\n        const beforeUpdate = nowFn();\n        game._update(delta);\n        const afterUpdate = nowFn();\n        game._draw(delta);\n        const afterDraw = nowFn();\n\n        game.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\n        game.stats.currFrame.duration.draw = afterDraw - afterUpdate;\n\n        lastTime = now;\n\n        game.emit('postframe', new PostFrameEvent(game, game.stats.currFrame));\n      } catch (e) {\n        window.cancelAnimationFrame(game._requestId);\n        game.stop();\n        game.onFatalException(e);\n      }\n    };\n  }\n\n  /**\n   * Stops Excalibur's main loop, useful for pausing the game.\n   */\n  public stop() {\n    if (this._hasStarted) {\n      this.emit('stop', new GameStopEvent(this));\n      this.browser.pause();\n      this._hasStarted = false;\n      this._logger.debug('Game stopped');\n    }\n  }\n\n  /**\n   * Returns the Engine's Running status, Useful for checking whether engine is running or paused.\n   */\n  public isPaused(): boolean {\n    return !this._hasStarted;\n  }\n\n  /**\n   * Takes a screen shot of the current viewport and returns it as an\n   * HTML Image Element.\n   */\n  public screenshot(): HTMLImageElement {\n    const result = new Image();\n    const raw = this.canvas.toDataURL('image/png');\n    result.src = raw;\n    return result;\n  }\n\n  /**\n   * Another option available to you to load resources into the game.\n   * Immediately after calling this the game will pause and the loading screen\n   * will appear.\n   * @param loader  Some [[Loadable]] such as a [[Loader]] collection, [[Sound]], or [[Texture]].\n   */\n  public load(loader: Loadable): Promise<any> {\n    const complete = new Promise<any>((resolve) => {\n      this._isLoading = true;\n\n      loader.load().then(() => {\n        if (this._suppressPlayButton) {\n          setTimeout(() => {\n            this._isLoading = false;\n            resolve();\n            // Delay is to give the logo a chance to show, otherwise don't delay\n          }, 500);\n        } else {\n          this._isLoading = false;\n          resolve();\n        }\n      });\n    });\n\n    return complete;\n  }\n}\n\n/**\n * @internal\n */\nclass AnimationNode {\n  constructor(public animation: Animation, public x: number, public y: number) {}\n}\n","import { GameEvent } from '../Events';\nimport { Sound } from '../Resources/Sound/Sound';\nimport { Actor } from '../Actor';\nimport { AudioInstance } from '../Resources/Sound/AudioInstance';\n\nexport class MediaEvent extends GameEvent<Sound> {\n  /**\n   * Media event cannot bubble\n   */\n  public set bubbles(_value: boolean) {\n    // stubbed\n  }\n  /**\n   * Media event cannot bubble\n   */\n  public get bubbles(): boolean {\n    return false;\n  }\n  /**\n   * Media event cannot bubble, so they have no path\n   */\n  protected get _path(): Actor[] {\n    return null;\n  }\n  /**\n   * Media event cannot bubble, so they have no path\n   */\n  protected set _path(_val: Actor[]) {\n    // stubbed\n  }\n\n  constructor(public target: Sound, protected _name: string = 'MediaEvent') {\n    super();\n  }\n\n  /**\n   * Prevents event from bubbling\n   */\n  public stopPropagation(): void {\n    /**\n     * Stub\n     */\n  }\n  /**\n   * Action, that calls when event happens\n   */\n  public action(): void {\n    /**\n     * Stub\n     */\n  }\n  /**\n   * Propagate event further through event path\n   */\n  public propagate(): void {\n    /**\n     * Stub\n     */\n  }\n\n  public layPath(_actor: Actor): void {\n    /**\n     * Stub\n     */\n  }\n}\n\nexport class NativeSoundEvent extends MediaEvent {\n  constructor(target: Sound, public track?: AudioInstance) {\n    super(target, 'NativeSoundEvent');\n  }\n}\n\nexport class NativeSoundProcessedEvent extends MediaEvent {\n  public data: string | AudioBuffer;\n\n  constructor(target: Sound, private processedData: string | AudioBuffer) {\n    super(target, 'NativeSoundProcessedEvent');\n\n    this.data = this.processedData;\n  }\n}\n","export * from './ActionContext';\nexport * from './Actionable';\nexport * from './RotationType';\n\nimport * as actions from './Action';\nexport { actions as Actions };\n\n// legacy Internal.Actions namespace support\nexport const Internal = { Actions: actions };\n","import { Sprite } from './Sprite';\nimport * as Effects from './SpriteEffects';\nimport { Color } from './Color';\n\nimport { Drawable, DrawOptions } from '../Interfaces/Drawable';\nimport { Vector } from '../Algebra';\nimport { Engine } from '../Engine';\nimport * as Util from '../Util/Util';\nimport { Configurable } from '../Configurable';\n\n/**\n * @hidden\n */\nexport class AnimationImpl implements Drawable {\n  /**\n   * The sprite frames to play, in order. See [[SpriteSheet.getAnimationForAll]] to quickly\n   * generate an [[Animation]].\n   */\n  public sprites: Sprite[] = [];\n\n  /**\n   * Duration to show each frame (in milliseconds)\n   */\n  public speed: number;\n\n  /**\n   * Current frame index being shown\n   */\n  public currentFrame: number = 0;\n\n  private _oldTime: number = Date.now();\n\n  public anchor: Vector = Vector.Zero;\n  public rotation: number = 0.0;\n  public scale: Vector = Vector.One;\n\n  /**\n   * Indicates whether the animation should loop after it is completed\n   */\n  public loop: boolean = true;\n\n  /**\n   * Indicates the frame index the animation should freeze on for a non-looping\n   * animation. By default it is the last frame.\n   */\n  public freezeFrame: number = -1;\n\n  private _engine: Engine;\n\n  /**\n   * Flip each frame vertically. Sets [[Sprite.flipVertical]].\n   */\n  public flipVertical: boolean = false;\n\n  /**\n   * Flip each frame horizontally. Sets [[Sprite.flipHorizontal]].\n   */\n  public flipHorizontal: boolean = false;\n\n  public drawWidth: number = 0;\n  public drawHeight: number = 0;\n  public width: number = 0;\n  public height: number = 0;\n\n  /**\n   * Typically you will use a [[SpriteSheet]] to generate an [[Animation]].\n   *\n   * @param engine  Reference to the current game engine\n   * @param images  An array of sprites to create the frames for the animation\n   * @param speed   The number in milliseconds to display each frame in the animation\n   * @param loop    Indicates whether the animation should loop after it is completed\n   */\n  constructor(engineOrConfig: Engine | AnimationArgs, sprites: Sprite[], speed: number, loop?: boolean) {\n    let engine = engineOrConfig;\n    if (engineOrConfig && !(engineOrConfig instanceof Engine)) {\n      const config = engineOrConfig;\n      engine = config.engine;\n      sprites = config.sprites;\n      speed = config.speed;\n      loop = config.loop;\n    }\n\n    this.sprites = sprites;\n    this.speed = speed;\n    this._engine = <Engine>engine;\n\n    if (loop != null) {\n      this.loop = loop;\n    }\n\n    if (sprites && sprites[0]) {\n      this.drawHeight = sprites[0] ? sprites[0].drawHeight : 0;\n      this.drawWidth = sprites[0] ? sprites[0].drawWidth : 0;\n\n      this.width = sprites[0] ? sprites[0].width : 0;\n      this.height = sprites[0] ? sprites[0].height : 0;\n\n      this.freezeFrame = sprites.length - 1;\n    }\n  }\n\n  /**\n   * Applies the opacity effect to a sprite, setting the alpha of all pixels to a given value\n   */\n  public opacity(value: number) {\n    this.addEffect(new Effects.Opacity(value));\n  }\n\n  /**\n   * Applies the grayscale effect to a sprite, removing color information.\n   */\n  public grayscale() {\n    this.addEffect(new Effects.Grayscale());\n  }\n\n  /**\n   * Applies the invert effect to a sprite, inverting the pixel colors.\n   */\n  public invert() {\n    this.addEffect(new Effects.Invert());\n  }\n\n  /**\n   * Applies the fill effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\n   */\n  public fill(color: Color) {\n    this.addEffect(new Effects.Fill(color));\n  }\n\n  /**\n   * Applies the colorize effect to a sprite, changing the color channels of all pixels to be the average of the original color and the\n   * provided color.\n   */\n  public colorize(color: Color) {\n    this.addEffect(new Effects.Colorize(color));\n  }\n\n  /**\n   * Applies the lighten effect to a sprite, changes the lightness of the color according to hsl\n   */\n  public lighten(factor: number = 0.1) {\n    this.addEffect(new Effects.Lighten(factor));\n  }\n\n  /**\n   * Applies the darken effect to a sprite, changes the darkness of the color according to hsl\n   */\n  public darken(factor: number = 0.1) {\n    this.addEffect(new Effects.Darken(factor));\n  }\n\n  /**\n   * Applies the saturate effect to a sprite, saturates the color according to hsl\n   */\n  public saturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Saturate(factor));\n  }\n\n  /**\n   * Applies the desaturate effect to a sprite, desaturates the color according to hsl\n   */\n  public desaturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Desaturate(factor));\n  }\n\n  /**\n   * Add a [[SpriteEffect]] manually\n   */\n  public addEffect(effect: Effects.SpriteEffect) {\n    for (const i in this.sprites) {\n      this.sprites[i].addEffect(effect);\n    }\n  }\n\n  /**\n   * Removes an [[SpriteEffect]] from this animation.\n   * @param effect Effect to remove from this animation\n   */\n  public removeEffect(effect: Effects.SpriteEffect): void;\n\n  /**\n   * Removes an effect given the index from this animation.\n   * @param index  Index of the effect to remove from this animation\n   */\n  public removeEffect(index: number): void;\n  public removeEffect(param: any) {\n    for (const i in this.sprites) {\n      this.sprites[i].removeEffect(param);\n    }\n  }\n\n  /**\n   * Clear all sprite effects\n   */\n  public clearEffects() {\n    for (const i in this.sprites) {\n      this.sprites[i].clearEffects();\n    }\n  }\n\n  private _setAnchor(point: Vector) {\n    //if (!this.anchor.equals(point)) {\n    for (const i in this.sprites) {\n      this.sprites[i].anchor.setTo(point.x, point.y);\n    }\n    //}\n  }\n\n  private _setRotation(radians: number) {\n    //if (this.rotation !== radians) {\n    for (const i in this.sprites) {\n      this.sprites[i].rotation = radians;\n    }\n    //}\n  }\n\n  private _setScale(scale: Vector) {\n    //if (!this.scale.equals(scale)) {\n    for (const i in this.sprites) {\n      this.sprites[i].scale = scale;\n    }\n    //}\n  }\n\n  /**\n   * Resets the animation to first frame.\n   */\n  public reset() {\n    this.currentFrame = 0;\n  }\n\n  /**\n   * Indicates whether the animation is complete, animations that loop are never complete.\n   */\n  public isDone() {\n    return !this.loop && this.currentFrame >= this.sprites.length;\n  }\n\n  /**\n   * Not meant to be called by game developers. Ticks the animation forward internally and\n   * calculates whether to change to the frame.\n   * @internal\n   */\n  public tick() {\n    const time = Date.now();\n    if (time - this._oldTime > this.speed) {\n      this.currentFrame = this.loop ? (this.currentFrame + 1) % this.sprites.length : this.currentFrame + 1;\n      this._oldTime = time;\n    }\n  }\n\n  private _updateValues(): void {\n    this._setAnchor(this.anchor);\n    this._setRotation(this.rotation);\n    this._setScale(this.scale);\n  }\n\n  /**\n   * Skips ahead a specified number of frames in the animation\n   * @param frames  Frames to skip ahead\n   */\n  public skip(frames: number) {\n    this.currentFrame = (this.currentFrame + frames) % this.sprites.length;\n  }\n\n  /**\n   * Draws the animation appropriately to the 2D rendering context, at an x and y coordinate.\n   * @param ctx  The 2D rendering context\n   * @param x    The x coordinate of where to draw\n   * @param y    The y coordinate of where to draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number): void;\n  /**\n   * Draws the animation with custom options to override internals without mutating them.\n   * @param options\n   */\n  public draw(options: DrawOptions): void;\n  public draw(ctxOrOptions: CanvasRenderingContext2D | DrawOptions, x?: number, y?: number) {\n    if (ctxOrOptions instanceof CanvasRenderingContext2D) {\n      this._drawWithOptions({ ctx: ctxOrOptions, x, y, flipHorizontal: this.flipHorizontal, flipVertical: this.flipVertical });\n    } else {\n      this._drawWithOptions(ctxOrOptions);\n    }\n  }\n\n  private _drawWithOptions(options: DrawOptions) {\n    this.tick();\n    this._updateValues();\n    let currSprite: Sprite;\n    if (this.currentFrame < this.sprites.length) {\n      currSprite = this.sprites[this.currentFrame];\n      currSprite.draw(options);\n    }\n\n    if (this.freezeFrame !== -1 && this.currentFrame >= this.sprites.length) {\n      currSprite = this.sprites[Util.clamp(this.freezeFrame, 0, this.sprites.length - 1)];\n      currSprite.draw(options);\n    }\n\n    // add the calculated width\n    if (currSprite) {\n      this.drawWidth = currSprite.drawWidth;\n      this.drawHeight = currSprite.drawHeight;\n    }\n  }\n\n  /**\n   * Plays an animation at an arbitrary location in the game.\n   * @param x  The x position in the game to play\n   * @param y  The y position in the game to play\n   */\n  public play(x: number, y: number) {\n    this.reset();\n    this._engine.playAnimation(this, x, y);\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface AnimationArgs extends Partial<AnimationImpl> {\n  engine: Engine;\n  sprites: Sprite[];\n  speed: number;\n  loop?: boolean;\n  anchor?: Vector;\n  rotation?: number;\n  scale?: Vector;\n  flipVertical?: boolean;\n  flipHorizontal?: boolean;\n  width?: number;\n  height?: number;\n}\n\n/**\n * Animations allow you to display a series of images one after another,\n * creating the illusion of change. Generally these images will come from a [[SpriteSheet]] source.\n *\n * [[include:Animations.md]]\n */\nexport class Animation extends Configurable(AnimationImpl) {\n  constructor(config: AnimationArgs);\n  constructor(engine: Engine, images: Sprite[], speed: number, loop?: boolean);\n  constructor(engineOrConfig: Engine | AnimationArgs, images?: Sprite[], speed?: number, loop?: boolean) {\n    super(engineOrConfig, images, speed, loop);\n  }\n}\n","import { Color } from './Color';\nimport * as Effects from './SpriteEffects';\n\nimport { Drawable, DrawOptions } from '../Interfaces/Drawable';\nimport { Vector } from '../Algebra';\nimport { nullish } from '../Util/Util';\n\n/**\n * Creates a closed polygon drawing given a list of [[Vector]]s.\n *\n * @warning Use sparingly as Polygons are performance intensive\n */\nexport class Polygon implements Drawable {\n  public flipVertical: boolean;\n  public flipHorizontal: boolean;\n  public drawWidth: number;\n  public drawHeight: number;\n\n  public width: number;\n  public height: number;\n\n  /**\n   * The color to use for the lines of the polygon\n   */\n  public lineColor: Color;\n  /**\n   * The color to use for the interior of the polygon\n   */\n  public fillColor: Color;\n  /**\n   * The width of the lines of the polygon\n   */\n  public lineWidth: number = 5;\n  /**\n   * Indicates whether the polygon is filled or not.\n   */\n  public filled: boolean = false;\n\n  private _points: Vector[] = [];\n  public anchor = Vector.Zero;\n  public offset = Vector.Zero;\n  public rotation: number = 0;\n  public scale = Vector.One;\n  public opacity: number = 1;\n\n  /**\n   * @param points  The vectors to use to build the polygon in order\n   */\n  constructor(points: Vector[]) {\n    this._points = points;\n\n    const minX = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.min(prev, curr.x);\n    }, 0);\n    const maxX = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.max(prev, curr.x);\n    }, 0);\n\n    this.drawWidth = maxX - minX;\n\n    const minY = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.min(prev, curr.y);\n    }, 0);\n    const maxY = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.max(prev, curr.y);\n    }, 0);\n\n    this.drawHeight = maxY - minY;\n\n    this.height = this.drawHeight;\n    this.width = this.drawWidth;\n  }\n\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public addEffect() {\n    // not supported on polygons\n  }\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public removeEffect(index: number): void;\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public removeEffect(effect: Effects.SpriteEffect): void;\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public removeEffect() {\n    // not supported on polygons\n  }\n\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public clearEffects() {\n    // not supported on polygons\n  }\n\n  public reset() {\n    //pass\n  }\n\n  /**\n   * Draws the sprite appropriately to the 2D rendering context, at an x and y coordinate.\n   * @param ctx  The 2D rendering context\n   * @param x    The x coordinate of where to draw\n   * @param y    The y coordinate of where to draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number): void;\n  /**\n   * Draws the sprite with custom options to override internals without mutating them.\n   * @param options\n   */\n  public draw(options: DrawOptions): void;\n  public draw(ctxOrOptions: CanvasRenderingContext2D | DrawOptions, x?: number, y?: number): void {\n    if (ctxOrOptions instanceof CanvasRenderingContext2D) {\n      this._drawWithOptions({ ctx: ctxOrOptions, x, y });\n    } else {\n      this._drawWithOptions(ctxOrOptions);\n    }\n  }\n\n  private _drawWithOptions(options: DrawOptions) {\n    const { ctx, x, y, rotation, drawWidth, drawHeight, anchor, offset, opacity, flipHorizontal, flipVertical } = {\n      ...options,\n      rotation: nullish(options.rotation, this.rotation),\n      drawWidth: nullish(options.drawWidth, this.drawWidth),\n      drawHeight: nullish(options.drawHeight, this.drawHeight),\n      flipHorizontal: nullish(options.flipHorizontal, this.flipHorizontal),\n      flipVertical: nullish(options.flipVertical, this.flipVertical),\n      anchor: nullish(options.anchor, this.anchor),\n      offset: nullish(options.offset, this.offset),\n      opacity: nullish(options.opacity, this.opacity)\n    };\n\n    const xpoint = drawWidth * anchor.x + offset.x + x;\n    const ypoint = drawHeight * anchor.y + offset.y + y;\n\n    ctx.save();\n    ctx.translate(xpoint, ypoint);\n    ctx.scale(this.scale.x, this.scale.y);\n    ctx.rotate(rotation);\n    ctx.beginPath();\n    ctx.lineWidth = this.lineWidth;\n\n    // Iterate through the supplied points and construct a 'polygon'\n    const firstPoint = this._points[0];\n    ctx.moveTo(firstPoint.x, firstPoint.y);\n\n    let i = 0;\n    const len = this._points.length;\n\n    for (i; i < len; i++) {\n      ctx.lineTo(this._points[i].x, this._points[i].y);\n    }\n\n    ctx.lineTo(firstPoint.x, firstPoint.y);\n    ctx.closePath();\n\n    if (this.filled) {\n      ctx.fillStyle = this.fillColor.toString();\n      ctx.fill();\n    }\n\n    ctx.strokeStyle = this.lineColor.toString();\n\n    if (flipHorizontal) {\n      ctx.translate(drawWidth, 0);\n      ctx.scale(-1, 1);\n    }\n\n    if (flipVertical) {\n      ctx.translate(0, drawHeight);\n      ctx.scale(1, -1);\n    }\n\n    const oldAlpha = ctx.globalAlpha;\n    ctx.globalAlpha = nullish(opacity, 1);\n    ctx.stroke();\n    ctx.globalAlpha = oldAlpha;\n\n    ctx.restore();\n  }\n}\n","import { Sprite, SpriteArgs } from './Sprite';\nimport { Animation } from './Animation';\nimport { Color } from './Color';\nimport * as Effects from './SpriteEffects';\n\nimport { Texture } from '../Resources/Texture';\nimport { Engine } from '../Engine';\nimport { Logger } from '../Util/Log';\nimport { TextAlign, BaseAlign } from '../Label';\nimport { Configurable } from '../Configurable';\n\n/**\n * @hidden\n */\nexport class SpriteSheetImpl {\n  public sprites: Sprite[] = [];\n  public image: Texture = null;\n  public columns: number = 0;\n  public rows: number = 0;\n  public spWidth: number = 0;\n  public spHeight: number = 0;\n  public spacing: number = 0;\n  /**\n   * @param image     The backing image texture to build the SpriteSheet\n   * @param columns   The number of columns in the image texture\n   * @param rows      The number of rows in the image texture\n   * @param spWidth   The width of each individual sprite in pixels\n   * @param spHeight  The height of each individual sprite in pixels\n   * @param spacing   The spacing between every sprite in a spritesheet\n   */\n  constructor(\n    imageOrConfigOrSprites: Texture | SpriteSheetArgs | Sprite[],\n    columns?: number,\n    rows?: number,\n    spWidth?: number,\n    spHeight?: number,\n    spacing?: number\n  ) {\n    let loadFromImage: boolean = false;\n    if (imageOrConfigOrSprites instanceof Array) {\n      this.sprites = imageOrConfigOrSprites;\n    } else {\n      if (imageOrConfigOrSprites && !(imageOrConfigOrSprites instanceof Texture)) {\n        this.columns = imageOrConfigOrSprites.columns;\n        this.rows = imageOrConfigOrSprites.rows;\n        this.spWidth = imageOrConfigOrSprites.spWidth;\n        this.spHeight = imageOrConfigOrSprites.spHeight;\n        this.image = imageOrConfigOrSprites.image;\n        this.spacing = imageOrConfigOrSprites.spacing || 0;\n      } else {\n        this.image = <Texture>imageOrConfigOrSprites;\n        this.columns = columns;\n        this.rows = rows;\n        this.spWidth = spWidth;\n        this.spHeight = spHeight;\n        this.spacing = spacing || 0;\n      }\n      this.sprites = new Array(this.columns * this.rows);\n      loadFromImage = true;\n    }\n\n    // Inspect actual image dimensions with preloading\n    if (this.image instanceof Texture) {\n      let isWidthError: boolean = false;\n      let isHeightError: boolean = false;\n      if (this.image.isLoaded()) {\n        isWidthError = this.spWidth * this.columns > this.image.image.naturalWidth;\n        isHeightError = this.spHeight * this.rows > this.image.image.naturalHeight;\n      }\n      if (isWidthError) {\n        throw new RangeError(\n          `SpriteSheet specified is wider, ` +\n            `${this.columns} cols x ${this.spWidth} pixels > ${this.image.image.naturalWidth} ` +\n            `pixels than image width`\n        );\n      }\n      if (isHeightError) {\n        throw new RangeError(\n          `SpriteSheet specified is taller, ` +\n            `${this.rows} rows x ${this.spHeight} pixels > ${this.image.image.naturalHeight} ` +\n            `pixels than image height`\n        );\n      }\n    }\n\n    if (loadFromImage) {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j < this.columns; j++) {\n          this.sprites[j + i * this.columns] = new Sprite(\n            this.image,\n            j * this.spWidth + this.spacing * j + this.spacing,\n            i * this.spHeight + this.spacing * i + this.spacing,\n            this.spWidth,\n            this.spHeight\n          );\n        }\n      }\n    }\n  }\n\n  /**\n   * Create an animation from the this SpriteSheet by listing out the\n   * sprite indices. Sprites are organized in row major order in the SpriteSheet.\n   * @param engine   Reference to the current game [[Engine]]\n   * @param indices  An array of sprite indices to use in the animation\n   * @param speed    The number in milliseconds to display each frame in the animation\n   */\n  public getAnimationByIndices(engine: Engine, indices: number[], speed: number) {\n    let images: Sprite[] = indices.map((index) => {\n      return this.sprites[index];\n    });\n\n    images = images.map(function (i) {\n      return i.clone();\n    });\n    return new Animation(engine, images, speed);\n  }\n\n  /**\n   * Create an animation from the this SpriteSheet by specifying the range of\n   * images with the beginning (inclusive) and ending (exclusive) index\n   * For example `getAnimationBetween(engine, 0, 5, 200)` returns an animation with 5 frames.\n   * @param engine      Reference to the current game Engine\n   * @param beginIndex  The index to start taking frames (inclusive)\n   * @param endIndex    The index to stop taking frames (exclusive)\n   * @param speed       The number in milliseconds to display each frame in the animation\n   */\n  public getAnimationBetween(engine: Engine, beginIndex: number, endIndex: number, speed: number) {\n    let images = this.sprites.slice(beginIndex, endIndex);\n    images = images.map(function (i) {\n      return i.clone();\n    });\n    return new Animation(engine, images, speed);\n  }\n\n  /**\n   * Treat the entire SpriteSheet as one animation, organizing the frames in\n   * row major order.\n   * @param engine  Reference to the current game [[Engine]]\n   * @param speed   The number in milliseconds to display each frame the animation\n   */\n  public getAnimationForAll(engine: Engine, speed: number) {\n    const sprites = this.sprites.map(function (i) {\n      return i.clone();\n    });\n    return new Animation(engine, sprites, speed);\n  }\n\n  /**\n   * Retrieve a specific sprite from the SpriteSheet by its index. Sprites are organized\n   * in row major order in the SpriteSheet.\n   * @param index  The index of the sprite\n   */\n  public getSprite(index: number): Sprite {\n    if (index >= 0 && index < this.sprites.length) {\n      return this.sprites[index];\n    } else {\n      throw new Error('Invalid index: ' + index);\n    }\n  }\n\n  /**\n   * Get an animation with bespoke sprite coordinates. This is useful if the SpriteSheet is\n   * packed and not a uniform width or height. The resulting [[Animation]] will have the height and width of the\n   * largest dimension (width, height) from among the sprite coordinates\n   * @param engine\n   * @param spriteCoordinates\n   * @param speed\n   */\n  public getAnimationByCoords(engine: Engine, spriteCoordinates: SpriteArgs[], speed: number): Animation {\n    let maxWidth: number = 0;\n    let maxHeight: number = 0;\n    const sprites: Sprite[] = new Array(spriteCoordinates.length);\n    for (let i = 0; i < spriteCoordinates.length; i++) {\n      const coord = spriteCoordinates[i];\n      // no need to pass image again if using a spritesheet\n      coord.image = coord.image || this.image;\n      maxWidth = Math.max(maxWidth, coord.drawWidth);\n      maxHeight = Math.max(maxHeight, coord.drawHeight);\n      sprites[i] = new Sprite(coord);\n    }\n\n    const anim = new Animation(engine, sprites, speed);\n\n    anim.drawWidth = maxWidth;\n    anim.drawHeight = maxHeight;\n    return anim;\n  }\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface SpriteSheetArgs extends Partial<SpriteSheetImpl> {\n  image: Texture;\n  sprites?: Sprite[];\n  spWidth: number;\n  spHeight: number;\n  rows: number;\n  columns: number;\n  spacing?: number;\n}\n\n/**\n * Sprite sheets are a useful mechanism for slicing up image resources into\n * separate sprites or for generating in game animations. [[Sprite|Sprites]] are organized\n * in row major order in the [[SpriteSheet]].\n *\n * [[include:SpriteSheets.md]]\n */\nexport class SpriteSheet extends Configurable(SpriteSheetImpl) {\n  constructor(config: SpriteSheetArgs);\n  constructor(sprites: Sprite[]);\n  constructor(image: Texture, columns: number, rows: number, spWidth: number, spHeight: number);\n  constructor(\n    imageOrConfigOrSprites: Texture | SpriteSheetArgs | Sprite[],\n    columns?: number,\n    rows?: number,\n    spWidth?: number,\n    spHeight?: number,\n    spacing?: number\n  ) {\n    super(imageOrConfigOrSprites, columns, rows, spWidth, spHeight, spacing);\n  }\n}\n\nexport class SpriteFontImpl extends SpriteSheet {\n  private _currentColor: Color = Color.Black;\n  private _currentOpacity: Number = 1.0;\n  private _sprites: { [key: string]: Sprite } = {};\n\n  // text shadow\n  private _textShadowOn: boolean = false;\n  private _textShadowDirty: boolean = true;\n  private _textShadowColor: Color = Color.Black;\n  private _textShadowSprites: { [key: string]: Sprite } = {};\n  private _shadowOffsetX: number = 5;\n  private _shadowOffsetY: number = 5;\n  private _alphabet: string;\n  private _caseInsensitive: boolean;\n\n  /**\n   * @param image           The backing image texture to build the SpriteFont\n   * @param alphabet        A string representing all the characters in the image, in row major order.\n   * @param caseInsensitive  Indicate whether this font takes case into account\n   * @param columns         The number of columns of characters in the image\n   * @param rows            The number of rows of characters in the image\n   * @param spWidth         The width of each character in pixels\n   * @param spHeight        The height of each character in pixels\n   */\n  constructor(\n    imageOrConfig: Texture | SpriteFontArgs,\n    alphabet: string,\n    caseInsensitive: boolean,\n    columns: number,\n    rows: number,\n    spWidth: number,\n    spHeight: number,\n    spacing?: number\n  ) {\n    super(\n      imageOrConfig instanceof Texture\n        ? {\n            image: imageOrConfig,\n            spWidth: spWidth,\n            spHeight: spHeight,\n            rows: rows,\n            columns: columns,\n            spacing: spacing || 0\n          }\n        : imageOrConfig\n    );\n\n    if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\n      alphabet = imageOrConfig.alphabet;\n      caseInsensitive = imageOrConfig.caseInsensitive;\n    }\n\n    this._alphabet = alphabet;\n    this._caseInsensitive = caseInsensitive;\n    this._sprites = this.getTextSprites();\n  }\n\n  /**\n   * Returns a dictionary that maps each character in the alphabet to the appropriate [[Sprite]].\n   */\n  public getTextSprites(): { [key: string]: Sprite } {\n    const lookup: { [key: string]: Sprite } = {};\n    for (let i = 0; i < this._alphabet.length; i++) {\n      let char = this._alphabet[i];\n      if (this._caseInsensitive) {\n        char = char.toLowerCase();\n      }\n      lookup[char] = this.sprites[i].clone();\n    }\n    return lookup;\n  }\n\n  /**\n   * Sets the text shadow for sprite fonts\n   * @param offsetX      The x offset in pixels to place the shadow\n   * @param offsetY      The y offset in pixels to place the shadow\n   * @param shadowColor  The color of the text shadow\n   */\n  public setTextShadow(offsetX: number, offsetY: number, shadowColor: Color) {\n    this._textShadowOn = true;\n    this._shadowOffsetX = offsetX;\n    this._shadowOffsetY = offsetY;\n    this._textShadowColor = shadowColor.clone();\n    this._textShadowDirty = true;\n    for (const character in this._sprites) {\n      this._textShadowSprites[character] = this._sprites[character].clone();\n    }\n  }\n\n  /**\n   * Toggles text shadows on or off\n   */\n  public useTextShadow(on: boolean) {\n    this._textShadowOn = on;\n    if (on) {\n      this.setTextShadow(5, 5, this._textShadowColor);\n    }\n  }\n\n  /**\n   * Draws the current sprite font\n   */\n  public draw(ctx: CanvasRenderingContext2D, text: string, x: number, y: number, options: SpriteFontOptions) {\n    options = this._parseOptions(options);\n\n    if (this._currentColor.toString() !== options.color.toString() || this._currentOpacity !== options.opacity) {\n      this._currentOpacity = options.opacity;\n      this._currentColor = options.color;\n      for (const char in this._sprites) {\n        this._sprites[char].clearEffects();\n        this._sprites[char].fill(options.color);\n        this._sprites[char].opacity(options.opacity);\n      }\n    }\n\n    if (this._textShadowOn && this._textShadowDirty && this._textShadowColor) {\n      for (const characterShadow in this._textShadowSprites) {\n        this._textShadowSprites[characterShadow].clearEffects();\n        this._textShadowSprites[characterShadow].addEffect(new Effects.Fill(this._textShadowColor.clone()));\n      }\n      this._textShadowDirty = false;\n    }\n\n    // find the current length of text in pixels\n    const sprite = this.sprites[0];\n\n    // find the current height fo the text in pixels\n    const height = sprite.drawHeight;\n\n    // calculate appropriate scale for font size\n    const scale = options.fontSize / height;\n\n    const length = text.length * sprite.drawWidth * scale + text.length * options.letterSpacing;\n\n    let currX = x;\n    if (options.textAlign === TextAlign.Left || options.textAlign === TextAlign.Start) {\n      currX = x;\n    } else if (options.textAlign === TextAlign.Right || options.textAlign === TextAlign.End) {\n      currX = x - length;\n    } else if (options.textAlign === TextAlign.Center) {\n      currX = x - length / 2;\n    }\n\n    let currY = y - height * scale;\n    if (options.baseAlign === BaseAlign.Top || options.baseAlign === BaseAlign.Hanging) {\n      currY = y;\n    } else if (\n      options.baseAlign === BaseAlign.Ideographic ||\n      options.baseAlign === BaseAlign.Bottom ||\n      options.baseAlign === BaseAlign.Alphabetic\n    ) {\n      currY = y - height * scale;\n    } else if (options.baseAlign === BaseAlign.Middle) {\n      currY = y - (height * scale) / 2;\n    }\n\n    for (let i = 0; i < text.length; i++) {\n      let character = text[i];\n      if (this._caseInsensitive) {\n        character = character.toLowerCase();\n      }\n      try {\n        // if text shadow\n        if (this._textShadowOn) {\n          this._textShadowSprites[character].scale.x = scale;\n          this._textShadowSprites[character].scale.y = scale;\n          this._textShadowSprites[character].draw(ctx, currX + this._shadowOffsetX, currY + this._shadowOffsetY);\n        }\n\n        const charSprite = this._sprites[character];\n        charSprite.scale.x = scale;\n        charSprite.scale.y = scale;\n        charSprite.draw(ctx, currX, currY);\n        currX += charSprite.drawWidth + options.letterSpacing;\n      } catch (e) {\n        Logger.getInstance().error(`SpriteFont Error drawing char ${character}`);\n      }\n    }\n  }\n\n  private _parseOptions(options: SpriteFontOptions): SpriteFontOptions {\n    return {\n      fontSize: options.fontSize || 10,\n      letterSpacing: options.letterSpacing || 0,\n      color: options.color || Color.Black,\n      textAlign: typeof options.textAlign === undefined ? TextAlign.Left : options.textAlign,\n      baseAlign: typeof options.baseAlign === undefined ? BaseAlign.Bottom : options.baseAlign,\n      maxWidth: options.maxWidth || -1,\n      opacity: options.opacity || 0\n    };\n  }\n}\n\n/**\n * Specify various font attributes for sprite fonts\n */\nexport interface SpriteFontOptions {\n  color?: Color;\n  opacity?: number;\n  fontSize?: number;\n  letterSpacing?: number;\n  textAlign?: TextAlign;\n  baseAlign?: BaseAlign;\n  maxWidth?: number;\n}\n\n/**\n * [[include:Constructors.md]]\n */\nexport interface SpriteFontArgs extends SpriteSheetArgs {\n  image: Texture;\n  columns: number;\n  rows: number;\n  spWidth: number;\n  spHeight: number;\n  alphabet: string;\n  caseInsensitive: boolean;\n}\n\n/**\n * Sprite fonts are a used in conjunction with a [[Label]] to specify\n * a particular bitmap as a font. Note that some font features are not\n * supported by Sprite fonts.\n *\n * [[include:SpriteFonts.md]]\n */\nexport class SpriteFont extends Configurable(SpriteFontImpl) {\n  constructor(config: SpriteFontArgs);\n  constructor(image: Texture, alphabet: string, caseInsensitive: boolean, columns: number, rows: number, spWidth: number, spHeight: number);\n  constructor(\n    imageOrConfig: Texture | SpriteFontArgs,\n    alphabet?: string,\n    caseInsensitive?: boolean,\n    columns?: number,\n    rows?: number,\n    spWidth?: number,\n    spHeight?: number,\n    spacing?: number\n  ) {\n    super(imageOrConfig, alphabet, caseInsensitive, columns, rows, spWidth, spHeight, spacing);\n  }\n}\n","export { Animation, AnimationArgs } from './Animation';\nexport * from './Color';\nexport * from './Polygon';\nexport { Sprite, SpriteArgs } from './Sprite';\nexport { SpriteSheet, SpriteFont, SpriteSheetArgs, SpriteFontArgs as SpriteFontInitArgs, SpriteFontOptions } from './SpriteSheet';\n\nimport * as effects from './SpriteEffects';\nexport { effects as Effects };\n","import { Promise } from '../Promises';\nimport { Audio } from './Audio';\n\nexport type ExResponseType = '' | 'arraybuffer' | 'blob' | 'document' | 'json' | 'text';\n\nexport interface ExResponseTypesLookup {\n  [name: string]: ExResponseType;\n}\n\nexport class ExResponse {\n  public static type: ExResponseTypesLookup = {\n    any: '',\n    blob: 'blob',\n    json: 'json',\n    text: 'text',\n    document: 'document',\n    arraybuffer: 'arraybuffer'\n  };\n}\n\n/**\n * Represents an audio implementation like [[AudioTagInstance]] or [[WebAudioInstance]]\n */\nexport interface AudioImplementation {\n  /**\n   * XHR response type\n   */\n  responseType: ExResponseType;\n\n  /**\n   * Processes raw data and transforms into sound data\n   */\n  processData(data: Blob | ArrayBuffer): Promise<string | AudioBuffer>;\n\n  /**\n   * Factory method that returns an instance of a played audio track\n   */\n  createInstance(data: string | AudioBuffer): Audio;\n}\n","export * from './Trait';\nexport * from './Audio';\nexport * from './AudioImplementation';\nexport * from './Drawable';\nexport * from './Evented';\nexport * from './Loadable';\nexport * from './Loader';\nexport * from './LifecycleEvents';\nexport * from './PointerEventHandlers';\n","import { Random } from './Random';\nimport { Color } from '../Drawing/Color';\nimport * as Util from '../Util/Util';\n\nfunction _lerp(time: number, a: number, b: number): number {\n  return a + time * (b - a);\n}\n\nfunction _fade(t: number): number {\n  return t * t * t * (t * (t * 6 - 15) + 10);\n}\n\n/**\n * Options for the perlin noise generator\n */\nexport interface PerlinOptions {\n  /**\n   * Random number seed for the Perlin noise generator\n   */\n  seed?: number;\n  /**\n   * Number of octaves to use when generating the noise, the number of octaves is the number of times the perlin\n   * noise is generated and laid on top of itself. Using higher values can increase the curviness of the noise, and\n   * make it look more natural.\n   */\n  octaves?: number;\n  /**\n   * Frequency to use when generating the noise, the higher the number the more quickly the pattern will oscillate. Another way\n   * to think about this is that it is like \"zooming\" out from an infinite pattern determined by the seed.\n   */\n  frequency?: number;\n  /**\n   * The amplitude determines the relative height of the peaks generated in the noise.\n   */\n  amplitude?: number;\n  /**\n   * The persistance determines how quickly the amplitude will drop off, a high degree of persistance results in smoother patterns,\n   * a low degree of persistance generates spiky patterns.\n   */\n  persistance?: number;\n}\n\n/**\n * Generates perlin noise based on the 2002 Siggraph paper http://mrl.nyu.edu/~perlin/noise/\n * Also https://flafla2.github.io/2014/08/09/perlinnoise.html\n */\nexport class PerlinGenerator {\n  private _perm: number[] = [\n    151,\n    160,\n    137,\n    91,\n    90,\n    15,\n    131,\n    13,\n    201,\n    95,\n    96,\n    53,\n    194,\n    233,\n    7,\n    225,\n    140,\n    36,\n    103,\n    30,\n    69,\n    142,\n    8,\n    99,\n    37,\n    240,\n    21,\n    10,\n    23,\n    190,\n    6,\n    148,\n    247,\n    120,\n    234,\n    75,\n    0,\n    26,\n    197,\n    62,\n    94,\n    252,\n    219,\n    203,\n    117,\n    35,\n    11,\n    32,\n    57,\n    177,\n    33,\n    88,\n    237,\n    149,\n    56,\n    87,\n    174,\n    20,\n    125,\n    136,\n    171,\n    168,\n    68,\n    175,\n    74,\n    165,\n    71,\n    134,\n    139,\n    48,\n    27,\n    166,\n    77,\n    146,\n    158,\n    231,\n    83,\n    111,\n    229,\n    122,\n    60,\n    211,\n    133,\n    230,\n    220,\n    105,\n    92,\n    41,\n    55,\n    46,\n    245,\n    40,\n    244,\n    102,\n    143,\n    54,\n    65,\n    25,\n    63,\n    161,\n    1,\n    216,\n    80,\n    73,\n    209,\n    76,\n    132,\n    187,\n    208,\n    89,\n    18,\n    169,\n    200,\n    196,\n    135,\n    130,\n    116,\n    188,\n    159,\n    86,\n    164,\n    100,\n    109,\n    198,\n    173,\n    186,\n    3,\n    64,\n    52,\n    217,\n    226,\n    250,\n    124,\n    123,\n    5,\n    202,\n    38,\n    147,\n    118,\n    126,\n    255,\n    82,\n    85,\n    212,\n    207,\n    206,\n    59,\n    227,\n    47,\n    16,\n    58,\n    17,\n    182,\n    189,\n    28,\n    42,\n    223,\n    183,\n    170,\n    213,\n    119,\n    248,\n    152,\n    2,\n    44,\n    154,\n    163,\n    70,\n    221,\n    153,\n    101,\n    155,\n    167,\n    43,\n    172,\n    9,\n    129,\n    22,\n    39,\n    253,\n    19,\n    98,\n    108,\n    110,\n    79,\n    113,\n    224,\n    232,\n    178,\n    185,\n    112,\n    104,\n    218,\n    246,\n    97,\n    228,\n    251,\n    34,\n    242,\n    193,\n    238,\n    210,\n    144,\n    12,\n    191,\n    179,\n    162,\n    241,\n    81,\n    51,\n    145,\n    235,\n    249,\n    14,\n    239,\n    107,\n    49,\n    192,\n    214,\n    31,\n    181,\n    199,\n    106,\n    157,\n    184,\n    84,\n    204,\n    176,\n    115,\n    121,\n    50,\n    45,\n    127,\n    4,\n    150,\n    254,\n    138,\n    236,\n    205,\n    93,\n    222,\n    114,\n    67,\n    29,\n    24,\n    72,\n    243,\n    141,\n    128,\n    195,\n    78,\n    66,\n    215,\n    61,\n    156,\n    180\n  ];\n  private _p: Uint8Array = new Uint8Array(512);\n  private _random: Random;\n\n  private _defaultPerlinOptions: PerlinOptions = {\n    octaves: 1,\n    frequency: 1,\n    amplitude: 1,\n    persistance: 0.5\n  };\n\n  /**\n   * The persistance determines how quickly the amplitude will drop off, a high degree of persistance results in smoother patterns,\n   * a low degree of persistance generates spiky patterns.\n   */\n  public persistance: number;\n\n  /**\n   * The amplitude determines the relative height of the peaks generated in the noise.\n   */\n  public amplitude: number;\n\n  /**\n   * Frequency to use when generating the noise, the higher the number the more quickly the pattern will oscillate. Another way\n   * to think about this is that it is like \"zooming\" out from an infinite pattern determined by the seed.\n   */\n  public frequency: number;\n\n  /**\n   * Number of octaves to use when generating the noise, the number of octaves is the number of times the perlin\n   * noise is generated and laid on top of itself. Using higher values can increase the curviness of the noise, and\n   * make it look more natural.\n   */\n  public octaves: number;\n\n  constructor(options?: PerlinOptions) {\n    options = Util.extend({}, this._defaultPerlinOptions, options);\n\n    this.persistance = options.persistance;\n    this.amplitude = options.amplitude;\n    this.frequency = options.frequency;\n    this.octaves = options.octaves;\n\n    if (options.seed) {\n      this._random = new Random(options.seed);\n    } else {\n      this._random = new Random();\n    }\n\n    this._perm = this._random.shuffle(this._perm);\n\n    for (let i = 0; i < 512; i++) {\n      this._p[i] = this._perm[i % 256] & 0xff;\n    }\n  }\n\n  /**\n   * Generates 1-Dimensional perlin noise given an x and generates noises values between [0, 1].\n   */\n  public noise(x: number): number;\n  /**\n   * Generates 2-Dimensional perlin noise given an (x, y) and generates noise values between [0, 1]\n   */\n  public noise(x: number, y: number): number;\n  /**\n   * Generates 3-Dimensional perlin noise given an (x, y, z) and generates noise values between [0, 1]\n   */\n  public noise(x: number, y: number, z: number): number;\n  public noise(): number {\n    let amp = this.amplitude;\n    let freq = this.frequency;\n\n    let total = 0;\n    let maxValue = 0;\n    for (let i = 0; i < this.octaves; i++) {\n      switch (arguments.length) {\n        case 1:\n          total += this._noise1d(arguments[0] * freq) * amp;\n          break;\n        case 2:\n          total += this._noise2d(arguments[0] * freq, arguments[1] * freq) * amp;\n          break;\n        case 3:\n          total += this._noise3d(arguments[0] * freq, arguments[1] * freq, arguments[2] * freq) * amp;\n          break;\n        /* istanbul ignore next */\n        default:\n          throw new Error('Invalid arguments for perlin noise');\n      }\n      maxValue += amp;\n      amp *= this.persistance;\n      freq *= 2;\n    }\n    return total / maxValue;\n  }\n\n  /**\n   * Generates a list starting at 0 and ending at 1 of continuous perlin noise, by default the step is 1/length;\n   *\n   */\n  public sequence(length: number, step?: number): number[] {\n    if (!step) {\n      step = 1 / length;\n    }\n    const array: number[] = new Array(length);\n    for (let i = 0; i < length; i++) {\n      array[i] = this.noise(i * step);\n    }\n    return array;\n  }\n\n  /**\n   * Generates a 2D grid of perlin noise given a step value packed into a 1D array i = (x + y*width),\n   * by default the step will 1/(min(dimension))\n   */\n  public grid(width: number, height: number, step?: number): number[] {\n    if (!step) {\n      step = 1 / Math.min(width, height);\n    }\n\n    const array: number[] = new Array(width * height);\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        array[x + y * width] = this.noise(x * step, y * step);\n      }\n    }\n\n    return array;\n  }\n\n  private _gradient3d(hash: number, x: number, y: number, z: number) {\n    const h = hash & 0xf;\n    const u = h < 8 ? x : y;\n    const v = h < 4 ? y : h === 12 || h === 14 ? x : z;\n    return ((h & 0b1) === 0 ? u : -u) + ((h & 0b10) === 0 ? v : -v);\n  }\n\n  private _gradient2d(hash: number, x: number, y: number) {\n    const value = (hash & 0b1) === 0 ? x : y;\n    return (hash & 0b10) === 0 ? -value : value;\n  }\n\n  private _gradient1d(hash: number, x: number) {\n    return (hash & 0b1) === 0 ? -x : x;\n  }\n\n  private _noise1d(x: number) {\n    const intX = Math.floor(x) & 0xff; // force 0-255 integers to lookup in permutation\n    x -= Math.floor(x);\n    const fadeX = _fade(x);\n    return (_lerp(fadeX, this._gradient1d(this._p[intX], x), this._gradient1d(this._p[intX + 1], x - 1)) + 1) / 2;\n  }\n\n  private _noise2d(x: number, y: number) {\n    const intX = Math.floor(x) & 0xff;\n    const intY = Math.floor(y) & 0xff;\n\n    x -= Math.floor(x);\n    y -= Math.floor(y);\n\n    const fadeX = _fade(x);\n    const fadeY = _fade(y);\n    const a = this._p[intX] + intY;\n    const b = this._p[intX + 1] + intY;\n    return (\n      (_lerp(\n        fadeY,\n        _lerp(fadeX, this._gradient2d(this._p[a], x, y), this._gradient2d(this._p[b], x - 1, y)),\n        _lerp(fadeX, this._gradient2d(this._p[a + 1], x, y - 1), this._gradient2d(this._p[b + 1], x - 1, y - 1))\n      ) +\n        1) /\n      2\n    );\n  }\n\n  private _noise3d(x: number, y: number, z: number) {\n    const intX = Math.floor(x) & 0xff;\n    const intY = Math.floor(y) & 0xff;\n    const intZ = Math.floor(z) & 0xff;\n\n    x -= Math.floor(x);\n    y -= Math.floor(y);\n    z -= Math.floor(z);\n\n    const fadeX = _fade(x);\n    const fadeY = _fade(y);\n    const fadeZ = _fade(z);\n\n    const a = this._p[intX] + intY;\n    const b = this._p[intX + 1] + intY;\n\n    const aa = this._p[a] + intZ;\n    const ba = this._p[b] + intZ;\n\n    const ab = this._p[a + 1] + intZ;\n    const bb = this._p[b + 1] + intZ;\n\n    return (\n      (_lerp(\n        fadeZ,\n        _lerp(\n          fadeY,\n          _lerp(fadeX, this._gradient3d(this._p[aa], x, y, z), this._gradient3d(this._p[ba], x - 1, y, z)),\n          _lerp(fadeX, this._gradient3d(this._p[ab], x, y - 1, z), this._gradient3d(this._p[bb], x - 1, y - 1, z))\n        ),\n        _lerp(\n          fadeY,\n          _lerp(fadeX, this._gradient3d(this._p[aa + 1], x, y, z - 1), this._gradient3d(this._p[ba + 1], x - 1, y, z - 1)),\n          _lerp(fadeX, this._gradient3d(this._p[ab + 1], x, y - 1, z - 1), this._gradient3d(this._p[bb + 1], x - 1, y - 1, z - 1))\n        )\n      ) +\n        1) /\n      2\n    );\n  }\n}\n\n/**\n * A helper to draw 2D perlin maps given a perlin generator and a function\n */\nexport class PerlinDrawer2D {\n  /**\n   * @param generator - An existing perlin generator\n   * @param colorFcn - A color function that takes a value between [0, 255] derived from the perlin generator, and returns a color\n   */\n  constructor(public generator: PerlinGenerator, public colorFcn?: (val: number) => Color) {\n    if (!colorFcn) {\n      this.colorFcn = (val: number) => {\n        return val < 125 ? Color.Black : Color.White;\n      };\n    }\n  }\n\n  /**\n   * Returns an image of 2D perlin noise\n   */\n  public image(width: number, height: number): HTMLImageElement {\n    const image = document.createElement('img');\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    this.draw(ctx, 0, 0, width, height);\n    image.src = canvas.toDataURL();\n    return image;\n  }\n\n  /**\n   * This draws a 2D perlin grid on a canvas context, not recommended to be called every frame due to performance\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number) {\n    const grid = this.generator.grid(width, height);\n    const imageData = ctx.getImageData(x, y, width, height);\n    for (let j = 0; j < height; j++) {\n      for (let i = 0; i < width; i++) {\n        const val = grid[i + width * j];\n        const c = Math.floor(val * 255) & 0xff;\n        const pixel = (i + j * imageData.width) * 4;\n        const color = this.colorFcn(c);\n\n        imageData.data[pixel] = color.r;\n        imageData.data[pixel + 1] = color.g;\n        imageData.data[pixel + 2] = color.b;\n        imageData.data[pixel + 3] = Math.floor(color.a * 255);\n      }\n    }\n    ctx.putImageData(imageData, x, y);\n  }\n}\n","export * from './PerlinNoise';\nexport * from './Random';\n","import { Logger } from './../Util/Log';\nimport { PostProcessor } from './PostProcessor';\nimport { Engine } from '../Engine';\n\nexport enum ColorBlindness {\n  Protanope,\n  Deuteranope,\n  Tritanope\n}\n\n/**\n * This post processor can correct colors and simulate color blindness.\n * It is possible to use this on every game, but the game's performance\n * will suffer measurably. It's better to use it as a helpful tool while developing your game.\n * Remember, the best practice is to design with color blindness in mind.\n *\n * [[include:ColorBlind.md]]\n */\nexport class ColorBlindCorrector implements PostProcessor {\n  /*eslint-disable */\n  private _vertexShader =\n    '' +\n    'attribute vec2 a_position;' +\n    'attribute vec2 a_texCoord;' +\n    'uniform vec2 u_resolution;' +\n    'varying vec2 v_texCoord;' +\n    'void main() {' +\n    // convert the rectangle from pixels to 0.0 to 1.0\n    'vec2 zeroToOne = a_position / u_resolution;' +\n    // convert from 0->1 to 0->2\n    'vec2 zeroToTwo = zeroToOne * 2.0;' +\n    // convert from 0->2 to -1->+1 (clipspace)\n    'vec2 clipSpace = zeroToTwo - 1.0;' +\n    'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);' +\n    // pass the texCoord to the fragment shader\n    // The GPU will interpolate this value between points.\n    'v_texCoord = a_texCoord;' +\n    '}';\n\n  private _fragmentShader =\n    'precision mediump float;' +\n    // our texture\n    'uniform sampler2D u_image;' +\n    // the texCoords passed in from the vertex shader.\n    'varying vec2 v_texCoord;' +\n    // Color blind conversions\n    /*'mat3 m[9] =' +\n   '{' +\n      'mat3(1.0, 0.0, 0.0,  0.0, 1.0, 0.0,  0.0, 0.0, 1.0  ),' + // normal\n      'mat3(0.567, 0.433, 0.0,  0.558, 0.442, 0.0,  0.0, 0.242, 0.758),' + // protanopia\n      'mat3(0.817, 0.183, 0.0,  0.333, 0.667, 0.0,  0.0, 0.125,0.875),' + // protanomaly\n      'mat3(0.625, 0.375, 0.0,  0.7, 0.3, 0.0,  0.0, 0.3,0.7  ),' + // deuteranopia\n      'mat3(0.8, 0.2, 0.0,  0.258, 0.742, 0.0,  0.0, 0.142,0.858),' + // deuteranomaly\n      'mat3(0.95, 0.05, 0.0,  0.0, 0.433, 0.567,  0.0, 0.475,0.525),' + // tritanopia\n      'mat3(0.967, 0.033, 0.0,  0.0, 0.733, 0.267,  0.0, 0.183,0.817),' + // tritanomaly\n      'mat3(0.299, 0.587, 0.114,  0.299, 0.587, 0.114,  0.299, 0.587,0.114),' + // achromatopsia\n      'mat3(0.618, 0.320, 0.062,  0.163, 0.775, 0.062,  0.163, 0.320,0.516)' +  // achromatomaly\n   '};' +*/\n\n    'void main() {' +\n    'vec4 o =  texture2D(u_image, v_texCoord);' +\n    // RGB to LMS matrix conversion\n    'float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);' +\n    'float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);' +\n    'float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);' +\n    // Simulate color blindness\n\n    '//MODE CODE//' +\n    /* Deuteranope for testing\n      'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\n            'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\n            'float s = 0.0 * L + 0.0 * M + 1.0 * S;' +*/\n\n    // LMS to RGB matrix conversion\n    'vec4 error;' +\n    'error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);' +\n    'error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);' +\n    'error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);' +\n    'error.a = 1.0;' +\n    'vec4 diff = o - error;' +\n    'vec4 correction;' +\n    'correction.r = 0.0;' +\n    'correction.g =  (diff.r * 0.7) + (diff.g * 1.0);' +\n    'correction.b =  (diff.r * 0.7) + (diff.b * 1.0);' +\n    'correction = o + correction;' +\n    'correction.a = o.a;' +\n    '//SIMULATE//' +\n    '}';\n\n  /*eslint-enable */\n  private _internalCanvas: HTMLCanvasElement;\n  private _gl: WebGLRenderingContext;\n  private _program: WebGLProgram;\n\n  constructor(public engine: Engine, public simulate: boolean = false, public colorMode: ColorBlindness = ColorBlindness.Protanope) {\n    this._internalCanvas = document.createElement('canvas');\n    this._internalCanvas.width = engine.drawWidth;\n    this._internalCanvas.height = engine.drawHeight;\n\n    // eslint-disable-next-line\n    this._gl = <WebGLRenderingContext>this._internalCanvas.getContext('webgl', { preserveDrawingBuffer: true });\n\n    this._program = this._gl.createProgram();\n    const fragmentShader = this._getShader('Fragment', this._getFragmentShaderByMode(colorMode));\n    const vertextShader = this._getShader('Vertex', this._vertexShader);\n\n    this._gl.attachShader(this._program, vertextShader);\n    this._gl.attachShader(this._program, fragmentShader);\n    this._gl.linkProgram(this._program);\n\n    if (!this._gl.getProgramParameter(this._program, this._gl.LINK_STATUS)) {\n      Logger.getInstance().error('Unable to link shader program!');\n    }\n\n    this._gl.useProgram(this._program);\n  }\n\n  private _getFragmentShaderByMode(colorMode: ColorBlindness) {\n    let code = '';\n    if (colorMode === ColorBlindness.Protanope) {\n      code =\n        'float l = 0.0 * L + 2.02344 * M + -2.52581 * S;' +\n        'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\n        'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\n    } else if (colorMode === ColorBlindness.Deuteranope) {\n      code =\n        'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\n        'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\n        'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\n    } else if (colorMode === ColorBlindness.Tritanope) {\n      code =\n        'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\n        'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\n        'float s = -0.395913 * L + 0.801109 * M + 0.0 * S;';\n    }\n\n    if (this.simulate) {\n      this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = error.rgba;');\n    } else {\n      this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = correction.rgba;');\n    }\n\n    return this._fragmentShader.replace('//MODE CODE//', code);\n  }\n\n  private _setRectangle(x: number, y: number, width: number, height: number) {\n    const x1 = x;\n    const x2 = x + width;\n    const y1 = y;\n    const y2 = y + height;\n    this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array([x1, y1, x2, y1, x1, y2, x1, y2, x2, y1, x2, y2]), this._gl.STATIC_DRAW);\n  }\n\n  private _getShader(type: string, program: string): WebGLShader {\n    let shader: WebGLShader;\n    if (type === 'Fragment') {\n      shader = this._gl.createShader(this._gl.FRAGMENT_SHADER);\n    } else if (type === 'Vertex') {\n      shader = this._gl.createShader(this._gl.VERTEX_SHADER);\n    } else {\n      Logger.getInstance().error('Error unknown shader type', type);\n    }\n\n    this._gl.shaderSource(shader, program);\n    this._gl.compileShader(shader);\n\n    if (!this._gl.getShaderParameter(shader, this._gl.COMPILE_STATUS)) {\n      Logger.getInstance().error('Unable to compile shader!', this._gl.getShaderInfoLog(shader));\n      return null;\n    }\n\n    return shader;\n  }\n\n  public process(image: ImageData, out: CanvasRenderingContext2D) {\n    // look up where the vertex data needs to go.\n    const positionLocation = this._gl.getAttribLocation(this._program, 'a_position');\n    const texCoordLocation = this._gl.getAttribLocation(this._program, 'a_texCoord');\n\n    const texCoordBuffer = this._gl.createBuffer();\n    this._gl.bindBuffer(this._gl.ARRAY_BUFFER, texCoordBuffer);\n    this._gl.bufferData(\n      this._gl.ARRAY_BUFFER,\n      new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]),\n      this._gl.STATIC_DRAW\n    );\n    this._gl.enableVertexAttribArray(texCoordLocation);\n    this._gl.vertexAttribPointer(texCoordLocation, 2, this._gl.FLOAT, false, 0, 0);\n\n    // Create a texture.\n    const texture = this._gl.createTexture();\n    this._gl.bindTexture(this._gl.TEXTURE_2D, texture);\n\n    // Set the parameters so we can render any size image.\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_S, this._gl.CLAMP_TO_EDGE);\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_T, this._gl.CLAMP_TO_EDGE);\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MIN_FILTER, this._gl.NEAREST);\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MAG_FILTER, this._gl.NEAREST);\n    // Flip the texture when unpacking into the gl context, gl reads textures in the opposite order as everything else :/\n    this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, 1);\n    // Upload the image into the texture.\n    this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, image);\n\n    // lookup uniforms\n    const resolutionLocation = this._gl.getUniformLocation(this._program, 'u_resolution');\n\n    // set the resolution\n    this._gl.uniform2f(resolutionLocation, this._internalCanvas.width, this._internalCanvas.height);\n\n    // Create a buffer for the position of the rectangle corners.\n    const positionBuffer = this._gl.createBuffer();\n    this._gl.bindBuffer(this._gl.ARRAY_BUFFER, positionBuffer);\n    this._gl.enableVertexAttribArray(positionLocation);\n    this._gl.vertexAttribPointer(positionLocation, 2, this._gl.FLOAT, false, 0, 0);\n\n    // Set a rectangle the same size as the image.\n    this._setRectangle(0, 0, image.width, image.height);\n\n    // Draw the rectangle.\n    this._gl.drawArrays(this._gl.TRIANGLES, 0, 6);\n\n    // Grab transformed image from internal canvas\n    const pixelData = new Uint8Array(image.width * image.height * 4);\n    this._gl.readPixels(0, 0, image.width, image.height, this._gl.RGBA, this._gl.UNSIGNED_BYTE, pixelData);\n\n    (<any>image.data).set(pixelData);\n\n    out.putImageData(image, 0, 0);\n  }\n}\n","export * from './ColorBlindCorrector';\nexport * from './PostProcessor';\n","import { Audio } from '../../Interfaces/Audio';\nimport * as Util from '../../Util/Util';\nimport { AudioContextFactory } from './AudioContext';\n\n/**\n * Internal class for producing of AudioInstances\n */\n/* istanbul ignore next */\nexport class AudioInstanceFactory {\n  public static create(src: string | AudioBuffer): AudioInstance {\n    if (typeof src === 'string') {\n      return new AudioTagInstance(src);\n    }\n\n    if (src instanceof AudioBuffer) {\n      return new WebAudioInstance(src);\n    }\n\n    return new AudioInstance(src);\n  }\n}\n\n/**\n * Internal class representing base AudioInstance implementation\n */\n/* istanbul ignore next */\nexport class AudioInstance implements Audio {\n  public set loop(value: boolean) {\n    this._loop = value;\n\n    if (this._instance) {\n      this._instance.loop = value;\n      this._wireUpOnEnded();\n    }\n  }\n  public get loop(): boolean {\n    return this._loop;\n  }\n  public set volume(value: number) {\n    this._volume = Util.clamp(value, 0, 1.0);\n  }\n  public get volume(): number {\n    return this._volume;\n  }\n  public set duration(value: number | undefined) {\n    this._duration = value;\n  }\n\n  /**\n   * Duration of the sound, in seconds.\n   */\n  public get duration() {\n    return this._duration;\n  }\n\n  protected _volume = 1;\n  protected _duration: number | undefined = undefined;\n  protected _loop = false;\n  protected _playingPromise: Promise<boolean>;\n  protected _isPlaying = false;\n  protected _isPaused = false;\n  protected _instance: HTMLAudioElement | AudioBufferSourceNode;\n  protected _playingResolve: any;\n\n  constructor(protected _src: string | AudioBuffer) {}\n\n  public isPlaying() {\n    return this._isPlaying;\n  }\n\n  public pause() {\n    if (!this._isPlaying) {\n      return;\n    }\n\n    this._isPaused = true;\n    this._isPlaying = false;\n  }\n\n  public stop() {\n    if (!this._isPlaying) {\n      return;\n    }\n\n    this._isPlaying = false;\n    this._isPaused = false;\n  }\n\n  public play() {\n    if (this._isPaused) {\n      this._resumePlayBack();\n    }\n\n    if (!this._isPlaying) {\n      this._startPlayBack();\n    }\n\n    return this._playingPromise;\n  }\n\n  protected _startPlayBack() {\n    this._isPlaying = true;\n    this._isPaused = false;\n    this._playingPromise = new Promise<boolean>((resolve) => {\n      if (this._playingResolve) {\n        // this._playingResolve(true);\n      }\n      this._playingResolve = resolve;\n    });\n  }\n\n  protected _resumePlayBack() {\n    if (!this._isPaused) {\n      return;\n    }\n\n    this._isPaused = false;\n    this._isPlaying = true;\n  }\n\n  protected _wireUpOnEnded() {\n    if (!this.loop) {\n      this._instance.onended = () => this._handleOnEnded();\n    }\n  }\n\n  protected _handleOnEnded() {\n    this._playingResolve(true);\n  }\n}\n\n/**\n * Internal class representing a HTML5 audio instance\n */\n/* istanbul ignore next */\nexport class AudioTagInstance extends AudioInstance {\n  public set volume(value: number) {\n    value = Util.clamp(value, 0, 1.0);\n\n    this._volume = value;\n    this._instance.volume = value;\n  }\n  public get volume(): number {\n    return this._volume;\n  }\n\n  protected _src: string;\n  protected _instance: HTMLAudioElement;\n\n  constructor(src: string) {\n    super(src);\n\n    this._instance = new Audio(src);\n  }\n\n  public pause() {\n    if (!this._isPlaying) {\n      return;\n    }\n\n    this._instance.pause();\n    this._isPaused = true;\n    this._isPlaying = false;\n  }\n\n  public stop() {\n    super.stop();\n\n    this._instance.pause();\n    this._instance.currentTime = 0;\n\n    this._handleOnEnded();\n  }\n\n  protected _startPlayBack() {\n    super._startPlayBack();\n\n    this._instance.load();\n    this._instance.loop = this.loop;\n    this._instance.play();\n\n    this._wireUpOnEnded();\n  }\n\n  protected _resumePlayBack() {\n    super._resumePlayBack();\n\n    this._instance.play();\n    this._wireUpOnEnded();\n  }\n\n  protected _handleOnEnded() {\n    this._isPlaying = false;\n    this._isPaused = false;\n    super._handleOnEnded();\n  }\n}\n\n/**\n * Internal class representing a Web Audio AudioBufferSourceNode instance\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\n */\n/* istanbul ignore next */\nexport class WebAudioInstance extends AudioInstance {\n  public set volume(value: number) {\n    value = Util.clamp(value, 0, 1.0);\n\n    this._volume = value;\n\n    if (this._isPlaying && this._volumeNode.gain.setTargetAtTime) {\n      // https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/setTargetAtTime\n      // After each .1 seconds timestep, the target value will ~63.2% closer to the target value.\n      // This exponential ramp provides a more pleasant transition in gain\n      this._volumeNode.gain.setTargetAtTime(value, this._audioContext.currentTime, 0.1);\n    } else {\n      this._volumeNode.gain.value = value;\n    }\n  }\n  public get volume(): number {\n    return this._volume;\n  }\n\n  private get _playbackRate(): number {\n    return this._instance ? 1 / (this._instance.playbackRate.value || 1.0) : null;\n  }\n\n  protected _src: AudioBuffer;\n  protected _instance: AudioBufferSourceNode;\n  private _audioContext: AudioContext = AudioContextFactory.create();\n  private _volumeNode = this._audioContext.createGain();\n  private _startTime: number;\n\n  /**\n   * Current playback offset (in seconds)\n   */\n  private _currentOffset = 0;\n\n  constructor(_src: AudioBuffer) {\n    super(_src);\n\n    this._createNewBufferSource();\n  }\n\n  public pause() {\n    super.pause();\n\n    this._instance.stop(0);\n    // Playback rate will be a scale factor of how fast/slow the audio is being played\n    // default is 1.0\n    // we need to invert it to get the time scale\n\n    this._setPauseOffset();\n  }\n\n  public stop() {\n    super.stop();\n\n    this._currentOffset = 0;\n    this._instance.stop(0);\n\n    // handler will not be wired up if we were looping\n    if (!this._instance.onended) {\n      this._handleOnEnded();\n    }\n  }\n\n  protected _startPlayBack() {\n    super._startPlayBack();\n\n    if (!this._instance) {\n      this._createNewBufferSource();\n    }\n\n    this._rememberStartTime();\n\n    this._volumeNode.connect(this._audioContext.destination);\n    this._instance.start(0, 0);\n    this._currentOffset = 0;\n\n    // this._playingPromise = new Promise<boolean>();\n    this._wireUpOnEnded();\n  }\n\n  protected _resumePlayBack() {\n    super._resumePlayBack();\n\n    // a buffer source can only be started once\n    // so we need to dispose of the previous instance before\n    // \"resuming\" the next one\n    this._instance.onended = null; // dispose of any previous event handler\n    this._createNewBufferSource();\n\n    const duration = this._playbackRate * this._src.duration;\n    const restartTime = this._currentOffset % duration;\n\n    this._rememberStartTime(restartTime * -1000);\n    this._instance.start(0, restartTime);\n    this._wireUpOnEnded();\n  }\n\n  protected _handleOnEnded() {\n    // pausing calls stop(0) which triggers onended event\n    // so we don't \"resolve\" yet (when we resume we'll try again)\n    if (!this._isPaused) {\n      this._isPlaying = false;\n      super._handleOnEnded();\n    }\n  }\n\n  private _rememberStartTime(amend?: number) {\n    this._startTime = new Date().getTime() + (amend | 0);\n  }\n\n  private _setPauseOffset() {\n    this._currentOffset = ((new Date().getTime() - this._startTime) * this._playbackRate) / 1000; // in seconds\n  }\n\n  private _createNewBufferSource() {\n    this._instance = this._audioContext.createBufferSource();\n    this._instance.buffer = this._src;\n    this._instance.loop = this.loop;\n    this._instance.playbackRate.setValueAtTime(1.0, 0);\n\n    this._instance.connect(this._volumeNode);\n  }\n}\n","import { Logger } from './Log';\n\n/**\n * Whether or not the browser can play this file as HTML5 Audio\n */\nexport function canPlayFile(file: string): boolean {\n  try {\n    const a = new Audio();\n    const filetype = /.*\\.([A-Za-z0-9]+)$/;\n    const type = file.match(filetype)[1];\n    if (a.canPlayType('audio/' + type)) {\n      return true;\n    } else {\n      return false;\n    }\n  } catch (e) {\n    Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\n    return false;\n  }\n}\n","import { ExResponse } from '../../Interfaces/AudioImplementation';\nimport { Audio } from '../../Interfaces/Audio';\nimport { Engine } from '../../Engine';\nimport { Resource } from '../Resource';\nimport { AudioInstance, AudioInstanceFactory } from './AudioInstance';\nimport { AudioContextFactory } from './AudioContext';\nimport { NativeSoundEvent, NativeSoundProcessedEvent } from '../../Events/MediaEvents';\nimport { canPlayFile } from '../../Util/Sound';\n\n/**\n * The [[Sound]] object allows games built in Excalibur to load audio\n * components, from soundtracks to sound effects. [[Sound]] is an [[Loadable]]\n * which means it can be passed to a [[Loader]] to pre-load before a game or level.\n *\n * [[include:Sounds.md]]\n */\nexport class Sound extends Resource<Blob | ArrayBuffer> implements Audio {\n  /**\n   * Indicates whether the clip should loop when complete\n   * @param value  Set the looping flag\n   */\n  public set loop(value: boolean) {\n    this._loop = value;\n\n    for (const track of this._tracks) {\n      track.loop = this._loop;\n    }\n\n    this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._loop);\n  }\n  public get loop(): boolean {\n    return this._loop;\n  }\n\n  public set volume(value: number) {\n    this._volume = value;\n\n    for (const track of this._tracks) {\n      track.volume = this._volume;\n    }\n\n    this.emit('volumechange', new NativeSoundEvent(this));\n\n    this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._volume);\n  }\n  public get volume(): number {\n    return this._volume;\n  }\n\n  public get duration(): number | undefined {\n    return this._duration;\n  }\n\n  /**\n   * Return array of Current AudioInstances playing or being paused\n   */\n  public get instances(): AudioInstance[] {\n    return this._tracks;\n  }\n\n  public path: string;\n\n  private _loop = false;\n  private _volume = 1;\n  private _duration: number | undefined = undefined;\n  private _isStopped = false;\n  private _isPaused = false;\n  private _tracks: AudioInstance[] = [];\n  private _engine: Engine;\n  private _wasPlayingOnHidden: boolean = false;\n  private _processedDataResolve: any;\n  private _processedData: Promise<string | AudioBuffer> = new Promise((resolve) => {\n    this._processedDataResolve = resolve;\n  });\n  private _audioContext = AudioContextFactory.create();\n\n  /**\n   * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\n   */\n  constructor(...paths: string[]) {\n    super('', '');\n\n    this._detectResponseType();\n    /* Chrome : MP3, WAV, Ogg\n     * Firefox : WAV, Ogg,\n     * IE : MP3, WAV coming soon\n     * Safari MP3, WAV, Ogg\n     */\n    for (const path of paths) {\n      if (canPlayFile(path)) {\n        this.path = path;\n        break;\n      }\n    }\n\n    if (!this.path) {\n      this.logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\n      this.logger.warn('Attempting to use', paths[0]);\n      this.path = paths[0]; // select the first specified\n    }\n  }\n\n  public wireEngine(engine: Engine) {\n    if (engine) {\n      this._engine = engine;\n\n      this._engine.on('hidden', () => {\n        if (engine.pauseAudioWhenHidden && this.isPlaying()) {\n          this._wasPlayingOnHidden = true;\n          this.pause();\n        }\n      });\n\n      this._engine.on('visible', () => {\n        if (engine.pauseAudioWhenHidden && this._wasPlayingOnHidden) {\n          this.play();\n          this._wasPlayingOnHidden = false;\n        }\n      });\n\n      this._engine.on('start', () => {\n        this._isStopped = false;\n      });\n\n      this._engine.on('stop', () => {\n        this.stop();\n        this._isStopped = true;\n      });\n    }\n  }\n\n  /**\n   * Returns how many instances of the sound are currently playing\n   */\n  public instanceCount(): number {\n    return this._tracks.length;\n  }\n\n  /**\n   * Whether or not the sound is playing right now\n   */\n  public isPlaying(): boolean {\n    return this._tracks.some((t) => t.isPlaying());\n  }\n\n  /**\n   * Play the sound, returns a promise that resolves when the sound is done playing\n   * An optional volume argument can be passed in to play the sound. Max volume is 1.0\n   */\n  public play(volume?: number): Promise<boolean> {\n    if (!this.isLoaded()) {\n      this.logger.warn('Cannot start playing. Resource', this.path, 'is not loaded yet');\n\n      return Promise.resolve(true);\n    }\n\n    if (this._isStopped) {\n      this.logger.warn('Cannot start playing. Engine is in a stopped state.');\n      return Promise.resolve(false);\n    }\n\n    this.volume = volume || this.volume;\n\n    if (this._isPaused) {\n      return this._resumePlayback();\n    } else {\n      return this._startPlayback();\n    }\n  }\n\n  /**\n   * Stop the sound, and do not rewind\n   */\n  public pause() {\n    if (!this.isPlaying()) {\n      return;\n    }\n\n    for (const track of this._tracks) {\n      track.pause();\n    }\n\n    this._isPaused = true;\n\n    this.emit('pause', new NativeSoundEvent(this));\n\n    this.logger.debug('Paused all instances of sound', this.path);\n  }\n\n  /**\n   * Stop the sound if it is currently playing and rewind the track. If the sound is not playing, rewinds the track.\n   */\n  public stop() {\n    for (const track of this._tracks) {\n      track.stop();\n    }\n\n    this.emit('stop', new NativeSoundEvent(this));\n\n    this._isPaused = false;\n    this._tracks.length = 0;\n    this.logger.debug('Stopped all instances of sound', this.path);\n  }\n\n  public setData(data: any) {\n    this.emit('emptied', new NativeSoundEvent(this));\n\n    this.data = data;\n  }\n\n  public processData(data: Blob | ArrayBuffer): Promise<string | AudioBuffer> {\n    /**\n     * Processes raw arraybuffer data and decodes into WebAudio buffer (async).\n     */\n    const processPromise: Promise<string | AudioBuffer> =\n      data instanceof ArrayBuffer ? this._processArrayBufferData(data) : this._processBlobData(data);\n\n    return processPromise.then((p) => {\n      this._setProcessedData(p);\n      return p;\n    });\n  }\n\n  /**\n   * Get Id of provided AudioInstance in current trackList\n   * @param track [[AudioInstance]] which Id is to be given\n   */\n  public getTrackId(track: AudioInstance): number {\n    return this._tracks.indexOf(track);\n  }\n\n  private _resumePlayback(): Promise<boolean> {\n    if (this._isPaused) {\n      const resumed: Promise<boolean>[] = [];\n      // ensure we resume *current* tracks (if paused)\n      for (const track of this._tracks) {\n        resumed.push(track.play());\n      }\n\n      this._isPaused = false;\n\n      this.emit('resume', new NativeSoundEvent(this));\n\n      this.logger.debug('Resuming paused instances for sound', this.path, this._tracks);\n      // resolve when resumed tracks are done\n      return Promise.all(resumed).then(() => true);\n    } else {\n      return Promise.resolve(true);\n    }\n  }\n\n  private _startPlayback(): Promise<boolean> {\n    const newTrack = this._createNewTrack();\n    let playResolve: any;\n    const playPromise = new Promise<boolean>((resolve) => {\n      playResolve = resolve;\n    });\n\n    newTrack.then((track) => {\n      track.play().then((resolved) => {\n        // when done, remove track\n        this.emit('playbackend', new NativeSoundEvent(this, track));\n        this._tracks.splice(this.getTrackId(track), 1);\n\n        playResolve(resolved);\n\n        return resolved;\n      });\n\n      this.emit('playbackstart', new NativeSoundEvent(this, track));\n      this.logger.debug('Playing new instance for sound', this.path);\n    });\n\n    return playPromise;\n  }\n\n  private _processArrayBufferData(data: ArrayBuffer): Promise<AudioBuffer> {\n    return new Promise((resolve) => {\n      this._audioContext.decodeAudioData(\n        data,\n        (buffer: AudioBuffer) => {\n          resolve(buffer);\n        },\n        () => {\n          this.logger.error(\n            'Unable to decode ' +\n              ' this browser may not fully support this format, or the file may be corrupt, ' +\n              'if this is an mp3 try removing id3 tags and album art from the file.'\n          );\n          resolve(undefined);\n        }\n      );\n    });\n  }\n\n  private _processBlobData(data: Blob): Promise<string> {\n    return Promise.resolve(super.processData(data));\n  }\n\n  private _setProcessedData(processedData: string | AudioBuffer): void {\n    this._processedDataResolve(processedData);\n    this._duration = typeof processedData === 'object' ? processedData.duration : undefined;\n    this.emit('processed', new NativeSoundProcessedEvent(this, processedData));\n  }\n\n  private _createNewTrack(): Promise<AudioInstance> {\n    this.processData(this.data);\n\n    return new Promise((resolve) => {\n      this._processedData.then(\n        (processedData) => {\n          resolve(this._getTrackInstance(processedData));\n\n          return processedData;\n        },\n        (error) => {\n          this.logger.error(error, 'Cannot create AudioInstance due to wrong processed data.');\n        }\n      );\n    });\n  }\n\n  private _getTrackInstance(data: string | AudioBuffer): AudioInstance {\n    const newTrack = AudioInstanceFactory.create(data);\n\n    newTrack.loop = this.loop;\n    newTrack.volume = this.volume;\n    newTrack.duration = this.duration;\n\n    this._tracks.push(newTrack);\n\n    return newTrack;\n  }\n\n  private _detectResponseType() {\n    if ((<any>window).AudioContext) {\n      this.responseType = ExResponse.type.arraybuffer;\n    } else {\n      this.responseType = ExResponse.type.blob;\n    }\n  }\n}\n","export * from './Sound';\nexport * from './AudioContext';\nexport * from './AudioInstance';\n","import { Resource } from './Resource';\nimport { Sprite } from '../Drawing/Sprite';\nimport { Texture } from './Texture';\nimport { Color } from '../Drawing/Color';\nimport { SpriteSheet } from '../Drawing/SpriteSheet';\nimport { Animation } from '../Drawing/Animation';\nimport { Engine } from '../Engine';\n/**\n * The [[Texture]] object allows games built in Excalibur to load image resources.\n * [[Texture]] is an [[Loadable]] which means it can be passed to a [[Loader]]\n * to pre-load before starting a level or game.\n *\n * [[include:Textures.md]]\n */\nexport class Gif extends Resource<Texture[]> {\n  /**\n   * The width of the texture in pixels\n   */\n  public width: number;\n\n  /**\n   * The height of the texture in pixels\n   */\n  public height: number;\n\n  /**\n   * A [[Promise]] that resolves when the Texture is loaded.\n   */\n  public loaded: Promise<any> = new Promise<any>((resolve) => {\n    this._loadedResolve = resolve;\n  });\n\n  private _isLoaded: boolean = false;\n  private _stream: Stream = null;\n  private _gif: ParseGif = null;\n  private _textures: Texture[] = [];\n  private _animation: Animation = null;\n  private _transparentColor: Color = null;\n\n  /**\n   * Populated once loading is complete\n   */\n  public images: HTMLImageElement;\n  private _loadedResolve: (value?: any) => void;\n\n  /**\n   * @param path       Path to the image resource\n   * @param color      Optionally set the color to treat as transparent the gif, by default [[Color.Magenta]]\n   * @param bustCache  Optionally load texture with cache busting\n   */\n  constructor(public path: string, public color: Color = Color.Magenta, public bustCache = true) {\n    super(path, 'arraybuffer', bustCache);\n    this._transparentColor = color;\n  }\n\n  /**\n   * Returns true if the Texture is completely loaded and is ready\n   * to be drawn.\n   */\n  public isLoaded(): boolean {\n    return this._isLoaded;\n  }\n\n  /**\n   * Begins loading the texture and returns a promise to be resolved on completion\n   */\n  public load(): Promise<Texture[]> {\n    const complete = new Promise<Texture[]>((resolve, reject) => {\n      const loaded = super.load();\n      loaded.then(\n        () => {\n          this._stream = new Stream(this.getData());\n          this._gif = new ParseGif(this._stream, this._transparentColor);\n          const promises: Promise<HTMLImageElement>[] = [];\n          for (let imageIndex: number = 0; imageIndex < this._gif.images.length; imageIndex++) {\n            const texture = new Texture(this._gif.images[imageIndex].src, false);\n            this._textures.push(texture);\n            promises.push(texture.load());\n          }\n          Promise.all(promises).then(() => {\n            this._isLoaded = true;\n            this._loadedResolve(this._textures);\n            resolve(this._textures);\n          });\n        },\n        () => {\n          reject('Error loading texture.');\n        }\n      );\n    });\n    return complete;\n  }\n\n  public asSprite(id: number = 0): Sprite {\n    const sprite = this._textures[id].asSprite();\n    return sprite;\n  }\n\n  public asSpriteSheet(): SpriteSheet {\n    const spriteArray: Sprite[] = this._textures.map((texture) => {\n      return texture.asSprite();\n    });\n    return new SpriteSheet(spriteArray);\n  }\n\n  public asAnimation(engine: Engine, speed: number): Animation {\n    const spriteSheet: SpriteSheet = this.asSpriteSheet();\n    this._animation = spriteSheet.getAnimationForAll(engine, speed);\n    return this._animation;\n  }\n\n  public get readCheckBytes(): number[] {\n    return this._gif.checkBytes;\n  }\n}\n\nexport interface Frame {\n  sentinel: number;\n  type: string;\n  leftPos: number;\n  topPos: number;\n  width: number;\n  height: number;\n  lctFlag: boolean;\n  interlaced: boolean;\n  sorted: boolean;\n  reserved: boolean[];\n  lctSize: number;\n  lzwMinCodeSize: number;\n  pixels: number[];\n}\n\nconst bitsToNum = (ba: any) => {\n  return ba.reduce(function (s: number, n: number) {\n    return s * 2 + n;\n  }, 0);\n};\n\nconst byteToBitArr = (bite: any) => {\n  const a = [];\n  for (let i = 7; i >= 0; i--) {\n    a.push(!!(bite & (1 << i)));\n  }\n  return a;\n};\n\nexport class Stream {\n  data: any = null;\n  len: number = 0;\n  position: number = 0;\n\n  constructor(dataArray: ArrayBuffer) {\n    this.data = new Uint8Array(dataArray);\n    this.len = this.data.byteLength;\n    if (this.len === 0) {\n      throw new Error('No data loaded from file');\n    }\n  }\n\n  public readByte = () => {\n    if (this.position >= this.data.byteLength) {\n      throw new Error('Attempted to read past end of stream.');\n    }\n    return this.data[this.position++];\n  };\n\n  public readBytes = (n: number) => {\n    const bytes = [];\n    for (let i = 0; i < n; i++) {\n      bytes.push(this.readByte());\n    }\n    return bytes;\n  };\n\n  public read = (n: number) => {\n    let s = '';\n    for (let i = 0; i < n; i++) {\n      s += String.fromCharCode(this.readByte());\n    }\n    return s;\n  };\n\n  public readUnsigned = () => {\n    // Little-endian.\n    const a = this.readBytes(2);\n    return (a[1] << 8) + a[0];\n  };\n}\n\nconst lzwDecode = function (minCodeSize: number, data: any) {\n  // TODO: Now that the GIF parser is a bit different, maybe this should get an array of bytes instead of a String?\n  let pos = 0; // Maybe this streaming thing should be merged with the Stream?\n\n  const readCode = function (size: number) {\n    let code = 0;\n    for (let i = 0; i < size; i++) {\n      if (data.charCodeAt(pos >> 3) & (1 << (pos & 7))) {\n        code |= 1 << i;\n      }\n      pos++;\n    }\n    return code;\n  };\n\n  const output: any[] = [];\n\n  const clearCode = 1 << minCodeSize;\n  const eoiCode = clearCode + 1;\n\n  let codeSize = minCodeSize + 1;\n\n  let dict: any[] = [];\n\n  const clear = function () {\n    dict = [];\n    codeSize = minCodeSize + 1;\n    for (let i = 0; i < clearCode; i++) {\n      dict[i] = [i];\n    }\n    dict[clearCode] = [];\n    dict[eoiCode] = null;\n  };\n\n  let code;\n  let last;\n\n  while (true) {\n    last = code;\n    code = readCode(codeSize);\n    if (code === clearCode) {\n      clear();\n      continue;\n    }\n    if (code === eoiCode) {\n      break;\n    }\n\n    if (code < dict.length) {\n      if (last !== clearCode) {\n        dict.push(dict[last].concat(dict[code][0]));\n      }\n    } else {\n      if (code !== dict.length) {\n        throw new Error('Invalid LZW code.');\n      }\n      dict.push(dict[last].concat(dict[last][0]));\n    }\n    output.push.apply(output, dict[code]);\n\n    if (dict.length === 1 << codeSize && codeSize < 12) {\n      // If we're at the last code and codeSize is 12, the next code will be a clearCode, and it'll be 12 bits long.\n      codeSize++;\n    }\n  }\n\n  // I don't know if this is technically an error, but some GIFs do it.\n  //if (Math.ceil(pos / 8) !== data.length) throw new Error('Extraneous LZW bytes.');\n  return output;\n};\n\n// The actual parsing; returns an object with properties.\nexport class ParseGif {\n  private _st: Stream = null;\n  private _handler: any = {};\n  private _transparentColor: Color = null;\n  public frames: Frame[] = [];\n  public images: HTMLImageElement[] = [];\n  public globalColorTable: any[] = [];\n  public checkBytes: number[] = [];\n\n  constructor(stream: Stream, color: Color = Color.Magenta) {\n    this._st = stream;\n    this._handler = {};\n    this._transparentColor = color;\n    this.parseHeader();\n    this.parseBlock();\n  }\n\n  // LZW (GIF-specific)\n  parseColorTable = (entries: any) => {\n    // Each entry is 3 bytes, for RGB.\n    const ct = [];\n    for (let i = 0; i < entries; i++) {\n      const rgb: number[] = this._st.readBytes(3);\n      const rgba =\n        '#' +\n        rgb\n          .map((x: any) => {\n            const hex = x.toString(16);\n            return hex.length === 1 ? '0' + hex : hex;\n          })\n          .join('');\n      ct.push(rgba);\n    }\n    return ct;\n  };\n\n  readSubBlocks = () => {\n    let size, data;\n    data = '';\n    do {\n      size = this._st.readByte();\n      data += this._st.read(size);\n    } while (size !== 0);\n    return data;\n  };\n\n  parseHeader = () => {\n    const hdr: any = {\n      sig: null,\n      ver: null,\n      width: null,\n      height: null,\n      colorRes: null,\n      globalColorTableSize: null,\n      gctFlag: null,\n      sorted: null,\n      globalColorTable: [],\n      bgColor: null,\n      pixelAspectRatio: null // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n    };\n\n    hdr.sig = this._st.read(3);\n    hdr.ver = this._st.read(3);\n    if (hdr.sig !== 'GIF') {\n      throw new Error('Not a GIF file.'); // XXX: This should probably be handled more nicely.\n    }\n\n    hdr.width = this._st.readUnsigned();\n    hdr.height = this._st.readUnsigned();\n\n    const bits = byteToBitArr(this._st.readByte());\n    hdr.gctFlag = bits.shift();\n    hdr.colorRes = bitsToNum(bits.splice(0, 3));\n    hdr.sorted = bits.shift();\n    hdr.globalColorTableSize = bitsToNum(bits.splice(0, 3));\n\n    hdr.bgColor = this._st.readByte();\n    hdr.pixelAspectRatio = this._st.readByte(); // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n\n    if (hdr.gctFlag) {\n      hdr.globalColorTable = this.parseColorTable(1 << (hdr.globalColorTableSize + 1));\n      this.globalColorTable = hdr.globalColorTable;\n    }\n    if (this._handler.hdr && this._handler.hdr(hdr)) {\n      this.checkBytes.push(this._handler.hdr);\n    }\n  };\n\n  parseExt = (block: any) => {\n    const parseGCExt = (block: any) => {\n      this.checkBytes.push(this._st.readByte()); // Always 4\n\n      const bits = byteToBitArr(this._st.readByte());\n      block.reserved = bits.splice(0, 3); // Reserved; should be 000.\n      block.disposalMethod = bitsToNum(bits.splice(0, 3));\n      block.userInput = bits.shift();\n      block.transparencyGiven = bits.shift();\n\n      block.delayTime = this._st.readUnsigned();\n\n      block.transparencyIndex = this._st.readByte();\n\n      block.terminator = this._st.readByte();\n\n      if (this._handler.gce && this._handler.gce(block)) {\n        this.checkBytes.push(this._handler.gce);\n      }\n    };\n\n    const parseComExt = (block: any) => {\n      block.comment = this.readSubBlocks();\n      if (this._handler.com && this._handler.com(block)) {\n        this.checkBytes.push(this._handler.com);\n      }\n    };\n\n    const parsePTExt = (block: any) => {\n      this.checkBytes.push(this._st.readByte()); // Always 12\n      block.ptHeader = this._st.readBytes(12);\n      block.ptData = this.readSubBlocks();\n      if (this._handler.pte && this._handler.pte(block)) {\n        this.checkBytes.push(this._handler.pte);\n      }\n    };\n\n    const parseAppExt = (block: any) => {\n      const parseNetscapeExt = (block: any) => {\n        this.checkBytes.push(this._st.readByte()); // Always 3\n        block.unknown = this._st.readByte(); // ??? Always 1? What is this?\n        block.iterations = this._st.readUnsigned();\n        block.terminator = this._st.readByte();\n        if (this._handler.app && this._handler.app.NETSCAPE && this._handler.app.NETSCAPE(block)) {\n          this.checkBytes.push(this._handler.app);\n        }\n      };\n\n      const parseUnknownAppExt = (block: any) => {\n        block.appData = this.readSubBlocks();\n        // FIXME: This won't work if a handler wants to match on any identifier.\n        if (this._handler.app && this._handler.app[block.identifier] && this._handler.app[block.identifier](block)) {\n          this.checkBytes.push(this._handler.app[block.identifier]);\n        }\n      };\n\n      this.checkBytes.push(this._st.readByte()); // Always 11\n      block.identifier = this._st.read(8);\n      block.authCode = this._st.read(3);\n      switch (block.identifier) {\n        case 'NETSCAPE':\n          parseNetscapeExt(block);\n          break;\n        default:\n          parseUnknownAppExt(block);\n          break;\n      }\n    };\n\n    const parseUnknownExt = (block: any) => {\n      block.data = this.readSubBlocks();\n      if (this._handler.unknown && this._handler.unknown(block)) {\n        this.checkBytes.push(this._handler.unknown);\n      }\n    };\n\n    block.label = this._st.readByte();\n    switch (block.label) {\n      case 0xf9:\n        block.extType = 'gce';\n        parseGCExt(block);\n        break;\n      case 0xfe:\n        block.extType = 'com';\n        parseComExt(block);\n        break;\n      case 0x01:\n        block.extType = 'pte';\n        parsePTExt(block);\n        break;\n      case 0xff:\n        block.extType = 'app';\n        parseAppExt(block);\n        break;\n      default:\n        block.extType = 'unknown';\n        parseUnknownExt(block);\n        break;\n    }\n  };\n\n  parseImg = (img: any) => {\n    const deinterlace = (pixels: any, width: any) => {\n      // Of course this defeats the purpose of interlacing. And it's *probably*\n      // the least efficient way it's ever been implemented. But nevertheless...\n\n      const newPixels = new Array(pixels.length);\n      const rows = pixels.length / width;\n      const cpRow = (toRow: any, fromRow: any) => {\n        const fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n        newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n      };\n\n      const offsets = [0, 4, 2, 1];\n      const steps = [8, 8, 4, 2];\n\n      let fromRow = 0;\n      for (let pass = 0; pass < 4; pass++) {\n        for (let toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n          cpRow(toRow, fromRow);\n          fromRow++;\n        }\n      }\n\n      return newPixels;\n    };\n\n    img.leftPos = this._st.readUnsigned();\n    img.topPos = this._st.readUnsigned();\n    img.width = this._st.readUnsigned();\n    img.height = this._st.readUnsigned();\n\n    const bits = byteToBitArr(this._st.readByte());\n    img.lctFlag = bits.shift();\n    img.interlaced = bits.shift();\n    img.sorted = bits.shift();\n    img.reserved = bits.splice(0, 2);\n    img.lctSize = bitsToNum(bits.splice(0, 3));\n\n    if (img.lctFlag) {\n      img.lct = this.parseColorTable(1 << (img.lctSize + 1));\n    }\n\n    img.lzwMinCodeSize = this._st.readByte();\n\n    const lzwData = this.readSubBlocks();\n\n    img.pixels = lzwDecode(img.lzwMinCodeSize, lzwData);\n\n    if (img.interlaced) {\n      // Move\n      img.pixels = deinterlace(img.pixels, img.width);\n    }\n\n    this.frames.push(img);\n    this.arrayToImage(img);\n    if (this._handler.img && this._handler.img(img)) {\n      this.checkBytes.push(this._handler);\n    }\n  };\n\n  public parseBlock = () => {\n    const block = {\n      sentinel: this._st.readByte(),\n      type: ''\n    };\n    const blockChar = String.fromCharCode(block.sentinel);\n    switch (blockChar) {\n      case '!':\n        block.type = 'ext';\n        this.parseExt(block);\n        break;\n      case ',':\n        block.type = 'img';\n        this.parseImg(block);\n        break;\n      case ';':\n        block.type = 'eof';\n        if (this._handler.eof && this._handler.eof(block)) {\n          this.checkBytes.push(this._handler.eof);\n        }\n        break;\n      default:\n        throw new Error('Unknown block: 0x' + block.sentinel.toString(16));\n    }\n\n    if (block.type !== 'eof') {\n      this.parseBlock();\n    }\n  };\n\n  arrayToImage = (frame: Frame) => {\n    let count = 0;\n    const c = document.createElement('canvas');\n    c.id = count.toString();\n    c.width = frame.width;\n    c.height = frame.height;\n    count++;\n    const context = c.getContext('2d');\n    const pixSize = 1;\n    let y = 0;\n    let x = 0;\n    for (let i = 0; i < frame.pixels.length; i++) {\n      if (x % frame.width === 0) {\n        y++;\n        x = 0;\n      }\n      if (this.globalColorTable[frame.pixels[i]] === this._transparentColor.toHex()) {\n        context.fillStyle = `rgba(0, 0, 0, 0)`;\n      } else {\n        context.fillStyle = this.globalColorTable[frame.pixels[i]];\n      }\n\n      context.fillRect(x, y, pixSize, pixSize);\n      x++;\n    }\n    const img = new Image();\n    img.src = c.toDataURL();\n    this.images.push(img);\n  };\n}\n","export * from './Resource';\nexport * from './Sound/Index';\nexport * from './Texture';\nexport * from './Gif';\n","export * from './Util';\nimport * as drawUtil from './DrawUtil';\n\nexport { drawUtil as DrawUtil };\n","/**\n * The current Excalibur version string\n * @description `process.env.__EX_VERSION` gets replaced by Webpack on build\n */\nexport const EX_VERSION = process.env.__EX_VERSION;\nimport { polyfill } from './Polyfill';\npolyfill();\n\n// This file is used as the bundle entry point and exports everything\n// that will be exposed as the `ex` global variable.\n\nexport * from './Engine';\nexport { Actor, ActorArgs } from './Actor';\nexport { CollisionType } from './Collision/CollisionType';\nexport * from './Algebra';\nexport * from './Camera';\nexport * from './Class';\nexport * from './Configurable';\nexport * from './Debug';\nexport * from './EventDispatcher';\nexport * from './Events/MediaEvents';\nexport * from './Events';\nexport { Label, FontStyle, FontUnit, TextAlign, BaseAlign } from './Label';\nexport * from './Loader';\nexport { Particle, ParticleEmitter, ParticleArgs, ParticleEmitterArgs, EmitterType } from './Particles';\nexport * from './Physics';\nexport * from './Promises';\nexport * from './Scene';\nexport { TileMap, Cell, TileMapArgs, CellArgs, TileSprite } from './TileMap';\nexport * from './Timer';\nexport * from './Trigger';\nexport * from './ScreenElement';\n\nexport * from './Actions/Index';\nexport * from './Collision/Index';\nexport * from './Drawing/Index';\nexport * from './Interfaces/Index';\nexport * from './Math/Index';\nexport * from './PostProcessing/Index';\nexport * from './Resources/Index';\n\n// ex.Events namespace\nimport * as events from './Events';\nexport { events as Events };\n\n// ex.Input namespace\nimport * as input from './Input/Index';\nexport { input as Input };\n\n// ex.Traits namespace\nimport * as traits from './Traits/Index';\nexport { traits as Traits };\n\n// ex.Util namespaces\nimport * as util from './Util/Index';\nexport { util as Util };\n\n// ex.Graphics namespace\nimport * as graphics from './Graphics/index';\nexport { graphics as Graphics };\n\nexport * from './Util/Browser';\nexport * from './Util/Decorators';\nexport * from './Util/Detector';\nexport * from './Util/CullingBox';\nexport * from './Util/EasingFunctions';\nexport * from './Util/Log';\nexport * from './Util/SortedList';\n\n// ex.Deprecated\n// import * as deprecated from './Deprecated';\n// export { deprecated as Deprecated };\n// export * from './Deprecated';\n","'use strict';\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\nfunction _has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n/* eslint-disable space-unary-ops */\n\nvar utils = require('../utils/common');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short(s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n * 2;\n  var _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n","'use strict';\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n","'use strict';\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc ^= -1;\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils   = require('../utils/common');\nvar trees   = require('./trees');\nvar adler32 = require('./adler32');\nvar crc32   = require('./crc32');\nvar msg     = require('./messages');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only(s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new utils.Buf16((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n        );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nfunction deflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var s;\n  var str, n;\n  var wrap;\n  var avail;\n  var next;\n  var input;\n  var tmpDict;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n  wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    tmpDict = new utils.Buf8(s.w_size);\n    utils.arraySet(tmpDict, dictionary, dictLength - s.w_size, s.w_size, 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  avail = strm.avail_in;\n  next = strm.next_in;\n  input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    str = s.strstart;\n    n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n}\n\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n","// String encode/decode helpers\n'use strict';\n\n\nvar utils = require('./common');\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // On Chrome, the arguments in a function call that are allowed is `65534`.\n  // If the length of the buffer is smaller than that, we can use this optimization,\n  // otherwise we will take a slower path.\n  if (len < 65534) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function (buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function (str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i = 0, len = buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function (buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n","'use strict';\n\n\nvar zlib_deflate = require('./zlib/deflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  if (!(this instanceof Deflate)) return new Deflate(options);\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    var dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || msg[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nvar BAD = 30;       /* got a data error -- remain here until reset */\nvar TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  var state;\n  var _in;                    /* local strm.input */\n  var last;                   /* have enough input while in < last */\n  var _out;                   /* local strm.output */\n  var beg;                    /* inflate()'s initial strm.output */\n  var end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  var dmax;                   /* maximum distance from zlib header */\n//#endif\n  var wsize;                  /* window size or zero if not using window */\n  var whave;                  /* valid bytes in the window */\n  var wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  var s_window;               /* allocated sliding window, if wsize != 0 */\n  var hold;                   /* local strm.hold */\n  var bits;                   /* local strm.bits */\n  var lcode;                  /* local strm.lencode */\n  var dcode;                  /* local strm.distcode */\n  var lmask;                  /* mask for first level of length codes */\n  var dmask;                  /* mask for first level of distance codes */\n  var here;                   /* retrieved table entry */\n  var op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  var len;                    /* match length, unused bytes */\n  var dist;                   /* match distance */\n  var from;                   /* where to copy match from */\n  var from_source;\n\n\n  var input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils = require('../utils/common');\n\nvar MAXBITS = 15;\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\nvar lbase = [ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n];\n\nvar lext = [ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n];\n\nvar dbase = [ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n];\n\nvar dext = [ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n];\n\nmodule.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\n{\n  var bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  var len = 0;               /* a code's length in bits */\n  var sym = 0;               /* index of code symbols */\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\n  var root = 0;              /* number of index bits for root table */\n  var curr = 0;              /* number of index bits for current table */\n  var drop = 0;              /* code bits to drop for sub-table */\n  var left = 0;                   /* number of prefix codes available */\n  var used = 0;              /* code entries in table used */\n  var huff = 0;              /* Huffman code */\n  var incr;              /* for incrementing code, index */\n  var fill;              /* index for replicating entries */\n  var low;               /* low bits for current root entry */\n  var mask;              /* mask for low root bits */\n  var next;             /* next available space in table */\n  var base = null;     /* base value table to use */\n  var base_index = 0;\n//  var shoextra;    /* extra bits table to use */\n  var end;                    /* use base and extra for symbol > end */\n  var count = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  var offs = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  var extra = null;\n  var extra_index = 0;\n\n  var here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils         = require('../utils/common');\nvar adler32       = require('./adler32');\nvar crc32         = require('./crc32');\nvar inflate_fast  = require('./inffast');\nvar inflate_table = require('./inftrees');\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\n//var Z_NO_FLUSH      = 0;\n//var Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\n//var Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\nvar Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\nvar Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nvar    HEAD = 1;       /* i: waiting for magic header */\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\nvar            DIST = 23;      /* i: waiting for distance code */\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\nvar            LIT = 26;       /* o: waiting for output space to write literal */\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\nvar    BAD = 30;       /* got a data error -- remain here until reset */\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_WBITS = MAX_WBITS;\n\n\nfunction zswap32(q) {\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n}\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */\n  this.work = new utils.Buf16(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\nfunction inflateResetKeep(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);\n  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n}\n\nfunction inflateReset(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n}\n\nfunction inflateReset2(strm, windowBits) {\n  var wrap;\n  var state;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n}\n\nfunction inflateInit2(strm, windowBits) {\n  var ret;\n  var state;\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n}\n\nfunction inflateInit(strm) {\n  return inflateInit2(strm, DEF_WBITS);\n}\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nvar virgin = true;\n\nvar lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\nfunction fixedtables(state) {\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    var sym;\n\n    lenfix = new utils.Buf32(512);\n    distfix = new utils.Buf32(32);\n\n    /* literal/length table */\n    sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n}\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nfunction updatewindow(strm, src, end, copy) {\n  var dist;\n  var state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new utils.Buf8(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    utils.arraySet(state.window, src, end - state.wsize, state.wsize, 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    utils.arraySet(state.window, src, end - copy, dist, state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      utils.arraySet(state.window, src, end - copy, copy, 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n}\n\nfunction inflate(strm, flush) {\n  var state;\n  var input, output;          // input/output buffers\n  var next;                   /* next input INDEX */\n  var put;                    /* next output INDEX */\n  var have, left;             /* available input and output */\n  var hold;                   /* bit buffer */\n  var bits;                   /* bits in bit buffer */\n  var _in, _out;              /* save starting available input and output */\n  var copy;                   /* number of stored or match bytes to copy */\n  var from;                   /* where to copy match bytes from */\n  var from_source;\n  var here = 0;               /* current decoding table entry */\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //var last;                   /* parent table entry */\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  var len;                    /* length to copy for repeats, bits to drop */\n  var ret;                    /* return code */\n  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */\n  var opts;\n\n  var n; // temporary var for NEED_BITS\n\n  var order = /* permutation of code lengths */\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n        state.dmax = 1 << len;\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Array(state.head.extra_len);\n              }\n              utils.arraySet(\n                state.head.extra,\n                input,\n                next,\n                // extra field is limited to 65536 bytes\n                // - no need for additional size check\n                copy,\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          utils.arraySet(output, input, next, copy, put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inflate_fast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n}\n\nfunction inflateEnd(strm) {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  var state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n}\n\nfunction inflateGetHeader(strm, head) {\n  var state;\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n}\n\nfunction inflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var state;\n  var dictid;\n  var ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n}\n\nexports.inflateReset = inflateReset;\nexports.inflateReset2 = inflateReset2;\nexports.inflateResetKeep = inflateResetKeep;\nexports.inflateInit = inflateInit;\nexports.inflateInit2 = inflateInit2;\nexports.inflate = inflate;\nexports.inflateEnd = inflateEnd;\nexports.inflateGetHeader = inflateGetHeader;\nexports.inflateSetDictionary = inflateSetDictionary;\nexports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nexports.inflateCopy = inflateCopy;\nexports.inflateGetDictionary = inflateGetDictionary;\nexports.inflateMark = inflateMark;\nexports.inflatePrime = inflatePrime;\nexports.inflateSync = inflateSync;\nexports.inflateSyncPoint = inflateSyncPoint;\nexports.inflateUndermine = inflateUndermine;\n*/\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  //Z_MEM_ERROR:     -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n","'use strict';\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n","'use strict';\n\n\nvar zlib_inflate = require('./zlib/inflate');\nvar utils        = require('./utils/common');\nvar strings      = require('./utils/strings');\nvar c            = require('./zlib/constants');\nvar msg          = require('./zlib/messages');\nvar ZStream      = require('./zlib/zstream');\nvar GZheader     = require('./zlib/gzheader');\n\nvar toString = Object.prototype.toString;\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\n * push a chunk with explicit flush (call [[Inflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  if (!(this instanceof Inflate)) return new Inflate(options);\n\n  this.options = utils.assign({\n    chunkSize: 16384,\n    windowBits: 0,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== c.Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n\n  // Setup dictionary\n  if (opt.dictionary) {\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      opt.dictionary = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      opt.dictionary = new Uint8Array(opt.dictionary);\n    }\n    if (opt.raw) { //In raw mode we need to set the dictionary early\n      status = zlib_inflate.inflateSetDictionary(this.strm, opt.dictionary);\n      if (status !== c.Z_OK) {\n        throw new Error(msg[status]);\n      }\n    }\n  }\n}\n\n/**\n * Inflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var dictionary = this.options.dictionary;\n  var status, _mode;\n  var next_out_utf8, tail, utf8str;\n\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\n  // when we check that all output data was flushed.\n  var allowBufError = false;\n\n  if (this.ended) { return false; }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // Only binary strings can be decompressed on practice\n    strm.input = strings.binstring2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */\n\n    if (status === c.Z_NEED_DICT && dictionary) {\n      status = zlib_inflate.inflateSetDictionary(this.strm, dictionary);\n    }\n\n    if (status === c.Z_BUF_ERROR && allowBufError === true) {\n      status = c.Z_OK;\n      allowBufError = false;\n    }\n\n    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {\n\n        if (this.options.to === 'string') {\n\n          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          tail = strm.next_out - next_out_utf8;\n          utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n        }\n      }\n    }\n\n    // When no more input data, we should check that internal inflate buffers\n    // are flushed. The only way to do it when avail_out = 0 - run one more\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\n    // Here we set flag to process this error properly.\n    //\n    // NOTE. Deflate does not return error in this case and does not needs such\n    // logic.\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\n      allowBufError = true;\n    }\n\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);\n\n  if (status === c.Z_STREAM_END) {\n    _mode = c.Z_FINISH;\n  }\n\n  // Finalize on the last chunk.\n  if (_mode === c.Z_FINISH) {\n    status = zlib_inflate.inflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === c.Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === c.Z_SYNC_FLUSH) {\n    this.onEnd(c.Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === c.Z_OK) {\n    if (this.options.to === 'string') {\n      // Glue & convert here, until we teach pako to send\n      // utf8 aligned strings to onData\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\n *   , output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  var inflator = new Inflate(options);\n\n  inflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) { throw inflator.msg || msg[inflator.err]; }\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nexports.Inflate = Inflate;\nexports.inflate = inflate;\nexports.inflateRaw = inflateRaw;\nexports.ungzip  = inflate;\n","// Top level file is just a mixin of submodules & constants\n'use strict';\n\nvar assign    = require('./lib/utils/common').assign;\n\nvar deflate   = require('./lib/deflate');\nvar inflate   = require('./lib/inflate');\nvar constants = require('./lib/zlib/constants');\n\nvar pako = {};\n\nassign(pako, deflate, inflate, constants);\n\nmodule.exports = pako;\n","import {\n  Resource,\n  Texture,\n  TileMap,\n  TileSprite,\n  SpriteSheet,\n  Logger,\n  Graphics,\n} from \"excalibur\";\nimport { ITiledMap, ITiledTileSet } from \"./ITiledMap\";\nimport pako from \"pako\";\nimport { RawImage } from \"../excalibur/build/dist/Graphics\";\n\nexport * from \"./ITiledMap\";\n\nexport enum TiledMapFormat {\n  /**\n   * TMX map layer format\n   * @unsupported\n   */\n  TMX,\n\n  /**\n   * JSON map layer format\n   */\n  JSON,\n}\n\nexport class TiledResource extends Resource<ITiledMap> {\n  protected mapFormat: TiledMapFormat;\n\n  public imagePathAccessor: (path: string, ts: ITiledTileSet) => string;\n  public externalTilesetPathAccessor: (\n    path: string,\n    ts: ITiledTileSet\n  ) => string;\n\n  constructor(path: string, mapFormat = TiledMapFormat.JSON) {\n    switch (mapFormat) {\n      case TiledMapFormat.JSON:\n        super(path, \"json\");\n        break;\n      default:\n        throw `The format ${mapFormat} is not currently supported. Please export Tiled map as JSON.`;\n    }\n\n    this.mapFormat = mapFormat;\n    this.imagePathAccessor = this.externalTilesetPathAccessor = (\n      p,\n      tileset\n    ) => {\n      // Use absolute path if specified\n      if (p.indexOf(\"/\") === 0) {\n        return p;\n      }\n\n      // Load relative to map path\n      let pp = path.split(\"/\");\n      let relPath = pp.concat([]);\n\n      if (pp.length > 0) {\n        // remove file part of path\n        relPath.splice(-1);\n      }\n      relPath.push(p);\n      return relPath.join(\"/\");\n    };\n  }\n\n  public load(): Promise<ITiledMap> {\n    return new Promise((resolve, reject) => {\n      super.load().then((map) => {\n        var promises: Promise<any>[] = [];\n\n        // Loop through loaded tileset data\n        // If we find an image property, then\n        // load the image and sprite\n\n        // If we find a source property, then\n        // load the tileset data, merge it with\n        // existing data, and load the image and sprite\n\n        this.data.tilesets.forEach((ts) => {\n          if (ts.source) {\n            var tileset = new Resource<ITiledTileSet>(\n              this.externalTilesetPathAccessor(ts.source, ts),\n              \"json\"\n            );\n\n            promises.push(\n              tileset.load().then((external) => {\n                (Object as any).assign(ts, external);\n              })\n            );\n          }\n        });\n\n        // wait or immediately resolve pending promises\n        // for external tilesets\n        Promise.all(promises).then(\n          () => {\n            // clear pending promises\n            promises = [];\n\n            // retrieve images from tilesets and create textures\n            this.data.tilesets.forEach((ts) => {\n              var tx = new Texture(this.imagePathAccessor(ts.image, ts));\n              ts.imageTexture = tx;\n              promises.push(tx.load());\n\n              Logger.getInstance().debug(\n                \"[Tiled] Loading associated tileset: \" + ts.image\n              );\n            });\n\n            Promise.all(promises).then(\n              () => {\n                resolve(map);\n              },\n              (value?: any) => {\n                reject(value);\n              }\n            );\n          },\n          (value?: any) => {\n            reject(value);\n          }\n        );\n      });\n    });\n  }\n\n  public processData(data: ITiledMap): ITiledMap | undefined {\n    if (typeof data !== \"object\") {\n      throw `Tiled map resource ${this.path} is not the correct content type`;\n    }\n    if (data === void 0) {\n      throw `Tiled map resource ${this.path} is empty`;\n    }\n\n    switch (this.mapFormat) {\n      case TiledMapFormat.JSON:\n        return parseJsonMap(data);\n    }\n  }\n\n  public getTilesetForTile(gid: number): ITiledTileSet | null {\n    for (var i = this.data.tilesets.length - 1; i >= 0; i--) {\n      var ts = this.data.tilesets[i];\n\n      if (ts.firstgid <= gid) {\n        return ts;\n      }\n    }\n\n    return null;\n  }\n\n  public getTileMap(x: number, y: number): TileMap {\n    var map = new TileMap(\n      x,\n      y,\n      this.data.tilewidth,\n      this.data.tileheight,\n      this.data.height,\n      this.data.width\n    );\n\n    // register sprite sheets for each tileset in map\n    const newmap: { [key: string]: Graphics.SpriteSheet } = {};\n    for (var ts of this.data.tilesets) {\n      var cols = Math.floor(ts.imagewidth / ts.tilewidth);\n      var rows = Math.floor(ts.imageheight / ts.tileheight);\n      const newss = Graphics.SpriteSheet.fromGrid({\n        image: RawImage.fromLegacyTexture(ts.imageTexture),\n        grid: {\n          rows: rows,\n          columns: cols,\n          spriteWidth: ts.tilewidth,\n          spriteHeight: ts.tileheight,\n        },\n      });\n      var ss = new SpriteSheet(\n        ts.imageTexture,\n        cols,\n        rows,\n        ts.tilewidth,\n        ts.tileheight\n      );\n\n      map.registerSpriteSheet(ts.firstgid.toString(), ss);\n      newmap[ts.firstgid.toString()] = newss;\n    }\n\n    for (var layer of this.data.layers) {\n      if (layer.type === \"tilelayer\") {\n        for (var i = 0; i < layer.data.length; i++) {\n          let gid = <number>layer.data[i];\n\n          // TODO clear tile at 223!!\n          if (gid !== 0) {\n            var ts = this.getTilesetForTile(gid);\n            map.data[i].sprites.push(\n              new TileSprite(ts.firstgid.toString(), gid - ts.firstgid)\n            );\n            map.data[i].graphics.show(\n              newmap[ts.firstgid.toString()].sprites[gid - ts.firstgid]\n            );\n          }\n        }\n      }\n    }\n\n    return map;\n  }\n}\n\n/**\n * Handles parsing of JSON tiled data\n */\nvar parseJsonMap = (data: ITiledMap): ITiledMap => {\n  // Decompress layers\n  if (data.layers) {\n    for (var layer of data.layers) {\n      if (typeof layer.data === \"string\") {\n        if (layer.encoding === \"base64\") {\n          layer.data = decompressors.decompressBase64(\n            <string>layer.data,\n            layer.encoding,\n            layer.compression || \"\"\n          );\n        }\n      } else {\n        layer.data = decompressors.decompressCsv(<number[]>layer.data);\n      }\n    }\n  }\n\n  return data;\n};\n\n/**\n * Decompression implementations\n */\nvar decompressors = {\n  /**\n   * Simplest (passes data through since it's uncompressed)\n   */\n  decompressCsv: (data: number[]) => {\n    return data;\n  },\n\n  /**\n   * Uses base64.js implementation to decode string into byte array\n   * and then converts (with/without compression) to array of numbers\n   */\n  decompressBase64: (b64: string, encoding: string, compression: string) => {\n    var i: number,\n      j: number,\n      l: number,\n      tmp: number,\n      placeHolders: number,\n      arr: number[] | Uint8Array;\n\n    if (b64.length % 4 > 0) {\n      throw new Error(\"Invalid string. Length must be a multiple of 4\");\n    }\n\n    var Arr = typeof Uint8Array !== \"undefined\" ? Uint8Array : Array;\n\n    var PLUS = \"+\".charCodeAt(0);\n    var SLASH = \"/\".charCodeAt(0);\n    var NUMBER = \"0\".charCodeAt(0);\n    var LOWER = \"a\".charCodeAt(0);\n    var UPPER = \"A\".charCodeAt(0);\n    var PLUS_URL_SAFE = \"-\".charCodeAt(0);\n    var SLASH_URL_SAFE = \"_\".charCodeAt(0);\n\n    function decode(elt: string): number {\n      var code = elt.charCodeAt(0);\n      if (code === PLUS || code === PLUS_URL_SAFE) return 62; // '+'\n      if (code === SLASH || code === SLASH_URL_SAFE) return 63; // '/'\n      if (code < NUMBER) return -1; // no match\n      if (code < NUMBER + 10) return code - NUMBER + 26 + 26;\n      if (code < UPPER + 26) return code - UPPER;\n      if (code < LOWER + 26) return code - LOWER + 26;\n      return -1;\n    }\n\n    // the number of equal signs (place holders)\n    // if there are two placeholders, than the two characters before it\n    // represent one byte\n    // if there is only one, then the three characters before it represent 2 bytes\n    // this is just a cheap hack to not do indexOf twice\n    var len = b64.length;\n    placeHolders =\n      b64.charAt(len - 2) === \"=\" ? 2 : b64.charAt(len - 1) === \"=\" ? 1 : 0;\n\n    // base64 is 4/3 + up to two characters of the original data\n    arr = new Arr((b64.length * 3) / 4 - placeHolders);\n\n    // if there are placeholders, only get up to the last complete 4 chars\n    l = placeHolders > 0 ? b64.length - 4 : b64.length;\n\n    var L = 0;\n\n    function push(v: number) {\n      arr[L++] = v;\n    }\n\n    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n      tmp =\n        (decode(b64.charAt(i)) << 18) |\n        (decode(b64.charAt(i + 1)) << 12) |\n        (decode(b64.charAt(i + 2)) << 6) |\n        decode(b64.charAt(i + 3));\n      push((tmp & 0xff0000) >> 16);\n      push((tmp & 0xff00) >> 8);\n      push(tmp & 0xff);\n    }\n\n    if (placeHolders === 2) {\n      tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4);\n      push(tmp & 0xff);\n    } else if (placeHolders === 1) {\n      tmp =\n        (decode(b64.charAt(i)) << 10) |\n        (decode(b64.charAt(i + 1)) << 4) |\n        (decode(b64.charAt(i + 2)) >> 2);\n      push((tmp >> 8) & 0xff);\n      push(tmp & 0xff);\n    }\n\n    // Byte array\n    // handle compression\n    if (\"zlib\" === compression || \"gzip\" === compression) {\n      arr = pako.inflate(arr);\n    }\n\n    var toNumber = function (byteArray: number[] | Uint8Array) {\n      var value = 0;\n\n      for (var i = byteArray.length - 1; i >= 0; i--) {\n        value = value * 256 + byteArray[i] * 1;\n      }\n\n      return value;\n    };\n\n    var resultLen = arr.length / 4;\n    var result = new Array<number>(resultLen);\n\n    for (i = 0; i < resultLen; i++) {\n      result[i] = toNumber(arr.slice(i * 4, i * 4 + 3));\n    }\n\n    return result;\n  },\n};\n","import sword from \"../img/sword.png\";\nimport icons from \"../img/icons.png\";\nimport player1 from \"../img/char-sprites/player-1.png\";\nimport player2 from \"../img/char-sprites/player-2.png\";\nimport player3 from \"../img/char-sprites/player-3.png\";\nimport player4 from \"../img/char-sprites/player-4.png\";\nimport player5 from \"../img/char-sprites/player-5.png\";\nimport player1long from \"../img/char-sprites/player-1-long.png\";\nimport player2long from \"../img/char-sprites/player-2-long.png\";\nimport player3long from \"../img/char-sprites/player-3-long.png\";\nimport player4long from \"../img/char-sprites/player-4-long.png\";\nimport player5long from \"../img/char-sprites/player-5-long.png\";\nimport cuecardBase from \"../img/cuecard-base.png\";\nimport cuecardTimer from \"../img/cuecard-timer.png\";\nimport audienceMeter from \"../img/meter.png\";\nimport background from \"../img/background.png\";\nimport titleCard from \"../img/silent-card-template.png\";\nimport playAgainButton from \"../img/play-again-button.png\";\n\nimport { Graphics, Sound } from \"excalibur\";\nimport { TiledResource } from \"excalibur-tiled\";\n\nexport const Resources = {\n  swordImage: new Graphics.RawImage(sword),\n  icons: new Graphics.RawImage(icons),\n  charSheet1: new Graphics.RawImage(player1),\n  charSheet2: new Graphics.RawImage(player2),\n  charSheet3: new Graphics.RawImage(player3),\n  charSheet4: new Graphics.RawImage(player4),\n  charSheet5: new Graphics.RawImage(player5),\n  charSheet6: new Graphics.RawImage(player1long),\n  charSheet7: new Graphics.RawImage(player2long),\n  charSheet8: new Graphics.RawImage(player3long),\n  charSheet9: new Graphics.RawImage(player4long),\n  charSheet10: new Graphics.RawImage(player5long),\n  cuecardBaseImage: new Graphics.RawImage(cuecardBase),\n  cuecardTimerSheet: new Graphics.RawImage(cuecardTimer),\n  audienceMeterSheet: new Graphics.RawImage(audienceMeter),\n  map: new TiledResource(\"./map/map.json\"),\n  background: new Graphics.RawImage(background),\n  titleCard: new Graphics.RawImage(titleCard),\n  playAgainButton: new Graphics.RawImage(playAgainButton),\n\n  music: new Sound(\"./mp3/background.mp3\"),\n  sndDoorOpen: new Sound(\"./wav/doorOpen.wav\"),\n  sndCardExpired: new Sound(\"./wav/cardExpired.wav\"),\n  sndCardSuccess: new Sound(\"./wav/cardSuccess.wav\"),\n  sndPickupItem: new Sound(\"./wav/pickupItem.wav\"),\n  sndNope: new Sound(\"./wav/nope2.wav\"),\n  applause: new Sound(\"./mp3/applause2.mp3\"),\n  boo: new Sound(\"./mp3/boo2.mp3\"),\n};\n","import { Vector, vec } from \"excalibur\";\n\nexport default {\n  AnalyticsEndpoint: \"https://ludum46stats.azurewebsites.net/api/LD46Stats\",\n  RandomSeed: Date.now(), // classic\n\n  PlayerWidth: 35,\n  PlayerHeight: 35,\n  PlayerVel: 250,\n  PlayerSpriteHeight: 45,\n  PlayerSpriteWidth: 45,\n\n  GameWidth: 1280,\n  GameHeight: 720,\n\n  TomatoPercentage: 0.25,\n\n  StagePos: vec(40, 168),\n\n  CueCardPadding: 135, // how much space is between each any two cue cards\n  CueCardTopOffset: 70, // how far from the top of the game window the cue cards are placed\n  CueCardHeight: 75,\n  CueCardWidth: 300,\n  CueCardLifeMinSeconds: 15,\n  CueCardLifeMaxSeconds: 25,\n  CueCardScoreDelaySeconds: 3, // Time necessary to wait in location before card is scored\n  CueCardSuccessReplacementDelay: 7000, // Delay to repalce cue card on success\n  CueCardFailReplacementDelay: 0,\n\n  AudienceMeterXOffset: 200,\n  AudienceMeterMaxWidth: 934,\n  AudienceMeterStartingWidth: 400,\n  AudienceMeterHeight: 20,\n\n  SoundVolume: 1,\n  CueCardExpiredVolume: 0.1,\n  CueCardSuccessVolume: 0.1,\n  DoorOpenVolume: 0.1,\n  PickupItemVolume: 0.1,\n  BackgroundVolume: 0.05,\n\n  //Scoring\n  ScoreDecayRate: 5, // per second\n  ScoreBaseIncrease: 0, // amt achieved for just sitting in spot\n  ScoreIncreasePerProp: 30, //amt gained for having a correct prop\n  ScoreMultiplier: 1.5, // multiplier for having every correct prop.  1 means nothing\n  ScoreLossPerMissedCard: 15,\n  ScorePunishment: 30, //Punishment for triggering spotlight with neigher correct prop\n  NumCueCardsToWin: 7,\n\n  GreatScoreCutoff: 400,\n  RoaringScoreCutoff: 600,\n};\n","import Config from \"./config\";\nimport { Inventory } from \"./inventory\";\n\ninterface Payload {\n  date: string; // the current date\n  commit: string; // the current commit of the game\n  started: number; // the time\n  duration: number; // the duration of the game session\n  numLinesDelivered: number;\n  numPropsused: number;\n  numCostumeChanges: number;\n  randomSeed: number;\n}\n\nexport class Analytics {\n  public static publish(payload: Payload) {\n    return fetch(Config.AnalyticsEndpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(payload),\n    });\n  }\n}\n\nexport class Stats {\n  protected startTime = Date.now();\n  constructor(private _inventory: Inventory) {}\n\n  public get start() {\n    return this.startTime;\n  }\n  public get duration() {\n    return Date.now() - this.startTime;\n  }\n\n  public set inventory(inventory: Inventory) {\n    this._inventory = inventory;\n  }\n\n  public get inventory(): Inventory {\n    return this._inventory;\n  }\n\n  public reduceAudienceMeter(amount: number) {\n    if (amount < this.currentAudienceScore) {\n      this.currentAudienceScore -= amount; //TODO don't reduce this all at once, add some sort of animation of fast reduction of points to the audience meter\n    } else {\n      this.currentAudienceScore = 0;\n    }\n  }\n\n  public increaseAudienceMeter(amount: number) {\n    if (amount < this.currentAudienceScore + Config.AudienceMeterMaxWidth) {\n      this.currentAudienceScore += amount;\n    } else {\n      this.currentAudienceScore = Config.AudienceMeterMaxWidth;\n    }\n  }\n\n  public publishStats() {\n    const commit = document.getElementById(\"commitRef\")?.innerText;\n    return Analytics.publish({\n      commit: commit as string,\n      date: new Date().toISOString(),\n      started: this.start,\n      duration: this.duration,\n      numPropsused: this.numPropsUsed,\n      numCostumeChanges: this.numCostumeChanges,\n      numLinesDelivered: this.numLinesDelivered,\n      randomSeed: Config.RandomSeed,\n    });\n  }\n\n  public isGameOver = false;\n  public numLinesDelivered = 0;\n  public numPropsUsed = 0;\n  public numCostumeChanges = 0;\n  public currentAudienceScore = Config.AudienceMeterStartingWidth;\n}\n","// BEWARE THE ORDER MATTERS HERE\n// THIS IS THE ORDER ON THE SCREEN\nexport enum Locations {\n  stageLeft = \"stageLeft\",\n  stageCenter = \"stageCenter\",\n  stageRight = \"stageRight\",\n}\n\nexport enum StageProps {\n  rubberChicken = \"rubberChicken\",\n  trumpet = \"trumpet\",\n  umbrella = \"umbrella\",\n  toiletPaper = \"toiletPaper\",\n  skull = \"skull\",\n  sword = \"sword\",\n}\n\nexport enum Costumes {\n  vikingHat = \"vikingHat\",\n  jesterHat = \"jesterHat\",\n  topHat = \"topHat\",\n  sherifHat = \"sherifHat\",\n  magicianHat = \"magicianHat\",\n  bunnyEars = \"bunnyEars\",\n}\n\nexport const IconPosition: { [key: string]: number } = {\n  rubberChicken: 0,\n  trumpet: 1,\n  umbrella: 2,\n  tomato: 4,\n  toiletPaper: 3,\n  skull: 7,\n  sword: 5,\n  vikingHat: 10,\n  jesterHat: 11,\n  topHat: 12,\n  sherifHat: 13,\n  magicianHat: 14,\n  bunnyEars: 15,\n  stageCenter: 25,\n  stageLeft: 26,\n  stageRight: 27,\n  redCheck: 28,\n};\n","import {\n  Actor,\n  Engine,\n  CollisionType,\n  Input,\n  PostDrawEvent,\n  PostUpdateEvent,\n  Graphics,\n  Random,\n  Resource,\n  Loadable,\n} from \"excalibur\";\nimport Config from \"./config\";\nimport { Resources } from \"./resources\";\nimport { stats } from \"./session\";\n\nenum PlayerInputState {\n  input_deny,\n  input_accept,\n}\n\nexport class Player extends Actor {\n  private inputState: PlayerInputState = PlayerInputState.input_deny;\n  public charImage!: Graphics.RawImage;\n\n  constructor(x: number, y: number) {\n    super(x, y, Config.PlayerWidth, Config.PlayerHeight);\n  }\n\n  public onInitialize(engine: Engine) {\n    this._setupDrawing(engine);\n    this.enableTileMapCollision();\n    engine.input.keyboard.on(\"hold\", (keyHeld: Input.KeyEvent) => {\n      // if (!State.gameOver) {\n\n      if (this.inputState !== PlayerInputState.input_accept) {\n        return;\n      }\n      if (stats().isGameOver == true) return;\n      switch (keyHeld.key) {\n        case Input.Keys.Up:\n        case Input.Keys.W:\n          this.vel.setTo(this.vel.x, -Config.PlayerVel);\n          this.graphics.show(\"walkUp\");\n          break;\n        case Input.Keys.Down:\n        case Input.Keys.S:\n          this.vel.setTo(this.vel.x, Config.PlayerVel);\n          this.graphics.show(\"walkDown\");\n          break;\n        case Input.Keys.Left:\n        case Input.Keys.A:\n          this.vel.setTo(-Config.PlayerVel, this.vel.y);\n          this.graphics.show(\"walkLeft\");\n          break;\n        case Input.Keys.Right:\n        case Input.Keys.D:\n          this.vel.setTo(Config.PlayerVel, this.vel.y);\n          this.graphics.show(\"walkRight\");\n          break;\n      }\n    });\n\n    engine.input.keyboard.on(\"release\", (keyUp: Input.KeyEvent) => {\n      // if (!State.gameOver) {\n      if (this.inputState !== PlayerInputState.input_accept) {\n        return;\n      }\n      if (stats().isGameOver == true) return;\n      switch (keyUp.key) {\n        case Input.Keys.Up:\n        case Input.Keys.W:\n          this.graphics.show(\"up\");\n          break;\n        case Input.Keys.Down:\n        case Input.Keys.S:\n          this.vel.setTo(this.vel.x, Config.PlayerVel);\n          this.graphics.show(\"down\");\n          break;\n        case Input.Keys.Left:\n        case Input.Keys.A:\n          this.graphics.show(\"left\");\n          break;\n        case Input.Keys.Right:\n        case Input.Keys.D:\n          this.graphics.show(\"right\");\n          break;\n      }\n      //}\n    });\n\n    //  this.on('postdraw', (evt: PostDrawEvent) => {\n    //     this._selectSprite.draw(evt.ctx, -this._selectSprite.naturalWidth / 2, this._selectSprite.naturalHeight / 2);\n    //  });\n  }\n\n  onPostUpdate() {\n    if (this.inputState === PlayerInputState.input_accept) {\n      this.vel.setTo(0, 0);\n    }\n  }\n\n  /**\n   * Begin the enter stage transition. Block input until we're done playing actions.\n   */\n  public beginEnterStage() {\n    this.inputState = PlayerInputState.input_deny;\n    this.graphics.show(\"walkLeft\");\n    this.body.collider.type = CollisionType.PreventCollision;\n\n    setTimeout(() => {\n      Resources.sndDoorOpen.play();\n    }, 800);\n\n    return this.actions\n      .moveBy(-(Config.PlayerWidth * 3), 0, 60)\n      .callMethod(() => {\n        this.graphics.show(\"left\");\n        this.body.collider.type = CollisionType.Active;\n      })\n      .asPromise();\n  }\n\n  public AllowUserControl(): void {\n    this.inputState = PlayerInputState.input_accept;\n  }\n\n  private _setupDrawing(engine: Engine) {\n    this.charImage = this.getCharSprite();\n    let sheet = Graphics.SpriteSheet.fromGrid({\n      image: this.charImage,\n      grid: {\n        rows: 1,\n        columns: 10,\n        spriteHeight: Config.PlayerSpriteHeight,\n        spriteWidth: Config.PlayerSpriteWidth,\n      },\n    });\n    let sprites = sheet.sprites;\n    let downSprite = sprites[0];\n    let upSprite = sprites[3];\n    let leftSprite = sprites[7];\n    let rightSprite = sprites[9];\n\n    downSprite.origin?.setTo(0, 0.2);\n    upSprite.origin?.setTo(0, 0.2);\n    leftSprite.origin?.setTo(0, 0.2);\n    rightSprite.origin?.setTo(0, 0.2);\n\n    this.graphics.add(\"down\", downSprite);\n    this.graphics.add(\"up\", upSprite);\n    this.graphics.add(\"left\", leftSprite);\n    this.graphics.add(\"right\", rightSprite);\n\n    let walkDownAnim = Graphics.Animation.fromSpriteSheet(\n      sheet,\n      [0, 1, 0, 2],\n      180\n    );\n    walkDownAnim.origin?.setTo(0, 0.2);\n    this.graphics.add(\"walkDown\", walkDownAnim);\n\n    let walkUpAnim = Graphics.Animation.fromSpriteSheet(\n      sheet,\n      [3, 4, 3, 5],\n      180\n    );\n    walkUpAnim.origin?.setTo(0, 0.2);\n    this.graphics.add(\"walkUp\", walkUpAnim);\n\n    let walkLeftAnim = Graphics.Animation.fromSpriteSheet(sheet, [7, 6], 200);\n    walkLeftAnim.origin?.setTo(0, 0.2);\n    this.graphics.add(\"walkLeft\", walkLeftAnim);\n\n    let walkRightAnim = Graphics.Animation.fromSpriteSheet(sheet, [9, 8], 200);\n    walkRightAnim.origin?.setTo(0, 0.2);\n    this.graphics.add(\"walkRight\", walkRightAnim);\n  }\n\n  public getCharSprite(excludeCurrent?: boolean): Graphics.RawImage {\n    let gameRandom = new Random(Date.now());\n    let charSheets = [];\n    for (let r in Resources) {\n      if (r.search(\"charSheet\") != -1) {\n        let img = (Resources as Record<string, Loadable>)[r];\n\n        if (excludeCurrent && img === this.charImage) {\n          continue;\n        }\n        charSheets.push(img);\n      }\n    }\n    let randCharSheets = gameRandom.shuffle(charSheets);\n    let result = randCharSheets[0];\n    return <Graphics.RawImage>result;\n  }\n}\n","import {\n  Graphics,\n  Actor,\n  CollisionType,\n  EasingFunctions,\n  Random,\n} from \"excalibur\";\nimport { IconPosition, Costumes, StageProps } from \"./constants\";\nimport { Resources } from \"./resources\";\nimport { stats } from \"./session\";\nimport { Player } from \"./player\";\n\nexport default class Items {\n  static sheet = Graphics.SpriteSheet.fromGrid({\n    image: <Graphics.RawImage>Resources.icons,\n    grid: {\n      rows: 6,\n      columns: 5,\n      spriteHeight: 80,\n      spriteWidth: 80,\n    },\n  });\n\n  public static getIconSprite(key: string): Graphics.Sprite {\n    const index = IconPosition[key];\n    const sprite = Items.sheet.sprites[index];\n    return sprite;\n  }\n}\n\nexport class Item extends Actor {\n  constructor(\n    private kind: \"prop\" | \"costume\",\n    private resourceName: Costumes | StageProps,\n    private sprite: Graphics.Sprite,\n    x: number,\n    y: number\n  ) {\n    super(x, y);\n  }\n\n  onInitialize() {\n    this.body.collider.type = CollisionType.Passive;\n    this.graphics.show(this.sprite);\n    this.on(\"precollision\", (event) => {\n      if (event.other instanceof Player) {\n        if (this.kind === \"prop\") {\n          stats().inventory.addProp(<StageProps>this.resourceName, this.pos);\n          stats().numPropsUsed++;\n        } else if (this.kind === \"costume\") {\n          stats().inventory.addCostume(<Costumes>this.resourceName, this.pos);\n          stats().numCostumeChanges++;\n        }\n\n        Resources.sndPickupItem.play();\n        this.kill();\n      }\n    });\n\n    // floaty up and down\n    const rand = new Random();\n    const origY = this.pos.y;\n\n    this.actions\n      .delay(rand.integer(0, 500))\n      .easeTo(\n        this.pos.x,\n        this.pos.y - rand.integer(3, 9),\n        1500,\n        EasingFunctions.EaseInCubic\n      )\n      .easeTo(this.pos.x, origY, 1000, EasingFunctions.EaseOutCubic)\n      .repeatForever();\n  }\n}\n","import {\n  Actor,\n  Color,\n  Engine,\n  Graphics,\n  Vector,\n  vec,\n  GameEvent,\n  Resource,\n  Animation,\n  Util,\n} from \"excalibur\";\nimport { Resources } from \"./resources\";\nimport { Locations, StageProps, Costumes } from \"./constants\";\nimport Items, { Item } from \"./items\";\nimport { stats } from \"./session\";\nexport interface CueCardOptions {\n  // The lifetime in seconds of the cue card\n  lifeTime: number;\n  requiredLocation: Locations;\n  requiredProp: StageProps;\n  requiredCostume: Costumes;\n  cueCardHeight: number;\n  cueCardWidth: any;\n  cueCardLoc: Vector;\n}\n\nexport enum CueCardEvents {\n  CueCardExpired = \"CueCardExpired\",\n  CueCardSatisfied = \"CueCardSatisfied\",\n}\n\nexport class CueCardExpiredEvent extends GameEvent<CueCard, false> {\n  constructor(public cueCard: CueCard) {\n    super();\n  }\n}\n\nexport class CueCard extends Actor {\n  private timer: number;\n  private timerRect!: Graphics.Rect;\n  private lifeTime: number;\n  private cueCardWidth: number;\n  private cueCardHeight: number;\n\n  // the spacing between symbols as a % of cue card max width\n  // There are 4 padding sections\n  // The rest of the spacing is given equally to the three symbols\n  //\n  //  |----------------------------------------     |\n  //  |                                             |\n  //  |   |---------|   |---------|   |---------|   |\n  //  |-x-|----y----|-x-|----y----|-x-|----y----|-x-|\n  //  |   |---------|   |---------|   |---------|   |\n  //  |                                             |\n  //  |----------------------------------------------\n  //\n  private xPaddingPercent: number;\n  private xPadding: number;\n  private symbolWidth: number;\n  private yPaddingPercent: number;\n  private yPadding: number;\n  private symbolHeight: number;\n  public options: CueCardOptions;\n  public timerAnimation!: Graphics.Animation;\n\n  private _running: boolean = true;\n  public failed = false;\n\n  constructor(options: CueCardOptions) {\n    super();\n    this.timer = this.lifeTime = options.lifeTime;\n\n    this.options = options;\n    this.pos = options.cueCardLoc;\n    this.cueCardHeight = options.cueCardHeight;\n    this.cueCardWidth = options.cueCardWidth;\n    this.xPaddingPercent = 0.15;\n    this.xPadding = (this.xPaddingPercent * this.cueCardWidth) / 4;\n    this.symbolWidth = ((1 - this.xPaddingPercent) * this.cueCardWidth) / 3;\n    this.yPaddingPercent = 0.2;\n    this.yPadding = (this.yPaddingPercent * this.cueCardHeight) / 2;\n    this.symbolHeight = (1 - this.yPaddingPercent) * this.cueCardHeight;\n\n    this._setUpBackground();\n    this._setUpTimer(this.timer);\n    // this._setUpLocationSymbol(options.requiredLocation);\n    this._setUpPropSymbol(options.requiredProp);\n    this._setUpCostumeSymbol(options.requiredCostume);\n    this._setUpFailedPropSymbol();\n    this._setUpFailedCostumeSymbol();\n  }\n\n  public onInitialize(engine: Engine) {}\n\n  public pause() {\n    this._running = false;\n    this.timerAnimation.pause();\n  }\n  public play() {\n    this._running = true;\n    this.timerAnimation.play();\n  }\n\n  public update(engine: Engine, delta: number) {\n    if (!this._running) return;\n    this.timer -= delta / 1000;\n    // this.timerRect.width = (this.cueCardWidth * this.timer) / this.lifeTime;\n\n    if (this.timer <= 0) {\n      const event = new CueCardExpiredEvent(this);\n      this.scene.emit(CueCardEvents.CueCardExpired, event);\n      this.kill();\n    } else {\n      if (stats().isGameOver === true) {\n        this.pause();\n      }\n    }\n  }\n\n  kill() {\n    super.kill();\n  }\n\n  public Satisfied(): void {\n    const event = new CueCardExpiredEvent(this);\n    this.scene.emit(CueCardEvents.CueCardSatisfied, event);\n    this.kill();\n  }\n\n  private _calculateRelativePosition(symbolNumber: number): Vector {\n    const totalPadding = symbolNumber * this.xPadding;\n    const positionalOffset = (symbolNumber - 1) * this.symbolWidth;\n    return vec(\n      this.pos.x + totalPadding + positionalOffset,\n      this.pos.y + this.yPadding\n    );\n  }\n\n  private _setUpBackground(): void {\n    const background = this.graphics.createLayer({\n      name: \"background\",\n      order: -1,\n    });\n    const back = Graphics.Sprite.from(Resources.cuecardBaseImage);\n    background.offset = this.pos.add(vec(90, -50));\n    background.show(back);\n  }\n\n  private _setUpTimer(totalTime: number): void {\n    const sheet = Graphics.SpriteSheet.fromGrid({\n      image: Resources.cuecardTimerSheet,\n      grid: {\n        rows: 1,\n        columns: 38,\n        spriteWidth: 53,\n        spriteHeight: 52,\n      },\n    });\n    const timer = Graphics.Animation.fromSpriteSheet(\n      sheet,\n      Util.range(0, 37),\n      (totalTime * 1000) / 38,\n      Graphics.AnimationStrategy.Freeze\n    );\n    const timerLayer = this.graphics.createLayer({ name: \"timer\", order: 0 });\n    timerLayer.offset = this.pos.add(vec(174, 90));\n    timerLayer.show(timer);\n    this.timerAnimation = timer;\n  }\n\n  private _setUpLocationSymbol(requiredLocation: Locations): void {\n    const locationSymbolLayer = this.graphics.createLayer({\n      name: \"locationSymbol\",\n      order: 2,\n    });\n\n    locationSymbolLayer.offset = this._calculateRelativePosition(1);\n\n    let sprite = Items.getIconSprite(requiredLocation);\n    this._setUpSymbolWidthHeight(sprite);\n    locationSymbolLayer.show(sprite);\n  }\n\n  private _setUpSymbolWidthHeight(sprite: Graphics.Sprite) {\n    // sprite.destSize.width = this.symbolWidth;\n    // sprite.destSize.height = this.symbolHeight;\n  }\n\n  private _setUpPropSymbol(requiredProp: StageProps): void {\n    const propSymbolLayer = this.graphics.createLayer({\n      name: \"propSymbol\",\n      order: 3,\n    });\n\n    propSymbolLayer.offset = this._calculateRelativePosition(2);\n\n    let sprite = Items.getIconSprite(requiredProp);\n    this._setUpSymbolWidthHeight(sprite);\n    propSymbolLayer.show(sprite);\n  }\n\n  private _setUpCostumeSymbol(requiredCostume: Costumes): void {\n    const costumeSymbolLayer = this.graphics.createLayer({\n      name: \"costumeSymbol\",\n      order: 4,\n    });\n\n    costumeSymbolLayer.offset = this._calculateRelativePosition(3);\n\n    let sprite = Items.getIconSprite(requiredCostume);\n    this._setUpSymbolWidthHeight(sprite);\n    costumeSymbolLayer.show(sprite);\n  }\n\n  private _setUpFailedPropSymbol(): void {\n    const failedLayer = this.graphics.createLayer({\n      name: \"failedPropSymbol\",\n      order: 5,\n    });\n\n    failedLayer.offset = this._calculateRelativePosition(2);\n  }\n\n  private _setUpFailedCostumeSymbol(): void {\n    const failedLayer = this.graphics.createLayer({\n      name: \"failedCostumeSymbol\",\n      order: 5,\n    });\n\n    failedLayer.offset = this._calculateRelativePosition(3);\n  }\n\n  showFailedCostume() {\n    let redCheck = Items.getIconSprite(\"redCheck\");\n    this.graphics.getLayer(\"failedCostumeSymbol\")?.show(redCheck);\n    this.pause();\n  }\n\n  showFailedProp() {\n    let redCheck = Items.getIconSprite(\"redCheck\");\n    this.graphics.getLayer(\"failedPropSymbol\")?.show(redCheck);\n    this.pause();\n  }\n}\n","import { CueCard, CueCardEvents, CueCardExpiredEvent } from \"./cuecard\";\nimport { Scene, vec, EventDispatcher, Vector, Random } from \"excalibur\";\nimport { Locations, StageProps, Costumes } from \"./constants\";\nimport Config from \"./config\";\nimport { stats } from \"./session\";\nimport { Player } from \"./player\";\nimport { Inventory } from \"./inventory\";\nimport { Resources } from \"./resources\";\nimport { Theater } from \"theater-scene\";\n\nexport class CueCardManager {\n  private _random: Random = new Random(Config.RandomSeed);\n  private stageLeftCueCard!: CueCard;\n  private stageCenterCueCard!: CueCard;\n  private stageRightCueCard!: CueCard;\n  private cardPadding: number = Config.CueCardPadding;\n  private cardTopOffset: number = Config.CueCardTopOffset;\n  private cueCardHeight: number = Config.CueCardHeight;\n  private cueCardWidth: number = Config.CueCardWidth;\n  private scene: Theater;\n  private eventDispatcher: EventDispatcher;\n\n  constructor(scene: Theater) {\n    this.scene = scene;\n    this.eventDispatcher = this.scene.eventDispatcher;\n    this.SetUpEventHooks();\n  }\n\n  public start() {\n    this.stageLeftCueCard = this._GenerateCueCard(1);\n    this.stageCenterCueCard = this._GenerateCueCard(2);\n    this.stageRightCueCard = this._GenerateCueCard(3);\n    this.scene.add(this.stageLeftCueCard);\n    this.scene.add(this.stageCenterCueCard);\n    this.scene.add(this.stageRightCueCard);\n  }\n\n  private _calculateCueCardPosition(cardNumber: number): Vector {\n    const padding = this.cardPadding * (cardNumber - 1);\n    const cardWidth = this.cueCardWidth * (cardNumber - 1);\n    return vec(padding + cardWidth, this.cardTopOffset);\n  }\n\n  private SetUpEventHooks(): void {\n    this.eventDispatcher.on(\n      CueCardEvents.CueCardExpired,\n      this.CueCardExpiredEvent.bind(this) as any\n    );\n    this.eventDispatcher.on(\n      CueCardEvents.CueCardSatisfied,\n      this.CueCardSatisfiedEvent.bind(this) as any\n    );\n  }\n\n  private randomEnum<T extends Record<string, string>>(anEnum: T): T[keyof T] {\n    const enumValues = Object.keys(anEnum);\n    const randomIndex = this._random.integer(0, enumValues.length - 1);\n    const randomEnumValue = enumValues[randomIndex];\n    return randomEnumValue as T[keyof T];\n  }\n\n  private _GenerateCueCard(num: number): CueCard {\n    let cueCard = new CueCard({\n      lifeTime: this._random.integer(\n        Config.CueCardLifeMinSeconds,\n        Config.CueCardLifeMaxSeconds\n      ),\n      requiredCostume: this.randomEnum(Costumes),\n      requiredLocation: <Locations>Object.keys(Locations)[num - 1],\n      requiredProp: this.randomEnum(StageProps),\n      cueCardHeight: this.cueCardHeight,\n      cueCardWidth: this.cueCardWidth,\n      cueCardLoc: this._calculateCueCardPosition(num),\n    });\n\n    switch (num) {\n      case 1:\n        this.scene.leftSpotlight.setCueCard(cueCard);\n        break;\n      case 2:\n        this.scene.centerSpotlight.setCueCard(cueCard);\n        break;\n      case 3:\n        this.scene.rightSpotlight.setCueCard(cueCard);\n        break;\n    }\n\n    return cueCard;\n  }\n\n  private CueCardExpiredEvent(cueCardEvent: CueCardExpiredEvent) {\n    stats().reduceAudienceMeter(Config.ScoreLossPerMissedCard);\n    setTimeout(() => {\n      this.ReplaceCueCard(cueCardEvent.cueCard);\n    }, Config.CueCardFailReplacementDelay);\n    Resources.sndCardExpired.play();\n  }\n  private CueCardSatisfiedEvent(cueCardEvent: CueCardExpiredEvent) {\n    setTimeout(() => {\n      this.ReplaceCueCard(cueCardEvent.cueCard);\n    }, Config.CueCardSuccessReplacementDelay);\n    if (!cueCardEvent.cueCard.failed) {\n      Resources.sndCardSuccess.play();\n    }\n    stats().numLinesDelivered++;\n    if (stats().numLinesDelivered >= Config.NumCueCardsToWin) {\n      stats().isGameOver = true;\n    }\n  }\n\n  private ReplaceCueCard(cueCard: CueCard) {\n    if (cueCard == this.stageLeftCueCard) {\n      this.stageLeftCueCard = this._GenerateCueCard(1);\n      this.scene.add(this.stageLeftCueCard);\n    } else if (cueCard == this.stageCenterCueCard) {\n      this.stageCenterCueCard = this._GenerateCueCard(2);\n      this.scene.add(this.stageCenterCueCard);\n    } else if (cueCard == this.stageRightCueCard) {\n      this.stageRightCueCard = this._GenerateCueCard(3);\n      this.scene.add(this.stageRightCueCard);\n    } else {\n      // weird but still works\n      // throw new Error();\n    }\n  }\n\n  private _trySatisfyCueCard(inventory: Inventory, cueCard: CueCard): number {\n    const score = inventory.getQueueCardScore(cueCard);\n    stats().increaseAudienceMeter(score);\n    return score;\n  }\n\n  public SatisfyStageLeft(inventory: Inventory): number {\n    const score = this._trySatisfyCueCard(inventory, this.stageLeftCueCard);\n    setTimeout(\n      () => {\n        this.stageLeftCueCard.Satisfied();\n      },\n      this.stageLeftCueCard.failed ? 1000 : 0\n    );\n    if (this.stageLeftCueCard.failed) {\n      Resources.sndNope.play();\n    }\n\n    return score;\n  }\n\n  public SatisfyStageCenter(inventory: Inventory): number {\n    const score = this._trySatisfyCueCard(inventory, this.stageCenterCueCard);\n    setTimeout(\n      () => {\n        this.stageCenterCueCard.Satisfied();\n      },\n      this.stageCenterCueCard.failed ? 1000 : 0\n    );\n    if (this.stageCenterCueCard.failed) {\n      Resources.sndNope.play();\n    }\n\n    return score;\n  }\n\n  public SatisfyStageRight(inventory: Inventory): number {\n    const score = this._trySatisfyCueCard(inventory, this.stageRightCueCard);\n    setTimeout(\n      () => {\n        this.stageRightCueCard.Satisfied();\n      },\n      this.stageRightCueCard.failed ? 1000 : 0\n    );\n    if (this.stageRightCueCard.failed) {\n      Resources.sndNope.play();\n    }\n\n    return score;\n  }\n}\n","import {\n  Trigger,\n  Actor,\n  Graphics,\n  Engine,\n  Color,\n  EnterTriggerEvent,\n  ExitTriggerEvent,\n  ActorArgs,\n  Logger,\n} from \"excalibur\";\nimport { Player } from \"./player\";\nimport { CueCardManager } from \"./cuecardmanager\";\nimport { stats } from \"./session\";\nimport Config from \"./config\";\nimport { CueCard } from \"cuecard\";\n\nexport enum StageTriggerLocation {\n  StageLeft,\n  StageCenter,\n  StageRight,\n}\nexport class CueCardTrigger extends Actor {\n  private trigger!: Trigger;\n  private rect!: Graphics.Rect;\n  private triggered: boolean = false;\n  private waitTime: number = Config.CueCardScoreDelaySeconds;\n  private timer: number = 0;\n  private minAlpha: number = 0.1;\n  private maxAlpha: number = 0.6;\n\n  private _cueCard: CueCard | null = null;\n\n  public active = true;\n\n  constructor(\n    private player: Player,\n    private cueCardManager: CueCardManager,\n    private triggerPosition: StageTriggerLocation,\n    options: ActorArgs\n  ) {\n    super(options);\n  }\n\n  onInitialize() {\n    this.trigger = new Trigger({\n      width: this.width,\n      height: this.height,\n      pos: this.pos,\n      target: this.player,\n      repeat: -1,\n    });\n    // WORKAROUND: body not being updated onInitialize to use new anchor\n    this.trigger.body.useBoxCollider(this.width, this.height, this.anchor);\n    this.trigger.on(\"enter\", this.onTriggerEnter.bind(this));\n    this.trigger.on(\"exit\", this.onTriggerExit.bind(this));\n    this.rect = new Graphics.Circle({\n      radius: this.width / 2,\n      color: Color.Yellow,\n      lineDash: [5, 3],\n      lineWidth: 3,\n      strokeColor: Color.White,\n      padding: 1,\n    });\n    this.rect.color.a = this.minAlpha;\n    this.graphics.add(this.rect);\n    this.scene.add(this.trigger);\n  }\n\n  public setCueCard(cueCard: CueCard) {\n    this._cueCard = cueCard;\n  }\n\n  public update(engine: Engine, delta: number) {\n    super.update(engine, delta);\n\n    if (!this.triggered) return;\n    if (!this.active) return;\n    if (!this._cueCard) return;\n\n    this.timer += delta / 1000;\n    this.rect.color.a =\n      (this.maxAlpha * this.timer) / this.waitTime + this.minAlpha;\n\n    if (this.timer >= this.waitTime) {\n      Logger.getInstance().info(\"Stage trigger\", this.triggerPosition);\n      switch (this.triggerPosition) {\n        case StageTriggerLocation.StageCenter:\n          this.cueCardManager.SatisfyStageCenter(stats().inventory);\n          this._cueCard = null;\n          break;\n        case StageTriggerLocation.StageLeft:\n          this.cueCardManager.SatisfyStageLeft(stats().inventory);\n          this._cueCard = null;\n          break;\n        case StageTriggerLocation.StageRight:\n          this.cueCardManager.SatisfyStageRight(stats().inventory);\n          this._cueCard = null;\n          break;\n        default:\n          break;\n      }\n      this._reset();\n    }\n  }\n\n  private _reset(): void {\n    this.triggered = false;\n    this.timer = 0;\n    this.rect.opacity = 1;\n    this.rect.color.a = this.minAlpha;\n  }\n\n  private onTriggerEnter(event: EnterTriggerEvent): void {\n    this.triggered = true;\n    this._cueCard?.pause();\n  }\n\n  private onTriggerExit(event: ExitTriggerEvent): void {\n    this._reset();\n    if (!this._cueCard?.failed) {\n      this._cueCard?.play();\n    }\n  }\n}\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","var assign = make_assign()\nvar create = make_create()\nvar trim = make_trim()\nvar Global = (typeof window !== 'undefined' ? window : global)\n\nmodule.exports = {\n\tassign: assign,\n\tcreate: create,\n\ttrim: trim,\n\tbind: bind,\n\tslice: slice,\n\teach: each,\n\tmap: map,\n\tpluck: pluck,\n\tisList: isList,\n\tisFunction: isFunction,\n\tisObject: isObject,\n\tGlobal: Global\n}\n\nfunction make_assign() {\n\tif (Object.assign) {\n\t\treturn Object.assign\n\t} else {\n\t\treturn function shimAssign(obj, props1, props2, etc) {\n\t\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t\teach(Object(arguments[i]), function(val, key) {\n\t\t\t\t\tobj[key] = val\n\t\t\t\t})\n\t\t\t}\t\t\t\n\t\t\treturn obj\n\t\t}\n\t}\n}\n\nfunction make_create() {\n\tif (Object.create) {\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\treturn assign.apply(this, [Object.create(obj)].concat(assignArgsList))\n\t\t}\n\t} else {\n\t\tfunction F() {} // eslint-disable-line no-inner-declarations\n\t\treturn function create(obj, assignProps1, assignProps2, etc) {\n\t\t\tvar assignArgsList = slice(arguments, 1)\n\t\t\tF.prototype = obj\n\t\t\treturn assign.apply(this, [new F()].concat(assignArgsList))\n\t\t}\n\t}\n}\n\nfunction make_trim() {\n\tif (String.prototype.trim) {\n\t\treturn function trim(str) {\n\t\t\treturn String.prototype.trim.call(str)\n\t\t}\n\t} else {\n\t\treturn function trim(str) {\n\t\t\treturn str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n\t\t}\n\t}\n}\n\nfunction bind(obj, fn) {\n\treturn function() {\n\t\treturn fn.apply(obj, Array.prototype.slice.call(arguments, 0))\n\t}\n}\n\nfunction slice(arr, index) {\n\treturn Array.prototype.slice.call(arr, index || 0)\n}\n\nfunction each(obj, fn) {\n\tpluck(obj, function(val, key) {\n\t\tfn(val, key)\n\t\treturn false\n\t})\n}\n\nfunction map(obj, fn) {\n\tvar res = (isList(obj) ? [] : {})\n\tpluck(obj, function(v, k) {\n\t\tres[k] = fn(v, k)\n\t\treturn false\n\t})\n\treturn res\n}\n\nfunction pluck(obj, fn) {\n\tif (isList(obj)) {\n\t\tfor (var i=0; i<obj.length; i++) {\n\t\t\tif (fn(obj[i], i)) {\n\t\t\t\treturn obj[i]\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor (var key in obj) {\n\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\tif (fn(obj[key], key)) {\n\t\t\t\t\treturn obj[key]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction isList(val) {\n\treturn (val != null && typeof val != 'function' && typeof val.length == 'number')\n}\n\nfunction isFunction(val) {\n\treturn val && {}.toString.call(val) === '[object Function]'\n}\n\nfunction isObject(val) {\n\treturn val && {}.toString.call(val) === '[object Object]'\n}\n","var util = require('./util')\nvar slice = util.slice\nvar pluck = util.pluck\nvar each = util.each\nvar bind = util.bind\nvar create = util.create\nvar isList = util.isList\nvar isFunction = util.isFunction\nvar isObject = util.isObject\n\nmodule.exports = {\n\tcreateStore: createStore\n}\n\nvar storeAPI = {\n\tversion: '2.0.12',\n\tenabled: false,\n\t\n\t// get returns the value of the given key. If that value\n\t// is undefined, it returns optionalDefaultValue instead.\n\tget: function(key, optionalDefaultValue) {\n\t\tvar data = this.storage.read(this._namespacePrefix + key)\n\t\treturn this._deserialize(data, optionalDefaultValue)\n\t},\n\n\t// set will store the given value at key and returns value.\n\t// Calling set with value === undefined is equivalent to calling remove.\n\tset: function(key, value) {\n\t\tif (value === undefined) {\n\t\t\treturn this.remove(key)\n\t\t}\n\t\tthis.storage.write(this._namespacePrefix + key, this._serialize(value))\n\t\treturn value\n\t},\n\n\t// remove deletes the key and value stored at the given key.\n\tremove: function(key) {\n\t\tthis.storage.remove(this._namespacePrefix + key)\n\t},\n\n\t// each will call the given callback once for each key-value pair\n\t// in this store.\n\teach: function(callback) {\n\t\tvar self = this\n\t\tthis.storage.each(function(val, namespacedKey) {\n\t\t\tcallback.call(self, self._deserialize(val), (namespacedKey || '').replace(self._namespaceRegexp, ''))\n\t\t})\n\t},\n\n\t// clearAll will remove all the stored key-value pairs in this store.\n\tclearAll: function() {\n\t\tthis.storage.clearAll()\n\t},\n\n\t// additional functionality that can't live in plugins\n\t// ---------------------------------------------------\n\n\t// hasNamespace returns true if this store instance has the given namespace.\n\thasNamespace: function(namespace) {\n\t\treturn (this._namespacePrefix == '__storejs_'+namespace+'_')\n\t},\n\n\t// createStore creates a store.js instance with the first\n\t// functioning storage in the list of storage candidates,\n\t// and applies the the given mixins to the instance.\n\tcreateStore: function() {\n\t\treturn createStore.apply(this, arguments)\n\t},\n\t\n\taddPlugin: function(plugin) {\n\t\tthis._addPlugin(plugin)\n\t},\n\t\n\tnamespace: function(namespace) {\n\t\treturn createStore(this.storage, this.plugins, namespace)\n\t}\n}\n\nfunction _warn() {\n\tvar _console = (typeof console == 'undefined' ? null : console)\n\tif (!_console) { return }\n\tvar fn = (_console.warn ? _console.warn : _console.log)\n\tfn.apply(_console, arguments)\n}\n\nfunction createStore(storages, plugins, namespace) {\n\tif (!namespace) {\n\t\tnamespace = ''\n\t}\n\tif (storages && !isList(storages)) {\n\t\tstorages = [storages]\n\t}\n\tif (plugins && !isList(plugins)) {\n\t\tplugins = [plugins]\n\t}\n\n\tvar namespacePrefix = (namespace ? '__storejs_'+namespace+'_' : '')\n\tvar namespaceRegexp = (namespace ? new RegExp('^'+namespacePrefix) : null)\n\tvar legalNamespaces = /^[a-zA-Z0-9_\\-]*$/ // alpha-numeric + underscore and dash\n\tif (!legalNamespaces.test(namespace)) {\n\t\tthrow new Error('store.js namespaces can only have alphanumerics + underscores and dashes')\n\t}\n\t\n\tvar _privateStoreProps = {\n\t\t_namespacePrefix: namespacePrefix,\n\t\t_namespaceRegexp: namespaceRegexp,\n\n\t\t_testStorage: function(storage) {\n\t\t\ttry {\n\t\t\t\tvar testStr = '__storejs__test__'\n\t\t\t\tstorage.write(testStr, testStr)\n\t\t\t\tvar ok = (storage.read(testStr) === testStr)\n\t\t\t\tstorage.remove(testStr)\n\t\t\t\treturn ok\n\t\t\t} catch(e) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\n\t\t_assignPluginFnProp: function(pluginFnProp, propName) {\n\t\t\tvar oldFn = this[propName]\n\t\t\tthis[propName] = function pluginFn() {\n\t\t\t\tvar args = slice(arguments, 0)\n\t\t\t\tvar self = this\n\n\t\t\t\t// super_fn calls the old function which was overwritten by\n\t\t\t\t// this mixin.\n\t\t\t\tfunction super_fn() {\n\t\t\t\t\tif (!oldFn) { return }\n\t\t\t\t\teach(arguments, function(arg, i) {\n\t\t\t\t\t\targs[i] = arg\n\t\t\t\t\t})\n\t\t\t\t\treturn oldFn.apply(self, args)\n\t\t\t\t}\n\n\t\t\t\t// Give mixing function access to super_fn by prefixing all mixin function\n\t\t\t\t// arguments with super_fn.\n\t\t\t\tvar newFnArgs = [super_fn].concat(args)\n\n\t\t\t\treturn pluginFnProp.apply(self, newFnArgs)\n\t\t\t}\n\t\t},\n\n\t\t_serialize: function(obj) {\n\t\t\treturn JSON.stringify(obj)\n\t\t},\n\n\t\t_deserialize: function(strVal, defaultVal) {\n\t\t\tif (!strVal) { return defaultVal }\n\t\t\t// It is possible that a raw string value has been previously stored\n\t\t\t// in a storage without using store.js, meaning it will be a raw\n\t\t\t// string value instead of a JSON serialized string. By defaulting\n\t\t\t// to the raw string value in case of a JSON parse error, we allow\n\t\t\t// for past stored values to be forwards-compatible with store.js\n\t\t\tvar val = ''\n\t\t\ttry { val = JSON.parse(strVal) }\n\t\t\tcatch(e) { val = strVal }\n\n\t\t\treturn (val !== undefined ? val : defaultVal)\n\t\t},\n\t\t\n\t\t_addStorage: function(storage) {\n\t\t\tif (this.enabled) { return }\n\t\t\tif (this._testStorage(storage)) {\n\t\t\t\tthis.storage = storage\n\t\t\t\tthis.enabled = true\n\t\t\t}\n\t\t},\n\n\t\t_addPlugin: function(plugin) {\n\t\t\tvar self = this\n\n\t\t\t// If the plugin is an array, then add all plugins in the array.\n\t\t\t// This allows for a plugin to depend on other plugins.\n\t\t\tif (isList(plugin)) {\n\t\t\t\teach(plugin, function(plugin) {\n\t\t\t\t\tself._addPlugin(plugin)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// Keep track of all plugins we've seen so far, so that we\n\t\t\t// don't add any of them twice.\n\t\t\tvar seenPlugin = pluck(this.plugins, function(seenPlugin) {\n\t\t\t\treturn (plugin === seenPlugin)\n\t\t\t})\n\t\t\tif (seenPlugin) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.plugins.push(plugin)\n\n\t\t\t// Check that the plugin is properly formed\n\t\t\tif (!isFunction(plugin)) {\n\t\t\t\tthrow new Error('Plugins must be function values that return objects')\n\t\t\t}\n\n\t\t\tvar pluginProperties = plugin.call(this)\n\t\t\tif (!isObject(pluginProperties)) {\n\t\t\t\tthrow new Error('Plugins must return an object of function properties')\n\t\t\t}\n\n\t\t\t// Add the plugin function properties to this store instance.\n\t\t\teach(pluginProperties, function(pluginFnProp, propName) {\n\t\t\t\tif (!isFunction(pluginFnProp)) {\n\t\t\t\t\tthrow new Error('Bad plugin property: '+propName+' from plugin '+plugin.name+'. Plugins should only return functions.')\n\t\t\t\t}\n\t\t\t\tself._assignPluginFnProp(pluginFnProp, propName)\n\t\t\t})\n\t\t},\n\t\t\n\t\t// Put deprecated properties in the private API, so as to not expose it to accidential\n\t\t// discovery through inspection of the store object.\n\t\t\n\t\t// Deprecated: addStorage\n\t\taddStorage: function(storage) {\n\t\t\t_warn('store.addStorage(storage) is deprecated. Use createStore([storages])')\n\t\t\tthis._addStorage(storage)\n\t\t}\n\t}\n\n\tvar store = create(_privateStoreProps, storeAPI, {\n\t\tplugins: []\n\t})\n\tstore.raw = {}\n\teach(store, function(prop, propName) {\n\t\tif (isFunction(prop)) {\n\t\t\tstore.raw[propName] = bind(store, prop)\t\t\t\n\t\t}\n\t})\n\teach(storages, function(storage) {\n\t\tstore._addStorage(storage)\n\t})\n\teach(plugins, function(plugin) {\n\t\tstore._addPlugin(plugin)\n\t})\n\treturn store\n}\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'localStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nfunction localStorage() {\n\treturn Global.localStorage\n}\n\nfunction read(key) {\n\treturn localStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn localStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = localStorage().length - 1; i >= 0; i--) {\n\t\tvar key = localStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn localStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn localStorage().clear()\n}\n","// oldFF-globalStorage provides storage for Firefox\n// versions 6 and 7, where no localStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldFF-globalStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar globalStorage = Global.globalStorage\n\nfunction read(key) {\n\treturn globalStorage[key]\n}\n\nfunction write(key, data) {\n\tglobalStorage[key] = data\n}\n\nfunction each(fn) {\n\tfor (var i = globalStorage.length - 1; i >= 0; i--) {\n\t\tvar key = globalStorage.key(i)\n\t\tfn(globalStorage[key], key)\n\t}\n}\n\nfunction remove(key) {\n\treturn globalStorage.removeItem(key)\n}\n\nfunction clearAll() {\n\teach(function(key, _) {\n\t\tdelete globalStorage[key]\n\t})\n}\n","// oldIE-userDataStorage provides storage for Internet Explorer\n// versions 6 and 7, where no localStorage, sessionStorage, etc\n// is available.\n\nvar util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'oldIE-userDataStorage',\n\twrite: write,\n\tread: read,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar storageName = 'storejs'\nvar doc = Global.document\nvar _withStorageEl = _makeIEStorageElFunction()\nvar disable = (Global.navigator ? Global.navigator.userAgent : '').match(/ (MSIE 8|MSIE 9|MSIE 10)\\./) // MSIE 9.x, MSIE 10.x\n\nfunction write(unfixedKey, data) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.setAttribute(fixedKey, data)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction read(unfixedKey) {\n\tif (disable) { return }\n\tvar fixedKey = fixKey(unfixedKey)\n\tvar res = null\n\t_withStorageEl(function(storageEl) {\n\t\tres = storageEl.getAttribute(fixedKey)\n\t})\n\treturn res\n}\n\nfunction each(callback) {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tvar attr = attributes[i]\n\t\t\tcallback(storageEl.getAttribute(attr.name), attr.name)\n\t\t}\n\t})\n}\n\nfunction remove(unfixedKey) {\n\tvar fixedKey = fixKey(unfixedKey)\n\t_withStorageEl(function(storageEl) {\n\t\tstorageEl.removeAttribute(fixedKey)\n\t\tstorageEl.save(storageName)\n\t})\n}\n\nfunction clearAll() {\n\t_withStorageEl(function(storageEl) {\n\t\tvar attributes = storageEl.XMLDocument.documentElement.attributes\n\t\tstorageEl.load(storageName)\n\t\tfor (var i=attributes.length-1; i>=0; i--) {\n\t\t\tstorageEl.removeAttribute(attributes[i].name)\n\t\t}\n\t\tstorageEl.save(storageName)\n\t})\n}\n\n// Helpers\n//////////\n\n// In IE7, keys cannot start with a digit or contain certain chars.\n// See https://github.com/marcuswestin/store.js/issues/40\n// See https://github.com/marcuswestin/store.js/issues/83\nvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")\nfunction fixKey(key) {\n\treturn key.replace(/^\\d/, '___$&').replace(forbiddenCharsRegex, '___')\n}\n\nfunction _makeIEStorageElFunction() {\n\tif (!doc || !doc.documentElement || !doc.documentElement.addBehavior) {\n\t\treturn null\n\t}\n\tvar scriptTag = 'script',\n\t\tstorageOwner,\n\t\tstorageContainer,\n\t\tstorageEl\n\n\t// Since #userData storage applies only to specific paths, we need to\n\t// somehow link our data to a specific path.  We choose /favicon.ico\n\t// as a pretty safe option, since all browsers already make a request to\n\t// this URL anyway and being a 404 will not hurt us here.  We wrap an\n\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object\n\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)\n\t// since the iframe access rules appear to allow direct access and\n\t// manipulation of the document element, even for a 404 page.  This\n\t// document can be used instead of the current document (which would\n\t// have been limited to the current path) to perform #userData storage.\n\ttry {\n\t\t/* global ActiveXObject */\n\t\tstorageContainer = new ActiveXObject('htmlfile')\n\t\tstorageContainer.open()\n\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>')\n\t\tstorageContainer.close()\n\t\tstorageOwner = storageContainer.w.frames[0].document\n\t\tstorageEl = storageOwner.createElement('div')\n\t} catch(e) {\n\t\t// somehow ActiveXObject instantiation failed (perhaps some special\n\t\t// security settings or otherwse), fall back to per-path storage\n\t\tstorageEl = doc.createElement('div')\n\t\tstorageOwner = doc.body\n\t}\n\n\treturn function(storeFunction) {\n\t\tvar args = [].slice.call(arguments, 0)\n\t\targs.unshift(storageEl)\n\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx\n\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx\n\t\tstorageOwner.appendChild(storageEl)\n\t\tstorageEl.addBehavior('#default#userData')\n\t\tstorageEl.load(storageName)\n\t\tstoreFunction.apply(this, args)\n\t\tstorageOwner.removeChild(storageEl)\n\t\treturn\n\t}\n}\n","// cookieStorage is useful Safari private browser mode, where localStorage\n// doesn't work but cookies do. This implementation is adopted from\n// https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage\n\nvar util = require('../src/util')\nvar Global = util.Global\nvar trim = util.trim\n\nmodule.exports = {\n\tname: 'cookieStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar doc = Global.document\n\nfunction read(key) {\n\tif (!key || !_has(key)) { return null }\n\tvar regexpStr = \"(?:^|.*;\\\\s*)\" +\n\t\tescape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") +\n\t\t\"\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*\"\n\treturn unescape(doc.cookie.replace(new RegExp(regexpStr), \"$1\"))\n}\n\nfunction each(callback) {\n\tvar cookies = doc.cookie.split(/; ?/g)\n\tfor (var i = cookies.length - 1; i >= 0; i--) {\n\t\tif (!trim(cookies[i])) {\n\t\t\tcontinue\n\t\t}\n\t\tvar kvp = cookies[i].split('=')\n\t\tvar key = unescape(kvp[0])\n\t\tvar val = unescape(kvp[1])\n\t\tcallback(val, key)\n\t}\n}\n\nfunction write(key, data) {\n\tif(!key) { return }\n\tdoc.cookie = escape(key) + \"=\" + escape(data) + \"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/\"\n}\n\nfunction remove(key) {\n\tif (!key || !_has(key)) {\n\t\treturn\n\t}\n\tdoc.cookie = escape(key) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\"\n}\n\nfunction clearAll() {\n\teach(function(_, key) {\n\t\tremove(key)\n\t})\n}\n\nfunction _has(key) {\n\treturn (new RegExp(\"(?:^|;\\\\s*)\" + escape(key).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(doc.cookie)\n}\n","var util = require('../src/util')\nvar Global = util.Global\n\nmodule.exports = {\n\tname: 'sessionStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll\n}\n\nfunction sessionStorage() {\n\treturn Global.sessionStorage\n}\n\nfunction read(key) {\n\treturn sessionStorage().getItem(key)\n}\n\nfunction write(key, data) {\n\treturn sessionStorage().setItem(key, data)\n}\n\nfunction each(fn) {\n\tfor (var i = sessionStorage().length - 1; i >= 0; i--) {\n\t\tvar key = sessionStorage().key(i)\n\t\tfn(read(key), key)\n\t}\n}\n\nfunction remove(key) {\n\treturn sessionStorage().removeItem(key)\n}\n\nfunction clearAll() {\n\treturn sessionStorage().clear()\n}\n","// memoryStorage is a useful last fallback to ensure that the store\n// is functions (meaning store.get(), store.set(), etc will all function).\n// However, stored values will not persist when the browser navigates to\n// a new page or reloads the current page.\n\nmodule.exports = {\n\tname: 'memoryStorage',\n\tread: read,\n\twrite: write,\n\teach: each,\n\tremove: remove,\n\tclearAll: clearAll,\n}\n\nvar memoryStorage = {}\n\nfunction read(key) {\n\treturn memoryStorage[key]\n}\n\nfunction write(key, data) {\n\tmemoryStorage[key] = data\n}\n\nfunction each(callback) {\n\tfor (var key in memoryStorage) {\n\t\tif (memoryStorage.hasOwnProperty(key)) {\n\t\t\tcallback(memoryStorage[key], key)\n\t\t}\n\t}\n}\n\nfunction remove(key) {\n\tdelete memoryStorage[key]\n}\n\nfunction clearAll(key) {\n\tmemoryStorage = {}\n}\n","module.exports = [\n\t// Listed in order of usage preference\n\trequire('./localStorage'),\n\trequire('./oldFF-globalStorage'),\n\trequire('./oldIE-userDataStorage'),\n\trequire('./cookieStorage'),\n\trequire('./sessionStorage'),\n\trequire('./memoryStorage')\n]\n","/* eslint-disable */\n\n//  json2.js\n//  2016-10-28\n//  Public Domain.\n//  NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n//  See http://www.JSON.org/js.html\n//  This code should be minified before deployment.\n//  See http://javascript.crockford.com/jsmin.html\n\n//  USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n//  NOT CONTROL.\n\n//  This file creates a global JSON object containing two methods: stringify\n//  and parse. This file provides the ES5 JSON capability to ES3 systems.\n//  If a project might run on IE8 or earlier, then this file should be included.\n//  This file does nothing on ES5 systems.\n\n//      JSON.stringify(value, replacer, space)\n//          value       any JavaScript value, usually an object or array.\n//          replacer    an optional parameter that determines how object\n//                      values are stringified for objects. It can be a\n//                      function or an array of strings.\n//          space       an optional parameter that specifies the indentation\n//                      of nested structures. If it is omitted, the text will\n//                      be packed without extra whitespace. If it is a number,\n//                      it will specify the number of spaces to indent at each\n//                      level. If it is a string (such as \"\\t\" or \"&nbsp;\"),\n//                      it contains the characters used to indent at each level.\n//          This method produces a JSON text from a JavaScript value.\n//          When an object value is found, if the object contains a toJSON\n//          method, its toJSON method will be called and the result will be\n//          stringified. A toJSON method does not serialize: it returns the\n//          value represented by the name/value pair that should be serialized,\n//          or undefined if nothing should be serialized. The toJSON method\n//          will be passed the key associated with the value, and this will be\n//          bound to the value.\n\n//          For example, this would serialize Dates as ISO strings.\n\n//              Date.prototype.toJSON = function (key) {\n//                  function f(n) {\n//                      // Format integers to have at least two digits.\n//                      return (n < 10)\n//                          ? \"0\" + n\n//                          : n;\n//                  }\n//                  return this.getUTCFullYear()   + \"-\" +\n//                       f(this.getUTCMonth() + 1) + \"-\" +\n//                       f(this.getUTCDate())      + \"T\" +\n//                       f(this.getUTCHours())     + \":\" +\n//                       f(this.getUTCMinutes())   + \":\" +\n//                       f(this.getUTCSeconds())   + \"Z\";\n//              };\n\n//          You can provide an optional replacer method. It will be passed the\n//          key and value of each member, with this bound to the containing\n//          object. The value that is returned from your method will be\n//          serialized. If your method returns undefined, then the member will\n//          be excluded from the serialization.\n\n//          If the replacer parameter is an array of strings, then it will be\n//          used to select the members to be serialized. It filters the results\n//          such that only members with keys listed in the replacer array are\n//          stringified.\n\n//          Values that do not have JSON representations, such as undefined or\n//          functions, will not be serialized. Such values in objects will be\n//          dropped; in arrays they will be replaced with null. You can use\n//          a replacer function to replace those with JSON values.\n\n//          JSON.stringify(undefined) returns undefined.\n\n//          The optional space parameter produces a stringification of the\n//          value that is filled with line breaks and indentation to make it\n//          easier to read.\n\n//          If the space parameter is a non-empty string, then that string will\n//          be used for indentation. If the space parameter is a number, then\n//          the indentation will be that many spaces.\n\n//          Example:\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}]);\n//          // text is '[\"e\",{\"pluribus\":\"unum\"}]'\n\n//          text = JSON.stringify([\"e\", {pluribus: \"unum\"}], null, \"\\t\");\n//          // text is '[\\n\\t\"e\",\\n\\t{\\n\\t\\t\"pluribus\": \"unum\"\\n\\t}\\n]'\n\n//          text = JSON.stringify([new Date()], function (key, value) {\n//              return this[key] instanceof Date\n//                  ? \"Date(\" + this[key] + \")\"\n//                  : value;\n//          });\n//          // text is '[\"Date(---current time---)\"]'\n\n//      JSON.parse(text, reviver)\n//          This method parses a JSON text to produce an object or array.\n//          It can throw a SyntaxError exception.\n\n//          The optional reviver parameter is a function that can filter and\n//          transform the results. It receives each of the keys and values,\n//          and its return value is used instead of the original value.\n//          If it returns what it received, then the structure is not modified.\n//          If it returns undefined then the member is deleted.\n\n//          Example:\n\n//          // Parse the text. Values that look like ISO date strings will\n//          // be converted to Date objects.\n\n//          myData = JSON.parse(text, function (key, value) {\n//              var a;\n//              if (typeof value === \"string\") {\n//                  a =\n//   /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\n//                  if (a) {\n//                      return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\n//                          +a[5], +a[6]));\n//                  }\n//              }\n//              return value;\n//          });\n\n//          myData = JSON.parse('[\"Date(09/09/2001)\"]', function (key, value) {\n//              var d;\n//              if (typeof value === \"string\" &&\n//                      value.slice(0, 5) === \"Date(\" &&\n//                      value.slice(-1) === \")\") {\n//                  d = new Date(value.slice(5, -1));\n//                  if (d) {\n//                      return d;\n//                  }\n//              }\n//              return value;\n//          });\n\n//  This is a reference implementation. You are free to copy, modify, or\n//  redistribute.\n\n/*jslint\n    eval, for, this\n*/\n\n/*property\n    JSON, apply, call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,\n    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,\n    lastIndex, length, parse, prototype, push, replace, slice, stringify,\n    test, toJSON, toString, valueOf\n*/\n\n\n// Create a JSON object only if one does not already exist. We create the\n// methods in a closure to avoid creating global variables.\n\nif (typeof JSON !== \"object\") {\n    JSON = {};\n}\n\n(function () {\n    \"use strict\";\n\n    var rx_one = /^[\\],:{}\\s]*$/;\n    var rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\n    var rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\n    var rx_four = /(?:^|:|,)(?:\\s*\\[)+/g;\n    var rx_escapable = /[\\\\\"\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n    var rx_dangerous = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g;\n\n    function f(n) {\n        // Format integers to have at least two digits.\n        return n < 10\n            ? \"0\" + n\n            : n;\n    }\n\n    function this_value() {\n        return this.valueOf();\n    }\n\n    if (typeof Date.prototype.toJSON !== \"function\") {\n\n        Date.prototype.toJSON = function () {\n\n            return isFinite(this.valueOf())\n                ? this.getUTCFullYear() + \"-\" +\n                        f(this.getUTCMonth() + 1) + \"-\" +\n                        f(this.getUTCDate()) + \"T\" +\n                        f(this.getUTCHours()) + \":\" +\n                        f(this.getUTCMinutes()) + \":\" +\n                        f(this.getUTCSeconds()) + \"Z\"\n                : null;\n        };\n\n        Boolean.prototype.toJSON = this_value;\n        Number.prototype.toJSON = this_value;\n        String.prototype.toJSON = this_value;\n    }\n\n    var gap;\n    var indent;\n    var meta;\n    var rep;\n\n\n    function quote(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n\n        rx_escapable.lastIndex = 0;\n        return rx_escapable.test(string)\n            ? \"\\\"\" + string.replace(rx_escapable, function (a) {\n                var c = meta[a];\n                return typeof c === \"string\"\n                    ? c\n                    : \"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n            }) + \"\\\"\"\n            : \"\\\"\" + string + \"\\\"\";\n    }\n\n\n    function str(key, holder) {\n\n// Produce a string from holder[key].\n\n        var i;          // The loop counter.\n        var k;          // The member key.\n        var v;          // The member value.\n        var length;\n        var mind = gap;\n        var partial;\n        var value = holder[key];\n\n// If the value has a toJSON method, call it to obtain a replacement value.\n\n        if (value && typeof value === \"object\" &&\n                typeof value.toJSON === \"function\") {\n            value = value.toJSON(key);\n        }\n\n// If we were called with a replacer function, then call the replacer to\n// obtain a replacement value.\n\n        if (typeof rep === \"function\") {\n            value = rep.call(holder, key, value);\n        }\n\n// What happens next depends on the value's type.\n\n        switch (typeof value) {\n        case \"string\":\n            return quote(value);\n\n        case \"number\":\n\n// JSON numbers must be finite. Encode non-finite numbers as null.\n\n            return isFinite(value)\n                ? String(value)\n                : \"null\";\n\n        case \"boolean\":\n        case \"null\":\n\n// If the value is a boolean or null, convert it to a string. Note:\n// typeof null does not produce \"null\". The case is included here in\n// the remote chance that this gets fixed someday.\n\n            return String(value);\n\n// If the type is \"object\", we might be dealing with an object or an array or\n// null.\n\n        case \"object\":\n\n// Due to a specification blunder in ECMAScript, typeof null is \"object\",\n// so watch out for that case.\n\n            if (!value) {\n                return \"null\";\n            }\n\n// Make an array to hold the partial results of stringifying this object value.\n\n            gap += indent;\n            partial = [];\n\n// Is the value an array?\n\n            if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n\n// The value is an array. Stringify every element. Use null as a placeholder\n// for non-JSON values.\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || \"null\";\n                }\n\n// Join all of the elements together, separated with commas, and wrap them in\n// brackets.\n\n                v = partial.length === 0\n                    ? \"[]\"\n                    : gap\n                        ? \"[\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"]\"\n                        : \"[\" + partial.join(\",\") + \"]\";\n                gap = mind;\n                return v;\n            }\n\n// If the replacer is an array, use it to select the members to be stringified.\n\n            if (rep && typeof rep === \"object\") {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    if (typeof rep[i] === \"string\") {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            } else {\n\n// Otherwise, iterate through all of the keys in the object.\n\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (\n                                gap\n                                    ? \": \"\n                                    : \":\"\n                            ) + v);\n                        }\n                    }\n                }\n            }\n\n// Join all of the member texts together, separated with commas,\n// and wrap them in braces.\n\n            v = partial.length === 0\n                ? \"{}\"\n                : gap\n                    ? \"{\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"}\"\n                    : \"{\" + partial.join(\",\") + \"}\";\n            gap = mind;\n            return v;\n        }\n    }\n\n// If the JSON object does not yet have a stringify method, give it one.\n\n    if (typeof JSON.stringify !== \"function\") {\n        meta = {    // table of character substitutions\n            \"\\b\": \"\\\\b\",\n            \"\\t\": \"\\\\t\",\n            \"\\n\": \"\\\\n\",\n            \"\\f\": \"\\\\f\",\n            \"\\r\": \"\\\\r\",\n            \"\\\"\": \"\\\\\\\"\",\n            \"\\\\\": \"\\\\\\\\\"\n        };\n        JSON.stringify = function (value, replacer, space) {\n\n// The stringify method takes a value and an optional replacer, and an optional\n// space parameter, and returns a JSON text. The replacer can be a function\n// that can replace values, or an array of strings that will select the keys.\n// A default replacer method can be provided. Use of the space parameter can\n// produce text that is more easily readable.\n\n            var i;\n            gap = \"\";\n            indent = \"\";\n\n// If the space parameter is a number, make an indent string containing that\n// many spaces.\n\n            if (typeof space === \"number\") {\n                for (i = 0; i < space; i += 1) {\n                    indent += \" \";\n                }\n\n// If the space parameter is a string, it will be used as the indent string.\n\n            } else if (typeof space === \"string\") {\n                indent = space;\n            }\n\n// If there is a replacer, it must be a function or an array.\n// Otherwise, throw an error.\n\n            rep = replacer;\n            if (replacer && typeof replacer !== \"function\" &&\n                    (typeof replacer !== \"object\" ||\n                    typeof replacer.length !== \"number\")) {\n                throw new Error(\"JSON.stringify\");\n            }\n\n// Make a fake root object containing our value under the key of \"\".\n// Return the result of stringifying the value.\n\n            return str(\"\", {\"\": value});\n        };\n    }\n\n\n// If the JSON object does not yet have a parse method, give it one.\n\n    if (typeof JSON.parse !== \"function\") {\n        JSON.parse = function (text, reviver) {\n\n// The parse method takes a text and an optional reviver function, and returns\n// a JavaScript value if the text is a valid JSON text.\n\n            var j;\n\n            function walk(holder, key) {\n\n// The walk method is used to recursively walk the resulting structure so\n// that modifications can be made.\n\n                var k;\n                var v;\n                var value = holder[key];\n                if (value && typeof value === \"object\") {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            } else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n\n\n// Parsing happens in four stages. In the first stage, we replace certain\n// Unicode characters with escape sequences. JavaScript handles many characters\n// incorrectly, either silently deleting them, or treating them as line endings.\n\n            text = String(text);\n            rx_dangerous.lastIndex = 0;\n            if (rx_dangerous.test(text)) {\n                text = text.replace(rx_dangerous, function (a) {\n                    return \"\\\\u\" +\n                            (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n\n// In the second stage, we run the text against regular expressions that look\n// for non-JSON patterns. We are especially concerned with \"()\" and \"new\"\n// because they can cause invocation, and \"=\" because it can cause mutation.\n// But just to be safe, we want to reject all unexpected forms.\n\n// We split the second stage into 4 regexp operations in order to work around\n// crippling inefficiencies in IE's and Safari's regexp engines. First we\n// replace the JSON backslash pairs with \"@\" (a non-JSON character). Second, we\n// replace all simple value tokens with \"]\" characters. Third, we delete all\n// open brackets that follow a colon or comma or that begin the text. Finally,\n// we look to see that the remaining characters are only whitespace or \"]\" or\n// \",\" or \":\" or \"{\" or \"}\". If that is so, then the text is safe for eval.\n\n            if (\n                rx_one.test(\n                    text\n                        .replace(rx_two, \"@\")\n                        .replace(rx_three, \"]\")\n                        .replace(rx_four, \"\")\n                )\n            ) {\n\n// In the third stage we use the eval function to compile the text into a\n// JavaScript structure. The \"{\" operator is subject to a syntactic ambiguity\n// in JavaScript: it can begin a block or an object literal. We wrap the text\n// in parens to eliminate the ambiguity.\n\n                j = eval(\"(\" + text + \")\");\n\n// In the optional fourth stage, we recursively walk the new structure, passing\n// each name/value pair to a reviver function for possible transformation.\n\n                return (typeof reviver === \"function\")\n                    ? walk({\"\": j}, \"\")\n                    : j;\n            }\n\n// If the text is not JSON parseable, then a SyntaxError is thrown.\n\n            throw new SyntaxError(\"JSON.parse\");\n        };\n    }\n}());","module.exports = json2Plugin\n\nfunction json2Plugin() {\n\trequire('./lib/json2')\n\treturn {}\n}\n","var engine = require('../src/store-engine')\n\nvar storages = require('../storages/all')\nvar plugins = [require('../plugins/json2')]\n\nmodule.exports = engine.createStore(storages, plugins)\n","import store from \"store\";\n\nexport var Preferences = {\n  muteBackgroundMusic: false,\n  muteAll: false,\n};\n\nvar _origPreferences = { ...Preferences };\n\nexport function resetPreferences() {\n  Preferences = { ..._origPreferences };\n}\n\nexport function savePreferences() {\n  store.set(\"pref\", Preferences);\n}\n\nexport function loadPreferences() {\n  // overwrite but allow new properties\n  Preferences = { ...Preferences, ...store.get(\"pref\") };\n}\n","import { Loadable, Sound } from \"excalibur\";\nimport classNames from \"classnames\";\nimport Config from \"./config\";\nimport { Preferences, savePreferences } from \"./preferences\";\nimport { Resources } from \"./resources\";\n\nexport class SoundManager {\n  static setSoundSpecificVolume() {\n    Resources.sndCardExpired.volume = Config.CueCardExpiredVolume;\n    Resources.sndCardSuccess.volume = Config.CueCardSuccessVolume;\n    Resources.sndDoorOpen.volume = Config.DoorOpenVolume;\n    Resources.sndPickupItem.volume = Config.PickupItemVolume;\n  }\n\n  static init() {\n    SoundManager.setSoundSpecificVolume();\n    if (Preferences.muteBackgroundMusic) {\n      SoundManager.muteBackgroundMusic();\n    }\n    if (Preferences.muteAll) {\n      SoundManager.muteAll();\n    }\n\n    $(\"#mute-music\").on(\"click\", () => {\n      if (Preferences.muteBackgroundMusic) {\n        SoundManager.unmuteBackgroundMusic();\n      } else {\n        SoundManager.muteBackgroundMusic();\n      }\n      savePreferences();\n      return false;\n    });\n\n    $(\"#mute-all\").on(\"click\", () => {\n      if (Preferences.muteAll) {\n        SoundManager.unmuteAll();\n      } else {\n        SoundManager.muteAll();\n      }\n      savePreferences();\n      return false;\n    });\n  }\n\n  static muteAll() {\n    Preferences.muteAll = true;\n    Preferences.muteBackgroundMusic = true;\n\n    for (var r in Resources) {\n      let snd = (Resources as Record<string, Loadable>)[r];\n      if (snd instanceof Sound) {\n        snd.volume = 0;\n      }\n    }\n    SoundManager.muteBackgroundMusic();\n    SoundManager._updateMuteAllButton();\n  }\n\n  static unmuteAll() {\n    Preferences.muteAll = false;\n    Preferences.muteBackgroundMusic = false;\n\n    for (var r in Resources) {\n      let snd = (Resources as Record<string, Loadable>)[r];\n      if (snd instanceof Sound) {\n        snd.volume = Config.SoundVolume;\n      }\n    }\n    SoundManager.setSoundSpecificVolume();\n    SoundManager.unmuteBackgroundMusic();\n    SoundManager._updateMuteAllButton();\n  }\n\n  static startBackgroundMusic() {\n    // start bg music\n    Resources.music.volume = Preferences.muteBackgroundMusic\n      ? 0\n      : Config.BackgroundVolume;\n    Resources.music.loop = true;\n    if(!Resources.music.isPlaying())\n      Resources.music.play();\n  }\n\n  static stopBackgroundMusic() {\n    // stop bg music\n    Resources.music.loop = false;\n  }\n\n  static muteBackgroundMusic() {\n    Preferences.muteBackgroundMusic = true;\n\n    // mute bg music\n    Resources.music.volume = 0;\n    SoundManager._updateMusicButton();\n  }\n\n  static unmuteBackgroundMusic() {\n    Preferences.muteBackgroundMusic = false;\n\n    // unmute bg music\n    Resources.music.volume = Config.BackgroundVolume;\n\n    SoundManager._updateMusicButton();\n  }\n\n  private static _updateMusicButton() {\n    $(\"#mute-music i\").get(0).className = classNames(\"fa\", {\n      \"fa-music\": !Preferences.muteBackgroundMusic,\n      \"fa-play\": Preferences.muteBackgroundMusic,\n    });\n  }\n\n  private static _updateMuteAllButton() {\n    $(\"#mute-all i\").get(0).className = classNames(\"fa\", {\n      \"fa-volume-up\": !Preferences.muteAll,\n      \"fa-volume-off\": Preferences.muteAll,\n    });\n  }\n}\n","import { Actor, ActorArgs, Graphics, vec, Color } from \"excalibur\";\nimport { Resources } from \"./resources\";\n\nexport interface DialogCardOptions {\n  topPadding?: number\n}\nexport class DialogCard extends Actor {\n  private topPadding: number;\n\n  constructor(private text: string[], options: ActorArgs & DialogCardOptions) {\n    super({ ...options, width: 837, height: 480 });\n    this.topPadding = options.topPadding || 0;\n  }\n\n  onInitialize() {\n\n    let graphicsMember: Graphics.GraphicsGrouping[] = [];\n    graphicsMember.push({\n      graphic: Graphics.Sprite.from(Resources.titleCard),\n      pos: vec(0, 0)\n    });\n    for (let index = 0; index < this.text.length; index++) {\n      graphicsMember.push({\n        graphic: new Graphics.Text({\n          text: this.text[index],\n          color: Color.White,\n          font: new Graphics.Font({\n            family: \"Century, Georgia, serif\",\n            size: 36,\n            textAlign: Graphics.TextAlign.Center,\n          }),\n        } as any),\n        pos: vec(\n          this.width / 2,\n          this.height * ((index + 1) / (this.text.length + 1)) + this.topPadding\n        ),\n      });\n    }\n    const group = new Graphics.GraphicsGroup({\n      members: graphicsMember,\n    });\n    group.width = this.width;\n    group.height = this.height;\n    this.graphics.add(group);\n  }\n}\n","import { Actor, Engine, ActorArgs, Graphics, vec } from \"excalibur\";\nimport Config from \"./config\";\nimport { Player } from \"./player\";\nimport { DialogCard } from \"./dialogCard\";\n\nexport class DirectorNPC extends Actor {\n  private _engine!: Engine;\n\n  constructor(private _player: Player, options: ActorArgs) {\n    super(options);\n  }\n\n  onInitialize(engine: Engine) {\n    this._engine = engine;\n    this._setupDrawing();\n  }\n\n  public playGreetingSequence() {\n    const cardPos = vec(\n      this._engine.halfDrawWidth,\n      this._engine.halfDrawHeight\n    );\n    const card1 = new DialogCard([\"You're late! The audience is waiting...\"], {\n      pos: cardPos,\n    });\n    const card2 = new DialogCard([\"Get ready and get out there!\"], {\n      pos: cardPos,\n    });\n    const card3 = new DialogCard(\n      [\"(Use the arrow keys or WASD keys to move)\"],\n      {\n        pos: cardPos,\n      }\n    );\n\n    this.scene.add(card3);\n    this.scene.add(card2);\n    this.scene.add(card1);\n\n    return this.actions\n      .delay(4000)\n      .callMethod(() => {\n        card1.kill();\n      })\n      .delay(4000)\n      .callMethod(() => {\n        card2.kill();\n      })\n      .delay(4000)\n      .callMethod(() => {\n        card3.kill();\n        this._player.AllowUserControl();\n      })\n      .asPromise();\n  }\n\n  private _setupDrawing() {\n    let sheet = Graphics.SpriteSheet.fromGrid({\n      image: this._player.getCharSprite(true),\n      grid: {\n        rows: 1,\n        columns: 10,\n        spriteHeight: Config.PlayerSpriteHeight,\n        spriteWidth: Config.PlayerSpriteWidth,\n      },\n    });\n    let sprites = sheet.sprites;\n    // let downSprite = sprites[0];\n    // let upSprite = sprites[3];\n    // let leftSprite = sprites[7];\n    let rightSprite = sprites[9];\n\n    // downSprite.origin?.setTo(0, 0.2);\n    // upSprite.origin?.setTo(0, 0.2);\n    // leftSprite.origin?.setTo(0, 0.2);\n    rightSprite.origin?.setTo(0, 0.2);\n\n    // this.graphics.add(\"down\", downSprite);\n    // this.graphics.add(\"up\", upSprite);\n    // this.graphics.add(\"left\", leftSprite);\n    this.graphics.add(rightSprite);\n  }\n}\n","import {\n  Actor,\n  Color,\n  Engine,\n  Graphics,\n  ActorArgs,\n  Util,\n  Vector,\n  vec,\n} from \"excalibur\";\nimport Config from \"./config\";\nimport { stats } from \"./session\";\nimport { Resources } from \"./resources\";\nimport { Tomatoes } from \"tomatoEmitter\";\n\nexport class AudienceMeter extends Actor {\n  private meterWidth: number = Config.AudienceMeterMaxWidth;\n  private meterHeight: number = Config.AudienceMeterHeight;\n  private meterSpeed: number = 3;\n  private meterRect!: Graphics.Rect;\n  private started: boolean = false;\n\n  private _tomatoes!: Tomatoes;\n  private _meterAnim!: Graphics.Animation;\n\n  constructor(tomatoes: Tomatoes) {\n    super({\n      x: Config.GameWidth / 2,\n      y: 0,\n      width: Config.AudienceMeterMaxWidth,\n      height: Config.AudienceMeterHeight,\n      anchor: vec(0.5, 0),\n    });\n\n    this._tomatoes = tomatoes;\n    this._setUpMeter();\n  }\n\n  public start(): void {\n    this.started = true;\n    this.graphics.getLayer(\"meter\")!.show(this._meterAnim);\n  }\n\n  update(gameEngine: Engine, delta: number) {\n    super.update(gameEngine, delta);\n    if (!this.started) return;\n    stats().reduceAudienceMeter((Config.ScoreDecayRate * delta) / 1000);\n    // let difference = stats().currentAudienceScore - this.meterRect.width;\n    // this.meterRect.width += difference;\n\n    this._meterAnim.goToFrame(\n      127 -\n        Math.floor(\n          (stats().currentAudienceScore / Config.AudienceMeterMaxWidth) * 128\n        )\n    );\n\n    if (\n      stats().currentAudienceScore / Config.AudienceMeterMaxWidth <=\n      Config.TomatoPercentage\n    ) {\n      this._tomatoes.show();\n    }\n\n    if (stats().currentAudienceScore == 0) {\n      stats().isGameOver = true;\n    }\n    this.started = !stats().isGameOver;\n  }\n\n  private _setUpMeter(): void {\n    const meterLayer = this.graphics.createLayer({ name: \"meter\", order: 0 });\n    this.meterRect = new Graphics.Rect({\n      width: stats().currentAudienceScore,\n      height: this.meterHeight,\n      color: Color.Green,\n    });\n\n    const sheet = Graphics.SpriteSheet.fromGrid({\n      image: Resources.audienceMeterSheet,\n      grid: {\n        rows: 128,\n        columns: 1,\n        spriteWidth: 934,\n        spriteHeight: 40,\n      },\n    });\n    this._meterAnim = Graphics.Animation.fromSpriteSheet(\n      sheet,\n      Util.range(0, 127),\n      200,\n      Graphics.AnimationStrategy.Freeze\n    );\n    this._meterAnim.pause();\n    this._meterAnim.goToFrame(\n      127 -\n        Math.floor(\n          (Config.AudienceMeterStartingWidth / Config.AudienceMeterMaxWidth) *\n            128\n        )\n    );\n  }\n}\n","import { Graphics, Scene, ParticleEmitter, EmitterType, vec } from \"excalibur\";\nimport Items from \"./items\";\nimport Config from \"./config\";\n\nexport class Tomatoes {\n  private _emitter: ParticleEmitter;\n  constructor(scene: Scene) {\n    this._emitter = new ParticleEmitter({\n      pos: vec(Config.GameWidth / 2, 100),\n      emitterType: EmitterType.Circle,\n      radius: 200,\n      minVel: 417,\n      maxVel: 589,\n      minAngle: Math.PI,\n      maxAngle: 0,\n      isEmitting: false,\n      emitRate: 5,\n      opacity: 1,\n      fadeFlag: true,\n      particleLife: 2000,\n      maxSize: 0.75,\n      minSize: 0.75,\n      // acceleration: vec(0, 460),\n      sprite: Items.getIconSprite(\"tomato\"),\n      particleRotationalVelocity: Math.PI / 2,\n      randomRotation: true,\n    });\n\n    scene.add(this._emitter);\n  }\n\n  public show() {\n    this._emitter.isEmitting = true;\n  }\n\n  public hide() {\n    this._emitter.isEmitting = false;\n  }\n}\n","import {\n  Scene,\n  Engine,\n  TileMap,\n  Actor,\n  vec,\n  Color,\n  Graphics,\n  CollisionType,\n  ActorArgs,\n  Vector,\n} from \"excalibur\";\nimport { ITiledMapLayer } from \"excalibur-tiled\";\nimport Config from \"./config\";\nimport { Resources } from \"./resources\";\nimport { CueCardManager } from \"./cuecardmanager\";\nimport { Player } from \"./player\";\nimport { CueCardTrigger, StageTriggerLocation } from \"./cuecardtrigger\";\nimport { StageProps, Costumes } from \"./constants\";\nimport Items, { Item } from \"./items\";\nimport { stats } from \"./session\";\nimport { SoundManager } from \"./soundManager\";\nimport { DirectorNPC } from \"./director\";\nimport { AudienceMeter } from \"./audienceMeter\";\nimport { Tomatoes } from \"./tomatoEmitter\";\n\nconst LAYER_IMPASSABLE = \"walls\";\nconst LAYER_TRIGGERS = \"triggers\";\nconst LAYER_ITEMS = \"items\";\nconst COSTUME_TYPE = \"costume\";\nconst PROP_TYPE = \"stageProp\";\nconst OBJECT_TRIGGERS = {\n  StageLeftTrigger: \"stageLeftTrigger\",\n  StageCenterTrigger: \"stageCenterTrigger\",\n  StageRightTrigger: \"stageRightTrigger\",\n};\n\nexport class Theater extends Scene {\n  public stageTileMap!: TileMap;\n  private player!: Player;\n  private cuecardmanager!: CueCardManager;\n  private director!: DirectorNPC;\n  private audienceMeter!: AudienceMeter;\n  private tomatoes!: Tomatoes;\n  public leftSpotlight!: CueCardTrigger;\n  public centerSpotlight!: CueCardTrigger;\n  public rightSpotlight!: CueCardTrigger;\n\n  public onInitialize(engine: Engine) {\n    this.tomatoes = new Tomatoes(this);\n    (window as any).tomatoes = this.tomatoes;\n    this.cuecardmanager = new CueCardManager(this);\n    this.audienceMeter = new AudienceMeter(this.tomatoes);\n    this.add(this.audienceMeter);\n    // Player\n    this.player = new Player(\n      Config.GameWidth,\n      Config.GameHeight - Config.PlayerHeight * 1.5\n    );\n    this.add(this.player);\n\n    // Director\n    this.director = new DirectorNPC(this.player, {\n      pos: vec(\n        Config.GameWidth - Config.PlayerWidth * 4,\n        Config.GameHeight - Config.PlayerHeight * 1.5\n      ),\n    });\n    this.add(this.director);\n\n    this.stageTileMap = Resources.map.getTileMap(\n      Config.StagePos.x,\n      Config.StagePos.y\n    );\n    this.stageTileMap.data.forEach((c) => (c.transform.z = -3));\n    this.add(this.stageTileMap);\n\n    Resources.map.data.layers.forEach((layer) => {\n      this.collectSolidTiles(layer);\n      this.collectStageTriggers(layer);\n    });\n\n    this.spawnItems();\n\n    let backgroundActor = new Actor({\n      width: 50,\n      height: 50,\n      x: Config.GameWidth / 2,\n      y: Config.GameHeight / 2,\n    });\n    backgroundActor.graphics.add(Graphics.Sprite.from(Resources.background));\n    this.add(backgroundActor);\n    backgroundActor.z = -4;\n  }\n\n  /**\n   * Begin the scene! Action!\n   */\n  onActivate() {\n    SoundManager.startBackgroundMusic();\n    this.player\n      .beginEnterStage()\n      .then(() => {\n        return this.director.playGreetingSequence();\n      })\n      .then(() => {\n        // start cue cards\n        this.director.kill();\n        this.cuecardmanager.start();\n        this.audienceMeter.start();\n      });\n  }\n\n  private collectSolidTiles(layer: ITiledMapLayer) {\n    if (\n      layer.name !== LAYER_IMPASSABLE ||\n      typeof layer.data == \"string\" ||\n      !layer.data\n    )\n      return;\n\n    for (let i = 0; i < layer.data.length; i++) {\n      if (layer.data[i] !== 0) {\n        this.stageTileMap.data[i].solid = true;\n      }\n    }\n  }\n\n  private collectStageTriggers(layer: ITiledMapLayer) {\n    if (\n      layer.name !== LAYER_TRIGGERS ||\n      typeof layer.data == \"string\" ||\n      !layer.objects\n    )\n      return;\n\n    for (const trigger of layer.objects) {\n      const triggerArgs: ActorArgs = {\n        anchor: vec(0, 0),\n        pos: vec(\n          this.stageTileMap.x + trigger.x,\n          this.stageTileMap.y + trigger.y\n        ),\n        width: trigger.width,\n        height: trigger.height,\n      };\n\n      switch (trigger.name) {\n        case OBJECT_TRIGGERS.StageLeftTrigger:\n          this.leftSpotlight = new CueCardTrigger(\n            this.player,\n            this.cuecardmanager,\n            StageTriggerLocation.StageLeft,\n            triggerArgs\n          );\n          this.add(this.leftSpotlight);\n          this.leftSpotlight.setZIndex(-2);\n          break;\n        case OBJECT_TRIGGERS.StageCenterTrigger:\n          this.centerSpotlight = new CueCardTrigger(\n            this.player,\n            this.cuecardmanager,\n            StageTriggerLocation.StageCenter,\n            triggerArgs\n          );\n          this.add(this.centerSpotlight);\n          this.centerSpotlight.setZIndex(-2);\n          break;\n        case OBJECT_TRIGGERS.StageRightTrigger:\n          this.rightSpotlight = new CueCardTrigger(\n            this.player,\n            this.cuecardmanager,\n            StageTriggerLocation.StageRight,\n            triggerArgs\n          );\n          this.add(this.rightSpotlight);\n          this.rightSpotlight.setZIndex(-2);\n          break;\n      }\n    }\n  }\n\n  private spawnItems() {\n    let costumePoints = this.getPoints(COSTUME_TYPE);\n    let propPoints = this.getPoints(PROP_TYPE);\n    let stageProps = Object.keys(StageProps);\n    // console.log(stageProps);\n    let costumes = Object.keys(Costumes);\n\n    for (let i = 0; i < stageProps.length; i++) {\n      let resourceName = stageProps[i];\n      let point = propPoints[i];\n      let sprite = Items.getIconSprite(resourceName);\n      let actor = new Item(\n        \"prop\",\n        <StageProps>resourceName,\n        sprite,\n        point.x,\n        point.y\n      );\n      this.add(actor);\n    }\n\n    for (let i = 0; i < costumes.length; i++) {\n      let resourceName = costumes[i];\n      let point = costumePoints[i];\n      let sprite = Items.getIconSprite(resourceName);\n      let actor = new Item(\n        \"costume\",\n        <Costumes>resourceName,\n        sprite,\n        point.x,\n        point.y\n      );\n      this.add(actor);\n    }\n  }\n\n  private getPoints(type: string): Vector[] {\n    let layer = Resources.map.data.layers.find((item) => {\n      return item.name == \"items\";\n    });\n    let points: Vector[] = [];\n    for (let i = 0; i < layer!.objects.length; i++) {\n      let obj = layer!.objects[i];\n      if (obj.type == type) {\n        points.push(new Vector(obj.x + 25, obj.y + 170));\n      }\n    }\n\n    return points;\n  }\n}\n","import {\n  Actor,\n  Engine,\n  Graphics,\n  Color,\n  Vector,\n  CollisionType,\n} from \"excalibur\";\nimport { Resources } from \"./resources\";\nimport { CueCard } from \"./cuecard\";\nimport { Costumes, StageProps } from \"./constants\";\nimport Items, { Item } from \"./items\";\nimport { stats } from \"./session\";\nimport { Player } from \"./player\";\nimport Config from \"./config\";\n\nexport class Inventory extends Actor {\n  private _costume?: Costumes;\n  private _prop?: StageProps;\n  private _engine: Engine;\n  private _propX?: number;\n  private _propY?: number;\n  private _costumeX?: number;\n  private _costumeY?: number;\n\n  constructor(engine: Engine, x: number, y: number) {\n    super(x, y, 200, 80);\n    this._engine = engine;\n    this._setUpLayers();\n  }\n\n  public update(engine: Engine, delta: number) {\n    super.update(engine, delta);\n\n    if (this._prop) {\n      let sprite = Items.getIconSprite(this._prop);\n      let layer = this.graphics.getLayer(\"prop\");\n      layer!.offset = new Vector(0, 0);\n      layer?.show(sprite);\n    }\n\n    if (this._costume) {\n      let sprite = Items.getIconSprite(this._costume);\n      let layer = this.graphics.getLayer(\"costume\");\n      let widthOffset = (this.width * 2) / 3 - 15;\n      layer!.offset = new Vector(widthOffset, 0);\n      layer?.show(sprite);\n    }\n  }\n\n  public addCostume(item: Costumes, spawnLocation: Vector) {\n    // drop the item if holding one\n    if (this._costume) {\n      let currentCostume = this._costume;\n      let sprite = Items.getIconSprite(currentCostume);\n      let actor = new Item(\n        \"costume\",\n        currentCostume,\n        sprite,\n        this._costumeX!,\n        this._costumeY!\n      );\n      this.scene.add(actor);\n    }\n    this._costume = item;\n    this._costumeX = spawnLocation.x;\n    this._costumeY = spawnLocation.y;\n  }\n\n  public addProp(item: StageProps, spawnLocation: Vector) {\n    // drop the item if holding one\n    if (this._prop) {\n      let currentProp = this._prop;\n      let sprite = Items.getIconSprite(this._prop);\n      let actor = new Item(\n        \"prop\",\n        currentProp,\n        sprite,\n        this._propX!,\n        this._propY!\n      );\n      this.scene.add(actor);\n    }\n\n    this._prop = item;\n    this._propX = spawnLocation.x;\n    this._propY = spawnLocation.y;\n  }\n\n  public getQueueCardScore(card: CueCard): number {\n    let score = Config.ScoreBaseIncrease;\n    let inventoryBonus = 0;\n    if (card.options.requiredProp == this._prop) {\n      inventoryBonus += Config.ScoreIncreasePerProp;\n    } else {\n      card.failed = true;\n      card.showFailedProp();\n    }\n    if (card.options.requiredCostume == this._costume) {\n      inventoryBonus += Config.ScoreIncreasePerProp;\n    } else {\n      card.failed = true;\n      card.showFailedCostume();\n    }\n    if (\n      card.options.requiredCostume == this._costume &&\n      card.options.requiredProp == this._prop\n    ) {\n      inventoryBonus *= Config.ScoreMultiplier;\n    }\n    if (\n      card.options.requiredProp != this._prop &&\n      card.options.requiredCostume != this._costume\n    ) {\n      inventoryBonus = -Config.ScorePunishment;\n    }\n    return score + inventoryBonus;\n  }\n\n  private _setUpLayers() {\n    const background = this.graphics.createLayer({\n      name: \"background\",\n      order: -1,\n    });\n\n    this.graphics.createLayer({\n      name: \"costume\",\n      order: 1,\n    });\n\n    this.graphics.createLayer({\n      name: \"prop\",\n      order: 2,\n    });\n    const backgroundRect = new Graphics.Rect({\n      width: this.width,\n      height: this.height,\n      color: Color.ExcaliburBlue,\n    });\n    background.offset = this.vel;\n    backgroundRect.opacity = 0.33;\n    background.show(backgroundRect);\n  }\n}\n","import { Actor, ActorArgs, Graphics, vec, Color, ExitTriggerEvent } from \"excalibur\";\nimport { Resources } from \"./resources\";\n\nexport class Button extends Actor {\n    constructor(private text: string, options: ActorArgs) {\n        super({ ...options });\n    }\n\n    onInitialize() {\n        //sprite.destSize = { width: this.width, height: this.height };\n        const group = new Graphics.GraphicsGroup({\n            members: [\n                {\n                    graphic: Graphics.Sprite.from(Resources.playAgainButton),\n                    pos: vec(-this.width/4,0),\n                },\n\n            ],\n        });\n        group.width = this.width;\n        group.height = this.height;\n        this.graphics.add(group);\n    }\n}\n","import {\n  Actor,\n  CollisionType,\n  Color,\n  EasingFunctions,\n  Engine,\n  Graphics,\n  vec,\n  ExitTriggerEvent,\n} from \"excalibur\";\nimport { DialogCard } from \"./dialogCard\";\n\nimport Config from \"./config\";\nimport config from \"./config\";\nimport { Button } from \"./button\";\nimport { newgame, stats } from \"./session\";\nimport { SoundManager } from \"./soundManager\";\nimport { Resources } from \"./resources\";\n\nexport class GameOver extends Actor {\n  private card!: DialogCard;\n  private backShadow!: Graphics.Rect;\n  private backShadowLayer!: Graphics.GraphicsLayer;\n  private button!: Button;\n  private engine!: Engine;\n  constructor() {\n    super(Config.GameWidth / 2, Config.GameHeight * 2, 600, 600);\n  }\n\n  onInitialize(engine: Engine) {\n    this.engine = engine;\n    this.backShadowLayer = this.graphics.createLayer({\n      name: \"backshadow\",\n      order: 1,\n    });\n    this.backShadow = new Graphics.Rect({\n      width: Config.GameWidth + 500,\n      height: Config.GameHeight + 500,\n      color: Color.fromRGB(51, 51, 51, 0.5),\n    });\n  }\n\n  public updateEndScreen() {\n    const cardPos = vec(this.pos.x, this.pos.y);\n    let text = \"The audience was not impressed\";\n    if (stats().numLinesDelivered >= Config.NumCueCardsToWin) {\n      let descriptor = \"\";\n      Resources.applause.play();\n      const score = stats().currentAudienceScore;\n      if (score >= Config.GreatScoreCutoff) {\n        descriptor = \"great \";\n      }\n      if (score >= Config.RoaringScoreCutoff) {\n        descriptor = \"roaring \";\n      }\n      text = `The show was a ${descriptor}success!`;\n    } else {\n      Resources.boo.play();\n    }\n    const costumesChanged = `You changed costumes ${\n      stats().numCostumeChanges\n    } times.`;\n    const propsUsed = `You used ${stats().numPropsUsed} props.`;\n    this.card = new DialogCard([text, costumesChanged, propsUsed, \"\"], {\n      pos: cardPos,\n      topPadding: 30,\n    });\n    this.scene.add(this.card);\n    this.card.z = 100;\n\n    this.z = 100;\n\n    this.button = new Button(\"Play Again?\", {\n      pos: cardPos,\n      width: 200,\n      height: 100,\n    });\n    this.button.on(\"pointerup\", () => {\n      if (this.button.isKilled()) return;\n      // console.log(`reset button alive?: ${this.button.isKilled()}`);\n      for (let actor of this.scene.actors) {\n        actor.kill();\n      }\n      this.engine.removeScene(this.scene);\n      this.button.pos.add(vec(10000, 10000));\n      newgame(this.engine);\n    });\n    this.scene.add(this.button);\n    this.button.z = 100;\n  }\n\n  show() {\n    this.backShadowLayer.show(this.backShadow);\n    this.pos = vec(0, 0);\n    this.card.actions.easeTo(\n      Config.GameWidth / 2,\n      Config.GameHeight / 2,\n      500,\n      EasingFunctions.EaseInOutCubic\n    );\n    this.button.actions.easeTo(\n      Config.GameWidth / 2,\n      Config.GameHeight / 2 + 125,\n      500,\n      EasingFunctions.EaseInOutCubic\n    );\n  }\n\n  hide() {\n    this.backShadowLayer.hide();\n    this.card.actions.easeTo(\n      Config.GameWidth / 2,\n      Config.GameHeight * 2,\n      500,\n      EasingFunctions.EaseInOutCubic\n    );\n    this.button.actions.easeTo(\n      Config.GameWidth / 2,\n      Config.GameHeight * 2,\n      500,\n      EasingFunctions.EaseInOutCubic\n    );\n  }\n}\n","import { Engine, PostUpdateEvent } from \"excalibur\";\nimport Config from \"./config\";\nimport { Stats } from \"./stats\";\nimport { Theater } from \"./theater-scene\";\nimport { Inventory } from \"./inventory\";\nimport { AudienceMeter } from \"./audienceMeter\";\nimport { GameOver } from \"./gameover\";\n\nlet gameStats: Stats;\n\n// call this function to access and modify the game stats\nexport function stats() {\n  return gameStats;\n}\n\nexport function newgame(game: Engine) {\n  // clear stats\n  let inventory = new Inventory(\n    game,\n    Config.GameWidth / 2,\n    Config.GameHeight - 40\n  );\n  gameStats = new Stats(inventory);\n  const theater = new Theater(game);\n  const gameOver = new GameOver();\n  (window as any).gameOver = gameOver;\n  theater.add(inventory);\n  theater.add(gameOver);\n  game.addScene(\"main\", theater);\n  game.goToScene(\"main\");\n  let triggered = false;\n  game.on(\"postupdate\", function checkGameOver(event: PostUpdateEvent) {\n    if (triggered) return;\n    if (gameStats.isGameOver) {\n      gameOver.updateEndScreen();\n      gameOver.show();\n      gameStats.publishStats().then(() => {\n        console.log(\"Stats collected ❤\");\n      });\n      triggered = true;\n    }\n  });\n  // begin main scene\n}\n\nexport function gameover(game: Engine) {\n  game.stop();\n  // TODO publish stats\n  // TODO bring up player score scene or popup\n}\n","import { Engine, Loader, Color } from \"excalibur\";\nimport { Resources } from \"./resources\";\nimport { newgame } from \"./session\";\nimport Config from \"./config\";\nimport { SoundManager } from \"./soundManager\";\nimport { loadPreferences } from \"./preferences\";\n\nEngine._useWebGL = true;\nconst game = new Engine({\n  canvasElementId: \"game\",\n  height: Config.GameHeight,\n  width: Config.GameWidth,\n  backgroundColor: Color.fromHex(\"#333333\"),\n});\nconst loader = new Loader();\nloader.backgroundColor = \"#333333\";\n\nfor (let r in Resources) {\n  loader.addResource((Resources as any)[r]);\n}\n\nloadPreferences();\nSoundManager.init();\n\ngame.start(loader).then(() => {\n  newgame(game);\n});\n\n(window as any).game = game;\n"]}